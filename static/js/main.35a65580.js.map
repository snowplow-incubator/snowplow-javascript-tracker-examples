{"version":3,"file":"static/js/main.35a65580.js","mappings":"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","sources":["../node_modules/charenc/charenc.js","../node_modules/crypt/crypt.js","../node_modules/object-assign/index.js","../node_modules/react-dom/cjs/react-dom.production.min.js","../node_modules/react-dom/index.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/cjs/react.production.min.js","../node_modules/react/index.js","../node_modules/react/jsx-runtime.js","../node_modules/scheduler/cjs/scheduler.production.min.js","../node_modules/scheduler/index.js","../node_modules/sha1/sha1.js","../node_modules/uuid/index.js","../node_modules/uuid/lib/bytesToUuid.js","../node_modules/uuid/lib/rng-browser.js","../node_modules/uuid/v1.js","../node_modules/uuid/v4.js","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/load script","../webpack/runtime/make namespace object","../webpack/runtime/publicPath","../webpack/runtime/jsonp chunk loading","../node_modules/@remix-run/router/history.ts","../node_modules/@remix-run/router/utils.ts","../node_modules/@remix-run/router/router.ts","../node_modules/react-router/lib/context.ts","../node_modules/react-router/lib/hooks.tsx","../node_modules/react-router/lib/components.tsx","../node_modules/react-router-dom/dom.ts","../node_modules/react-router-dom/index.tsx","../node_modules/tslib/tslib.es6.mjs","../node_modules/@snowplow/tracker-core/node_modules/uuid/dist/esm-browser/native.js","../node_modules/@snowplow/tracker-core/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/@snowplow/tracker-core/node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/@snowplow/tracker-core/node_modules/uuid/dist/esm-browser/v4.js","../node_modules/@snowplow/tracker-core/src/base64.ts","../node_modules/@snowplow/tracker-core/src/payload.ts","../node_modules/@snowplow/tracker-core/src/logger.ts","../node_modules/@snowplow/tracker-core/src/contexts.ts","../node_modules/@snowplow/tracker-core/src/core.ts","../node_modules/@snowplow/tracker-core/src/event_store.ts","../node_modules/@snowplow/tracker-core/src/schemata.ts","../node_modules/@snowplow/tracker-core/src/emitter/emitter_request.ts","../node_modules/@snowplow/tracker-core/src/emitter/emitter_event.ts","../node_modules/@snowplow/tracker-core/src/emitter/index.ts","../node_modules/@snowplow/tracker-core/src/event_store_payload.ts","../node_modules/@snowplow/tracker-core/src/index.ts","../node_modules/@snowplow/browser-tracker-core/node_modules/uuid/dist/esm-browser/native.js","../node_modules/@snowplow/browser-tracker-core/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/@snowplow/browser-tracker-core/node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/@snowplow/browser-tracker-core/node_modules/uuid/dist/esm-browser/v4.js","../node_modules/@snowplow/browser-tracker-core/src/helpers/storage.ts","../node_modules/@snowplow/browser-tracker-core/src/helpers/cross_domain.ts","../node_modules/@snowplow/browser-tracker-core/src/helpers/index.ts","../node_modules/@snowplow/browser-tracker-core/src/tracker/out_queue.ts","../node_modules/@snowplow/browser-tracker-core/src/tracker/local_storage_event_store.ts","../node_modules/@snowplow/browser-tracker-core/src/proxies.ts","../node_modules/@snowplow/browser-tracker-core/src/tracker/id_cookie.ts","../node_modules/@snowplow/browser-tracker-core/src/tracker/schemata.ts","../node_modules/@snowplow/browser-tracker-core/src/helpers/browser_props.ts","../node_modules/@snowplow/browser-tracker-core/src/tracker/cookie_storage.ts","../node_modules/@snowplow/browser-tracker-core/src/tracker/index.ts","../node_modules/@snowplow/browser-tracker-core/src/snowplow.ts","../node_modules/@snowplow/browser-tracker-core/src/state.ts","../node_modules/@snowplow/browser-tracker/src/api.ts","../node_modules/@snowplow/browser-tracker/src/index.ts","../node_modules/@snowplow/browser-plugin-form-tracking/src/helpers.ts","../node_modules/@snowplow/browser-plugin-form-tracking/src/index.ts","../node_modules/@snowplow/browser-plugin-media/src/types.ts","../node_modules/@snowplow/browser-plugin-media/src/schemata.ts","../node_modules/@snowplow/browser-plugin-media/src/core.ts","../node_modules/@snowplow/browser-plugin-media/src/adTracking.ts","../node_modules/@snowplow/browser-plugin-media/src/repeatedEventFilter.ts","../node_modules/@snowplow/browser-plugin-media/src/mediaTracking.ts","../node_modules/@snowplow/browser-plugin-media/src/pingInterval.ts","../node_modules/@snowplow/browser-plugin-media/src/sessionStats.ts","../node_modules/@snowplow/browser-plugin-media/src/sessionTracking.ts","../node_modules/@snowplow/browser-plugin-media/src/api.ts","../node_modules/@snowplow/browser-plugin-youtube-tracking/node_modules/uuid/dist/esm-browser/native.js","../node_modules/@snowplow/browser-plugin-youtube-tracking/node_modules/uuid/dist/esm-browser/rng.js","../node_modules/@snowplow/browser-plugin-youtube-tracking/node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/@snowplow/browser-plugin-youtube-tracking/node_modules/uuid/dist/esm-browser/v4.js","../node_modules/@snowplow/browser-plugin-youtube-tracking/src/entities.ts","../node_modules/@snowplow/browser-plugin-youtube-tracking/src/helperFunctions.ts","../node_modules/@snowplow/browser-plugin-youtube-tracking/src/options.ts","../node_modules/@snowplow/browser-plugin-youtube-tracking/src/initialization.ts","../node_modules/@snowplow/browser-plugin-vimeo-tracking/node_modules/@vimeo/player/dist/player.es.js","../node_modules/@snowplow/browser-plugin-vimeo-tracking/src/events.ts","../node_modules/@snowplow/browser-plugin-vimeo-tracking/src/schema.ts","../node_modules/@snowplow/browser-plugin-vimeo-tracking/src/utils.ts","../node_modules/@snowplow/browser-plugin-vimeo-tracking/src/types.ts","../node_modules/@snowplow/browser-plugin-vimeo-tracking/src/mediaPluginBinding.ts","../node_modules/@snowplow/browser-plugin-vimeo-tracking/src/initialization.ts","tracker.js","plugins/captureTrackedEventsPlugin.js","createTrackerWrapper.jsx","helpers.js","App.js","reportWebVitals.js","routes/snowplow.jsx","routes/form.jsx","routes/iframeForm.jsx","routes/youtube.jsx","routes/youtubePlayer.jsx","components/adHelpers.js","components/video.jsx","constants.js","components/mediaEvents.jsx","routes/media.jsx","routes/vimeoIframe.jsx","../node_modules/@vimeo/player/dist/player.es.js","routes/vimeoPlayer.jsx","index.js"],"sourcesContent":["var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n","(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/** @license React v17.0.2\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),m=require(\"object-assign\"),r=require(\"scheduler\");function y(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(a,b){ea(a,b);ea(a+\"Capture\",b)}\nfunction ea(a,b){ca[a]=b;for(a=0;a<b.length;a++)ba.add(b[a])}\nvar fa=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ha=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,ia=Object.prototype.hasOwnProperty,\nja={},ka={};function la(a){if(ia.call(ka,a))return!0;if(ia.call(ja,a))return!1;if(ha.test(a))return ka[a]=!0;ja[a]=!0;return!1}function ma(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction na(a,b,c,d){if(null===b||\"undefined\"===typeof b||ma(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function B(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var D={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){D[a]=new B(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];D[b]=new B(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){D[a]=new B(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){D[a]=new B(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){D[a]=new B(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){D[a]=new B(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1,!1)});var oa=/[\\-:]([a-z])/g;function pa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(oa,\npa);D[b]=new B(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1,!1)});\nD.xlinkHref=new B(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction qa(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(na(b,c,e,d)&&(c=null),d||null===e?la(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nvar ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;\nif(\"function\"===typeof Symbol&&Symbol.for){var E=Symbol.for;sa=E(\"react.element\");ta=E(\"react.portal\");ua=E(\"react.fragment\");wa=E(\"react.strict_mode\");xa=E(\"react.profiler\");ya=E(\"react.provider\");za=E(\"react.context\");Aa=E(\"react.forward_ref\");Ba=E(\"react.suspense\");Ca=E(\"react.suspense_list\");Da=E(\"react.memo\");Ea=E(\"react.lazy\");Fa=E(\"react.block\");E(\"react.scope\");Ga=E(\"react.opaque.id\");Ha=E(\"react.debug_trace_mode\");Ia=E(\"react.offscreen\");Ja=E(\"react.legacy_hidden\")}\nvar Ka=\"function\"===typeof Symbol&&Symbol.iterator;function La(a){if(null===a||\"object\"!==typeof a)return null;a=Ka&&a[Ka]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var Ma;function Na(a){if(void 0===Ma)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);Ma=b&&b[1]||\"\"}return\"\\n\"+Ma+a}var Oa=!1;\nfunction Pa(a,b){if(!a||Oa)return\"\";Oa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(k){var d=k}Reflect.construct(a,[],b)}else{try{b.call()}catch(k){d=k}a.call(b.prototype)}else{try{throw Error();}catch(k){d=k}a()}}catch(k){if(k&&d&&\"string\"===typeof k.stack){for(var e=k.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h])return\"\\n\"+e[g].replace(\" at new \",\" at \");while(1<=g&&0<=h)}break}}}finally{Oa=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Na(a):\"\"}\nfunction Qa(a){switch(a.tag){case 5:return Na(a.type);case 16:return Na(\"Lazy\");case 13:return Na(\"Suspense\");case 19:return Na(\"SuspenseList\");case 0:case 2:case 15:return a=Pa(a.type,!1),a;case 11:return a=Pa(a.type.render,!1),a;case 22:return a=Pa(a.type._render,!1),a;case 1:return a=Pa(a.type,!0),a;default:return\"\"}}\nfunction Ra(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ua:return\"Fragment\";case ta:return\"Portal\";case xa:return\"Profiler\";case wa:return\"StrictMode\";case Ba:return\"Suspense\";case Ca:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case za:return(a.displayName||\"Context\")+\".Consumer\";case ya:return(a._context.displayName||\"Context\")+\".Provider\";case Aa:var b=a.render;b=b.displayName||b.name||\"\";\nreturn a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\"ForwardRef\");case Da:return Ra(a.type);case Fa:return Ra(a._render);case Ea:b=a._payload;a=a._init;try{return Ra(a(b))}catch(c){}}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}function Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return m({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function $a(a,b){b=b.checked;null!=b&&qa(a,\"checked\",b,!1)}\nfunction ab(a,b){$a(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?bb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&bb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction cb(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction bb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}function db(a){var b=\"\";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function eb(a,b){a=m({children:void 0},b);if(b=db(b.children))a.children=b;return a}\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(y(91));return m({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(y(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(y(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}var kb={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction lb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function mb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?lb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar nb,ob=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==kb.svg||\"innerHTML\"in a)a.innerHTML=b;else{nb=nb||document.createElement(\"div\");nb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=nb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction pb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,\nfloodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(qb).forEach(function(a){rb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);qb[b]=qb[a]})});function sb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||qb.hasOwnProperty(a)&&qb[a]?(\"\"+b).trim():b+\"px\"}\nfunction tb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=sb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var ub=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction vb(a,b){if(b){if(ub[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(y(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(y(60));if(!(\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML))throw Error(y(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(y(62));}}\nfunction wb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(y(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(a,b,c,d,e){return a(b,c,d,e)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){if(null!==zb||null!==Ab)Ib(),Fb()}\nfunction Nb(a,b,c){if(Lb)return a(b,c);Lb=!0;try{return Jb(a,b,c)}finally{Lb=!1,Mb()}}\nfunction Ob(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(y(231,b,typeof c));return c}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,\"passive\",{get:function(){Pb=!0}});window.addEventListener(\"test\",Qb,Qb);window.removeEventListener(\"test\",Qb,Qb)}catch(a){Pb=!1}function Rb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(n){this.onError(n)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(a){Sb=!0;Tb=a}};function Xb(a,b,c,d,e,f,g,h,k){Sb=!1;Tb=null;Rb.apply(Wb,arguments)}\nfunction Yb(a,b,c,d,e,f,g,h,k){Xb.apply(this,arguments);if(Sb){if(Sb){var l=Tb;Sb=!1;Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=l)}}function Zb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function $b(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function ac(a){if(Zb(a)!==a)throw Error(y(188));}\nfunction bc(a){var b=a.alternate;if(!b){b=Zb(a);if(null===b)throw Error(y(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return ac(e),a;if(f===d)return ac(e),b;f=f.sibling}throw Error(y(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(y(189));}}if(c.alternate!==d)throw Error(y(190));}if(3!==c.tag)throw Error(y(188));return c.stateNode.current===c?a:b}function cc(a){a=bc(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nfunction dc(a,b){for(var c=a.alternate;null!==b;){if(b===a||b===c)return!0;b=b.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction rc(a,b,c,d,e){return{blockedOn:a,domEventName:b,eventSystemFlags:c|16,nativeEvent:e,targetContainers:[d]}}function sc(a,b){switch(a){case \"focusin\":case \"focusout\":kc=null;break;case \"dragenter\":case \"dragleave\":lc=null;break;case \"mouseover\":case \"mouseout\":mc=null;break;case \"pointerover\":case \"pointerout\":nc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":oc.delete(b.pointerId)}}\nfunction tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=rc(b,c,d,e,f),null!==b&&(b=Cb(b),null!==b&&fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction uc(a,b,c,d,e){switch(b){case \"focusin\":return kc=tc(kc,a,b,c,d,e),!0;case \"dragenter\":return lc=tc(lc,a,b,c,d,e),!0;case \"mouseover\":return mc=tc(mc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;nc.set(f,tc(nc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,oc.set(f,tc(oc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction vc(a){var b=wc(a.target);if(null!==b){var c=Zb(b);if(null!==c)if(b=c.tag,13===b){if(b=$b(c),null!==b){a.blockedOn=b;hc(a.lanePriority,function(){r.unstable_runWithPriority(a.priority,function(){gc(c)})});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c)return b=Cb(c),null!==b&&fc(b),a.blockedOn=c,!1;b.shift()}return!0}function zc(a,b,c){xc(a)&&c.delete(b)}\nfunction Ac(){for(ic=!1;0<jc.length;){var a=jc[0];if(null!==a.blockedOn){a=Cb(a.blockedOn);null!==a&&ec(a);break}for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c){a.blockedOn=c;break}b.shift()}null===a.blockedOn&&jc.shift()}null!==kc&&xc(kc)&&(kc=null);null!==lc&&xc(lc)&&(lc=null);null!==mc&&xc(mc)&&(mc=null);nc.forEach(zc);oc.forEach(zc)}\nfunction Bc(a,b){a.blockedOn===b&&(a.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}\nfunction Cc(a){function b(b){return Bc(b,a)}if(0<jc.length){Bc(jc[0],a);for(var c=1;c<jc.length;c++){var d=jc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==kc&&Bc(kc,a);null!==lc&&Bc(lc,a);null!==mc&&Bc(mc,a);nc.forEach(b);oc.forEach(b);for(c=0;c<pc.length;c++)d=pc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<pc.length&&(c=pc[0],null===c.blockedOn);)vc(c),null===c.blockedOn&&pc.shift()}\nfunction Dc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var Ec={animationend:Dc(\"Animation\",\"AnimationEnd\"),animationiteration:Dc(\"Animation\",\"AnimationIteration\"),animationstart:Dc(\"Animation\",\"AnimationStart\"),transitionend:Dc(\"Transition\",\"TransitionEnd\")},Fc={},Gc={};\nfa&&(Gc=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),\"TransitionEvent\"in window||delete Ec.transitionend.transition);function Hc(a){if(Fc[a])return Fc[a];if(!Ec[a])return a;var b=Ec[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Gc)return Fc[a]=b[c];return a}\nvar Ic=Hc(\"animationend\"),Jc=Hc(\"animationiteration\"),Kc=Hc(\"animationstart\"),Lc=Hc(\"transitionend\"),Mc=new Map,Nc=new Map,Oc=[\"abort\",\"abort\",Ic,\"animationEnd\",Jc,\"animationIteration\",Kc,\"animationStart\",\"canplay\",\"canPlay\",\"canplaythrough\",\"canPlayThrough\",\"durationchange\",\"durationChange\",\"emptied\",\"emptied\",\"encrypted\",\"encrypted\",\"ended\",\"ended\",\"error\",\"error\",\"gotpointercapture\",\"gotPointerCapture\",\"load\",\"load\",\"loadeddata\",\"loadedData\",\"loadedmetadata\",\"loadedMetadata\",\"loadstart\",\"loadStart\",\n\"lostpointercapture\",\"lostPointerCapture\",\"playing\",\"playing\",\"progress\",\"progress\",\"seeking\",\"seeking\",\"stalled\",\"stalled\",\"suspend\",\"suspend\",\"timeupdate\",\"timeUpdate\",Lc,\"transitionEnd\",\"waiting\",\"waiting\"];function Pc(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1];e=\"on\"+(e[0].toUpperCase()+e.slice(1));Nc.set(d,b);Mc.set(d,e);da(e,[d])}}var Qc=r.unstable_now;Qc();var F=8;\nfunction Rc(a){if(0!==(1&a))return F=15,1;if(0!==(2&a))return F=14,2;if(0!==(4&a))return F=13,4;var b=24&a;if(0!==b)return F=12,b;if(0!==(a&32))return F=11,32;b=192&a;if(0!==b)return F=10,b;if(0!==(a&256))return F=9,256;b=3584&a;if(0!==b)return F=8,b;if(0!==(a&4096))return F=7,4096;b=4186112&a;if(0!==b)return F=6,b;b=62914560&a;if(0!==b)return F=5,b;if(a&67108864)return F=4,67108864;if(0!==(a&134217728))return F=3,134217728;b=805306368&a;if(0!==b)return F=2,b;if(0!==(1073741824&a))return F=1,1073741824;\nF=8;return a}function Sc(a){switch(a){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(a){switch(a){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,a));}}\nfunction Uc(a,b){var c=a.pendingLanes;if(0===c)return F=0;var d=0,e=0,f=a.expiredLanes,g=a.suspendedLanes,h=a.pingedLanes;if(0!==f)d=f,e=F=15;else if(f=c&134217727,0!==f){var k=f&~g;0!==k?(d=Rc(k),e=F):(h&=f,0!==h&&(d=Rc(h),e=F))}else f=c&~g,0!==f?(d=Rc(f),e=F):0!==h&&(d=Rc(h),e=F);if(0===d)return 0;d=31-Vc(d);d=c&((0>d?0:1<<d)<<1)-1;if(0!==b&&b!==d&&0===(b&g)){Rc(b);if(e<=F)return b;F=e}b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-Vc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction Wc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function Xc(a,b){switch(a){case 15:return 1;case 14:return 2;case 12:return a=Yc(24&~b),0===a?Xc(10,b):a;case 10:return a=Yc(192&~b),0===a?Xc(8,b):a;case 8:return a=Yc(3584&~b),0===a&&(a=Yc(4186112&~b),0===a&&(a=512)),a;case 2:return b=Yc(805306368&~b),0===b&&(b=268435456),b}throw Error(y(358,a));}function Yc(a){return a&-a}function Zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction $c(a,b,c){a.pendingLanes|=b;var d=b-1;a.suspendedLanes&=d;a.pingedLanes&=d;a=a.eventTimes;b=31-Vc(b);a[b]=c}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(a){return 0===a?32:31-(bd(a)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(a,b,c,d){Kb||Ib();var e=hd,f=Kb;Kb=!0;try{Hb(e,a,b,c,d)}finally{(Kb=f)||Mb()}}function id(a,b,c,d){ed(dd,hd.bind(null,a,b,c,d))}\nfunction hd(a,b,c,d){if(fd){var e;if((e=0===(b&4))&&0<jc.length&&-1<qc.indexOf(a))a=rc(null,a,b,c,d),jc.push(a);else{var f=yc(a,b,c,d);if(null===f)e&&sc(a,d);else{if(e){if(-1<qc.indexOf(a)){a=rc(f,a,b,c,d);jc.push(a);return}if(uc(f,a,b,c,d))return;sc(a,d)}jd(a,b,d,null,c)}}}}\nfunction yc(a,b,c,d){var e=xb(d);e=wc(e);if(null!==e){var f=Zb(e);if(null===f)e=null;else{var g=f.tag;if(13===g){e=$b(f);if(null!==e)return e;e=null}else if(3===g){if(f.stateNode.hydrate)return 3===f.tag?f.stateNode.containerInfo:null;e=null}else f!==e&&(e=null)}}jd(a,b,d,e,c);return null}var kd=null,ld=null,md=null;\nfunction nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}function od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}m(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=m({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=m({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&\"CompositionEvent\"in window,be=null;fa&&\"documentMode\"in document&&(be=document.documentMode);var ce=fa&&\"TextEvent\"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(fa){var xe;if(fa){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));a=re;if(Kb)a(b);else{Kb=!0;try{Gb(a,b)}finally{Kb=!1,Mb()}}}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;\nfunction Je(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!Ie.call(b,c[d])||!He(a[c[d]],b[c[d]]))return!1;return!0}function Ke(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Le(a,b){var c=Ke(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Ke(c)}}function Me(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Me(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Ne(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Oe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nvar Pe=fa&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Oe(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Je(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nPc(\"cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange\".split(\" \"),\n0);Pc(\"drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel\".split(\" \"),1);Pc(Oc,2);for(var Ve=\"change selectionchange textInput compositionstart compositionend compositionupdate\".split(\" \"),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);\nea(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ea(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);ea(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);da(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));da(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));da(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);da(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));\nda(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));da(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var Xe=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),Ye=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(Xe));\nfunction Ze(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Yb(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}}}if(Ub)throw a=Vb,Ub=!1,Vb=null,a;}\nfunction G(a,b){var c=$e(b),d=a+\"__bubble\";c.has(d)||(af(b,a,2,!1),c.add(d))}var bf=\"_reactListening\"+Math.random().toString(36).slice(2);function cf(a){a[bf]||(a[bf]=!0,ba.forEach(function(b){Ye.has(b)||df(b,!1,a,null);df(b,!0,a,null)}))}\nfunction df(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=c;\"selectionchange\"===a&&9!==c.nodeType&&(f=c.ownerDocument);if(null!==d&&!b&&Ye.has(a)){if(\"scroll\"!==a)return;e|=2;f=d}var g=$e(f),h=a+\"__\"+(b?\"capture\":\"bubble\");g.has(h)||(b&&(e|=4),af(f,a,e,b),g.add(h))}\nfunction af(a,b,c,d){var e=Nc.get(b);switch(void 0===e?2:e){case 0:e=gd;break;case 1:e=id;break;default:e=hd}c=e.bind(null,b,c,a);e=void 0;!Pb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction jd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Nb(function(){var d=f,e=xb(c),g=[];\na:{var h=Mc.get(a);if(void 0!==h){var k=td,x=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":x=\"focus\";k=Fd;break;case \"focusout\":x=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case Ic:case Jc:case Kc:k=Hd;break;case Lc:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var w=0!==(b&4),z=!w&&\"scroll\"===a,u=w?null!==h?h+\"Capture\":null:h;w=[];for(var t=d,q;null!==\nt;){q=t;var v=q.stateNode;5===q.tag&&null!==v&&(q=v,null!==u&&(v=Ob(t,u),null!=v&&w.push(ef(t,v,q))));if(z)break;t=t.return}0<w.length&&(h=new k(h,x,null,c,e),g.push({event:h,listeners:w}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&0===(b&16)&&(x=c.relatedTarget||c.fromElement)&&(wc(x)||x[ff]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(x=c.relatedTarget||c.toElement,k=d,x=x?wc(x):null,null!==\nx&&(z=Zb(x),x!==z||5!==x.tag&&6!==x.tag))x=null}else k=null,x=d;if(k!==x){w=Bd;v=\"onMouseLeave\";u=\"onMouseEnter\";t=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)w=Td,v=\"onPointerLeave\",u=\"onPointerEnter\",t=\"pointer\";z=null==k?h:ue(k);q=null==x?h:ue(x);h=new w(v,t+\"leave\",k,c,e);h.target=z;h.relatedTarget=q;v=null;wc(e)===d&&(w=new w(u,t+\"enter\",x,c,e),w.target=q,w.relatedTarget=z,v=w);z=v;if(k&&x)b:{w=k;u=x;t=0;for(q=w;q;q=gf(q))t++;q=0;for(v=u;v;v=gf(v))q++;for(;0<t-q;)w=gf(w),t--;for(;0<q-t;)u=\ngf(u),q--;for(;t--;){if(w===u||null!==u&&w===u.alternate)break b;w=gf(w);u=gf(u)}w=null}else w=null;null!==k&&hf(g,h,k,w,!1);null!==x&&null!==z&&hf(g,z,x,w,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var J=ve;else if(me(h))if(we)J=Fe;else{J=De;var K=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(J=Ee);if(J&&(J=J(a,d))){ne(g,J,c,e);break a}K&&K(a,h,d);\"focusout\"===a&&(K=h._wrapperState)&&\nK.controlled&&\"number\"===h.type&&bb(h,\"number\",h.value)}K=d?ue(d):window;switch(a){case \"focusin\":if(me(K)||\"true\"===K.contentEditable)Qe=K,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var Q;if(ae)b:{switch(a){case \"compositionstart\":var L=\"onCompositionStart\";break b;case \"compositionend\":L=\"onCompositionEnd\";break b;\ncase \"compositionupdate\":L=\"onCompositionUpdate\";break b}L=void 0}else ie?ge(a,c)&&(L=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(L=\"onCompositionStart\");L&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==L?\"onCompositionEnd\"===L&&ie&&(Q=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),K=oe(d,L),0<K.length&&(L=new Ld(L,a,null,c,e),g.push({event:L,listeners:K}),Q?L.data=Q:(Q=he(c),null!==Q&&(L.data=Q))));if(Q=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),0<d.length&&(e=new Ld(\"onBeforeInput\",\n\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=Q)}se(g,b)})}function ef(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Ob(a,c),null!=f&&d.unshift(ef(a,f,e)),f=Ob(a,b),null!=f&&d.push(ef(a,f,e)));a=a.return}return d}function gf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction hf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Ob(c,f),null!=k&&g.unshift(ef(c,k,h))):e||(k=Ob(c,f),null!=k&&g.push(ef(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}function jf(){}var kf=null,lf=null;function mf(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}\nfunction nf(a,b){return\"textarea\"===a||\"option\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var of=\"function\"===typeof setTimeout?setTimeout:void 0,pf=\"function\"===typeof clearTimeout?clearTimeout:void 0;function qf(a){1===a.nodeType?a.textContent=\"\":9===a.nodeType&&(a=a.body,null!=a&&(a.textContent=\"\"))}\nfunction rf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function sf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var tf=0;function uf(a){return{$$typeof:Ga,toString:a,valueOf:a}}var vf=Math.random().toString(36).slice(2),wf=\"__reactFiber$\"+vf,xf=\"__reactProps$\"+vf,ff=\"__reactContainer$\"+vf,yf=\"__reactEvents$\"+vf;\nfunction wc(a){var b=a[wf];if(b)return b;for(var c=a.parentNode;c;){if(b=c[ff]||c[wf]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=sf(a);null!==a;){if(c=a[wf])return c;a=sf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[wf]||a[ff];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(y(33));}function Db(a){return a[xf]||null}\nfunction $e(a){var b=a[yf];void 0===b&&(b=a[yf]=new Set);return b}var zf=[],Af=-1;function Bf(a){return{current:a}}function H(a){0>Af||(a.current=zf[Af],zf[Af]=null,Af--)}function I(a,b){Af++;zf[Af]=a.current;a.current=b}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;\nfunction Ef(a,b){var c=a.type.contextTypes;if(!c)return Cf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function Ff(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Gf(){H(N);H(M)}function Hf(a,b,c){if(M.current!==Cf)throw Error(y(168));I(M,b);I(N,c)}\nfunction If(a,b,c){var d=a.stateNode;a=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(y(108,Ra(b)||\"Unknown\",e));return m({},c,d)}function Jf(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Cf;Df=M.current;I(M,a);I(N,N.current);return!0}function Kf(a,b,c){var d=a.stateNode;if(!d)throw Error(y(169));c?(a=If(a,b,Df),d.__reactInternalMemoizedMergedChildContext=a,H(N),H(M),I(M,a)):H(N);I(N,c)}\nvar Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=void 0!==Rf?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1E4>dg?Sf:function(){return Sf()-dg};\nfunction eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332));}}function fg(a){switch(a){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332));}}function gg(a,b){a=fg(a);return Nf(a,b)}function hg(a,b,c){a=fg(a);return Of(a,b,c)}function ig(){if(null!==bg){var a=bg;bg=null;Pf(a)}jg()}\nfunction jg(){if(!cg&&null!==ag){cg=!0;var a=0;try{var b=ag;gg(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});ag=null}catch(c){throw null!==ag&&(ag=ag.slice(a+1)),Of(Uf,ig),c;}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(a,b){if(a&&a.defaultProps){b=m({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}\nfunction rg(a){var b=mg.current;H(mg);a.type._context._currentValue=b}function sg(a,b){for(;null!==a;){var c=a.alternate;if((a.childLanes&b)===b)if(null===c||(c.childLanes&b)===b)break;else c.childLanes|=b;else a.childLanes|=b,null!==c&&(c.childLanes|=b);a=a.return}}function tg(a,b){ng=a;pg=og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(ug=!0),a.firstContext=null)}\nfunction vg(a,b){if(pg!==a&&!1!==b&&0!==b){if(\"number\"!==typeof b||1073741823===b)pg=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===og){if(null===ng)throw Error(y(308));og=b;ng.dependencies={lanes:0,firstContext:b,responders:null}}else og=og.next=b}return a._currentValue}var wg=!1;function xg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}\nfunction yg(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function zg(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}function Ag(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}\nfunction Bg(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction Cg(a,b,c,d){var e=a.updateQueue;wg=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var n=a.alternate;if(null!==n){n=n.updateQueue;var A=n.lastBaseUpdate;A!==g&&(null===A?n.firstBaseUpdate=l:A.next=l,n.lastBaseUpdate=k)}}if(null!==f){A=e.baseState;g=0;n=l=k=null;do{h=f.lane;var p=f.eventTime;if((d&h)===h){null!==n&&(n=n.next={eventTime:p,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,\nnext:null});a:{var C=a,x=f;h=b;p=c;switch(x.tag){case 1:C=x.payload;if(\"function\"===typeof C){A=C.call(p,A,h);break a}A=C;break a;case 3:C.flags=C.flags&-4097|64;case 0:C=x.payload;h=\"function\"===typeof C?C.call(p,A,h):C;if(null===h||void 0===h)break a;A=m({},A,h);break a;case 2:wg=!0}}null!==f.callback&&(a.flags|=32,h=e.effects,null===h?e.effects=[f]:h.push(f))}else p={eventTime:p,lane:h,tag:f.tag,payload:f.payload,callback:f.callback,next:null},null===n?(l=n=p,k=A):n=n.next=p,g|=h;f=f.next;if(null===\nf)if(h=e.shared.pending,null===h)break;else f=h.next,h.next=null,e.lastBaseUpdate=h,e.shared.pending=null}while(1);null===n&&(k=A);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=n;Dg|=g;a.lanes=g;a.memoizedState=A}}function Eg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(y(191,e));e.call(d)}}}var Fg=(new aa.Component).refs;\nfunction Gg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:m({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Kg={isMounted:function(a){return(a=a._reactInternals)?Zb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=Hg(),d=Ig(a),e=zg(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=\nb);Ag(a,e);Jg(a,d,c)}};function Lg(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Je(c,d)||!Je(e,f):!0}\nfunction Mg(a,b,c){var d=!1,e=Cf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=vg(f):(e=Ff(b)?Df:M.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Ef(a,e):Cf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Kg;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Ng(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Kg.enqueueReplaceState(b,b.state,null)}\nfunction Og(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=Fg;xg(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=vg(f):(f=Ff(b)?Df:M.current,e.context=Ef(a,f));Cg(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Gg(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||\n(b=e.state,\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Kg.enqueueReplaceState(e,e.state,null),Cg(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4)}var Pg=Array.isArray;\nfunction Qg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(y(309));var d=c.stateNode}if(!d)throw Error(y(147,a));var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===Fg&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if(\"string\"!==typeof a)throw Error(y(284));if(!c._owner)throw Error(y(290,a));}return a}\nfunction Rg(a,b){if(\"textarea\"!==a.type)throw Error(y(31,\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b));}\nfunction Sg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.flags=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Tg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags=2,\nc):d;b.flags=2;return c}function g(b){a&&null===b.alternate&&(b.flags=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Ug(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Qg(a,b,c),d.return=a,d;d=Vg(c.type,c.key,c.props,null,a.mode,d);d.ref=Qg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=\nWg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function n(a,b,c,d,f){if(null===b||7!==b.tag)return b=Xg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function A(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=Ug(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case sa:return c=Vg(b.type,b.key,b.props,null,a.mode,c),c.ref=Qg(a,null,b),c.return=a,c;case ta:return b=Wg(b,a.mode,c),b.return=a,b}if(Pg(b)||La(b))return b=Xg(b,\na.mode,c,null),b.return=a,b;Rg(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case sa:return c.key===e?c.type===ua?n(a,b,c.props.children,d,e):k(a,b,c,d):null;case ta:return c.key===e?l(a,b,c,d):null}if(Pg(c)||La(c))return null!==e?null:n(a,b,c,d,null);Rg(a,c)}return null}function C(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=a.get(c)||\nnull,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case sa:return a=a.get(null===d.key?c:d.key)||null,d.type===ua?n(b,a,d.props.children,e,d.key):k(b,a,d,e);case ta:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Pg(d)||La(d))return a=a.get(c)||null,n(b,a,d,e,null);Rg(b,d)}return null}function x(e,g,h,k){for(var l=null,t=null,u=g,z=g=0,q=null;null!==u&&z<h.length;z++){u.index>z?(q=u,u=null):q=u.sibling;var n=p(e,u,h[z],k);if(null===n){null===u&&(u=q);break}a&&u&&null===\nn.alternate&&b(e,u);g=f(n,g,z);null===t?l=n:t.sibling=n;t=n;u=q}if(z===h.length)return c(e,u),l;if(null===u){for(;z<h.length;z++)u=A(e,h[z],k),null!==u&&(g=f(u,g,z),null===t?l=u:t.sibling=u,t=u);return l}for(u=d(e,u);z<h.length;z++)q=C(u,e,z,h[z],k),null!==q&&(a&&null!==q.alternate&&u.delete(null===q.key?z:q.key),g=f(q,g,z),null===t?l=q:t.sibling=q,t=q);a&&u.forEach(function(a){return b(e,a)});return l}function w(e,g,h,k){var l=La(h);if(\"function\"!==typeof l)throw Error(y(150));h=l.call(h);if(null==\nh)throw Error(y(151));for(var t=l=null,u=g,z=g=0,q=null,n=h.next();null!==u&&!n.done;z++,n=h.next()){u.index>z?(q=u,u=null):q=u.sibling;var w=p(e,u,n.value,k);if(null===w){null===u&&(u=q);break}a&&u&&null===w.alternate&&b(e,u);g=f(w,g,z);null===t?l=w:t.sibling=w;t=w;u=q}if(n.done)return c(e,u),l;if(null===u){for(;!n.done;z++,n=h.next())n=A(e,n.value,k),null!==n&&(g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);return l}for(u=d(e,u);!n.done;z++,n=h.next())n=C(u,e,z,n.value,k),null!==n&&(a&&null!==n.alternate&&\nu.delete(null===n.key?z:n.key),g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);a&&u.forEach(function(a){return b(e,a)});return l}return function(a,d,f,h){var k=\"object\"===typeof f&&null!==f&&f.type===ua&&null===f.key;k&&(f=f.props.children);var l=\"object\"===typeof f&&null!==f;if(l)switch(f.$$typeof){case sa:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ua){c(a,k.sibling);d=e(k,f.props.children);d.return=a;a=d;break a}break;default:if(k.elementType===f.type){c(a,k.sibling);\nd=e(k,f.props);d.ref=Qg(a,k,f);d.return=a;a=d;break a}}c(a,k);break}else b(a,k);k=k.sibling}f.type===ua?(d=Xg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Vg(f.type,f.key,f.props,null,a.mode,h),h.ref=Qg(a,d,f),h.return=a,a=h)}return g(a);case ta:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=\nWg(f,a.mode,h);d.return=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Ug(f,a.mode,h),d.return=a,a=d),g(a);if(Pg(f))return x(a,d,f,h);if(La(f))return w(a,d,f,h);l&&Rg(a,f);if(\"undefined\"===typeof f&&!k)switch(a.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(a.type)||\"Component\"));}return c(a,d)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);\nfunction dh(a){if(a===$g)throw Error(y(174));return a}function eh(a,b){I(ch,b);I(bh,a);I(ah,$g);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:mb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=mb(b,a)}H(ah);I(ah,b)}function fh(){H(ah);H(bh);H(ch)}function gh(a){dh(ch.current);var b=dh(ah.current);var c=mb(b,a.type);b!==c&&(I(bh,a),I(ah,c))}function hh(a){bh.current===a&&(H(ah),H(bh))}var P=Bf(0);\nfunction ih(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var jh=null,kh=null,lh=!1;\nfunction mh(a,b){var c=nh(5,null,null,0);c.elementType=\"DELETED\";c.type=\"DELETED\";c.stateNode=b;c.return=a;c.flags=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function oh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}\nfunction ph(a){if(lh){var b=kh;if(b){var c=b;if(!oh(a,b)){b=rf(c.nextSibling);if(!b||!oh(a,b)){a.flags=a.flags&-1025|2;lh=!1;jh=a;return}mh(jh,c)}jh=a;kh=rf(b.firstChild)}else a.flags=a.flags&-1025|2,lh=!1,jh=a}}function qh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;jh=a}\nfunction rh(a){if(a!==jh)return!1;if(!lh)return qh(a),lh=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!nf(b,a.memoizedProps))for(b=kh;b;)mh(a,b),b=rf(b.nextSibling);qh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(y(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){kh=rf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}kh=null}}else kh=jh?rf(a.stateNode.nextSibling):null;return!0}\nfunction sh(){kh=jh=null;lh=!1}var th=[];function uh(){for(var a=0;a<th.length;a++)th[a]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321));}function Bh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Ch(a,b,c,d,e,f){xh=f;R=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;vh.current=null===a||null===a.memoizedState?Dh:Eh;a=c(d,e);if(zh){f=0;do{zh=!1;if(!(25>f))throw Error(y(301));f+=1;T=S=null;b.updateQueue=null;vh.current=Fh;a=c(d,e)}while(zh)}vh.current=Gh;b=null!==S&&null!==S.next;xh=0;T=S=R=null;yh=!1;if(b)throw Error(y(300));return a}function Hh(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===T?R.memoizedState=T=a:T=T.next=a;return T}\nfunction Ih(){if(null===S){var a=R.alternate;a=null!==a?a.memoizedState:null}else a=S.next;var b=null===T?R.memoizedState:T.next;if(null!==b)T=b,S=a;else{if(null===a)throw Error(y(310));S=a;a={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null};null===T?R.memoizedState=T=a:T=T.next=a}return T}function Jh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Kh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=S,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,k=e;do{var l=k.lane;if((xh&l)===l)null!==h&&(h=h.next={lane:0,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),d=k.eagerReducer===a?k.eagerState:a(d,k.action);else{var n={lane:l,action:k.action,eagerReducer:k.eagerReducer,\neagerState:k.eagerState,next:null};null===h?(g=h=n,f=d):h=h.next=n;R.lanes|=l;Dg|=l}k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g;He(d,b.memoizedState)||(ug=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}\nfunction Lh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}\nfunction Mh(a,b,c){var d=b._getVersion;d=d(b._source);var e=b._workInProgressVersionPrimary;if(null!==e)a=e===d;else if(a=a.mutableReadLanes,a=(xh&a)===a)b._workInProgressVersionPrimary=d,th.push(b);if(a)return c(b._source);th.push(b);throw Error(y(350));}\nfunction Nh(a,b,c,d){var e=U;if(null===e)throw Error(y(349));var f=b._getVersion,g=f(b._source),h=vh.current,k=h.useState(function(){return Mh(e,b,c)}),l=k[1],n=k[0];k=T;var A=a.memoizedState,p=A.refs,C=p.getSnapshot,x=A.source;A=A.subscribe;var w=R;a.memoizedState={refs:p,source:b,subscribe:d};h.useEffect(function(){p.getSnapshot=c;p.setSnapshot=l;var a=f(b._source);if(!He(g,a)){a=c(b._source);He(n,a)||(l(a),a=Ig(w),e.mutableReadLanes|=a&e.pendingLanes);a=e.mutableReadLanes;e.entangledLanes|=a;for(var d=\ne.entanglements,h=a;0<h;){var k=31-Vc(h),v=1<<k;d[k]|=a;h&=~v}}},[c,b,d]);h.useEffect(function(){return d(b._source,function(){var a=p.getSnapshot,c=p.setSnapshot;try{c(a(b._source));var d=Ig(w);e.mutableReadLanes|=d&e.pendingLanes}catch(q){c(function(){throw q;})}})},[b,d]);He(C,c)&&He(x,b)&&He(A,d)||(a={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:n},a.dispatch=l=Oh.bind(null,R,a),k.queue=a,k.baseQueue=null,n=Mh(e,b,c),k.memoizedState=k.baseState=n);return n}\nfunction Ph(a,b,c){var d=Ih();return Nh(d,a,b,c)}function Qh(a){var b=Hh();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:a};a=a.dispatch=Oh.bind(null,R,a);return[b.memoizedState,a]}\nfunction Rh(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=R.updateQueue;null===b?(b={lastEffect:null},R.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function Sh(a){var b=Hh();a={current:a};return b.memoizedState=a}function Th(){return Ih().memoizedState}function Uh(a,b,c,d){var e=Hh();R.flags|=a;e.memoizedState=Rh(1|b,c,void 0,void 0===d?null:d)}\nfunction Vh(a,b,c,d){var e=Ih();d=void 0===d?null:d;var f=void 0;if(null!==S){var g=S.memoizedState;f=g.destroy;if(null!==d&&Bh(d,g.deps)){Rh(b,c,f,d);return}}R.flags|=a;e.memoizedState=Rh(1|b,c,f,d)}function Wh(a,b){return Uh(516,4,a,b)}function Xh(a,b){return Vh(516,4,a,b)}function Yh(a,b){return Vh(4,2,a,b)}function Zh(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}\nfunction $h(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Vh(4,2,Zh.bind(null,b,a),c)}function ai(){}function bi(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function ci(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}\nfunction di(a,b){var c=eg();gg(98>c?98:c,function(){a(!0)});gg(97<c?97:c,function(){var c=wh.transition;wh.transition=1;try{a(!1),b()}finally{wh.transition=c}})}\nfunction Oh(a,b,c){var d=Hg(),e=Ig(a),f={lane:e,action:c,eagerReducer:null,eagerState:null,next:null},g=b.pending;null===g?f.next=f:(f.next=g.next,g.next=f);b.pending=f;g=a.alternate;if(a===R||null!==g&&g===R)zh=yh=!0;else{if(0===a.lanes&&(null===g||0===g.lanes)&&(g=b.lastRenderedReducer,null!==g))try{var h=b.lastRenderedState,k=g(h,c);f.eagerReducer=g;f.eagerState=k;if(He(k,h))return}catch(l){}finally{}Jg(a,e,d)}}\nvar Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(a,b){Hh().memoizedState=[a,void 0===b?null:b];return a},useContext:vg,useEffect:Wh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Uh(4,2,Zh.bind(null,\nb,a),c)},useLayoutEffect:function(a,b){return Uh(4,2,a,b)},useMemo:function(a,b){var c=Hh();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Hh();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=Oh.bind(null,R,a);return[d.memoizedState,a]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(a){var b=Qh(a),c=b[0],d=b[1];Wh(function(){var b=wh.transition;\nwh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Qh(!1),b=a[0];a=di.bind(null,a[1]);Sh(a);return[a,b]},useMutableSource:function(a,b,c){var d=Hh();d.memoizedState={refs:{getSnapshot:b,setSnapshot:null},source:a,subscribe:c};return Nh(d,a,b,c)},useOpaqueIdentifier:function(){if(lh){var a=!1,b=uf(function(){a||(a=!0,c(\"r:\"+(tf++).toString(36)));throw Error(y(355));}),c=Qh(b)[1];0===(R.mode&2)&&(R.flags|=516,Rh(5,function(){c(\"r:\"+(tf++).toString(36))},\nvoid 0,null));return b}b=\"r:\"+(tf++).toString(36);Qh(b);return b},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Kh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Kh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Lh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Lh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(a,b,c,d){b.child=null===a?Zg(b,null,c,d):Yg(b,a.child,c,d)}function gi(a,b,c,d,e){c=c.render;var f=b.ref;tg(b,e);d=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,d,e);return b.child}\nfunction ii(a,b,c,d,e,f){if(null===a){var g=c.type;if(\"function\"===typeof g&&!ji(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ki(a,b,g,d,e,f);a=Vg(c.type,null,d,b,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(0===(e&f)&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Je,c(e,d)&&a.ref===b.ref))return hi(a,b,f);b.flags|=1;a=Tg(g,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction ki(a,b,c,d,e,f){if(null!==a&&Je(a.memoizedProps,d)&&a.ref===b.ref)if(ug=!1,0!==(f&e))0!==(a.flags&16384)&&(ug=!0);else return b.lanes=a.lanes,hi(a,b,f);return li(a,b,c,d,f)}\nfunction mi(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode||\"unstable-defer-without-hiding\"===d.mode)if(0===(b.mode&4))b.memoizedState={baseLanes:0},ni(b,c);else if(0!==(c&1073741824))b.memoizedState={baseLanes:0},ni(b,null!==f?f.baseLanes:c);else return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a},ni(b,a),null;else null!==f?(d=f.baseLanes|c,b.memoizedState=null):d=c,ni(b,d);fi(a,b,e,c);return b.child}\nfunction oi(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=128}function li(a,b,c,d,e){var f=Ff(c)?Df:M.current;f=Ef(b,f);tg(b,e);c=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,c,e);return b.child}\nfunction pi(a,b,c,d,e){if(Ff(c)){var f=!0;Jf(b)}else f=!1;tg(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),Mg(b,c,d),Og(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=vg(l):(l=Ff(c)?Df:M.current,l=Ef(b,l));var n=c.getDerivedStateFromProps,A=\"function\"===typeof n||\"function\"===typeof g.getSnapshotBeforeUpdate;A||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\n\"function\"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Ng(b,g,d,l);wg=!1;var p=b.memoizedState;g.state=p;Cg(b,d,g,e);k=b.memoizedState;h!==d||p!==k||N.current||wg?(\"function\"===typeof n&&(Gg(b,c,n,d),k=b.memoizedState),(h=wg||Lg(b,c,h,d,p,k,l))?(A||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===\ntypeof g.componentDidMount&&(b.flags|=4)):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),d=!1)}else{g=b.stateNode;yg(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:lg(b.type,h);g.props=l;A=b.pendingProps;p=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=vg(k):(k=Ff(c)?Df:M.current,k=Ef(b,k));var C=c.getDerivedStateFromProps;(n=\"function\"===typeof C||\n\"function\"===typeof g.getSnapshotBeforeUpdate)||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==A||p!==k)&&Ng(b,g,d,k);wg=!1;p=b.memoizedState;g.state=p;Cg(b,d,g,e);var x=b.memoizedState;h!==A||p!==x||N.current||wg?(\"function\"===typeof C&&(Gg(b,c,C,d),x=b.memoizedState),(l=wg||Lg(b,c,l,d,p,x,k))?(n||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,\nx,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=256)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||\nh===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),d=!1)}return qi(a,b,c,d,f,e)}\nfunction qi(a,b,c,d,e,f){oi(a,b);var g=0!==(b.flags&64);if(!d&&!g)return e&&Kf(b,c,!1),hi(a,b,f);d=b.stateNode;ei.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Yg(b,a.child,null,f),b.child=Yg(b,null,h,f)):fi(a,b,h,f);b.memoizedState=d.state;e&&Kf(b,c,!0);return b.child}function ri(a){var b=a.stateNode;b.pendingContext?Hf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Hf(a,b.context,!1);eh(a,b.containerInfo)}\nvar si={dehydrated:null,retryLane:0};\nfunction ti(a,b,c){var d=b.pendingProps,e=P.current,f=!1,g;(g=0!==(b.flags&64))||(g=null!==a&&null===a.memoizedState?!1:0!==(e&2));g?(f=!0,b.flags&=-65):null!==a&&null===a.memoizedState||void 0===d.fallback||!0===d.unstable_avoidThisFallback||(e|=1);I(P,e&1);if(null===a){void 0!==d.fallback&&ph(b);a=d.children;e=d.fallback;if(f)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},b.memoizedState=si,a;if(\"number\"===typeof d.unstable_expectedLoadTime)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},\nb.memoizedState=si,b.lanes=33554432,a;c=vi({mode:\"visible\",children:a},b.mode,c,null);c.return=b;return b.child=c}if(null!==a.memoizedState){if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:\n{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}function ui(a,b,c,d){var e=a.mode,f=a.child;b={mode:\"hidden\",children:b};0===(e&2)&&null!==f?(f.childLanes=0,f.pendingProps=b):f=vi(b,e,0,null);c=Xg(c,e,d,null);f.return=a;c.return=a;f.sibling=c;a.child=f;return c}\nfunction xi(a,b,c,d){var e=a.child;a=e.sibling;c=Tg(e,{mode:\"visible\",children:c});0===(b.mode&2)&&(c.lanes=d);c.return=b;c.sibling=null;null!==a&&(a.nextEffect=null,a.flags=8,b.firstEffect=b.lastEffect=a);return b.child=c}\nfunction wi(a,b,c,d,e){var f=b.mode,g=a.child;a=g.sibling;var h={mode:\"hidden\",children:c};0===(f&2)&&b.child!==g?(c=b.child,c.childLanes=0,c.pendingProps=h,g=c.lastEffect,null!==g?(b.firstEffect=c.firstEffect,b.lastEffect=g,g.nextEffect=null):b.firstEffect=b.lastEffect=null):c=Tg(g,h);null!==a?d=Tg(a,d):(d=Xg(d,f,e,null),d.flags|=2);d.return=b;c.return=b;c.sibling=d;b.child=c;return d}function yi(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);sg(a.return,b)}\nfunction zi(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=e,g.lastEffect=f)}\nfunction Ai(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;fi(a,b,d.children,c);d=P.current;if(0!==(d&2))d=d&1|2,b.flags|=64;else{if(null!==a&&0!==(a.flags&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&yi(a,c);else if(19===a.tag)yi(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}I(P,d);if(0===(b.mode&2))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===ih(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);zi(b,!1,e,c,f,b.lastEffect);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===ih(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}zi(b,!0,c,null,f,b.lastEffect);break;case \"together\":zi(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}\nfunction hi(a,b,c){null!==a&&(b.dependencies=a.dependencies);Dg|=b.lanes;if(0!==(c&b.childLanes)){if(null!==a&&b.child!==a.child)throw Error(y(153));if(null!==b.child){a=b.child;c=Tg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Tg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}return null}var Bi,Ci,Di,Ei;\nBi=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Ci=function(){};\nDi=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;dh(ah.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"option\":e=eb(a,e);d=eb(a,d);f=[];break;case \"select\":e=m({},e,{value:void 0});d=m({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=jf)}vb(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===\nl){var h=e[l];for(g in h)h.hasOwnProperty(g)&&(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ca.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||\n(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,c)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ca.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&G(\"scroll\",a),f||h===k||(f=[])):\"object\"===typeof k&&null!==k&&k.$$typeof===Ga?k.toString():(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",\nc);var l=f;if(b.updateQueue=l)b.flags|=4}};Ei=function(a,b,c,d){c!==d&&(b.flags|=4)};function Fi(a,b){if(!lh)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction Gi(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(b.type)&&Gf(),null;case 3:fh();H(N);H(M);uh();d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)rh(b)?b.flags|=4:d.hydrate||(b.flags|=256);Ci(b);return null;case 5:hh(b);var e=dh(ch.current);c=b.type;if(null!==a&&null!=b.stateNode)Di(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=128);else{if(!d){if(null===\nb.stateNode)throw Error(y(166));return null}a=dh(ah.current);if(rh(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[wf]=b;d[xf]=f;switch(c){case \"dialog\":G(\"cancel\",d);G(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",d);break;case \"video\":case \"audio\":for(a=0;a<Xe.length;a++)G(Xe[a],d);break;case \"source\":G(\"error\",d);break;case \"img\":case \"image\":case \"link\":G(\"error\",d);G(\"load\",d);break;case \"details\":G(\"toggle\",d);break;case \"input\":Za(d,f);G(\"invalid\",d);break;case \"select\":d._wrapperState=\n{wasMultiple:!!f.multiple};G(\"invalid\",d);break;case \"textarea\":hb(d,f),G(\"invalid\",d)}vb(c,f);a=null;for(var g in f)f.hasOwnProperty(g)&&(e=f[g],\"children\"===g?\"string\"===typeof e?d.textContent!==e&&(a=[\"children\",e]):\"number\"===typeof e&&d.textContent!==\"\"+e&&(a=[\"children\",\"\"+e]):ca.hasOwnProperty(g)&&null!=e&&\"onScroll\"===g&&G(\"scroll\",d));switch(c){case \"input\":Va(d);cb(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=\njf)}d=a;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;a===kb.html&&(a=lb(c));a===kb.html?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[wf]=b;a[xf]=d;Bi(a,b,!1,!1);b.stateNode=a;g=wb(c,d);switch(c){case \"dialog\":G(\"cancel\",a);G(\"close\",a);\ne=d;break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<Xe.length;e++)G(Xe[e],a);e=d;break;case \"source\":G(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":G(\"error\",a);G(\"load\",a);e=d;break;case \"details\":G(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);G(\"invalid\",a);break;case \"option\":e=eb(a,d);break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=m({},d,{value:void 0});G(\"invalid\",a);break;case \"textarea\":hb(a,d);e=\ngb(a,d);G(\"invalid\",a);break;default:e=d}vb(c,e);var h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?tb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&ob(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==c||\"\"!==k)&&pb(a,k):\"number\"===typeof k&&pb(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ca.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&G(\"scroll\",a):null!=k&&qa(a,f,k,g))}switch(c){case \"input\":Va(a);cb(a,d,!1);\nbreak;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=jf)}mf(c,d)&&(b.flags|=4)}null!==b.ref&&(b.flags|=128)}return null;case 6:if(a&&null!=b.stateNode)Ei(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(y(166));\nc=dh(ch.current);dh(ah.current);rh(b)?(d=b.stateNode,c=b.memoizedProps,d[wf]=b,d.nodeValue!==c&&(b.flags|=4)):(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[wf]=b,b.stateNode=d)}return null;case 13:H(P);d=b.memoizedState;if(0!==(b.flags&64))return b.lanes=c,b;d=null!==d;c=!1;null===a?void 0!==b.memoizedProps.fallback&&rh(b):c=null!==a.memoizedState;if(d&&!c&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(P.current&1))0===V&&(V=3);else{if(0===V||3===V)V=\n4;null===U||0===(Dg&134217727)&&0===(Hi&134217727)||Ii(U,W)}if(d||c)b.flags|=4;return null;case 4:return fh(),Ci(b),null===a&&cf(b.stateNode.containerInfo),null;case 10:return rg(b),null;case 17:return Ff(b.type)&&Gf(),null;case 19:H(P);d=b.memoizedState;if(null===d)return null;f=0!==(b.flags&64);g=d.rendering;if(null===g)if(f)Fi(d,!1);else{if(0!==V||null!==a&&0!==(a.flags&64))for(a=b.child;null!==a;){g=ih(a);if(null!==g){b.flags|=64;Fi(d,!1);f=g.updateQueue;null!==f&&(b.updateQueue=f,b.flags|=4);\nnull===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,g=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,\nf.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;I(P,P.current&1|2);return b.child}a=a.sibling}null!==d.tail&&O()>Ji&&(b.flags|=64,f=!0,Fi(d,!1),b.lanes=33554432)}else{if(!f)if(a=ih(g),null!==a){if(b.flags|=64,f=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Fi(d,!0),null===d.tail&&\"hidden\"===d.tailMode&&!g.alternate&&!lh)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*O()-d.renderingStartTime>Ji&&1073741824!==c&&(b.flags|=\n64,f=!0,Fi(d,!1),b.lanes=33554432);d.isBackwards?(g.sibling=b.child,b.child=g):(c=d.last,null!==c?c.sibling=g:b.child=g,d.last=g)}return null!==d.tail?(c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=O(),c.sibling=null,b=P.current,I(P,f?b&1|2:b&1),c):null;case 23:case 24:return Ki(),null!==a&&null!==a.memoizedState!==(null!==b.memoizedState)&&\"unstable-defer-without-hiding\"!==d.mode&&(b.flags|=4),null}throw Error(y(156,b.tag));}\nfunction Li(a){switch(a.tag){case 1:Ff(a.type)&&Gf();var b=a.flags;return b&4096?(a.flags=b&-4097|64,a):null;case 3:fh();H(N);H(M);uh();b=a.flags;if(0!==(b&64))throw Error(y(285));a.flags=b&-4097|64;return a;case 5:return hh(a),null;case 13:return H(P),b=a.flags,b&4096?(a.flags=b&-4097|64,a):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(a),null;case 23:case 24:return Ki(),null;default:return null}}\nfunction Mi(a,b){try{var c=\"\",d=b;do c+=Qa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e}}function Ni(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Oi=\"function\"===typeof WeakMap?WeakMap:Map;function Pi(a,b,c){c=zg(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Qi||(Qi=!0,Ri=d);Ni(a,b)};return c}\nfunction Si(a,b,c){c=zg(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){Ni(a,b);return d(e)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){\"function\"!==typeof d&&(null===Ti?Ti=new Set([this]):Ti.add(this),Ni(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}var Ui=\"function\"===typeof WeakSet?WeakSet:Set;\nfunction Vi(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){Wi(a,c)}else b.current=null}function Xi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.flags&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:lg(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:b.flags&256&&qf(b.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163));}\nfunction Yi(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{if(3===(a.tag&3)){var d=a.create;a.destroy=d()}a=a.next}while(a!==b)}b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{var e=a;d=e.next;e=e.tag;0!==(e&4)&&0!==(e&1)&&(Zi(c,a),$i(c,a));a=d}while(a!==b)}return;case 1:a=c.stateNode;c.flags&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:lg(c.type,b.memoizedProps),a.componentDidUpdate(d,\nb.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Eg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Eg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.flags&4&&mf(c.type,c.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Cc(c))));\nreturn;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163));}\nfunction aj(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d=d.style,\"function\"===typeof d.setProperty?d.setProperty(\"display\",\"none\",\"important\"):d.display=\"none\";else{d=c.stateNode;var e=c.memoizedProps.style;e=void 0!==e&&null!==e&&e.hasOwnProperty(\"display\")?e.display:null;d.style.display=sb(\"display\",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?\"\":c.memoizedProps;else if((23!==c.tag&&24!==c.tag||null===c.memoizedState||c===a)&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===\na)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}\nfunction bj(a,b){if(Mf&&\"function\"===typeof Mf.onCommitFiberUnmount)try{Mf.onCommitFiberUnmount(Lf,b)}catch(f){}switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var c=a=a.next;do{var d=c,e=d.destroy;d=d.tag;if(void 0!==e)if(0!==(d&4))Zi(b,c);else{d=b;try{e()}catch(f){Wi(d,f)}}c=c.next}while(c!==a)}break;case 1:Vi(b);a=b.stateNode;if(\"function\"===typeof a.componentWillUnmount)try{a.props=b.memoizedProps,a.state=b.memoizedState,a.componentWillUnmount()}catch(f){Wi(b,\nf)}break;case 5:Vi(b);break;case 4:cj(a,b)}}function dj(a){a.alternate=null;a.child=null;a.dependencies=null;a.firstEffect=null;a.lastEffect=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.return=null;a.updateQueue=null}function ej(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction fj(a){a:{for(var b=a.return;null!==b;){if(ej(b))break a;b=b.return}throw Error(y(160));}var c=b;b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(y(161));}c.flags&16&&(pb(b,\"\"),c.flags&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||ej(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.flags&2)continue b;if(null===\nc.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.flags&2)){c=c.stateNode;break a}}d?gj(a,c,b):hj(a,c,b)}\nfunction gj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=jf));else if(4!==d&&(a=a.child,null!==a))for(gj(a,b,c),a=a.sibling;null!==a;)gj(a,b,c),a=a.sibling}\nfunction hj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(hj(a,b,c),a=a.sibling;null!==a;)hj(a,b,c),a=a.sibling}\nfunction cj(a,b){for(var c=b,d=!1,e,f;;){if(!d){d=c.return;a:for(;;){if(null===d)throw Error(y(160));e=d.stateNode;switch(d.tag){case 5:f=!1;break a;case 3:e=e.containerInfo;f=!0;break a;case 4:e=e.containerInfo;f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag){a:for(var g=a,h=c,k=h;;)if(bj(g,k),null!==k.child&&4!==k.tag)k.child.return=k,k=k.child;else{if(k===h)break a;for(;null===k.sibling;){if(null===k.return||k.return===h)break a;k=k.return}k.sibling.return=k.return;k=k.sibling}f?(g=e,h=c.stateNode,\n8===g.nodeType?g.parentNode.removeChild(h):g.removeChild(h)):e.removeChild(c.stateNode)}else if(4===c.tag){if(null!==c.child){e=c.stateNode.containerInfo;f=!0;c.child.return=c;c=c.child;continue}}else if(bj(a,c),null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return;4===c.tag&&(d=!1)}c.sibling.return=c.return;c=c.sibling}}\nfunction ij(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:var c=b.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do 3===(d.tag&3)&&(a=d.destroy,d.destroy=void 0,void 0!==a&&a()),d=d.next;while(d!==c)}return;case 1:return;case 5:c=b.stateNode;if(null!=c){d=b.memoizedProps;var e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[xf]=d;\"input\"===a&&\"radio\"===d.type&&null!=d.name&&$a(c,d);wb(a,e);b=wb(a,d);for(e=0;e<f.length;e+=\n2){var g=f[e],h=f[e+1];\"style\"===g?tb(c,h):\"dangerouslySetInnerHTML\"===g?ob(c,h):\"children\"===g?pb(c,h):qa(c,g,h,b)}switch(a){case \"input\":ab(c,d);break;case \"textarea\":ib(c,d);break;case \"select\":a=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,f=d.value,null!=f?fb(c,!!d.multiple,f,!1):a!==!!d.multiple&&(null!=d.defaultValue?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:\"\",!1))}}}return;case 6:if(null===b.stateNode)throw Error(y(162));b.stateNode.nodeValue=\nb.memoizedProps;return;case 3:c=b.stateNode;c.hydrate&&(c.hydrate=!1,Cc(c.containerInfo));return;case 12:return;case 13:null!==b.memoizedState&&(jj=O(),aj(b.child,!0));kj(b);return;case 19:kj(b);return;case 17:return;case 23:case 24:aj(b,null!==b.memoizedState);return}throw Error(y(163));}function kj(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Ui);b.forEach(function(b){var d=lj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction mj(a,b){return null!==a&&(a=a.memoizedState,null===a||null!==a.dehydrated)?(b=b.memoizedState,null!==b&&null===b.dehydrated):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=Infinity;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return 0!==(X&48)?O():-1!==Fj?Fj:Fj=O()}\nfunction Ig(a){a=a.mode;if(0===(a&2))return 1;if(0===(a&4))return 99===eg()?1:2;0===Gj&&(Gj=tj);if(0!==kg.transition){0!==Hj&&(Hj=null!==vj?vj.pendingLanes:0);a=Gj;var b=4186112&~Hj;b&=-b;0===b&&(a=4186112&~a,b=a&-a,0===b&&(b=8192));return b}a=eg();0!==(X&4)&&98===a?a=Xc(12,Gj):(a=Sc(a),a=Xc(a,Gj));return a}\nfunction Jg(a,b,c){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));a=Kj(a,b);if(null===a)return null;$c(a,b,c);a===U&&(Hi|=b,4===V&&Ii(a,W));var d=eg();1===b?0!==(X&8)&&0===(X&48)?Lj(a):(Mj(a,c),0===X&&(wj(),ig())):(0===(X&4)||98!==d&&99!==d||(null===Cj?Cj=new Set([a]):Cj.add(a)),Mj(a,c));vj=a}function Kj(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}\nfunction Mj(a,b){for(var c=a.callbackNode,d=a.suspendedLanes,e=a.pingedLanes,f=a.expirationTimes,g=a.pendingLanes;0<g;){var h=31-Vc(g),k=1<<h,l=f[h];if(-1===l){if(0===(k&d)||0!==(k&e)){l=b;Rc(k);var n=F;f[h]=10<=n?l+250:6<=n?l+5E3:-1}}else l<=b&&(a.expiredLanes|=k);g&=~k}d=Uc(a,a===U?W:0);b=F;if(0===d)null!==c&&(c!==Zf&&Pf(c),a.callbackNode=null,a.callbackPriority=0);else{if(null!==c){if(a.callbackPriority===b)return;c!==Zf&&Pf(c)}15===b?(c=Lj.bind(null,a),null===ag?(ag=[c],bg=Of(Uf,jg)):ag.push(c),\nc=Zf):14===b?c=hg(99,Lj.bind(null,a)):(c=Tc(b),c=hg(c,Nj.bind(null,a)));a.callbackPriority=b;a.callbackNode=c}}\nfunction Nj(a){Fj=-1;Hj=Gj=0;if(0!==(X&48))throw Error(y(327));var b=a.callbackNode;if(Oj()&&a.callbackNode!==b)return null;var c=Uc(a,a===U?W:0);if(0===c)return null;var d=c;var e=X;X|=16;var f=Pj();if(U!==a||W!==d)wj(),Qj(a,d);do try{Rj();break}catch(h){Sj(a,h)}while(1);qg();oj.current=f;X=e;null!==Y?d=0:(U=null,W=0,d=V);if(0!==(tj&Hi))Qj(a,0);else if(0!==d){2===d&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),c=Wc(a),0!==c&&(d=Tj(a,c)));if(1===d)throw b=sj,Qj(a,0),Ii(a,c),Mj(a,O()),b;a.finishedWork=\na.current.alternate;a.finishedLanes=c;switch(d){case 0:case 1:throw Error(y(345));case 2:Uj(a);break;case 3:Ii(a,c);if((c&62914560)===c&&(d=jj+500-O(),10<d)){if(0!==Uc(a,0))break;e=a.suspendedLanes;if((e&c)!==c){Hg();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=of(Uj.bind(null,a),d);break}Uj(a);break;case 4:Ii(a,c);if((c&4186112)===c)break;d=a.eventTimes;for(e=-1;0<c;){var g=31-Vc(c);f=1<<g;g=d[g];g>e&&(e=g);c&=~f}c=e;c=O()-c;c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3E3>c?3E3:4320>\nc?4320:1960*nj(c/1960))-c;if(10<c){a.timeoutHandle=of(Uj.bind(null,a),c);break}Uj(a);break;case 5:Uj(a);break;default:throw Error(y(329));}}Mj(a,O());return a.callbackNode===b?Nj.bind(null,a):null}function Ii(a,b){b&=~uj;b&=~Hi;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-Vc(b),d=1<<c;a[c]=-1;b&=~d}}\nfunction Lj(a){if(0!==(X&48))throw Error(y(327));Oj();if(a===U&&0!==(a.expiredLanes&W)){var b=W;var c=Tj(a,b);0!==(tj&Hi)&&(b=Uc(a,b),c=Tj(a,b))}else b=Uc(a,0),c=Tj(a,b);0!==a.tag&&2===c&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),b=Wc(a),0!==b&&(c=Tj(a,b)));if(1===c)throw c=sj,Qj(a,0),Ii(a,b),Mj(a,O()),c;a.finishedWork=a.current.alternate;a.finishedLanes=b;Uj(a);Mj(a,O());return null}\nfunction Vj(){if(null!==Cj){var a=Cj;Cj=null;a.forEach(function(a){a.expiredLanes|=24&a.pendingLanes;Mj(a,O())})}ig()}function Wj(a,b){var c=X;X|=1;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function Xj(a,b){var c=X;X&=-2;X|=8;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function ni(a,b){I(rj,qj);qj|=b;tj|=b}function Ki(){qj=rj.current;H(rj)}\nfunction Qj(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,pf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&Gf();break;case 3:fh();H(N);H(M);uh();break;case 5:hh(d);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(d);break;case 23:case 24:Ki()}c=c.return}U=a;Y=Tg(a.current,null);W=qj=tj=b;V=0;sj=null;uj=Hi=Dg=0}\nfunction Sj(a,b){do{var c=Y;try{qg();vh.current=Gh;if(yh){for(var d=R.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}yh=!1}xh=0;T=S=R=null;zh=!1;pj.current=null;if(null===c||null===c.return){V=1;sj=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=W;h.flags|=2048;h.firstEffect=h.lastEffect=null;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k;if(0===(h.mode&2)){var n=h.alternate;n?(h.updateQueue=n.updateQueue,h.memoizedState=n.memoizedState,h.lanes=n.lanes):\n(h.updateQueue=null,h.memoizedState=null)}var A=0!==(P.current&1),p=g;do{var C;if(C=13===p.tag){var x=p.memoizedState;if(null!==x)C=null!==x.dehydrated?!0:!1;else{var w=p.memoizedProps;C=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:A?!1:!0}}if(C){var z=p.updateQueue;if(null===z){var u=new Set;u.add(l);p.updateQueue=u}else z.add(l);if(0===(p.mode&2)){p.flags|=64;h.flags|=16384;h.flags&=-2981;if(1===h.tag)if(null===h.alternate)h.tag=17;else{var t=zg(-1,1);t.tag=2;Ag(h,t)}h.lanes|=1;break a}k=\nvoid 0;h=b;var q=f.pingCache;null===q?(q=f.pingCache=new Oi,k=new Set,q.set(l,k)):(k=q.get(l),void 0===k&&(k=new Set,q.set(l,k)));if(!k.has(h)){k.add(h);var v=Yj.bind(null,f,l,h);l.then(v,v)}p.flags|=4096;p.lanes=b;break a}p=p.return}while(null!==p);k=Error((Ra(h.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\")}5!==V&&(V=2);k=Mi(k,h);p=\ng;do{switch(p.tag){case 3:f=k;p.flags|=4096;b&=-b;p.lanes|=b;var J=Pi(p,f,b);Bg(p,J);break a;case 1:f=k;var K=p.type,Q=p.stateNode;if(0===(p.flags&64)&&(\"function\"===typeof K.getDerivedStateFromError||null!==Q&&\"function\"===typeof Q.componentDidCatch&&(null===Ti||!Ti.has(Q)))){p.flags|=4096;b&=-b;p.lanes|=b;var L=Si(p,f,b);Bg(p,L);break a}}p=p.return}while(null!==p)}Zj(c)}catch(va){b=va;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}\nfunction Pj(){var a=oj.current;oj.current=Gh;return null===a?Gh:a}function Tj(a,b){var c=X;X|=16;var d=Pj();U===a&&W===b||Qj(a,b);do try{ak();break}catch(e){Sj(a,e)}while(1);qg();X=c;oj.current=d;if(null!==Y)throw Error(y(261));U=null;W=0;return V}function ak(){for(;null!==Y;)bk(Y)}function Rj(){for(;null!==Y&&!Qf();)bk(Y)}function bk(a){var b=ck(a.alternate,a,qj);a.memoizedProps=a.pendingProps;null===b?Zj(a):Y=b;pj.current=null}\nfunction Zj(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&2048)){c=Gi(c,b,qj);if(null!==c){Y=c;return}c=b;if(24!==c.tag&&23!==c.tag||null===c.memoizedState||0!==(qj&1073741824)||0===(c.mode&4)){for(var d=0,e=c.child;null!==e;)d|=e.lanes|e.childLanes,e=e.sibling;c.childLanes=d}null!==a&&0===(a.flags&2048)&&(null===a.firstEffect&&(a.firstEffect=b.firstEffect),null!==b.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=b.firstEffect),a.lastEffect=b.lastEffect),1<b.flags&&(null!==\na.lastEffect?a.lastEffect.nextEffect=b:a.firstEffect=b,a.lastEffect=b))}else{c=Li(b);if(null!==c){c.flags&=2047;Y=c;return}null!==a&&(a.firstEffect=a.lastEffect=null,a.flags|=2048)}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===V&&(V=5)}function Uj(a){var b=eg();gg(99,dk.bind(null,a,b));return null}\nfunction dk(a,b){do Oj();while(null!==yj);if(0!==(X&48))throw Error(y(327));var c=a.finishedWork;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(y(177));a.callbackNode=null;var d=c.lanes|c.childLanes,e=d,f=a.pendingLanes&~e;a.pendingLanes=e;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=e;a.mutableReadLanes&=e;a.entangledLanes&=e;e=a.entanglements;for(var g=a.eventTimes,h=a.expirationTimes;0<f;){var k=31-Vc(f),l=1<<k;e[k]=0;g[k]=-1;h[k]=-1;f&=~l}null!==\nCj&&0===(d&24)&&Cj.has(a)&&Cj.delete(a);a===U&&(Y=U=null,W=0);1<c.flags?null!==c.lastEffect?(c.lastEffect.nextEffect=c,d=c.firstEffect):d=c:d=c.firstEffect;if(null!==d){e=X;X|=32;pj.current=null;kf=fd;g=Ne();if(Oe(g)){if(\"selectionStart\"in g)h={start:g.selectionStart,end:g.selectionEnd};else a:if(h=(h=g.ownerDocument)&&h.defaultView||window,(l=h.getSelection&&h.getSelection())&&0!==l.rangeCount){h=l.anchorNode;f=l.anchorOffset;k=l.focusNode;l=l.focusOffset;try{h.nodeType,k.nodeType}catch(va){h=null;\nbreak a}var n=0,A=-1,p=-1,C=0,x=0,w=g,z=null;b:for(;;){for(var u;;){w!==h||0!==f&&3!==w.nodeType||(A=n+f);w!==k||0!==l&&3!==w.nodeType||(p=n+l);3===w.nodeType&&(n+=w.nodeValue.length);if(null===(u=w.firstChild))break;z=w;w=u}for(;;){if(w===g)break b;z===h&&++C===f&&(A=n);z===k&&++x===l&&(p=n);if(null!==(u=w.nextSibling))break;w=z;z=w.parentNode}w=u}h=-1===A||-1===p?null:{start:A,end:p}}else h=null;h=h||{start:0,end:0}}else h=null;lf={focusedElem:g,selectionRange:h};fd=!1;Ij=null;Jj=!1;Z=d;do try{ek()}catch(va){if(null===\nZ)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Ij=null;Z=d;do try{for(g=a;null!==Z;){var t=Z.flags;t&16&&pb(Z.stateNode,\"\");if(t&128){var q=Z.alternate;if(null!==q){var v=q.ref;null!==v&&(\"function\"===typeof v?v(null):v.current=null)}}switch(t&1038){case 2:fj(Z);Z.flags&=-3;break;case 6:fj(Z);Z.flags&=-3;ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025;ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:h=Z;cj(g,h);var J=h.alternate;dj(h);null!==\nJ&&dj(J)}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);v=lf;q=Ne();t=v.focusedElem;g=v.selectionRange;if(q!==t&&t&&t.ownerDocument&&Me(t.ownerDocument.documentElement,t)){null!==g&&Oe(t)&&(q=g.start,v=g.end,void 0===v&&(v=q),\"selectionStart\"in t?(t.selectionStart=q,t.selectionEnd=Math.min(v,t.value.length)):(v=(q=t.ownerDocument||document)&&q.defaultView||window,v.getSelection&&(v=v.getSelection(),h=t.textContent.length,J=Math.min(g.start,h),g=void 0===\ng.end?J:Math.min(g.end,h),!v.extend&&J>g&&(h=g,g=J,J=h),h=Le(t,J),f=Le(t,g),h&&f&&(1!==v.rangeCount||v.anchorNode!==h.node||v.anchorOffset!==h.offset||v.focusNode!==f.node||v.focusOffset!==f.offset)&&(q=q.createRange(),q.setStart(h.node,h.offset),v.removeAllRanges(),J>g?(v.addRange(q),v.extend(f.node,f.offset)):(q.setEnd(f.node,f.offset),v.addRange(q))))));q=[];for(v=t;v=v.parentNode;)1===v.nodeType&&q.push({element:v,left:v.scrollLeft,top:v.scrollTop});\"function\"===typeof t.focus&&t.focus();for(t=\n0;t<q.length;t++)v=q[t],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}fd=!!kf;lf=kf=null;a.current=c;Z=d;do try{for(t=a;null!==Z;){var K=Z.flags;K&36&&Yi(t,Z.alternate,Z);if(K&128){q=void 0;var Q=Z.ref;if(null!==Q){var L=Z.stateNode;switch(Z.tag){case 5:q=L;break;default:q=L}\"function\"===typeof Q?Q(q):Q.current=q}}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Z=null;$f();X=e}else a.current=c;if(xj)xj=!1,yj=a,zj=b;else for(Z=d;null!==Z;)b=\nZ.nextEffect,Z.nextEffect=null,Z.flags&8&&(K=Z,K.sibling=null,K.stateNode=null),Z=b;d=a.pendingLanes;0===d&&(Ti=null);1===d?a===Ej?Dj++:(Dj=0,Ej=a):Dj=0;c=c.stateNode;if(Mf&&\"function\"===typeof Mf.onCommitFiberRoot)try{Mf.onCommitFiberRoot(Lf,c,void 0,64===(c.current.flags&64))}catch(va){}Mj(a,O());if(Qi)throw Qi=!1,a=Ri,Ri=null,a;if(0!==(X&8))return null;ig();return null}\nfunction ek(){for(;null!==Z;){var a=Z.alternate;Jj||null===Ij||(0!==(Z.flags&8)?dc(Z,Ij)&&(Jj=!0):13===Z.tag&&mj(a,Z)&&dc(Z,Ij)&&(Jj=!0));var b=Z.flags;0!==(b&256)&&Xi(a,Z);0===(b&512)||xj||(xj=!0,hg(97,function(){Oj();return null}));Z=Z.nextEffect}}function Oj(){if(90!==zj){var a=97<zj?97:zj;zj=90;return gg(a,fk)}return!1}function $i(a,b){Aj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}function Zi(a,b){Bj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}\nfunction fk(){if(null===yj)return!1;var a=yj;yj=null;if(0!==(X&48))throw Error(y(331));var b=X;X|=32;var c=Bj;Bj=[];for(var d=0;d<c.length;d+=2){var e=c[d],f=c[d+1],g=e.destroy;e.destroy=void 0;if(\"function\"===typeof g)try{g()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}c=Aj;Aj=[];for(d=0;d<c.length;d+=2){e=c[d];f=c[d+1];try{var h=e.create;e.destroy=h()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}for(h=a.current.firstEffect;null!==h;)a=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=\nnull,h.stateNode=null),h=a;X=b;ig();return!0}function gk(a,b,c){b=Mi(c,b);b=Pi(a,b,1);Ag(a,b);b=Hg();a=Kj(a,1);null!==a&&($c(a,1,b),Mj(a,b))}\nfunction Wi(a,b){if(3===a.tag)gk(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){gk(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d))){a=Mi(b,a);var e=Si(c,a,1);Ag(c,e);e=Hg();c=Kj(c,1);if(null!==c)$c(c,1,e),Mj(c,e);else if(\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d)))try{d.componentDidCatch(b,a)}catch(f){}break}}c=c.return}}\nfunction Yj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=Hg();a.pingedLanes|=a.suspendedLanes&c;U===a&&(W&c)===c&&(4===V||3===V&&(W&62914560)===W&&500>O()-jj?Qj(a,0):uj|=c);Mj(a,b)}function lj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=a.mode,0===(b&2)?b=1:0===(b&4)?b=99===eg()?1:2:(0===Gj&&(Gj=tj),b=Yc(62914560&~Gj),0===b&&(b=4194304)));c=Hg();a=Kj(a,b);null!==a&&($c(a,b,c),Mj(a,c))}var ck;\nck=function(a,b,c){var d=b.lanes;if(null!==a)if(a.memoizedProps!==b.pendingProps||N.current)ug=!0;else if(0!==(c&d))ug=0!==(a.flags&16384)?!0:!1;else{ug=!1;switch(b.tag){case 3:ri(b);sh();break;case 5:gh(b);break;case 1:Ff(b.type)&&Jf(b);break;case 4:eh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;var e=b.type._context;I(mg,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){if(0!==(c&b.child.childLanes))return ti(a,b,c);I(P,P.current&1);b=hi(a,b,c);return null!==\nb?b.sibling:null}I(P,P.current&1);break;case 19:d=0!==(c&b.childLanes);if(0!==(a.flags&64)){if(d)return Ai(a,b,c);b.flags|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);I(P,P.current);if(d)break;else return null;case 23:case 24:return b.lanes=0,mi(a,b,c)}return hi(a,b,c)}else ug=!1;b.lanes=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);a=b.pendingProps;e=Ef(b,M.current);tg(b,c);e=Ch(null,b,d,a,e,c);b.flags|=1;if(\"object\"===\ntypeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(Ff(d)){var f=!0;Jf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;xg(b);var g=d.getDerivedStateFromProps;\"function\"===typeof g&&Gg(b,d,g,a);e.updater=Kg;b.stateNode=e;e._reactInternals=b;Og(b,d,a,c);b=qi(null,b,d,!0,f,c)}else b.tag=0,fi(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;a:{null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);\na=b.pendingProps;f=e._init;e=f(e._payload);b.type=e;f=b.tag=hk(e);a=lg(e,a);switch(f){case 0:b=li(null,b,e,a,c);break a;case 1:b=pi(null,b,e,a,c);break a;case 11:b=gi(null,b,e,a,c);break a;case 14:b=ii(null,b,e,lg(e.type,a),d,c);break a}throw Error(y(306,e,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),li(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),pi(a,b,d,e,c);case 3:ri(b);d=b.updateQueue;if(null===a||null===d)throw Error(y(282));\nd=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;yg(a,b);Cg(b,d,null,c);d=b.memoizedState.element;if(d===e)sh(),b=hi(a,b,c);else{e=b.stateNode;if(f=e.hydrate)kh=rf(b.stateNode.containerInfo.firstChild),jh=b,f=lh=!0;if(f){a=e.mutableSourceEagerHydrationData;if(null!=a)for(e=0;e<a.length;e+=2)f=a[e],f._workInProgressVersionPrimary=a[e+1],th.push(f);c=Zg(b,null,d,c);for(b.child=c;c;)c.flags=c.flags&-3|1024,c=c.sibling}else fi(a,b,d,c),sh();b=b.child}return b;case 5:return gh(b),null===a&&\nph(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,nf(d,e)?g=null:null!==f&&nf(d,f)&&(b.flags|=16),oi(a,b),fi(a,b,g,c),b.child;case 6:return null===a&&ph(b),null;case 13:return ti(a,b,c);case 4:return eh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Yg(b,null,d,c):fi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),gi(a,b,d,e,c);case 7:return fi(a,b,b.pendingProps,c),b.child;case 8:return fi(a,b,b.pendingProps.children,\nc),b.child;case 12:return fi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;I(mg,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=He(h,f)?0:(\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!N.current){b=hi(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=\nk.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=zg(-1,c&-c),l.tag=2,Ag(h,l));h.lanes|=c;l=h.alternate;null!==l&&(l.lanes|=c);sg(h.return,c);k.lanes|=c;break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=g}fi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,tg(b,c),e=vg(e,\nf.unstable_observedBits),d=d(e),b.flags|=1,fi(a,b,d,c),b.child;case 14:return e=b.type,f=lg(e,b.pendingProps),f=lg(e.type,f),ii(a,b,e,f,d,c);case 15:return ki(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,Ff(d)?(a=!0,Jf(b)):a=!1,tg(b,c),Mg(b,d,e),Og(b,d,e,c),qi(null,b,d,!0,a,c);case 19:return Ai(a,b,c);case 23:return mi(a,b,c);case 24:return mi(a,b,c)}throw Error(y(156,b.tag));\n};function ik(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.flags=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childLanes=this.lanes=0;this.alternate=null}function nh(a,b,c,d){return new ik(a,b,c,d)}function ji(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction hk(a){if(\"function\"===typeof a)return ji(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Aa)return 11;if(a===Da)return 14}return 2}\nfunction Tg(a,b){var c=a.alternate;null===c?(c=nh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Vg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)ji(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ua:return Xg(c.children,e,f,b);case Ha:g=8;e|=16;break;case wa:g=8;e|=1;break;case xa:return a=nh(12,c,b,e|8),a.elementType=xa,a.type=xa,a.lanes=f,a;case Ba:return a=nh(13,c,b,e),a.type=Ba,a.elementType=Ba,a.lanes=f,a;case Ca:return a=nh(19,c,b,e),a.elementType=Ca,a.lanes=f,a;case Ia:return vi(c,e,f,b);case Ja:return a=nh(24,c,b,e),a.elementType=Ja,a.lanes=f,a;default:if(\"object\"===\ntypeof a&&null!==a)switch(a.$$typeof){case ya:g=10;break a;case za:g=9;break a;case Aa:g=11;break a;case Da:g=14;break a;case Ea:g=16;d=null;break a;case Fa:g=22;break a}throw Error(y(130,null==a?a:typeof a,\"\"));}b=nh(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Xg(a,b,c,d){a=nh(7,a,d,b);a.lanes=c;return a}function vi(a,b,c,d){a=nh(23,a,d,b);a.elementType=Ia;a.lanes=c;return a}function Ug(a,b,c){a=nh(6,a,null,b);a.lanes=c;return a}\nfunction Wg(a,b,c){b=nh(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction jk(a,b,c){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=0;this.eventTimes=Zc(0);this.expirationTimes=Zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Zc(0);this.mutableSourceEagerHydrationData=null}\nfunction kk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ta,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction lk(a,b,c,d){var e=b.current,f=Hg(),g=Ig(e);a:if(c){c=c._reactInternals;b:{if(Zb(c)!==c||1!==c.tag)throw Error(y(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(Ff(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(y(171));}if(1===c.tag){var k=c.type;if(Ff(k)){c=If(c,k,h);break a}}c=h}else c=Cf;null===b.context?b.context=c:b.pendingContext=c;b=zg(f,g);b.payload={element:a};d=void 0===d?null:d;null!==\nd&&(b.callback=d);Ag(e,b);Jg(e,g,f);return g}function mk(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nk(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function ok(a,b){nk(a,b);(a=a.alternate)&&nk(a,b)}function pk(){return null}\nfunction qk(a,b,c){var d=null!=c&&null!=c.hydrationOptions&&c.hydrationOptions.mutableSources||null;c=new jk(a,b,null!=c&&!0===c.hydrate);b=nh(3,null,null,2===b?7:1===b?3:0);c.current=b;b.stateNode=c;xg(b);a[ff]=c.current;cf(8===a.nodeType?a.parentNode:a);if(d)for(a=0;a<d.length;a++){b=d[a];var e=b._getVersion;e=e(b._source);null==c.mutableSourceEagerHydrationData?c.mutableSourceEagerHydrationData=[b,e]:c.mutableSourceEagerHydrationData.push(b,e)}this._internalRoot=c}\nqk.prototype.render=function(a){lk(a,this._internalRoot,null,null)};qk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;lk(null,a,null,function(){b[ff]=null})};function rk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}\nfunction sk(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new qk(a,0,b?{hydrate:!0}:void 0)}\nfunction tk(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if(\"function\"===typeof e){var h=e;e=function(){var a=mk(g);h.call(a)}}lk(b,g,a,e)}else{f=c._reactRootContainer=sk(c,d);g=f._internalRoot;if(\"function\"===typeof e){var k=e;e=function(){var a=mk(g);k.call(a)}}Xj(function(){lk(b,g,a,e)})}return mk(g)}ec=function(a){if(13===a.tag){var b=Hg();Jg(a,4,b);ok(a,4)}};fc=function(a){if(13===a.tag){var b=Hg();Jg(a,67108864,b);ok(a,67108864)}};\ngc=function(a){if(13===a.tag){var b=Hg(),c=Ig(a);Jg(a,c,b);ok(a,c)}};hc=function(a,b){return b()};\nyb=function(a,b,c){switch(b){case \"input\":ab(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(y(90));Wa(d);ab(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Wj;\nHb=function(a,b,c,d,e){var f=X;X|=4;try{return gg(98,a.bind(null,b,c,d,e))}finally{X=f,0===X&&(wj(),ig())}};Ib=function(){0===(X&49)&&(Vj(),Oj())};Jb=function(a,b){var c=X;X|=2;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}};function uk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rk(b))throw Error(y(200));return kk(a,b,null,c)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:\"17.0.2\",rendererPackageName:\"react-dom\"};\nvar xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=cc(a);return null===a?null:a.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||\npk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;exports.createPortal=uk;\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(y(188));throw Error(y(268,Object.keys(a)));}a=cc(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a,b){var c=X;if(0!==(c&48))return a(b);X|=1;try{if(a)return gg(99,a.bind(null,b))}finally{X=c,ig()}};exports.hydrate=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!0,c)};\nexports.render=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!rk(a))throw Error(y(40));return a._reactRootContainer?(Xj(function(){tk(null,null,a,!1,function(){a._reactRootContainer=null;a[ff]=null})}),!0):!1};exports.unstable_batchedUpdates=Wj;exports.unstable_createPortal=function(a,b){return uk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!rk(c))throw Error(y(200));if(null==a||void 0===a._reactInternals)throw Error(y(38));return tk(a,b,c,!1,d)};exports.version=\"17.0.2\";\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","/** @license React v17.0.2\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';require(\"object-assign\");var f=require(\"react\"),g=60103;exports.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");exports.Fragment=h(\"react.fragment\")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q;exports.jsxs=q;\n","/** @license React v17.0.2\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=require(\"object-assign\"),n=60103,p=60106;exports.Fragment=60107;exports.StrictMode=60108;exports.Profiler=60114;var q=60109,r=60110,t=60112;exports.Suspense=60113;var u=60115,v=60116;\nif(\"function\"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w(\"react.element\");p=w(\"react.portal\");exports.Fragment=w(\"react.fragment\");exports.StrictMode=w(\"react.strict_mode\");exports.Profiler=w(\"react.profiler\");q=w(\"react.provider\");r=w(\"react.context\");t=w(\"react.forward_ref\");exports.Suspense=w(\"react.suspense\");u=w(\"react.memo\");v=w(\"react.lazy\")}var x=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction y(a){if(null===a||\"object\"!==typeof a)return null;a=x&&a[x]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function z(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};function C(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(z(85));this.updater.enqueueSetState(this,a,b,\"setState\")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction D(){}D.prototype=C.prototype;function E(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}var F=E.prototype=new D;F.constructor=E;l(F,C.prototype);F.isPureReactComponent=!0;var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\nfunction J(a,b,c){var e,d={},k=null,h=null;if(null!=b)for(e in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)H.call(b,e)&&!I.hasOwnProperty(e)&&(d[e]=b[e]);var g=arguments.length-2;if(1===g)d.children=c;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];d.children=f}if(a&&a.defaultProps)for(e in g=a.defaultProps,g)void 0===d[e]&&(d[e]=g[e]);return{$$typeof:n,type:a,key:k,ref:h,props:d,_owner:G.current}}\nfunction K(a,b){return{$$typeof:n,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===n}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var M=/\\/+/g;function N(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction O(a,b,c,e,d){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case n:case p:h=!0}}if(h)return h=a,d=d(h),a=\"\"===e?\".\"+N(h,0):e,Array.isArray(d)?(c=\"\",null!=a&&(c=a.replace(M,\"$&/\")+\"/\"),O(d,b,c,\"\",function(a){return a})):null!=d&&(L(d)&&(d=K(d,c+(!d.key||h&&h.key===d.key?\"\":(\"\"+d.key).replace(M,\"$&/\")+\"/\")+a)),b.push(d)),1;h=0;e=\"\"===e?\".\":e+\":\";if(Array.isArray(a))for(var g=\n0;g<a.length;g++){k=a[g];var f=e+N(k,g);h+=O(k,b,c,f,d)}else if(f=y(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=e+N(k,g++),h+=O(k,b,c,f,d);else if(\"object\"===k)throw b=\"\"+a,Error(z(31,\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b));return h}function P(a,b,c){if(null==a)return a;var e=[],d=0;O(a,e,\"\",\"\",function(a){return b.call(c,a,d++)});return e}\nfunction Q(a){if(-1===a._status){var b=a._result;b=b();a._status=0;a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}if(1===a._status)return a._result;throw a._result;}var R={current:null};function S(){var a=R.current;if(null===a)throw Error(z(321));return a}var T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:l};\nexports.Children={map:P,forEach:function(a,b,c){P(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;P(a,function(){b++});return b},toArray:function(a){return P(a,function(a){return a})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};exports.Component=C;exports.PureComponent=E;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(z(267,a));var e=l({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)H.call(b,f)&&!I.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){g=Array(f);for(var m=0;m<f;m++)g[m]=arguments[m+2];e.children=g}return{$$typeof:n,type:a.type,\nkey:d,ref:k,props:e,_owner:h}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:r,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:q,_context:a};return a.Consumer=a};exports.createElement=J;exports.createFactory=function(a){var b=J.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:t,render:a}};exports.isValidElement=L;\nexports.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};exports.memo=function(a,b){return{$$typeof:u,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return S().useCallback(a,b)};exports.useContext=function(a,b){return S().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return S().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return S().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return S().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return S().useMemo(a,b)};exports.useReducer=function(a,b,c){return S().useReducer(a,b,c)};exports.useRef=function(a){return S().useRef(a)};exports.useState=function(a){return S().useState(a)};exports.version=\"17.0.2\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/** @license React v0.20.2\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f,g,h,k;if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var t=null,u=null,w=function(){if(null!==t)try{var a=exports.unstable_now();t(!0,a);t=null}catch(b){throw setTimeout(w,0),b;}};f=function(a){null!==t?setTimeout(f,0,a):(t=a,setTimeout(w,0))};g=function(a,b){u=setTimeout(a,b)};h=function(){clearTimeout(u)};exports.unstable_shouldYield=function(){return!1};k=exports.unstable_forceFrameRate=function(){}}else{var x=window.setTimeout,y=window.clearTimeout;if(\"undefined\"!==typeof console){var z=\nwindow.cancelAnimationFrame;\"function\"!==typeof window.requestAnimationFrame&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\");\"function\"!==typeof z&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\")}var A=!1,B=null,C=-1,D=5,E=0;exports.unstable_shouldYield=function(){return exports.unstable_now()>=\nE};k=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):D=0<a?Math.floor(1E3/a):5};var F=new MessageChannel,G=F.port2;F.port1.onmessage=function(){if(null!==B){var a=exports.unstable_now();E=a+D;try{B(!0,a)?G.postMessage(null):(A=!1,B=null)}catch(b){throw G.postMessage(null),b;}}else A=!1};f=function(a){B=a;A||(A=!0,G.postMessage(null))};g=function(a,b){C=\nx(function(){a(exports.unstable_now())},b)};h=function(){y(C);C=-1}}function H(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<I(e,b))a[d]=b,a[c]=e,c=d;else break a}}function J(a){a=a[0];return void 0===a?null:a}\nfunction K(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>I(n,c))void 0!==r&&0>I(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>I(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function I(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var L=[],M=[],N=1,O=null,P=3,Q=!1,R=!1,S=!1;\nfunction T(a){for(var b=J(M);null!==b;){if(null===b.callback)K(M);else if(b.startTime<=a)K(M),b.sortIndex=b.expirationTime,H(L,b);else break;b=J(M)}}function U(a){S=!1;T(a);if(!R)if(null!==J(L))R=!0,f(V);else{var b=J(M);null!==b&&g(U,b.startTime-a)}}\nfunction V(a,b){R=!1;S&&(S=!1,h());Q=!0;var c=P;try{T(b);for(O=J(L);null!==O&&(!(O.expirationTime>b)||a&&!exports.unstable_shouldYield());){var d=O.callback;if(\"function\"===typeof d){O.callback=null;P=O.priorityLevel;var e=d(O.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?O.callback=e:O===J(L)&&K(L);T(b)}else K(L);O=J(L)}if(null!==O)var m=!0;else{var n=J(M);null!==n&&g(U,n.startTime-b);m=!1}return m}finally{O=null,P=c,Q=!1}}var W=k;exports.unstable_IdlePriority=5;\nexports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){R||Q||(R=!0,f(V))};exports.unstable_getCurrentPriorityLevel=function(){return P};exports.unstable_getFirstCallbackNode=function(){return J(L)};\nexports.unstable_next=function(a){switch(P){case 1:case 2:case 3:var b=3;break;default:b=P}var c=P;P=b;try{return a()}finally{P=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=W;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=P;P=a;try{return b()}finally{P=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:N++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,H(M,a),null===J(L)&&a===J(M)&&(S?h():S=!0,g(U,c-d))):(a.sortIndex=e,H(L,a),R||Q||(R=!0,f(V)));return a};\nexports.unstable_wrapCallback=function(a){var b=P;return function(){var c=P;P=b;try{return a.apply(this,arguments)}finally{P=c}}};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","(function() {\n  var crypt = require('crypt'),\n      utf8 = require('charenc').utf8,\n      bin = require('charenc').bin,\n\n  // The core\n  sha1 = function (message) {\n    // Convert to byte array\n    if (message.constructor == String)\n      message = utf8.stringToBytes(message);\n    else if (typeof Buffer !== 'undefined' && typeof Buffer.isBuffer == 'function' && Buffer.isBuffer(message))\n      message = Array.prototype.slice.call(message, 0);\n    else if (!Array.isArray(message))\n      message = message.toString();\n\n    // otherwise assume byte array\n\n    var m  = crypt.bytesToWords(message),\n        l  = message.length * 8,\n        w  = [],\n        H0 =  1732584193,\n        H1 = -271733879,\n        H2 = -1732584194,\n        H3 =  271733878,\n        H4 = -1009589776;\n\n    // Padding\n    m[l >> 5] |= 0x80 << (24 - l % 32);\n    m[((l + 64 >>> 9) << 4) + 15] = l;\n\n    for (var i = 0; i < m.length; i += 16) {\n      var a = H0,\n          b = H1,\n          c = H2,\n          d = H3,\n          e = H4;\n\n      for (var j = 0; j < 80; j++) {\n\n        if (j < 16)\n          w[j] = m[i + j];\n        else {\n          var n = w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16];\n          w[j] = (n << 1) | (n >>> 31);\n        }\n\n        var t = ((H0 << 5) | (H0 >>> 27)) + H4 + (w[j] >>> 0) + (\n                j < 20 ? (H1 & H2 | ~H1 & H3) + 1518500249 :\n                j < 40 ? (H1 ^ H2 ^ H3) + 1859775393 :\n                j < 60 ? (H1 & H2 | H1 & H3 | H2 & H3) - 1894007588 :\n                         (H1 ^ H2 ^ H3) - 899497514);\n\n        H4 = H3;\n        H3 = H2;\n        H2 = (H1 << 30) | (H1 >>> 2);\n        H1 = H0;\n        H0 = t;\n      }\n\n      H0 += a;\n      H1 += b;\n      H2 += c;\n      H3 += d;\n      H4 += e;\n    }\n\n    return [H0, H1, H2, H3, H4];\n  },\n\n  // Public API\n  api = function (message, options) {\n    var digestbytes = crypt.wordsToBytes(sha1(message));\n    return options && options.asBytes ? digestbytes :\n        options && options.asString ? bin.bytesToString(digestbytes) :\n        crypt.bytesToHex(digestbytes);\n  };\n\n  api._blocksize = 16;\n  api._digestsize = 20;\n\n  module.exports = api;\n})();\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"2a82e7ac\" + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"react-app:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_app\"] = self[\"webpackChunkreact_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","////////////////////////////////////////////////////////////////////////////////\n//#region Types and Constants\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Actions represent the type of change to a location value.\n */\nexport enum Action {\n  /**\n   * A POP indicates a change to an arbitrary index in the history stack, such\n   * as a back or forward navigation. It does not describe the direction of the\n   * navigation, only that the current index changed.\n   *\n   * Note: This is the default action for newly created history objects.\n   */\n  Pop = \"POP\",\n\n  /**\n   * A PUSH indicates a new entry being added to the history stack, such as when\n   * a link is clicked and a new page loads. When this happens, all subsequent\n   * entries in the stack are lost.\n   */\n  Push = \"PUSH\",\n\n  /**\n   * A REPLACE indicates the entry at the current index in the history stack\n   * being replaced by a new one.\n   */\n  Replace = \"REPLACE\",\n}\n\n/**\n * The pathname, search, and hash values of a URL.\n */\nexport interface Path {\n  /**\n   * A URL pathname, beginning with a /.\n   */\n  pathname: string;\n\n  /**\n   * A URL search string, beginning with a ?.\n   */\n  search: string;\n\n  /**\n   * A URL fragment identifier, beginning with a #.\n   */\n  hash: string;\n}\n\n// TODO: (v7) Change the Location generic default from `any` to `unknown` and\n// remove Remix `useLocation` wrapper.\n\n/**\n * An entry in a history stack. A location contains information about the\n * URL path, as well as possibly some arbitrary state and a key.\n */\nexport interface Location<State = any> extends Path {\n  /**\n   * A value of arbitrary data associated with this location.\n   */\n  state: State;\n\n  /**\n   * A unique string associated with this location. May be used to safely store\n   * and retrieve data in some other storage API, like `localStorage`.\n   *\n   * Note: This value is always \"default\" on the initial location.\n   */\n  key: string;\n}\n\n/**\n * A change to the current location.\n */\nexport interface Update {\n  /**\n   * The action that triggered the change.\n   */\n  action: Action;\n\n  /**\n   * The new location.\n   */\n  location: Location;\n\n  /**\n   * The delta between this location and the former location in the history stack\n   */\n  delta: number | null;\n}\n\n/**\n * A function that receives notifications about location changes.\n */\nexport interface Listener {\n  (update: Update): void;\n}\n\n/**\n * Describes a location that is the destination of some navigation, either via\n * `history.push` or `history.replace`. This may be either a URL or the pieces\n * of a URL path.\n */\nexport type To = string | Partial<Path>;\n\n/**\n * A history is an interface to the navigation stack. The history serves as the\n * source of truth for the current location, as well as provides a set of\n * methods that may be used to change it.\n *\n * It is similar to the DOM's `window.history` object, but with a smaller, more\n * focused API.\n */\nexport interface History {\n  /**\n   * The last action that modified the current location. This will always be\n   * Action.Pop when a history instance is first created. This value is mutable.\n   */\n  readonly action: Action;\n\n  /**\n   * The current location. This value is mutable.\n   */\n  readonly location: Location;\n\n  /**\n   * Returns a valid href for the given `to` value that may be used as\n   * the value of an <a href> attribute.\n   *\n   * @param to - The destination URL\n   */\n  createHref(to: To): string;\n\n  /**\n   * Returns a URL for the given `to` value\n   *\n   * @param to - The destination URL\n   */\n  createURL(to: To): URL;\n\n  /**\n   * Encode a location the same way window.history would do (no-op for memory\n   * history) so we ensure our PUSH/REPLACE navigations for data routers\n   * behave the same as POP\n   *\n   * @param to Unencoded path\n   */\n  encodeLocation(to: To): Path;\n\n  /**\n   * Pushes a new location onto the history stack, increasing its length by one.\n   * If there were any entries in the stack after the current one, they are\n   * lost.\n   *\n   * @param to - The new URL\n   * @param state - Data to associate with the new location\n   */\n  push(to: To, state?: any): void;\n\n  /**\n   * Replaces the current location in the history stack with a new one.  The\n   * location that was replaced will no longer be available.\n   *\n   * @param to - The new URL\n   * @param state - Data to associate with the new location\n   */\n  replace(to: To, state?: any): void;\n\n  /**\n   * Navigates `n` entries backward/forward in the history stack relative to the\n   * current index. For example, a \"back\" navigation would use go(-1).\n   *\n   * @param delta - The delta in the stack index\n   */\n  go(delta: number): void;\n\n  /**\n   * Sets up a listener that will be called whenever the current location\n   * changes.\n   *\n   * @param listener - A function that will be called when the location changes\n   * @returns unlisten - A function that may be used to stop listening\n   */\n  listen(listener: Listener): () => void;\n}\n\ntype HistoryState = {\n  usr: any;\n  key?: string;\n  idx: number;\n};\n\nconst PopStateEventType = \"popstate\";\n//#endregion\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Memory History\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * A user-supplied object that describes a location. Used when providing\n * entries to `createMemoryHistory` via its `initialEntries` option.\n */\nexport type InitialEntry = string | Partial<Location>;\n\nexport type MemoryHistoryOptions = {\n  initialEntries?: InitialEntry[];\n  initialIndex?: number;\n  v5Compat?: boolean;\n};\n\n/**\n * A memory history stores locations in memory. This is useful in stateful\n * environments where there is no web browser, such as node tests or React\n * Native.\n */\nexport interface MemoryHistory extends History {\n  /**\n   * The current index in the history stack.\n   */\n  readonly index: number;\n}\n\n/**\n * Memory history stores the current location in memory. It is designed for use\n * in stateful non-browser environments like tests and React Native.\n */\nexport function createMemoryHistory(\n  options: MemoryHistoryOptions = {}\n): MemoryHistory {\n  let { initialEntries = [\"/\"], initialIndex, v5Compat = false } = options;\n  let entries: Location[]; // Declare so we can access from createMemoryLocation\n  entries = initialEntries.map((entry, index) =>\n    createMemoryLocation(\n      entry,\n      typeof entry === \"string\" ? null : entry.state,\n      index === 0 ? \"default\" : undefined\n    )\n  );\n  let index = clampIndex(\n    initialIndex == null ? entries.length - 1 : initialIndex\n  );\n  let action = Action.Pop;\n  let listener: Listener | null = null;\n\n  function clampIndex(n: number): number {\n    return Math.min(Math.max(n, 0), entries.length - 1);\n  }\n  function getCurrentLocation(): Location {\n    return entries[index];\n  }\n  function createMemoryLocation(\n    to: To,\n    state: any = null,\n    key?: string\n  ): Location {\n    let location = createLocation(\n      entries ? getCurrentLocation().pathname : \"/\",\n      to,\n      state,\n      key\n    );\n    warning(\n      location.pathname.charAt(0) === \"/\",\n      `relative pathnames are not supported in memory history: ${JSON.stringify(\n        to\n      )}`\n    );\n    return location;\n  }\n\n  function createHref(to: To) {\n    return typeof to === \"string\" ? to : createPath(to);\n  }\n\n  let history: MemoryHistory = {\n    get index() {\n      return index;\n    },\n    get action() {\n      return action;\n    },\n    get location() {\n      return getCurrentLocation();\n    },\n    createHref,\n    createURL(to) {\n      return new URL(createHref(to), \"http://localhost\");\n    },\n    encodeLocation(to: To) {\n      let path = typeof to === \"string\" ? parsePath(to) : to;\n      return {\n        pathname: path.pathname || \"\",\n        search: path.search || \"\",\n        hash: path.hash || \"\",\n      };\n    },\n    push(to, state) {\n      action = Action.Push;\n      let nextLocation = createMemoryLocation(to, state);\n      index += 1;\n      entries.splice(index, entries.length, nextLocation);\n      if (v5Compat && listener) {\n        listener({ action, location: nextLocation, delta: 1 });\n      }\n    },\n    replace(to, state) {\n      action = Action.Replace;\n      let nextLocation = createMemoryLocation(to, state);\n      entries[index] = nextLocation;\n      if (v5Compat && listener) {\n        listener({ action, location: nextLocation, delta: 0 });\n      }\n    },\n    go(delta) {\n      action = Action.Pop;\n      let nextIndex = clampIndex(index + delta);\n      let nextLocation = entries[nextIndex];\n      index = nextIndex;\n      if (listener) {\n        listener({ action, location: nextLocation, delta });\n      }\n    },\n    listen(fn: Listener) {\n      listener = fn;\n      return () => {\n        listener = null;\n      };\n    },\n  };\n\n  return history;\n}\n//#endregion\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Browser History\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * A browser history stores the current location in regular URLs in a web\n * browser environment. This is the standard for most web apps and provides the\n * cleanest URLs the browser's address bar.\n *\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#browserhistory\n */\nexport interface BrowserHistory extends UrlHistory {}\n\nexport type BrowserHistoryOptions = UrlHistoryOptions;\n\n/**\n * Browser history stores the location in regular URLs. This is the standard for\n * most web apps, but it requires some configuration on the server to ensure you\n * serve the same app at multiple URLs.\n *\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#createbrowserhistory\n */\nexport function createBrowserHistory(\n  options: BrowserHistoryOptions = {}\n): BrowserHistory {\n  function createBrowserLocation(\n    window: Window,\n    globalHistory: Window[\"history\"]\n  ) {\n    let { pathname, search, hash } = window.location;\n    return createLocation(\n      \"\",\n      { pathname, search, hash },\n      // state defaults to `null` because `window.history.state` does\n      (globalHistory.state && globalHistory.state.usr) || null,\n      (globalHistory.state && globalHistory.state.key) || \"default\"\n    );\n  }\n\n  function createBrowserHref(window: Window, to: To) {\n    return typeof to === \"string\" ? to : createPath(to);\n  }\n\n  return getUrlBasedHistory(\n    createBrowserLocation,\n    createBrowserHref,\n    null,\n    options\n  );\n}\n//#endregion\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Hash History\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * A hash history stores the current location in the fragment identifier portion\n * of the URL in a web browser environment.\n *\n * This is ideal for apps that do not control the server for some reason\n * (because the fragment identifier is never sent to the server), including some\n * shared hosting environments that do not provide fine-grained controls over\n * which pages are served at which URLs.\n *\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#hashhistory\n */\nexport interface HashHistory extends UrlHistory {}\n\nexport type HashHistoryOptions = UrlHistoryOptions;\n\n/**\n * Hash history stores the location in window.location.hash. This makes it ideal\n * for situations where you don't want to send the location to the server for\n * some reason, either because you do cannot configure it or the URL space is\n * reserved for something else.\n *\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#createhashhistory\n */\nexport function createHashHistory(\n  options: HashHistoryOptions = {}\n): HashHistory {\n  function createHashLocation(\n    window: Window,\n    globalHistory: Window[\"history\"]\n  ) {\n    let {\n      pathname = \"/\",\n      search = \"\",\n      hash = \"\",\n    } = parsePath(window.location.hash.substr(1));\n\n    // Hash URL should always have a leading / just like window.location.pathname\n    // does, so if an app ends up at a route like /#something then we add a\n    // leading slash so all of our path-matching behaves the same as if it would\n    // in a browser router.  This is particularly important when there exists a\n    // root splat route (<Route path=\"*\">) since that matches internally against\n    // \"/*\" and we'd expect /#something to 404 in a hash router app.\n    if (!pathname.startsWith(\"/\") && !pathname.startsWith(\".\")) {\n      pathname = \"/\" + pathname;\n    }\n\n    return createLocation(\n      \"\",\n      { pathname, search, hash },\n      // state defaults to `null` because `window.history.state` does\n      (globalHistory.state && globalHistory.state.usr) || null,\n      (globalHistory.state && globalHistory.state.key) || \"default\"\n    );\n  }\n\n  function createHashHref(window: Window, to: To) {\n    let base = window.document.querySelector(\"base\");\n    let href = \"\";\n\n    if (base && base.getAttribute(\"href\")) {\n      let url = window.location.href;\n      let hashIndex = url.indexOf(\"#\");\n      href = hashIndex === -1 ? url : url.slice(0, hashIndex);\n    }\n\n    return href + \"#\" + (typeof to === \"string\" ? to : createPath(to));\n  }\n\n  function validateHashLocation(location: Location, to: To) {\n    warning(\n      location.pathname.charAt(0) === \"/\",\n      `relative pathnames are not supported in hash history.push(${JSON.stringify(\n        to\n      )})`\n    );\n  }\n\n  return getUrlBasedHistory(\n    createHashLocation,\n    createHashHref,\n    validateHashLocation,\n    options\n  );\n}\n//#endregion\n\n////////////////////////////////////////////////////////////////////////////////\n//#region UTILS\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * @private\n */\nexport function invariant(value: boolean, message?: string): asserts value;\nexport function invariant<T>(\n  value: T | null | undefined,\n  message?: string\n): asserts value is T;\nexport function invariant(value: any, message?: string) {\n  if (value === false || value === null || typeof value === \"undefined\") {\n    throw new Error(message);\n  }\n}\n\nexport function warning(cond: any, message: string) {\n  if (!cond) {\n    // eslint-disable-next-line no-console\n    if (typeof console !== \"undefined\") console.warn(message);\n\n    try {\n      // Welcome to debugging history!\n      //\n      // This error is thrown as a convenience, so you can more easily\n      // find the source for a warning that appears in the console by\n      // enabling \"pause on exceptions\" in your JavaScript debugger.\n      throw new Error(message);\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  }\n}\n\nfunction createKey() {\n  return Math.random().toString(36).substr(2, 8);\n}\n\n/**\n * For browser-based histories, we combine the state and key into an object\n */\nfunction getHistoryState(location: Location, index: number): HistoryState {\n  return {\n    usr: location.state,\n    key: location.key,\n    idx: index,\n  };\n}\n\n/**\n * Creates a Location object with a unique key from the given Path\n */\nexport function createLocation(\n  current: string | Location,\n  to: To,\n  state: any = null,\n  key?: string\n): Readonly<Location> {\n  let location: Readonly<Location> = {\n    pathname: typeof current === \"string\" ? current : current.pathname,\n    search: \"\",\n    hash: \"\",\n    ...(typeof to === \"string\" ? parsePath(to) : to),\n    state,\n    // TODO: This could be cleaned up.  push/replace should probably just take\n    // full Locations now and avoid the need to run through this flow at all\n    // But that's a pretty big refactor to the current test suite so going to\n    // keep as is for the time being and just let any incoming keys take precedence\n    key: (to && (to as Location).key) || key || createKey(),\n  };\n  return location;\n}\n\n/**\n * Creates a string URL path from the given pathname, search, and hash components.\n */\nexport function createPath({\n  pathname = \"/\",\n  search = \"\",\n  hash = \"\",\n}: Partial<Path>) {\n  if (search && search !== \"?\")\n    pathname += search.charAt(0) === \"?\" ? search : \"?\" + search;\n  if (hash && hash !== \"#\")\n    pathname += hash.charAt(0) === \"#\" ? hash : \"#\" + hash;\n  return pathname;\n}\n\n/**\n * Parses a string URL path into its separate pathname, search, and hash components.\n */\nexport function parsePath(path: string): Partial<Path> {\n  let parsedPath: Partial<Path> = {};\n\n  if (path) {\n    let hashIndex = path.indexOf(\"#\");\n    if (hashIndex >= 0) {\n      parsedPath.hash = path.substr(hashIndex);\n      path = path.substr(0, hashIndex);\n    }\n\n    let searchIndex = path.indexOf(\"?\");\n    if (searchIndex >= 0) {\n      parsedPath.search = path.substr(searchIndex);\n      path = path.substr(0, searchIndex);\n    }\n\n    if (path) {\n      parsedPath.pathname = path;\n    }\n  }\n\n  return parsedPath;\n}\n\nexport interface UrlHistory extends History {}\n\nexport type UrlHistoryOptions = {\n  window?: Window;\n  v5Compat?: boolean;\n};\n\nfunction getUrlBasedHistory(\n  getLocation: (window: Window, globalHistory: Window[\"history\"]) => Location,\n  createHref: (window: Window, to: To) => string,\n  validateLocation: ((location: Location, to: To) => void) | null,\n  options: UrlHistoryOptions = {}\n): UrlHistory {\n  let { window = document.defaultView!, v5Compat = false } = options;\n  let globalHistory = window.history;\n  let action = Action.Pop;\n  let listener: Listener | null = null;\n\n  let index = getIndex()!;\n  // Index should only be null when we initialize. If not, it's because the\n  // user called history.pushState or history.replaceState directly, in which\n  // case we should log a warning as it will result in bugs.\n  if (index == null) {\n    index = 0;\n    globalHistory.replaceState({ ...globalHistory.state, idx: index }, \"\");\n  }\n\n  function getIndex(): number {\n    let state = globalHistory.state || { idx: null };\n    return state.idx;\n  }\n\n  function handlePop() {\n    action = Action.Pop;\n    let nextIndex = getIndex();\n    let delta = nextIndex == null ? null : nextIndex - index;\n    index = nextIndex;\n    if (listener) {\n      listener({ action, location: history.location, delta });\n    }\n  }\n\n  function push(to: To, state?: any) {\n    action = Action.Push;\n    let location = createLocation(history.location, to, state);\n    if (validateLocation) validateLocation(location, to);\n\n    index = getIndex() + 1;\n    let historyState = getHistoryState(location, index);\n    let url = history.createHref(location);\n\n    // try...catch because iOS limits us to 100 pushState calls :/\n    try {\n      globalHistory.pushState(historyState, \"\", url);\n    } catch (error) {\n      // If the exception is because `state` can't be serialized, let that throw\n      // outwards just like a replace call would so the dev knows the cause\n      // https://html.spec.whatwg.org/multipage/nav-history-apis.html#shared-history-push/replace-state-steps\n      // https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeinternal\n      if (error instanceof DOMException && error.name === \"DataCloneError\") {\n        throw error;\n      }\n      // They are going to lose state here, but there is no real\n      // way to warn them about it since the page will refresh...\n      window.location.assign(url);\n    }\n\n    if (v5Compat && listener) {\n      listener({ action, location: history.location, delta: 1 });\n    }\n  }\n\n  function replace(to: To, state?: any) {\n    action = Action.Replace;\n    let location = createLocation(history.location, to, state);\n    if (validateLocation) validateLocation(location, to);\n\n    index = getIndex();\n    let historyState = getHistoryState(location, index);\n    let url = history.createHref(location);\n    globalHistory.replaceState(historyState, \"\", url);\n\n    if (v5Compat && listener) {\n      listener({ action, location: history.location, delta: 0 });\n    }\n  }\n\n  function createURL(to: To): URL {\n    // window.location.origin is \"null\" (the literal string value) in Firefox\n    // under certain conditions, notably when serving from a local HTML file\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=878297\n    let base =\n      window.location.origin !== \"null\"\n        ? window.location.origin\n        : window.location.href;\n\n    let href = typeof to === \"string\" ? to : createPath(to);\n    // Treating this as a full URL will strip any trailing spaces so we need to\n    // pre-encode them since they might be part of a matching splat param from\n    // an ancestor route\n    href = href.replace(/ $/, \"%20\");\n    invariant(\n      base,\n      `No window.location.(origin|href) available to create URL for href: ${href}`\n    );\n    return new URL(href, base);\n  }\n\n  let history: History = {\n    get action() {\n      return action;\n    },\n    get location() {\n      return getLocation(window, globalHistory);\n    },\n    listen(fn: Listener) {\n      if (listener) {\n        throw new Error(\"A history only accepts one active listener\");\n      }\n      window.addEventListener(PopStateEventType, handlePop);\n      listener = fn;\n\n      return () => {\n        window.removeEventListener(PopStateEventType, handlePop);\n        listener = null;\n      };\n    },\n    createHref(to) {\n      return createHref(window, to);\n    },\n    createURL,\n    encodeLocation(to) {\n      // Encode a Location the same way window.location would\n      let url = createURL(to);\n      return {\n        pathname: url.pathname,\n        search: url.search,\n        hash: url.hash,\n      };\n    },\n    push,\n    replace,\n    go(n) {\n      return globalHistory.go(n);\n    },\n  };\n\n  return history;\n}\n\n//#endregion\n","import type { Location, Path, To } from \"./history\";\nimport { invariant, parsePath, warning } from \"./history\";\n\n/**\n * Map of routeId -> data returned from a loader/action/error\n */\nexport interface RouteData {\n  [routeId: string]: any;\n}\n\nexport enum ResultType {\n  data = \"data\",\n  deferred = \"deferred\",\n  redirect = \"redirect\",\n  error = \"error\",\n}\n\n/**\n * Successful result from a loader or action\n */\nexport interface SuccessResult {\n  type: ResultType.data;\n  data: unknown;\n  statusCode?: number;\n  headers?: Headers;\n}\n\n/**\n * Successful defer() result from a loader or action\n */\nexport interface DeferredResult {\n  type: ResultType.deferred;\n  deferredData: DeferredData;\n  statusCode?: number;\n  headers?: Headers;\n}\n\n/**\n * Redirect result from a loader or action\n */\nexport interface RedirectResult {\n  type: ResultType.redirect;\n  // We keep the raw Response for redirects so we can return it verbatim\n  response: Response;\n}\n\n/**\n * Unsuccessful result from a loader or action\n */\nexport interface ErrorResult {\n  type: ResultType.error;\n  error: unknown;\n  statusCode?: number;\n  headers?: Headers;\n}\n\n/**\n * Result from a loader or action - potentially successful or unsuccessful\n */\nexport type DataResult =\n  | SuccessResult\n  | DeferredResult\n  | RedirectResult\n  | ErrorResult;\n\n/**\n * Result from a loader or action called via dataStrategy\n */\nexport interface HandlerResult {\n  type: \"data\" | \"error\";\n  result: unknown; // data, Error, Response, DeferredData\n  status?: number;\n}\n\ntype LowerCaseFormMethod = \"get\" | \"post\" | \"put\" | \"patch\" | \"delete\";\ntype UpperCaseFormMethod = Uppercase<LowerCaseFormMethod>;\n\n/**\n * Users can specify either lowercase or uppercase form methods on `<Form>`,\n * useSubmit(), `<fetcher.Form>`, etc.\n */\nexport type HTMLFormMethod = LowerCaseFormMethod | UpperCaseFormMethod;\n\n/**\n * Active navigation/fetcher form methods are exposed in lowercase on the\n * RouterState\n */\nexport type FormMethod = LowerCaseFormMethod;\nexport type MutationFormMethod = Exclude<FormMethod, \"get\">;\n\n/**\n * In v7, active navigation/fetcher form methods are exposed in uppercase on the\n * RouterState.  This is to align with the normalization done via fetch().\n */\nexport type V7_FormMethod = UpperCaseFormMethod;\nexport type V7_MutationFormMethod = Exclude<V7_FormMethod, \"GET\">;\n\nexport type FormEncType =\n  | \"application/x-www-form-urlencoded\"\n  | \"multipart/form-data\"\n  | \"application/json\"\n  | \"text/plain\";\n\n// Thanks https://github.com/sindresorhus/type-fest!\ntype JsonObject = { [Key in string]: JsonValue } & {\n  [Key in string]?: JsonValue | undefined;\n};\ntype JsonArray = JsonValue[] | readonly JsonValue[];\ntype JsonPrimitive = string | number | boolean | null;\ntype JsonValue = JsonPrimitive | JsonObject | JsonArray;\n\n/**\n * @private\n * Internal interface to pass around for action submissions, not intended for\n * external consumption\n */\nexport type Submission =\n  | {\n      formMethod: FormMethod | V7_FormMethod;\n      formAction: string;\n      formEncType: FormEncType;\n      formData: FormData;\n      json: undefined;\n      text: undefined;\n    }\n  | {\n      formMethod: FormMethod | V7_FormMethod;\n      formAction: string;\n      formEncType: FormEncType;\n      formData: undefined;\n      json: JsonValue;\n      text: undefined;\n    }\n  | {\n      formMethod: FormMethod | V7_FormMethod;\n      formAction: string;\n      formEncType: FormEncType;\n      formData: undefined;\n      json: undefined;\n      text: string;\n    };\n\n/**\n * @private\n * Arguments passed to route loader/action functions.  Same for now but we keep\n * this as a private implementation detail in case they diverge in the future.\n */\ninterface DataFunctionArgs<Context> {\n  request: Request;\n  params: Params;\n  context?: Context;\n}\n\n// TODO: (v7) Change the defaults from any to unknown in and remove Remix wrappers:\n//   ActionFunction, ActionFunctionArgs, LoaderFunction, LoaderFunctionArgs\n//   Also, make them a type alias instead of an interface\n\n/**\n * Arguments passed to loader functions\n */\nexport interface LoaderFunctionArgs<Context = any>\n  extends DataFunctionArgs<Context> {}\n\n/**\n * Arguments passed to action functions\n */\nexport interface ActionFunctionArgs<Context = any>\n  extends DataFunctionArgs<Context> {}\n\n/**\n * Loaders and actions can return anything except `undefined` (`null` is a\n * valid return value if there is no data to return).  Responses are preferred\n * and will ease any future migration to Remix\n */\ntype DataFunctionValue = Response | NonNullable<unknown> | null;\n\ntype DataFunctionReturnValue = Promise<DataFunctionValue> | DataFunctionValue;\n\n/**\n * Route loader function signature\n */\nexport type LoaderFunction<Context = any> = {\n  (\n    args: LoaderFunctionArgs<Context>,\n    handlerCtx?: unknown\n  ): DataFunctionReturnValue;\n} & { hydrate?: boolean };\n\n/**\n * Route action function signature\n */\nexport interface ActionFunction<Context = any> {\n  (\n    args: ActionFunctionArgs<Context>,\n    handlerCtx?: unknown\n  ): DataFunctionReturnValue;\n}\n\n/**\n * Arguments passed to shouldRevalidate function\n */\nexport interface ShouldRevalidateFunctionArgs {\n  currentUrl: URL;\n  currentParams: AgnosticDataRouteMatch[\"params\"];\n  nextUrl: URL;\n  nextParams: AgnosticDataRouteMatch[\"params\"];\n  formMethod?: Submission[\"formMethod\"];\n  formAction?: Submission[\"formAction\"];\n  formEncType?: Submission[\"formEncType\"];\n  text?: Submission[\"text\"];\n  formData?: Submission[\"formData\"];\n  json?: Submission[\"json\"];\n  unstable_actionStatus?: number;\n  actionResult?: any;\n  defaultShouldRevalidate: boolean;\n}\n\n/**\n * Route shouldRevalidate function signature.  This runs after any submission\n * (navigation or fetcher), so we flatten the navigation/fetcher submission\n * onto the arguments.  It shouldn't matter whether it came from a navigation\n * or a fetcher, what really matters is the URLs and the formData since loaders\n * have to re-run based on the data models that were potentially mutated.\n */\nexport interface ShouldRevalidateFunction {\n  (args: ShouldRevalidateFunctionArgs): boolean;\n}\n\n/**\n * Function provided by the framework-aware layers to set `hasErrorBoundary`\n * from the framework-aware `errorElement` prop\n *\n * @deprecated Use `mapRouteProperties` instead\n */\nexport interface DetectErrorBoundaryFunction {\n  (route: AgnosticRouteObject): boolean;\n}\n\nexport interface DataStrategyMatch\n  extends AgnosticRouteMatch<string, AgnosticDataRouteObject> {\n  shouldLoad: boolean;\n  resolve: (\n    handlerOverride?: (\n      handler: (ctx?: unknown) => DataFunctionReturnValue\n    ) => Promise<HandlerResult>\n  ) => Promise<HandlerResult>;\n}\n\nexport interface DataStrategyFunctionArgs<Context = any>\n  extends DataFunctionArgs<Context> {\n  matches: DataStrategyMatch[];\n}\n\nexport interface DataStrategyFunction {\n  (args: DataStrategyFunctionArgs): Promise<HandlerResult[]>;\n}\n\nexport interface AgnosticPatchRoutesOnMissFunction<\n  M extends AgnosticRouteMatch = AgnosticRouteMatch\n> {\n  (opts: {\n    path: string;\n    matches: M[];\n    patch: (routeId: string | null, children: AgnosticRouteObject[]) => void;\n  }): void | Promise<void>;\n}\n\n/**\n * Function provided by the framework-aware layers to set any framework-specific\n * properties from framework-agnostic properties\n */\nexport interface MapRoutePropertiesFunction {\n  (route: AgnosticRouteObject): {\n    hasErrorBoundary: boolean;\n  } & Record<string, any>;\n}\n\n/**\n * Keys we cannot change from within a lazy() function. We spread all other keys\n * onto the route. Either they're meaningful to the router, or they'll get\n * ignored.\n */\nexport type ImmutableRouteKey =\n  | \"lazy\"\n  | \"caseSensitive\"\n  | \"path\"\n  | \"id\"\n  | \"index\"\n  | \"children\";\n\nexport const immutableRouteKeys = new Set<ImmutableRouteKey>([\n  \"lazy\",\n  \"caseSensitive\",\n  \"path\",\n  \"id\",\n  \"index\",\n  \"children\",\n]);\n\ntype RequireOne<T, Key = keyof T> = Exclude<\n  {\n    [K in keyof T]: K extends Key ? Omit<T, K> & Required<Pick<T, K>> : never;\n  }[keyof T],\n  undefined\n>;\n\n/**\n * lazy() function to load a route definition, which can add non-matching\n * related properties to a route\n */\nexport interface LazyRouteFunction<R extends AgnosticRouteObject> {\n  (): Promise<RequireOne<Omit<R, ImmutableRouteKey>>>;\n}\n\n/**\n * Base RouteObject with common props shared by all types of routes\n */\ntype AgnosticBaseRouteObject = {\n  caseSensitive?: boolean;\n  path?: string;\n  id?: string;\n  loader?: LoaderFunction | boolean;\n  action?: ActionFunction | boolean;\n  hasErrorBoundary?: boolean;\n  shouldRevalidate?: ShouldRevalidateFunction;\n  handle?: any;\n  lazy?: LazyRouteFunction<AgnosticBaseRouteObject>;\n};\n\n/**\n * Index routes must not have children\n */\nexport type AgnosticIndexRouteObject = AgnosticBaseRouteObject & {\n  children?: undefined;\n  index: true;\n};\n\n/**\n * Non-index routes may have children, but cannot have index\n */\nexport type AgnosticNonIndexRouteObject = AgnosticBaseRouteObject & {\n  children?: AgnosticRouteObject[];\n  index?: false;\n};\n\n/**\n * A route object represents a logical route, with (optionally) its child\n * routes organized in a tree-like structure.\n */\nexport type AgnosticRouteObject =\n  | AgnosticIndexRouteObject\n  | AgnosticNonIndexRouteObject;\n\nexport type AgnosticDataIndexRouteObject = AgnosticIndexRouteObject & {\n  id: string;\n};\n\nexport type AgnosticDataNonIndexRouteObject = AgnosticNonIndexRouteObject & {\n  children?: AgnosticDataRouteObject[];\n  id: string;\n};\n\n/**\n * A data route object, which is just a RouteObject with a required unique ID\n */\nexport type AgnosticDataRouteObject =\n  | AgnosticDataIndexRouteObject\n  | AgnosticDataNonIndexRouteObject;\n\nexport type RouteManifest = Record<string, AgnosticDataRouteObject | undefined>;\n\n// Recursive helper for finding path parameters in the absence of wildcards\ntype _PathParam<Path extends string> =\n  // split path into individual path segments\n  Path extends `${infer L}/${infer R}`\n    ? _PathParam<L> | _PathParam<R>\n    : // find params after `:`\n    Path extends `:${infer Param}`\n    ? Param extends `${infer Optional}?`\n      ? Optional\n      : Param\n    : // otherwise, there aren't any params present\n      never;\n\n/**\n * Examples:\n * \"/a/b/*\" -> \"*\"\n * \":a\" -> \"a\"\n * \"/a/:b\" -> \"b\"\n * \"/a/blahblahblah:b\" -> \"b\"\n * \"/:a/:b\" -> \"a\" | \"b\"\n * \"/:a/b/:c/*\" -> \"a\" | \"c\" | \"*\"\n */\nexport type PathParam<Path extends string> =\n  // check if path is just a wildcard\n  Path extends \"*\" | \"/*\"\n    ? \"*\"\n    : // look for wildcard at the end of the path\n    Path extends `${infer Rest}/*`\n    ? \"*\" | _PathParam<Rest>\n    : // look for params in the absence of wildcards\n      _PathParam<Path>;\n\n// Attempt to parse the given string segment. If it fails, then just return the\n// plain string type as a default fallback. Otherwise, return the union of the\n// parsed string literals that were referenced as dynamic segments in the route.\nexport type ParamParseKey<Segment extends string> =\n  // if you could not find path params, fallback to `string`\n  [PathParam<Segment>] extends [never] ? string : PathParam<Segment>;\n\n/**\n * The parameters that were parsed from the URL path.\n */\nexport type Params<Key extends string = string> = {\n  readonly [key in Key]: string | undefined;\n};\n\n/**\n * A RouteMatch contains info about how a route matched a URL.\n */\nexport interface AgnosticRouteMatch<\n  ParamKey extends string = string,\n  RouteObjectType extends AgnosticRouteObject = AgnosticRouteObject\n> {\n  /**\n   * The names and values of dynamic parameters in the URL.\n   */\n  params: Params<ParamKey>;\n  /**\n   * The portion of the URL pathname that was matched.\n   */\n  pathname: string;\n  /**\n   * The portion of the URL pathname that was matched before child routes.\n   */\n  pathnameBase: string;\n  /**\n   * The route object that was used to match.\n   */\n  route: RouteObjectType;\n}\n\nexport interface AgnosticDataRouteMatch\n  extends AgnosticRouteMatch<string, AgnosticDataRouteObject> {}\n\nfunction isIndexRoute(\n  route: AgnosticRouteObject\n): route is AgnosticIndexRouteObject {\n  return route.index === true;\n}\n\n// Walk the route tree generating unique IDs where necessary, so we are working\n// solely with AgnosticDataRouteObject's within the Router\nexport function convertRoutesToDataRoutes(\n  routes: AgnosticRouteObject[],\n  mapRouteProperties: MapRoutePropertiesFunction,\n  parentPath: string[] = [],\n  manifest: RouteManifest = {}\n): AgnosticDataRouteObject[] {\n  return routes.map((route, index) => {\n    let treePath = [...parentPath, String(index)];\n    let id = typeof route.id === \"string\" ? route.id : treePath.join(\"-\");\n    invariant(\n      route.index !== true || !route.children,\n      `Cannot specify children on an index route`\n    );\n    invariant(\n      !manifest[id],\n      `Found a route id collision on id \"${id}\".  Route ` +\n        \"id's must be globally unique within Data Router usages\"\n    );\n\n    if (isIndexRoute(route)) {\n      let indexRoute: AgnosticDataIndexRouteObject = {\n        ...route,\n        ...mapRouteProperties(route),\n        id,\n      };\n      manifest[id] = indexRoute;\n      return indexRoute;\n    } else {\n      let pathOrLayoutRoute: AgnosticDataNonIndexRouteObject = {\n        ...route,\n        ...mapRouteProperties(route),\n        id,\n        children: undefined,\n      };\n      manifest[id] = pathOrLayoutRoute;\n\n      if (route.children) {\n        pathOrLayoutRoute.children = convertRoutesToDataRoutes(\n          route.children,\n          mapRouteProperties,\n          treePath,\n          manifest\n        );\n      }\n\n      return pathOrLayoutRoute;\n    }\n  });\n}\n\n/**\n * Matches the given routes to a location and returns the match data.\n *\n * @see https://reactrouter.com/utils/match-routes\n */\nexport function matchRoutes<\n  RouteObjectType extends AgnosticRouteObject = AgnosticRouteObject\n>(\n  routes: RouteObjectType[],\n  locationArg: Partial<Location> | string,\n  basename = \"/\"\n): AgnosticRouteMatch<string, RouteObjectType>[] | null {\n  return matchRoutesImpl(routes, locationArg, basename, false);\n}\n\nexport function matchRoutesImpl<\n  RouteObjectType extends AgnosticRouteObject = AgnosticRouteObject\n>(\n  routes: RouteObjectType[],\n  locationArg: Partial<Location> | string,\n  basename: string,\n  allowPartial: boolean\n): AgnosticRouteMatch<string, RouteObjectType>[] | null {\n  let location =\n    typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n\n  let pathname = stripBasename(location.pathname || \"/\", basename);\n\n  if (pathname == null) {\n    return null;\n  }\n\n  let branches = flattenRoutes(routes);\n  rankRouteBranches(branches);\n\n  let matches = null;\n  for (let i = 0; matches == null && i < branches.length; ++i) {\n    // Incoming pathnames are generally encoded from either window.location\n    // or from router.navigate, but we want to match against the unencoded\n    // paths in the route definitions.  Memory router locations won't be\n    // encoded here but there also shouldn't be anything to decode so this\n    // should be a safe operation.  This avoids needing matchRoutes to be\n    // history-aware.\n    let decoded = decodePath(pathname);\n    matches = matchRouteBranch<string, RouteObjectType>(\n      branches[i],\n      decoded,\n      allowPartial\n    );\n  }\n\n  return matches;\n}\n\nexport interface UIMatch<Data = unknown, Handle = unknown> {\n  id: string;\n  pathname: string;\n  params: AgnosticRouteMatch[\"params\"];\n  data: Data;\n  handle: Handle;\n}\n\nexport function convertRouteMatchToUiMatch(\n  match: AgnosticDataRouteMatch,\n  loaderData: RouteData\n): UIMatch {\n  let { route, pathname, params } = match;\n  return {\n    id: route.id,\n    pathname,\n    params,\n    data: loaderData[route.id],\n    handle: route.handle,\n  };\n}\n\ninterface RouteMeta<\n  RouteObjectType extends AgnosticRouteObject = AgnosticRouteObject\n> {\n  relativePath: string;\n  caseSensitive: boolean;\n  childrenIndex: number;\n  route: RouteObjectType;\n}\n\ninterface RouteBranch<\n  RouteObjectType extends AgnosticRouteObject = AgnosticRouteObject\n> {\n  path: string;\n  score: number;\n  routesMeta: RouteMeta<RouteObjectType>[];\n}\n\nfunction flattenRoutes<\n  RouteObjectType extends AgnosticRouteObject = AgnosticRouteObject\n>(\n  routes: RouteObjectType[],\n  branches: RouteBranch<RouteObjectType>[] = [],\n  parentsMeta: RouteMeta<RouteObjectType>[] = [],\n  parentPath = \"\"\n): RouteBranch<RouteObjectType>[] {\n  let flattenRoute = (\n    route: RouteObjectType,\n    index: number,\n    relativePath?: string\n  ) => {\n    let meta: RouteMeta<RouteObjectType> = {\n      relativePath:\n        relativePath === undefined ? route.path || \"\" : relativePath,\n      caseSensitive: route.caseSensitive === true,\n      childrenIndex: index,\n      route,\n    };\n\n    if (meta.relativePath.startsWith(\"/\")) {\n      invariant(\n        meta.relativePath.startsWith(parentPath),\n        `Absolute route path \"${meta.relativePath}\" nested under path ` +\n          `\"${parentPath}\" is not valid. An absolute child route path ` +\n          `must start with the combined path of all its parent routes.`\n      );\n\n      meta.relativePath = meta.relativePath.slice(parentPath.length);\n    }\n\n    let path = joinPaths([parentPath, meta.relativePath]);\n    let routesMeta = parentsMeta.concat(meta);\n\n    // Add the children before adding this route to the array, so we traverse the\n    // route tree depth-first and child routes appear before their parents in\n    // the \"flattened\" version.\n    if (route.children && route.children.length > 0) {\n      invariant(\n        // Our types know better, but runtime JS may not!\n        // @ts-expect-error\n        route.index !== true,\n        `Index routes must not have child routes. Please remove ` +\n          `all child routes from route path \"${path}\".`\n      );\n      flattenRoutes(route.children, branches, routesMeta, path);\n    }\n\n    // Routes without a path shouldn't ever match by themselves unless they are\n    // index routes, so don't add them to the list of possible branches.\n    if (route.path == null && !route.index) {\n      return;\n    }\n\n    branches.push({\n      path,\n      score: computeScore(path, route.index),\n      routesMeta,\n    });\n  };\n  routes.forEach((route, index) => {\n    // coarse-grain check for optional params\n    if (route.path === \"\" || !route.path?.includes(\"?\")) {\n      flattenRoute(route, index);\n    } else {\n      for (let exploded of explodeOptionalSegments(route.path)) {\n        flattenRoute(route, index, exploded);\n      }\n    }\n  });\n\n  return branches;\n}\n\n/**\n * Computes all combinations of optional path segments for a given path,\n * excluding combinations that are ambiguous and of lower priority.\n *\n * For example, `/one/:two?/three/:four?/:five?` explodes to:\n * - `/one/three`\n * - `/one/:two/three`\n * - `/one/three/:four`\n * - `/one/three/:five`\n * - `/one/:two/three/:four`\n * - `/one/:two/three/:five`\n * - `/one/three/:four/:five`\n * - `/one/:two/three/:four/:five`\n */\nfunction explodeOptionalSegments(path: string): string[] {\n  let segments = path.split(\"/\");\n  if (segments.length === 0) return [];\n\n  let [first, ...rest] = segments;\n\n  // Optional path segments are denoted by a trailing `?`\n  let isOptional = first.endsWith(\"?\");\n  // Compute the corresponding required segment: `foo?` -> `foo`\n  let required = first.replace(/\\?$/, \"\");\n\n  if (rest.length === 0) {\n    // Intepret empty string as omitting an optional segment\n    // `[\"one\", \"\", \"three\"]` corresponds to omitting `:two` from `/one/:two?/three` -> `/one/three`\n    return isOptional ? [required, \"\"] : [required];\n  }\n\n  let restExploded = explodeOptionalSegments(rest.join(\"/\"));\n\n  let result: string[] = [];\n\n  // All child paths with the prefix.  Do this for all children before the\n  // optional version for all children, so we get consistent ordering where the\n  // parent optional aspect is preferred as required.  Otherwise, we can get\n  // child sections interspersed where deeper optional segments are higher than\n  // parent optional segments, where for example, /:two would explode _earlier_\n  // then /:one.  By always including the parent as required _for all children_\n  // first, we avoid this issue\n  result.push(\n    ...restExploded.map((subpath) =>\n      subpath === \"\" ? required : [required, subpath].join(\"/\")\n    )\n  );\n\n  // Then, if this is an optional value, add all child versions without\n  if (isOptional) {\n    result.push(...restExploded);\n  }\n\n  // for absolute paths, ensure `/` instead of empty segment\n  return result.map((exploded) =>\n    path.startsWith(\"/\") && exploded === \"\" ? \"/\" : exploded\n  );\n}\n\nfunction rankRouteBranches(branches: RouteBranch[]): void {\n  branches.sort((a, b) =>\n    a.score !== b.score\n      ? b.score - a.score // Higher score first\n      : compareIndexes(\n          a.routesMeta.map((meta) => meta.childrenIndex),\n          b.routesMeta.map((meta) => meta.childrenIndex)\n        )\n  );\n}\n\nconst paramRe = /^:[\\w-]+$/;\nconst dynamicSegmentValue = 3;\nconst indexRouteValue = 2;\nconst emptySegmentValue = 1;\nconst staticSegmentValue = 10;\nconst splatPenalty = -2;\nconst isSplat = (s: string) => s === \"*\";\n\nfunction computeScore(path: string, index: boolean | undefined): number {\n  let segments = path.split(\"/\");\n  let initialScore = segments.length;\n  if (segments.some(isSplat)) {\n    initialScore += splatPenalty;\n  }\n\n  if (index) {\n    initialScore += indexRouteValue;\n  }\n\n  return segments\n    .filter((s) => !isSplat(s))\n    .reduce(\n      (score, segment) =>\n        score +\n        (paramRe.test(segment)\n          ? dynamicSegmentValue\n          : segment === \"\"\n          ? emptySegmentValue\n          : staticSegmentValue),\n      initialScore\n    );\n}\n\nfunction compareIndexes(a: number[], b: number[]): number {\n  let siblings =\n    a.length === b.length && a.slice(0, -1).every((n, i) => n === b[i]);\n\n  return siblings\n    ? // If two routes are siblings, we should try to match the earlier sibling\n      // first. This allows people to have fine-grained control over the matching\n      // behavior by simply putting routes with identical paths in the order they\n      // want them tried.\n      a[a.length - 1] - b[b.length - 1]\n    : // Otherwise, it doesn't really make sense to rank non-siblings by index,\n      // so they sort equally.\n      0;\n}\n\nfunction matchRouteBranch<\n  ParamKey extends string = string,\n  RouteObjectType extends AgnosticRouteObject = AgnosticRouteObject\n>(\n  branch: RouteBranch<RouteObjectType>,\n  pathname: string,\n  allowPartial = false\n): AgnosticRouteMatch<ParamKey, RouteObjectType>[] | null {\n  let { routesMeta } = branch;\n\n  let matchedParams = {};\n  let matchedPathname = \"/\";\n  let matches: AgnosticRouteMatch<ParamKey, RouteObjectType>[] = [];\n  for (let i = 0; i < routesMeta.length; ++i) {\n    let meta = routesMeta[i];\n    let end = i === routesMeta.length - 1;\n    let remainingPathname =\n      matchedPathname === \"/\"\n        ? pathname\n        : pathname.slice(matchedPathname.length) || \"/\";\n    let match = matchPath(\n      { path: meta.relativePath, caseSensitive: meta.caseSensitive, end },\n      remainingPathname\n    );\n\n    let route = meta.route;\n\n    if (\n      !match &&\n      end &&\n      allowPartial &&\n      !routesMeta[routesMeta.length - 1].route.index\n    ) {\n      match = matchPath(\n        {\n          path: meta.relativePath,\n          caseSensitive: meta.caseSensitive,\n          end: false,\n        },\n        remainingPathname\n      );\n    }\n\n    if (!match) {\n      return null;\n    }\n\n    Object.assign(matchedParams, match.params);\n\n    matches.push({\n      // TODO: Can this as be avoided?\n      params: matchedParams as Params<ParamKey>,\n      pathname: joinPaths([matchedPathname, match.pathname]),\n      pathnameBase: normalizePathname(\n        joinPaths([matchedPathname, match.pathnameBase])\n      ),\n      route,\n    });\n\n    if (match.pathnameBase !== \"/\") {\n      matchedPathname = joinPaths([matchedPathname, match.pathnameBase]);\n    }\n  }\n\n  return matches;\n}\n\n/**\n * Returns a path with params interpolated.\n *\n * @see https://reactrouter.com/utils/generate-path\n */\nexport function generatePath<Path extends string>(\n  originalPath: Path,\n  params: {\n    [key in PathParam<Path>]: string | null;\n  } = {} as any\n): string {\n  let path: string = originalPath;\n  if (path.endsWith(\"*\") && path !== \"*\" && !path.endsWith(\"/*\")) {\n    warning(\n      false,\n      `Route path \"${path}\" will be treated as if it were ` +\n        `\"${path.replace(/\\*$/, \"/*\")}\" because the \\`*\\` character must ` +\n        `always follow a \\`/\\` in the pattern. To get rid of this warning, ` +\n        `please change the route path to \"${path.replace(/\\*$/, \"/*\")}\".`\n    );\n    path = path.replace(/\\*$/, \"/*\") as Path;\n  }\n\n  // ensure `/` is added at the beginning if the path is absolute\n  const prefix = path.startsWith(\"/\") ? \"/\" : \"\";\n\n  const stringify = (p: any) =>\n    p == null ? \"\" : typeof p === \"string\" ? p : String(p);\n\n  const segments = path\n    .split(/\\/+/)\n    .map((segment, index, array) => {\n      const isLastSegment = index === array.length - 1;\n\n      // only apply the splat if it's the last segment\n      if (isLastSegment && segment === \"*\") {\n        const star = \"*\" as PathParam<Path>;\n        // Apply the splat\n        return stringify(params[star]);\n      }\n\n      const keyMatch = segment.match(/^:([\\w-]+)(\\??)$/);\n      if (keyMatch) {\n        const [, key, optional] = keyMatch;\n        let param = params[key as PathParam<Path>];\n        invariant(optional === \"?\" || param != null, `Missing \":${key}\" param`);\n        return stringify(param);\n      }\n\n      // Remove any optional markers from optional static segments\n      return segment.replace(/\\?$/g, \"\");\n    })\n    // Remove empty segments\n    .filter((segment) => !!segment);\n\n  return prefix + segments.join(\"/\");\n}\n\n/**\n * A PathPattern is used to match on some portion of a URL pathname.\n */\nexport interface PathPattern<Path extends string = string> {\n  /**\n   * A string to match against a URL pathname. May contain `:id`-style segments\n   * to indicate placeholders for dynamic parameters. May also end with `/*` to\n   * indicate matching the rest of the URL pathname.\n   */\n  path: Path;\n  /**\n   * Should be `true` if the static portions of the `path` should be matched in\n   * the same case.\n   */\n  caseSensitive?: boolean;\n  /**\n   * Should be `true` if this pattern should match the entire URL pathname.\n   */\n  end?: boolean;\n}\n\n/**\n * A PathMatch contains info about how a PathPattern matched on a URL pathname.\n */\nexport interface PathMatch<ParamKey extends string = string> {\n  /**\n   * The names and values of dynamic parameters in the URL.\n   */\n  params: Params<ParamKey>;\n  /**\n   * The portion of the URL pathname that was matched.\n   */\n  pathname: string;\n  /**\n   * The portion of the URL pathname that was matched before child routes.\n   */\n  pathnameBase: string;\n  /**\n   * The pattern that was used to match.\n   */\n  pattern: PathPattern;\n}\n\ntype Mutable<T> = {\n  -readonly [P in keyof T]: T[P];\n};\n\n/**\n * Performs pattern matching on a URL pathname and returns information about\n * the match.\n *\n * @see https://reactrouter.com/utils/match-path\n */\nexport function matchPath<\n  ParamKey extends ParamParseKey<Path>,\n  Path extends string\n>(\n  pattern: PathPattern<Path> | Path,\n  pathname: string\n): PathMatch<ParamKey> | null {\n  if (typeof pattern === \"string\") {\n    pattern = { path: pattern, caseSensitive: false, end: true };\n  }\n\n  let [matcher, compiledParams] = compilePath(\n    pattern.path,\n    pattern.caseSensitive,\n    pattern.end\n  );\n\n  let match = pathname.match(matcher);\n  if (!match) return null;\n\n  let matchedPathname = match[0];\n  let pathnameBase = matchedPathname.replace(/(.)\\/+$/, \"$1\");\n  let captureGroups = match.slice(1);\n  let params: Params = compiledParams.reduce<Mutable<Params>>(\n    (memo, { paramName, isOptional }, index) => {\n      // We need to compute the pathnameBase here using the raw splat value\n      // instead of using params[\"*\"] later because it will be decoded then\n      if (paramName === \"*\") {\n        let splatValue = captureGroups[index] || \"\";\n        pathnameBase = matchedPathname\n          .slice(0, matchedPathname.length - splatValue.length)\n          .replace(/(.)\\/+$/, \"$1\");\n      }\n\n      const value = captureGroups[index];\n      if (isOptional && !value) {\n        memo[paramName] = undefined;\n      } else {\n        memo[paramName] = (value || \"\").replace(/%2F/g, \"/\");\n      }\n      return memo;\n    },\n    {}\n  );\n\n  return {\n    params,\n    pathname: matchedPathname,\n    pathnameBase,\n    pattern,\n  };\n}\n\ntype CompiledPathParam = { paramName: string; isOptional?: boolean };\n\nfunction compilePath(\n  path: string,\n  caseSensitive = false,\n  end = true\n): [RegExp, CompiledPathParam[]] {\n  warning(\n    path === \"*\" || !path.endsWith(\"*\") || path.endsWith(\"/*\"),\n    `Route path \"${path}\" will be treated as if it were ` +\n      `\"${path.replace(/\\*$/, \"/*\")}\" because the \\`*\\` character must ` +\n      `always follow a \\`/\\` in the pattern. To get rid of this warning, ` +\n      `please change the route path to \"${path.replace(/\\*$/, \"/*\")}\".`\n  );\n\n  let params: CompiledPathParam[] = [];\n  let regexpSource =\n    \"^\" +\n    path\n      .replace(/\\/*\\*?$/, \"\") // Ignore trailing / and /*, we'll handle it below\n      .replace(/^\\/*/, \"/\") // Make sure it has a leading /\n      .replace(/[\\\\.*+^${}|()[\\]]/g, \"\\\\$&\") // Escape special regex chars\n      .replace(\n        /\\/:([\\w-]+)(\\?)?/g,\n        (_: string, paramName: string, isOptional) => {\n          params.push({ paramName, isOptional: isOptional != null });\n          return isOptional ? \"/?([^\\\\/]+)?\" : \"/([^\\\\/]+)\";\n        }\n      );\n\n  if (path.endsWith(\"*\")) {\n    params.push({ paramName: \"*\" });\n    regexpSource +=\n      path === \"*\" || path === \"/*\"\n        ? \"(.*)$\" // Already matched the initial /, just match the rest\n        : \"(?:\\\\/(.+)|\\\\/*)$\"; // Don't include the / in params[\"*\"]\n  } else if (end) {\n    // When matching to the end, ignore trailing slashes\n    regexpSource += \"\\\\/*$\";\n  } else if (path !== \"\" && path !== \"/\") {\n    // If our path is non-empty and contains anything beyond an initial slash,\n    // then we have _some_ form of path in our regex, so we should expect to\n    // match only if we find the end of this path segment.  Look for an optional\n    // non-captured trailing slash (to match a portion of the URL) or the end\n    // of the path (if we've matched to the end).  We used to do this with a\n    // word boundary but that gives false positives on routes like\n    // /user-preferences since `-` counts as a word boundary.\n    regexpSource += \"(?:(?=\\\\/|$))\";\n  } else {\n    // Nothing to match for \"\" or \"/\"\n  }\n\n  let matcher = new RegExp(regexpSource, caseSensitive ? undefined : \"i\");\n\n  return [matcher, params];\n}\n\nfunction decodePath(value: string) {\n  try {\n    return value\n      .split(\"/\")\n      .map((v) => decodeURIComponent(v).replace(/\\//g, \"%2F\"))\n      .join(\"/\");\n  } catch (error) {\n    warning(\n      false,\n      `The URL path \"${value}\" could not be decoded because it is is a ` +\n        `malformed URL segment. This is probably due to a bad percent ` +\n        `encoding (${error}).`\n    );\n\n    return value;\n  }\n}\n\n/**\n * @private\n */\nexport function stripBasename(\n  pathname: string,\n  basename: string\n): string | null {\n  if (basename === \"/\") return pathname;\n\n  if (!pathname.toLowerCase().startsWith(basename.toLowerCase())) {\n    return null;\n  }\n\n  // We want to leave trailing slash behavior in the user's control, so if they\n  // specify a basename with a trailing slash, we should support it\n  let startIndex = basename.endsWith(\"/\")\n    ? basename.length - 1\n    : basename.length;\n  let nextChar = pathname.charAt(startIndex);\n  if (nextChar && nextChar !== \"/\") {\n    // pathname does not start with basename/\n    return null;\n  }\n\n  return pathname.slice(startIndex) || \"/\";\n}\n\n/**\n * Returns a resolved path object relative to the given pathname.\n *\n * @see https://reactrouter.com/utils/resolve-path\n */\nexport function resolvePath(to: To, fromPathname = \"/\"): Path {\n  let {\n    pathname: toPathname,\n    search = \"\",\n    hash = \"\",\n  } = typeof to === \"string\" ? parsePath(to) : to;\n\n  let pathname = toPathname\n    ? toPathname.startsWith(\"/\")\n      ? toPathname\n      : resolvePathname(toPathname, fromPathname)\n    : fromPathname;\n\n  return {\n    pathname,\n    search: normalizeSearch(search),\n    hash: normalizeHash(hash),\n  };\n}\n\nfunction resolvePathname(relativePath: string, fromPathname: string): string {\n  let segments = fromPathname.replace(/\\/+$/, \"\").split(\"/\");\n  let relativeSegments = relativePath.split(\"/\");\n\n  relativeSegments.forEach((segment) => {\n    if (segment === \"..\") {\n      // Keep the root \"\" segment so the pathname starts at /\n      if (segments.length > 1) segments.pop();\n    } else if (segment !== \".\") {\n      segments.push(segment);\n    }\n  });\n\n  return segments.length > 1 ? segments.join(\"/\") : \"/\";\n}\n\nfunction getInvalidPathError(\n  char: string,\n  field: string,\n  dest: string,\n  path: Partial<Path>\n) {\n  return (\n    `Cannot include a '${char}' character in a manually specified ` +\n    `\\`to.${field}\\` field [${JSON.stringify(\n      path\n    )}].  Please separate it out to the ` +\n    `\\`to.${dest}\\` field. Alternatively you may provide the full path as ` +\n    `a string in <Link to=\"...\"> and the router will parse it for you.`\n  );\n}\n\n/**\n * @private\n *\n * When processing relative navigation we want to ignore ancestor routes that\n * do not contribute to the path, such that index/pathless layout routes don't\n * interfere.\n *\n * For example, when moving a route element into an index route and/or a\n * pathless layout route, relative link behavior contained within should stay\n * the same.  Both of the following examples should link back to the root:\n *\n *   <Route path=\"/\">\n *     <Route path=\"accounts\" element={<Link to=\"..\"}>\n *   </Route>\n *\n *   <Route path=\"/\">\n *     <Route path=\"accounts\">\n *       <Route element={<AccountsLayout />}>       // <-- Does not contribute\n *         <Route index element={<Link to=\"..\"} />  // <-- Does not contribute\n *       </Route\n *     </Route>\n *   </Route>\n */\nexport function getPathContributingMatches<\n  T extends AgnosticRouteMatch = AgnosticRouteMatch\n>(matches: T[]) {\n  return matches.filter(\n    (match, index) =>\n      index === 0 || (match.route.path && match.route.path.length > 0)\n  );\n}\n\n// Return the array of pathnames for the current route matches - used to\n// generate the routePathnames input for resolveTo()\nexport function getResolveToMatches<\n  T extends AgnosticRouteMatch = AgnosticRouteMatch\n>(matches: T[], v7_relativeSplatPath: boolean) {\n  let pathMatches = getPathContributingMatches(matches);\n\n  // When v7_relativeSplatPath is enabled, use the full pathname for the leaf\n  // match so we include splat values for \".\" links.  See:\n  // https://github.com/remix-run/react-router/issues/11052#issuecomment-1836589329\n  if (v7_relativeSplatPath) {\n    return pathMatches.map((match, idx) =>\n      idx === pathMatches.length - 1 ? match.pathname : match.pathnameBase\n    );\n  }\n\n  return pathMatches.map((match) => match.pathnameBase);\n}\n\n/**\n * @private\n */\nexport function resolveTo(\n  toArg: To,\n  routePathnames: string[],\n  locationPathname: string,\n  isPathRelative = false\n): Path {\n  let to: Partial<Path>;\n  if (typeof toArg === \"string\") {\n    to = parsePath(toArg);\n  } else {\n    to = { ...toArg };\n\n    invariant(\n      !to.pathname || !to.pathname.includes(\"?\"),\n      getInvalidPathError(\"?\", \"pathname\", \"search\", to)\n    );\n    invariant(\n      !to.pathname || !to.pathname.includes(\"#\"),\n      getInvalidPathError(\"#\", \"pathname\", \"hash\", to)\n    );\n    invariant(\n      !to.search || !to.search.includes(\"#\"),\n      getInvalidPathError(\"#\", \"search\", \"hash\", to)\n    );\n  }\n\n  let isEmptyPath = toArg === \"\" || to.pathname === \"\";\n  let toPathname = isEmptyPath ? \"/\" : to.pathname;\n\n  let from: string;\n\n  // Routing is relative to the current pathname if explicitly requested.\n  //\n  // If a pathname is explicitly provided in `to`, it should be relative to the\n  // route context. This is explained in `Note on `<Link to>` values` in our\n  // migration guide from v5 as a means of disambiguation between `to` values\n  // that begin with `/` and those that do not. However, this is problematic for\n  // `to` values that do not provide a pathname. `to` can simply be a search or\n  // hash string, in which case we should assume that the navigation is relative\n  // to the current location's pathname and *not* the route pathname.\n  if (toPathname == null) {\n    from = locationPathname;\n  } else {\n    let routePathnameIndex = routePathnames.length - 1;\n\n    // With relative=\"route\" (the default), each leading .. segment means\n    // \"go up one route\" instead of \"go up one URL segment\".  This is a key\n    // difference from how <a href> works and a major reason we call this a\n    // \"to\" value instead of a \"href\".\n    if (!isPathRelative && toPathname.startsWith(\"..\")) {\n      let toSegments = toPathname.split(\"/\");\n\n      while (toSegments[0] === \"..\") {\n        toSegments.shift();\n        routePathnameIndex -= 1;\n      }\n\n      to.pathname = toSegments.join(\"/\");\n    }\n\n    from = routePathnameIndex >= 0 ? routePathnames[routePathnameIndex] : \"/\";\n  }\n\n  let path = resolvePath(to, from);\n\n  // Ensure the pathname has a trailing slash if the original \"to\" had one\n  let hasExplicitTrailingSlash =\n    toPathname && toPathname !== \"/\" && toPathname.endsWith(\"/\");\n  // Or if this was a link to the current path which has a trailing slash\n  let hasCurrentTrailingSlash =\n    (isEmptyPath || toPathname === \".\") && locationPathname.endsWith(\"/\");\n  if (\n    !path.pathname.endsWith(\"/\") &&\n    (hasExplicitTrailingSlash || hasCurrentTrailingSlash)\n  ) {\n    path.pathname += \"/\";\n  }\n\n  return path;\n}\n\n/**\n * @private\n */\nexport function getToPathname(to: To): string | undefined {\n  // Empty strings should be treated the same as / paths\n  return to === \"\" || (to as Path).pathname === \"\"\n    ? \"/\"\n    : typeof to === \"string\"\n    ? parsePath(to).pathname\n    : to.pathname;\n}\n\n/**\n * @private\n */\nexport const joinPaths = (paths: string[]): string =>\n  paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\n\n/**\n * @private\n */\nexport const normalizePathname = (pathname: string): string =>\n  pathname.replace(/\\/+$/, \"\").replace(/^\\/*/, \"/\");\n\n/**\n * @private\n */\nexport const normalizeSearch = (search: string): string =>\n  !search || search === \"?\"\n    ? \"\"\n    : search.startsWith(\"?\")\n    ? search\n    : \"?\" + search;\n\n/**\n * @private\n */\nexport const normalizeHash = (hash: string): string =>\n  !hash || hash === \"#\" ? \"\" : hash.startsWith(\"#\") ? hash : \"#\" + hash;\n\nexport type JsonFunction = <Data>(\n  data: Data,\n  init?: number | ResponseInit\n) => Response;\n\n/**\n * This is a shortcut for creating `application/json` responses. Converts `data`\n * to JSON and sets the `Content-Type` header.\n */\nexport const json: JsonFunction = (data, init = {}) => {\n  let responseInit = typeof init === \"number\" ? { status: init } : init;\n\n  let headers = new Headers(responseInit.headers);\n  if (!headers.has(\"Content-Type\")) {\n    headers.set(\"Content-Type\", \"application/json; charset=utf-8\");\n  }\n\n  return new Response(JSON.stringify(data), {\n    ...responseInit,\n    headers,\n  });\n};\n\nexport interface TrackedPromise extends Promise<any> {\n  _tracked?: boolean;\n  _data?: any;\n  _error?: any;\n}\n\nexport class AbortedDeferredError extends Error {}\n\nexport class DeferredData {\n  private pendingKeysSet: Set<string> = new Set<string>();\n  private controller: AbortController;\n  private abortPromise: Promise<void>;\n  private unlistenAbortSignal: () => void;\n  private subscribers: Set<(aborted: boolean, settledKey?: string) => void> =\n    new Set();\n  data: Record<string, unknown>;\n  init?: ResponseInit;\n  deferredKeys: string[] = [];\n\n  constructor(data: Record<string, unknown>, responseInit?: ResponseInit) {\n    invariant(\n      data && typeof data === \"object\" && !Array.isArray(data),\n      \"defer() only accepts plain objects\"\n    );\n\n    // Set up an AbortController + Promise we can race against to exit early\n    // cancellation\n    let reject: (e: AbortedDeferredError) => void;\n    this.abortPromise = new Promise((_, r) => (reject = r));\n    this.controller = new AbortController();\n    let onAbort = () =>\n      reject(new AbortedDeferredError(\"Deferred data aborted\"));\n    this.unlistenAbortSignal = () =>\n      this.controller.signal.removeEventListener(\"abort\", onAbort);\n    this.controller.signal.addEventListener(\"abort\", onAbort);\n\n    this.data = Object.entries(data).reduce(\n      (acc, [key, value]) =>\n        Object.assign(acc, {\n          [key]: this.trackPromise(key, value),\n        }),\n      {}\n    );\n\n    if (this.done) {\n      // All incoming values were resolved\n      this.unlistenAbortSignal();\n    }\n\n    this.init = responseInit;\n  }\n\n  private trackPromise(\n    key: string,\n    value: Promise<unknown> | unknown\n  ): TrackedPromise | unknown {\n    if (!(value instanceof Promise)) {\n      return value;\n    }\n\n    this.deferredKeys.push(key);\n    this.pendingKeysSet.add(key);\n\n    // We store a little wrapper promise that will be extended with\n    // _data/_error props upon resolve/reject\n    let promise: TrackedPromise = Promise.race([value, this.abortPromise]).then(\n      (data) => this.onSettle(promise, key, undefined, data as unknown),\n      (error) => this.onSettle(promise, key, error as unknown)\n    );\n\n    // Register rejection listeners to avoid uncaught promise rejections on\n    // errors or aborted deferred values\n    promise.catch(() => {});\n\n    Object.defineProperty(promise, \"_tracked\", { get: () => true });\n    return promise;\n  }\n\n  private onSettle(\n    promise: TrackedPromise,\n    key: string,\n    error: unknown,\n    data?: unknown\n  ): unknown {\n    if (\n      this.controller.signal.aborted &&\n      error instanceof AbortedDeferredError\n    ) {\n      this.unlistenAbortSignal();\n      Object.defineProperty(promise, \"_error\", { get: () => error });\n      return Promise.reject(error);\n    }\n\n    this.pendingKeysSet.delete(key);\n\n    if (this.done) {\n      // Nothing left to abort!\n      this.unlistenAbortSignal();\n    }\n\n    // If the promise was resolved/rejected with undefined, we'll throw an error as you\n    // should always resolve with a value or null\n    if (error === undefined && data === undefined) {\n      let undefinedError = new Error(\n        `Deferred data for key \"${key}\" resolved/rejected with \\`undefined\\`, ` +\n          `you must resolve/reject with a value or \\`null\\`.`\n      );\n      Object.defineProperty(promise, \"_error\", { get: () => undefinedError });\n      this.emit(false, key);\n      return Promise.reject(undefinedError);\n    }\n\n    if (data === undefined) {\n      Object.defineProperty(promise, \"_error\", { get: () => error });\n      this.emit(false, key);\n      return Promise.reject(error);\n    }\n\n    Object.defineProperty(promise, \"_data\", { get: () => data });\n    this.emit(false, key);\n    return data;\n  }\n\n  private emit(aborted: boolean, settledKey?: string) {\n    this.subscribers.forEach((subscriber) => subscriber(aborted, settledKey));\n  }\n\n  subscribe(fn: (aborted: boolean, settledKey?: string) => void) {\n    this.subscribers.add(fn);\n    return () => this.subscribers.delete(fn);\n  }\n\n  cancel() {\n    this.controller.abort();\n    this.pendingKeysSet.forEach((v, k) => this.pendingKeysSet.delete(k));\n    this.emit(true);\n  }\n\n  async resolveData(signal: AbortSignal) {\n    let aborted = false;\n    if (!this.done) {\n      let onAbort = () => this.cancel();\n      signal.addEventListener(\"abort\", onAbort);\n      aborted = await new Promise((resolve) => {\n        this.subscribe((aborted) => {\n          signal.removeEventListener(\"abort\", onAbort);\n          if (aborted || this.done) {\n            resolve(aborted);\n          }\n        });\n      });\n    }\n    return aborted;\n  }\n\n  get done() {\n    return this.pendingKeysSet.size === 0;\n  }\n\n  get unwrappedData() {\n    invariant(\n      this.data !== null && this.done,\n      \"Can only unwrap data on initialized and settled deferreds\"\n    );\n\n    return Object.entries(this.data).reduce(\n      (acc, [key, value]) =>\n        Object.assign(acc, {\n          [key]: unwrapTrackedPromise(value),\n        }),\n      {}\n    );\n  }\n\n  get pendingKeys() {\n    return Array.from(this.pendingKeysSet);\n  }\n}\n\nfunction isTrackedPromise(value: any): value is TrackedPromise {\n  return (\n    value instanceof Promise && (value as TrackedPromise)._tracked === true\n  );\n}\n\nfunction unwrapTrackedPromise(value: any) {\n  if (!isTrackedPromise(value)) {\n    return value;\n  }\n\n  if (value._error) {\n    throw value._error;\n  }\n  return value._data;\n}\n\nexport type DeferFunction = (\n  data: Record<string, unknown>,\n  init?: number | ResponseInit\n) => DeferredData;\n\nexport const defer: DeferFunction = (data, init = {}) => {\n  let responseInit = typeof init === \"number\" ? { status: init } : init;\n\n  return new DeferredData(data, responseInit);\n};\n\nexport type RedirectFunction = (\n  url: string,\n  init?: number | ResponseInit\n) => Response;\n\n/**\n * A redirect response. Sets the status code and the `Location` header.\n * Defaults to \"302 Found\".\n */\nexport const redirect: RedirectFunction = (url, init = 302) => {\n  let responseInit = init;\n  if (typeof responseInit === \"number\") {\n    responseInit = { status: responseInit };\n  } else if (typeof responseInit.status === \"undefined\") {\n    responseInit.status = 302;\n  }\n\n  let headers = new Headers(responseInit.headers);\n  headers.set(\"Location\", url);\n\n  return new Response(null, {\n    ...responseInit,\n    headers,\n  });\n};\n\n/**\n * A redirect response that will force a document reload to the new location.\n * Sets the status code and the `Location` header.\n * Defaults to \"302 Found\".\n */\nexport const redirectDocument: RedirectFunction = (url, init) => {\n  let response = redirect(url, init);\n  response.headers.set(\"X-Remix-Reload-Document\", \"true\");\n  return response;\n};\n\nexport type ErrorResponse = {\n  status: number;\n  statusText: string;\n  data: any;\n};\n\n/**\n * @private\n * Utility class we use to hold auto-unwrapped 4xx/5xx Response bodies\n *\n * We don't export the class for public use since it's an implementation\n * detail, but we export the interface above so folks can build their own\n * abstractions around instances via isRouteErrorResponse()\n */\nexport class ErrorResponseImpl implements ErrorResponse {\n  status: number;\n  statusText: string;\n  data: any;\n  private error?: Error;\n  private internal: boolean;\n\n  constructor(\n    status: number,\n    statusText: string | undefined,\n    data: any,\n    internal = false\n  ) {\n    this.status = status;\n    this.statusText = statusText || \"\";\n    this.internal = internal;\n    if (data instanceof Error) {\n      this.data = data.toString();\n      this.error = data;\n    } else {\n      this.data = data;\n    }\n  }\n}\n\n/**\n * Check if the given error is an ErrorResponse generated from a 4xx/5xx\n * Response thrown from an action/loader\n */\nexport function isRouteErrorResponse(error: any): error is ErrorResponse {\n  return (\n    error != null &&\n    typeof error.status === \"number\" &&\n    typeof error.statusText === \"string\" &&\n    typeof error.internal === \"boolean\" &&\n    \"data\" in error\n  );\n}\n","import type { History, Location, Path, To } from \"./history\";\nimport {\n  Action as HistoryAction,\n  createLocation,\n  createPath,\n  invariant,\n  parsePath,\n  warning,\n} from \"./history\";\nimport type {\n  AgnosticDataRouteMatch,\n  AgnosticDataRouteObject,\n  DataStrategyMatch,\n  AgnosticRouteObject,\n  DataResult,\n  DataStrategyFunction,\n  DataStrategyFunctionArgs,\n  DeferredData,\n  DeferredResult,\n  DetectErrorBoundaryFunction,\n  ErrorResult,\n  FormEncType,\n  FormMethod,\n  HTMLFormMethod,\n  HandlerResult,\n  ImmutableRouteKey,\n  MapRoutePropertiesFunction,\n  MutationFormMethod,\n  RedirectResult,\n  RouteData,\n  RouteManifest,\n  ShouldRevalidateFunctionArgs,\n  Submission,\n  SuccessResult,\n  UIMatch,\n  V7_FormMethod,\n  V7_MutationFormMethod,\n  AgnosticPatchRoutesOnMissFunction,\n} from \"./utils\";\nimport {\n  ErrorResponseImpl,\n  ResultType,\n  convertRouteMatchToUiMatch,\n  convertRoutesToDataRoutes,\n  getPathContributingMatches,\n  getResolveToMatches,\n  immutableRouteKeys,\n  isRouteErrorResponse,\n  joinPaths,\n  matchRoutes,\n  matchRoutesImpl,\n  resolveTo,\n  stripBasename,\n} from \"./utils\";\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Types and Constants\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * A Router instance manages all navigation and data loading/mutations\n */\nexport interface Router {\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Return the basename for the router\n   */\n  get basename(): RouterInit[\"basename\"];\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Return the future config for the router\n   */\n  get future(): FutureConfig;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Return the current state of the router\n   */\n  get state(): RouterState;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Return the routes for this router instance\n   */\n  get routes(): AgnosticDataRouteObject[];\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Return the window associated with the router\n   */\n  get window(): RouterInit[\"window\"];\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Initialize the router, including adding history listeners and kicking off\n   * initial data fetches.  Returns a function to cleanup listeners and abort\n   * any in-progress loads\n   */\n  initialize(): Router;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Subscribe to router.state updates\n   *\n   * @param fn function to call with the new state\n   */\n  subscribe(fn: RouterSubscriber): () => void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Enable scroll restoration behavior in the router\n   *\n   * @param savedScrollPositions Object that will manage positions, in case\n   *                             it's being restored from sessionStorage\n   * @param getScrollPosition    Function to get the active Y scroll position\n   * @param getKey               Function to get the key to use for restoration\n   */\n  enableScrollRestoration(\n    savedScrollPositions: Record<string, number>,\n    getScrollPosition: GetScrollPositionFunction,\n    getKey?: GetScrollRestorationKeyFunction\n  ): () => void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Navigate forward/backward in the history stack\n   * @param to Delta to move in the history stack\n   */\n  navigate(to: number): Promise<void>;\n\n  /**\n   * Navigate to the given path\n   * @param to Path to navigate to\n   * @param opts Navigation options (method, submission, etc.)\n   */\n  navigate(to: To | null, opts?: RouterNavigateOptions): Promise<void>;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Trigger a fetcher load/submission\n   *\n   * @param key     Fetcher key\n   * @param routeId Route that owns the fetcher\n   * @param href    href to fetch\n   * @param opts    Fetcher options, (method, submission, etc.)\n   */\n  fetch(\n    key: string,\n    routeId: string,\n    href: string | null,\n    opts?: RouterFetchOptions\n  ): void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Trigger a revalidation of all current route loaders and fetcher loads\n   */\n  revalidate(): void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Utility function to create an href for the given location\n   * @param location\n   */\n  createHref(location: Location | URL): string;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Utility function to URL encode a destination path according to the internal\n   * history implementation\n   * @param to\n   */\n  encodeLocation(to: To): Path;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Get/create a fetcher for the given key\n   * @param key\n   */\n  getFetcher<TData = any>(key: string): Fetcher<TData>;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Delete the fetcher for a given key\n   * @param key\n   */\n  deleteFetcher(key: string): void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Cleanup listeners and abort any in-progress loads\n   */\n  dispose(): void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Get a navigation blocker\n   * @param key The identifier for the blocker\n   * @param fn The blocker function implementation\n   */\n  getBlocker(key: string, fn: BlockerFunction): Blocker;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Delete a navigation blocker\n   * @param key The identifier for the blocker\n   */\n  deleteBlocker(key: string): void;\n\n  /**\n   * @internal\n   * PRIVATE DO NOT USE\n   *\n   * Patch additional children routes into an existing parent route\n   * @param routeId The parent route id or a callback function accepting `patch`\n   *                to perform batch patching\n   * @param children The additional children routes\n   */\n  patchRoutes(routeId: string | null, children: AgnosticRouteObject[]): void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * HMR needs to pass in-flight route updates to React Router\n   * TODO: Replace this with granular route update APIs (addRoute, updateRoute, deleteRoute)\n   */\n  _internalSetRoutes(routes: AgnosticRouteObject[]): void;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Internal fetch AbortControllers accessed by unit tests\n   */\n  _internalFetchControllers: Map<string, AbortController>;\n\n  /**\n   * @internal\n   * PRIVATE - DO NOT USE\n   *\n   * Internal pending DeferredData instances accessed by unit tests\n   */\n  _internalActiveDeferreds: Map<string, DeferredData>;\n}\n\n/**\n * State maintained internally by the router.  During a navigation, all states\n * reflect the the \"old\" location unless otherwise noted.\n */\nexport interface RouterState {\n  /**\n   * The action of the most recent navigation\n   */\n  historyAction: HistoryAction;\n\n  /**\n   * The current location reflected by the router\n   */\n  location: Location;\n\n  /**\n   * The current set of route matches\n   */\n  matches: AgnosticDataRouteMatch[];\n\n  /**\n   * Tracks whether we've completed our initial data load\n   */\n  initialized: boolean;\n\n  /**\n   * Current scroll position we should start at for a new view\n   *  - number -> scroll position to restore to\n   *  - false -> do not restore scroll at all (used during submissions)\n   *  - null -> don't have a saved position, scroll to hash or top of page\n   */\n  restoreScrollPosition: number | false | null;\n\n  /**\n   * Indicate whether this navigation should skip resetting the scroll position\n   * if we are unable to restore the scroll position\n   */\n  preventScrollReset: boolean;\n\n  /**\n   * Tracks the state of the current navigation\n   */\n  navigation: Navigation;\n\n  /**\n   * Tracks any in-progress revalidations\n   */\n  revalidation: RevalidationState;\n\n  /**\n   * Data from the loaders for the current matches\n   */\n  loaderData: RouteData;\n\n  /**\n   * Data from the action for the current matches\n   */\n  actionData: RouteData | null;\n\n  /**\n   * Errors caught from loaders for the current matches\n   */\n  errors: RouteData | null;\n\n  /**\n   * Map of current fetchers\n   */\n  fetchers: Map<string, Fetcher>;\n\n  /**\n   * Map of current blockers\n   */\n  blockers: Map<string, Blocker>;\n}\n\n/**\n * Data that can be passed into hydrate a Router from SSR\n */\nexport type HydrationState = Partial<\n  Pick<RouterState, \"loaderData\" | \"actionData\" | \"errors\">\n>;\n\n/**\n * Future flags to toggle new feature behavior\n */\nexport interface FutureConfig {\n  v7_fetcherPersist: boolean;\n  v7_normalizeFormMethod: boolean;\n  v7_partialHydration: boolean;\n  v7_prependBasename: boolean;\n  v7_relativeSplatPath: boolean;\n  unstable_skipActionErrorRevalidation: boolean;\n}\n\n/**\n * Initialization options for createRouter\n */\nexport interface RouterInit {\n  routes: AgnosticRouteObject[];\n  history: History;\n  basename?: string;\n  /**\n   * @deprecated Use `mapRouteProperties` instead\n   */\n  detectErrorBoundary?: DetectErrorBoundaryFunction;\n  mapRouteProperties?: MapRoutePropertiesFunction;\n  future?: Partial<FutureConfig>;\n  hydrationData?: HydrationState;\n  window?: Window;\n  unstable_patchRoutesOnMiss?: AgnosticPatchRoutesOnMissFunction;\n  unstable_dataStrategy?: DataStrategyFunction;\n}\n\n/**\n * State returned from a server-side query() call\n */\nexport interface StaticHandlerContext {\n  basename: Router[\"basename\"];\n  location: RouterState[\"location\"];\n  matches: RouterState[\"matches\"];\n  loaderData: RouterState[\"loaderData\"];\n  actionData: RouterState[\"actionData\"];\n  errors: RouterState[\"errors\"];\n  statusCode: number;\n  loaderHeaders: Record<string, Headers>;\n  actionHeaders: Record<string, Headers>;\n  activeDeferreds: Record<string, DeferredData> | null;\n  _deepestRenderedBoundaryId?: string | null;\n}\n\n/**\n * A StaticHandler instance manages a singular SSR navigation/fetch event\n */\nexport interface StaticHandler {\n  dataRoutes: AgnosticDataRouteObject[];\n  query(\n    request: Request,\n    opts?: {\n      requestContext?: unknown;\n      skipLoaderErrorBubbling?: boolean;\n      unstable_dataStrategy?: DataStrategyFunction;\n    }\n  ): Promise<StaticHandlerContext | Response>;\n  queryRoute(\n    request: Request,\n    opts?: {\n      routeId?: string;\n      requestContext?: unknown;\n      unstable_dataStrategy?: DataStrategyFunction;\n    }\n  ): Promise<any>;\n}\n\ntype ViewTransitionOpts = {\n  currentLocation: Location;\n  nextLocation: Location;\n};\n\n/**\n * Subscriber function signature for changes to router state\n */\nexport interface RouterSubscriber {\n  (\n    state: RouterState,\n    opts: {\n      deletedFetchers: string[];\n      unstable_viewTransitionOpts?: ViewTransitionOpts;\n      unstable_flushSync: boolean;\n    }\n  ): void;\n}\n\n/**\n * Function signature for determining the key to be used in scroll restoration\n * for a given location\n */\nexport interface GetScrollRestorationKeyFunction {\n  (location: Location, matches: UIMatch[]): string | null;\n}\n\n/**\n * Function signature for determining the current scroll position\n */\nexport interface GetScrollPositionFunction {\n  (): number;\n}\n\nexport type RelativeRoutingType = \"route\" | \"path\";\n\n// Allowed for any navigation or fetch\ntype BaseNavigateOrFetchOptions = {\n  preventScrollReset?: boolean;\n  relative?: RelativeRoutingType;\n  unstable_flushSync?: boolean;\n};\n\n// Only allowed for navigations\ntype BaseNavigateOptions = BaseNavigateOrFetchOptions & {\n  replace?: boolean;\n  state?: any;\n  fromRouteId?: string;\n  unstable_viewTransition?: boolean;\n};\n\n// Only allowed for submission navigations\ntype BaseSubmissionOptions = {\n  formMethod?: HTMLFormMethod;\n  formEncType?: FormEncType;\n} & (\n  | { formData: FormData; body?: undefined }\n  | { formData?: undefined; body: any }\n);\n\n/**\n * Options for a navigate() call for a normal (non-submission) navigation\n */\ntype LinkNavigateOptions = BaseNavigateOptions;\n\n/**\n * Options for a navigate() call for a submission navigation\n */\ntype SubmissionNavigateOptions = BaseNavigateOptions & BaseSubmissionOptions;\n\n/**\n * Options to pass to navigate() for a navigation\n */\nexport type RouterNavigateOptions =\n  | LinkNavigateOptions\n  | SubmissionNavigateOptions;\n\n/**\n * Options for a fetch() load\n */\ntype LoadFetchOptions = BaseNavigateOrFetchOptions;\n\n/**\n * Options for a fetch() submission\n */\ntype SubmitFetchOptions = BaseNavigateOrFetchOptions & BaseSubmissionOptions;\n\n/**\n * Options to pass to fetch()\n */\nexport type RouterFetchOptions = LoadFetchOptions | SubmitFetchOptions;\n\n/**\n * Potential states for state.navigation\n */\nexport type NavigationStates = {\n  Idle: {\n    state: \"idle\";\n    location: undefined;\n    formMethod: undefined;\n    formAction: undefined;\n    formEncType: undefined;\n    formData: undefined;\n    json: undefined;\n    text: undefined;\n  };\n  Loading: {\n    state: \"loading\";\n    location: Location;\n    formMethod: Submission[\"formMethod\"] | undefined;\n    formAction: Submission[\"formAction\"] | undefined;\n    formEncType: Submission[\"formEncType\"] | undefined;\n    formData: Submission[\"formData\"] | undefined;\n    json: Submission[\"json\"] | undefined;\n    text: Submission[\"text\"] | undefined;\n  };\n  Submitting: {\n    state: \"submitting\";\n    location: Location;\n    formMethod: Submission[\"formMethod\"];\n    formAction: Submission[\"formAction\"];\n    formEncType: Submission[\"formEncType\"];\n    formData: Submission[\"formData\"];\n    json: Submission[\"json\"];\n    text: Submission[\"text\"];\n  };\n};\n\nexport type Navigation = NavigationStates[keyof NavigationStates];\n\nexport type RevalidationState = \"idle\" | \"loading\";\n\n/**\n * Potential states for fetchers\n */\ntype FetcherStates<TData = any> = {\n  Idle: {\n    state: \"idle\";\n    formMethod: undefined;\n    formAction: undefined;\n    formEncType: undefined;\n    text: undefined;\n    formData: undefined;\n    json: undefined;\n    data: TData | undefined;\n  };\n  Loading: {\n    state: \"loading\";\n    formMethod: Submission[\"formMethod\"] | undefined;\n    formAction: Submission[\"formAction\"] | undefined;\n    formEncType: Submission[\"formEncType\"] | undefined;\n    text: Submission[\"text\"] | undefined;\n    formData: Submission[\"formData\"] | undefined;\n    json: Submission[\"json\"] | undefined;\n    data: TData | undefined;\n  };\n  Submitting: {\n    state: \"submitting\";\n    formMethod: Submission[\"formMethod\"];\n    formAction: Submission[\"formAction\"];\n    formEncType: Submission[\"formEncType\"];\n    text: Submission[\"text\"];\n    formData: Submission[\"formData\"];\n    json: Submission[\"json\"];\n    data: TData | undefined;\n  };\n};\n\nexport type Fetcher<TData = any> =\n  FetcherStates<TData>[keyof FetcherStates<TData>];\n\ninterface BlockerBlocked {\n  state: \"blocked\";\n  reset(): void;\n  proceed(): void;\n  location: Location;\n}\n\ninterface BlockerUnblocked {\n  state: \"unblocked\";\n  reset: undefined;\n  proceed: undefined;\n  location: undefined;\n}\n\ninterface BlockerProceeding {\n  state: \"proceeding\";\n  reset: undefined;\n  proceed: undefined;\n  location: Location;\n}\n\nexport type Blocker = BlockerUnblocked | BlockerBlocked | BlockerProceeding;\n\nexport type BlockerFunction = (args: {\n  currentLocation: Location;\n  nextLocation: Location;\n  historyAction: HistoryAction;\n}) => boolean;\n\ninterface ShortCircuitable {\n  /**\n   * startNavigation does not need to complete the navigation because we\n   * redirected or got interrupted\n   */\n  shortCircuited?: boolean;\n}\n\ntype PendingActionResult = [string, SuccessResult | ErrorResult];\n\ninterface HandleActionResult extends ShortCircuitable {\n  /**\n   * Route matches which may have been updated from fog of war discovery\n   */\n  matches?: RouterState[\"matches\"];\n  /**\n   * Tuple for the returned or thrown value from the current action.  The routeId\n   * is the action route for success and the bubbled boundary route for errors.\n   */\n  pendingActionResult?: PendingActionResult;\n}\n\ninterface HandleLoadersResult extends ShortCircuitable {\n  /**\n   * Route matches which may have been updated from fog of war discovery\n   */\n  matches?: RouterState[\"matches\"];\n  /**\n   * loaderData returned from the current set of loaders\n   */\n  loaderData?: RouterState[\"loaderData\"];\n  /**\n   * errors thrown from the current set of loaders\n   */\n  errors?: RouterState[\"errors\"];\n}\n\n/**\n * Cached info for active fetcher.load() instances so they can participate\n * in revalidation\n */\ninterface FetchLoadMatch {\n  routeId: string;\n  path: string;\n}\n\n/**\n * Identified fetcher.load() calls that need to be revalidated\n */\ninterface RevalidatingFetcher extends FetchLoadMatch {\n  key: string;\n  match: AgnosticDataRouteMatch | null;\n  matches: AgnosticDataRouteMatch[] | null;\n  controller: AbortController | null;\n}\n\nconst validMutationMethodsArr: MutationFormMethod[] = [\n  \"post\",\n  \"put\",\n  \"patch\",\n  \"delete\",\n];\nconst validMutationMethods = new Set<MutationFormMethod>(\n  validMutationMethodsArr\n);\n\nconst validRequestMethodsArr: FormMethod[] = [\n  \"get\",\n  ...validMutationMethodsArr,\n];\nconst validRequestMethods = new Set<FormMethod>(validRequestMethodsArr);\n\nconst redirectStatusCodes = new Set([301, 302, 303, 307, 308]);\nconst redirectPreserveMethodStatusCodes = new Set([307, 308]);\n\nexport const IDLE_NAVIGATION: NavigationStates[\"Idle\"] = {\n  state: \"idle\",\n  location: undefined,\n  formMethod: undefined,\n  formAction: undefined,\n  formEncType: undefined,\n  formData: undefined,\n  json: undefined,\n  text: undefined,\n};\n\nexport const IDLE_FETCHER: FetcherStates[\"Idle\"] = {\n  state: \"idle\",\n  data: undefined,\n  formMethod: undefined,\n  formAction: undefined,\n  formEncType: undefined,\n  formData: undefined,\n  json: undefined,\n  text: undefined,\n};\n\nexport const IDLE_BLOCKER: BlockerUnblocked = {\n  state: \"unblocked\",\n  proceed: undefined,\n  reset: undefined,\n  location: undefined,\n};\n\nconst ABSOLUTE_URL_REGEX = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\n\nconst defaultMapRouteProperties: MapRoutePropertiesFunction = (route) => ({\n  hasErrorBoundary: Boolean(route.hasErrorBoundary),\n});\n\nconst TRANSITIONS_STORAGE_KEY = \"remix-router-transitions\";\n\n//#endregion\n\n////////////////////////////////////////////////////////////////////////////////\n//#region createRouter\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Create a router and listen to history POP navigations\n */\nexport function createRouter(init: RouterInit): Router {\n  const routerWindow = init.window\n    ? init.window\n    : typeof window !== \"undefined\"\n    ? window\n    : undefined;\n  const isBrowser =\n    typeof routerWindow !== \"undefined\" &&\n    typeof routerWindow.document !== \"undefined\" &&\n    typeof routerWindow.document.createElement !== \"undefined\";\n  const isServer = !isBrowser;\n\n  invariant(\n    init.routes.length > 0,\n    \"You must provide a non-empty routes array to createRouter\"\n  );\n\n  let mapRouteProperties: MapRoutePropertiesFunction;\n  if (init.mapRouteProperties) {\n    mapRouteProperties = init.mapRouteProperties;\n  } else if (init.detectErrorBoundary) {\n    // If they are still using the deprecated version, wrap it with the new API\n    let detectErrorBoundary = init.detectErrorBoundary;\n    mapRouteProperties = (route) => ({\n      hasErrorBoundary: detectErrorBoundary(route),\n    });\n  } else {\n    mapRouteProperties = defaultMapRouteProperties;\n  }\n\n  // Routes keyed by ID\n  let manifest: RouteManifest = {};\n  // Routes in tree format for matching\n  let dataRoutes = convertRoutesToDataRoutes(\n    init.routes,\n    mapRouteProperties,\n    undefined,\n    manifest\n  );\n  let inFlightDataRoutes: AgnosticDataRouteObject[] | undefined;\n  let basename = init.basename || \"/\";\n  let dataStrategyImpl = init.unstable_dataStrategy || defaultDataStrategy;\n  let patchRoutesOnMissImpl = init.unstable_patchRoutesOnMiss;\n\n  // Config driven behavior flags\n  let future: FutureConfig = {\n    v7_fetcherPersist: false,\n    v7_normalizeFormMethod: false,\n    v7_partialHydration: false,\n    v7_prependBasename: false,\n    v7_relativeSplatPath: false,\n    unstable_skipActionErrorRevalidation: false,\n    ...init.future,\n  };\n  // Cleanup function for history\n  let unlistenHistory: (() => void) | null = null;\n  // Externally-provided functions to call on all state changes\n  let subscribers = new Set<RouterSubscriber>();\n  // Externally-provided object to hold scroll restoration locations during routing\n  let savedScrollPositions: Record<string, number> | null = null;\n  // Externally-provided function to get scroll restoration keys\n  let getScrollRestorationKey: GetScrollRestorationKeyFunction | null = null;\n  // Externally-provided function to get current scroll position\n  let getScrollPosition: GetScrollPositionFunction | null = null;\n  // One-time flag to control the initial hydration scroll restoration.  Because\n  // we don't get the saved positions from <ScrollRestoration /> until _after_\n  // the initial render, we need to manually trigger a separate updateState to\n  // send along the restoreScrollPosition\n  // Set to true if we have `hydrationData` since we assume we were SSR'd and that\n  // SSR did the initial scroll restoration.\n  let initialScrollRestored = init.hydrationData != null;\n\n  let initialMatches = matchRoutes(dataRoutes, init.history.location, basename);\n  let initialErrors: RouteData | null = null;\n\n  if (initialMatches == null && !patchRoutesOnMissImpl) {\n    // If we do not match a user-provided-route, fall back to the root\n    // to allow the error boundary to take over\n    let error = getInternalRouterError(404, {\n      pathname: init.history.location.pathname,\n    });\n    let { matches, route } = getShortCircuitMatches(dataRoutes);\n    initialMatches = matches;\n    initialErrors = { [route.id]: error };\n  }\n\n  // If the user provided a patchRoutesOnMiss implementation and our initial\n  // match is a splat route, clear them out so we run through lazy discovery\n  // on hydration in case there's a more accurate lazy route match\n  if (initialMatches && patchRoutesOnMissImpl) {\n    let fogOfWar = checkFogOfWar(\n      initialMatches,\n      dataRoutes,\n      init.history.location.pathname\n    );\n    if (fogOfWar.active) {\n      initialMatches = null;\n    }\n  }\n\n  let initialized: boolean;\n  if (!initialMatches) {\n    // We need to run patchRoutesOnMiss in initialize()\n    initialized = false;\n    initialMatches = [];\n  } else if (initialMatches.some((m) => m.route.lazy)) {\n    // All initialMatches need to be loaded before we're ready.  If we have lazy\n    // functions around still then we'll need to run them in initialize()\n    initialized = false;\n  } else if (!initialMatches.some((m) => m.route.loader)) {\n    // If we've got no loaders to run, then we're good to go\n    initialized = true;\n  } else if (future.v7_partialHydration) {\n    // If partial hydration is enabled, we're initialized so long as we were\n    // provided with hydrationData for every route with a loader, and no loaders\n    // were marked for explicit hydration\n    let loaderData = init.hydrationData ? init.hydrationData.loaderData : null;\n    let errors = init.hydrationData ? init.hydrationData.errors : null;\n    let isRouteInitialized = (m: AgnosticDataRouteMatch) => {\n      // No loader, nothing to initialize\n      if (!m.route.loader) {\n        return true;\n      }\n      // Explicitly opting-in to running on hydration\n      if (\n        typeof m.route.loader === \"function\" &&\n        m.route.loader.hydrate === true\n      ) {\n        return false;\n      }\n      // Otherwise, initialized if hydrated with data or an error\n      return (\n        (loaderData && loaderData[m.route.id] !== undefined) ||\n        (errors && errors[m.route.id] !== undefined)\n      );\n    };\n\n    // If errors exist, don't consider routes below the boundary\n    if (errors) {\n      let idx = initialMatches.findIndex(\n        (m) => errors![m.route.id] !== undefined\n      );\n      initialized = initialMatches.slice(0, idx + 1).every(isRouteInitialized);\n    } else {\n      initialized = initialMatches.every(isRouteInitialized);\n    }\n  } else {\n    // Without partial hydration - we're initialized if we were provided any\n    // hydrationData - which is expected to be complete\n    initialized = init.hydrationData != null;\n  }\n\n  let router: Router;\n  let state: RouterState = {\n    historyAction: init.history.action,\n    location: init.history.location,\n    matches: initialMatches,\n    initialized,\n    navigation: IDLE_NAVIGATION,\n    // Don't restore on initial updateState() if we were SSR'd\n    restoreScrollPosition: init.hydrationData != null ? false : null,\n    preventScrollReset: false,\n    revalidation: \"idle\",\n    loaderData: (init.hydrationData && init.hydrationData.loaderData) || {},\n    actionData: (init.hydrationData && init.hydrationData.actionData) || null,\n    errors: (init.hydrationData && init.hydrationData.errors) || initialErrors,\n    fetchers: new Map(),\n    blockers: new Map(),\n  };\n\n  // -- Stateful internal variables to manage navigations --\n  // Current navigation in progress (to be committed in completeNavigation)\n  let pendingAction: HistoryAction = HistoryAction.Pop;\n\n  // Should the current navigation prevent the scroll reset if scroll cannot\n  // be restored?\n  let pendingPreventScrollReset = false;\n\n  // AbortController for the active navigation\n  let pendingNavigationController: AbortController | null;\n\n  // Should the current navigation enable document.startViewTransition?\n  let pendingViewTransitionEnabled = false;\n\n  // Store applied view transitions so we can apply them on POP\n  let appliedViewTransitions: Map<string, Set<string>> = new Map<\n    string,\n    Set<string>\n  >();\n\n  // Cleanup function for persisting applied transitions to sessionStorage\n  let removePageHideEventListener: (() => void) | null = null;\n\n  // We use this to avoid touching history in completeNavigation if a\n  // revalidation is entirely uninterrupted\n  let isUninterruptedRevalidation = false;\n\n  // Use this internal flag to force revalidation of all loaders:\n  //  - submissions (completed or interrupted)\n  //  - useRevalidator()\n  //  - X-Remix-Revalidate (from redirect)\n  let isRevalidationRequired = false;\n\n  // Use this internal array to capture routes that require revalidation due\n  // to a cancelled deferred on action submission\n  let cancelledDeferredRoutes: string[] = [];\n\n  // Use this internal array to capture fetcher loads that were cancelled by an\n  // action navigation and require revalidation\n  let cancelledFetcherLoads: string[] = [];\n\n  // AbortControllers for any in-flight fetchers\n  let fetchControllers = new Map<string, AbortController>();\n\n  // Track loads based on the order in which they started\n  let incrementingLoadId = 0;\n\n  // Track the outstanding pending navigation data load to be compared against\n  // the globally incrementing load when a fetcher load lands after a completed\n  // navigation\n  let pendingNavigationLoadId = -1;\n\n  // Fetchers that triggered data reloads as a result of their actions\n  let fetchReloadIds = new Map<string, number>();\n\n  // Fetchers that triggered redirect navigations\n  let fetchRedirectIds = new Set<string>();\n\n  // Most recent href/match for fetcher.load calls for fetchers\n  let fetchLoadMatches = new Map<string, FetchLoadMatch>();\n\n  // Ref-count mounted fetchers so we know when it's ok to clean them up\n  let activeFetchers = new Map<string, number>();\n\n  // Fetchers that have requested a delete when using v7_fetcherPersist,\n  // they'll be officially removed after they return to idle\n  let deletedFetchers = new Set<string>();\n\n  // Store DeferredData instances for active route matches.  When a\n  // route loader returns defer() we stick one in here.  Then, when a nested\n  // promise resolves we update loaderData.  If a new navigation starts we\n  // cancel active deferreds for eliminated routes.\n  let activeDeferreds = new Map<string, DeferredData>();\n\n  // Store blocker functions in a separate Map outside of router state since\n  // we don't need to update UI state if they change\n  let blockerFunctions = new Map<string, BlockerFunction>();\n\n  // Map of pending patchRoutesOnMiss() promises (keyed by path/matches) so\n  // that we only kick them off once for a given combo\n  let pendingPatchRoutes = new Map<\n    string,\n    ReturnType<AgnosticPatchRoutesOnMissFunction>\n  >();\n\n  // Flag to ignore the next history update, so we can revert the URL change on\n  // a POP navigation that was blocked by the user without touching router state\n  let ignoreNextHistoryUpdate = false;\n\n  // Initialize the router, all side effects should be kicked off from here.\n  // Implemented as a Fluent API for ease of:\n  //   let router = createRouter(init).initialize();\n  function initialize() {\n    // If history informs us of a POP navigation, start the navigation but do not update\n    // state.  We'll update our own state once the navigation completes\n    unlistenHistory = init.history.listen(\n      ({ action: historyAction, location, delta }) => {\n        // Ignore this event if it was just us resetting the URL from a\n        // blocked POP navigation\n        if (ignoreNextHistoryUpdate) {\n          ignoreNextHistoryUpdate = false;\n          return;\n        }\n\n        warning(\n          blockerFunctions.size === 0 || delta != null,\n          \"You are trying to use a blocker on a POP navigation to a location \" +\n            \"that was not created by @remix-run/router. This will fail silently in \" +\n            \"production. This can happen if you are navigating outside the router \" +\n            \"via `window.history.pushState`/`window.location.hash` instead of using \" +\n            \"router navigation APIs.  This can also happen if you are using \" +\n            \"createHashRouter and the user manually changes the URL.\"\n        );\n\n        let blockerKey = shouldBlockNavigation({\n          currentLocation: state.location,\n          nextLocation: location,\n          historyAction,\n        });\n\n        if (blockerKey && delta != null) {\n          // Restore the URL to match the current UI, but don't update router state\n          ignoreNextHistoryUpdate = true;\n          init.history.go(delta * -1);\n\n          // Put the blocker into a blocked state\n          updateBlocker(blockerKey, {\n            state: \"blocked\",\n            location,\n            proceed() {\n              updateBlocker(blockerKey!, {\n                state: \"proceeding\",\n                proceed: undefined,\n                reset: undefined,\n                location,\n              });\n              // Re-do the same POP navigation we just blocked\n              init.history.go(delta);\n            },\n            reset() {\n              let blockers = new Map(state.blockers);\n              blockers.set(blockerKey!, IDLE_BLOCKER);\n              updateState({ blockers });\n            },\n          });\n          return;\n        }\n\n        return startNavigation(historyAction, location);\n      }\n    );\n\n    if (isBrowser) {\n      // FIXME: This feels gross.  How can we cleanup the lines between\n      // scrollRestoration/appliedTransitions persistance?\n      restoreAppliedTransitions(routerWindow, appliedViewTransitions);\n      let _saveAppliedTransitions = () =>\n        persistAppliedTransitions(routerWindow, appliedViewTransitions);\n      routerWindow.addEventListener(\"pagehide\", _saveAppliedTransitions);\n      removePageHideEventListener = () =>\n        routerWindow.removeEventListener(\"pagehide\", _saveAppliedTransitions);\n    }\n\n    // Kick off initial data load if needed.  Use Pop to avoid modifying history\n    // Note we don't do any handling of lazy here.  For SPA's it'll get handled\n    // in the normal navigation flow.  For SSR it's expected that lazy modules are\n    // resolved prior to router creation since we can't go into a fallbackElement\n    // UI for SSR'd apps\n    if (!state.initialized) {\n      startNavigation(HistoryAction.Pop, state.location, {\n        initialHydration: true,\n      });\n    }\n\n    return router;\n  }\n\n  // Clean up a router and it's side effects\n  function dispose() {\n    if (unlistenHistory) {\n      unlistenHistory();\n    }\n    if (removePageHideEventListener) {\n      removePageHideEventListener();\n    }\n    subscribers.clear();\n    pendingNavigationController && pendingNavigationController.abort();\n    state.fetchers.forEach((_, key) => deleteFetcher(key));\n    state.blockers.forEach((_, key) => deleteBlocker(key));\n  }\n\n  // Subscribe to state updates for the router\n  function subscribe(fn: RouterSubscriber) {\n    subscribers.add(fn);\n    return () => subscribers.delete(fn);\n  }\n\n  // Update our state and notify the calling context of the change\n  function updateState(\n    newState: Partial<RouterState>,\n    opts: {\n      flushSync?: boolean;\n      viewTransitionOpts?: ViewTransitionOpts;\n    } = {}\n  ): void {\n    state = {\n      ...state,\n      ...newState,\n    };\n\n    // Prep fetcher cleanup so we can tell the UI which fetcher data entries\n    // can be removed\n    let completedFetchers: string[] = [];\n    let deletedFetchersKeys: string[] = [];\n\n    if (future.v7_fetcherPersist) {\n      state.fetchers.forEach((fetcher, key) => {\n        if (fetcher.state === \"idle\") {\n          if (deletedFetchers.has(key)) {\n            // Unmounted from the UI and can be totally removed\n            deletedFetchersKeys.push(key);\n          } else {\n            // Returned to idle but still mounted in the UI, so semi-remains for\n            // revalidations and such\n            completedFetchers.push(key);\n          }\n        }\n      });\n    }\n\n    // Iterate over a local copy so that if flushSync is used and we end up\n    // removing and adding a new subscriber due to the useCallback dependencies,\n    // we don't get ourselves into a loop calling the new subscriber immediately\n    [...subscribers].forEach((subscriber) =>\n      subscriber(state, {\n        deletedFetchers: deletedFetchersKeys,\n        unstable_viewTransitionOpts: opts.viewTransitionOpts,\n        unstable_flushSync: opts.flushSync === true,\n      })\n    );\n\n    // Remove idle fetchers from state since we only care about in-flight fetchers.\n    if (future.v7_fetcherPersist) {\n      completedFetchers.forEach((key) => state.fetchers.delete(key));\n      deletedFetchersKeys.forEach((key) => deleteFetcher(key));\n    }\n  }\n\n  // Complete a navigation returning the state.navigation back to the IDLE_NAVIGATION\n  // and setting state.[historyAction/location/matches] to the new route.\n  // - Location is a required param\n  // - Navigation will always be set to IDLE_NAVIGATION\n  // - Can pass any other state in newState\n  function completeNavigation(\n    location: Location,\n    newState: Partial<Omit<RouterState, \"action\" | \"location\" | \"navigation\">>,\n    { flushSync }: { flushSync?: boolean } = {}\n  ): void {\n    // Deduce if we're in a loading/actionReload state:\n    // - We have committed actionData in the store\n    // - The current navigation was a mutation submission\n    // - We're past the submitting state and into the loading state\n    // - The location being loaded is not the result of a redirect\n    let isActionReload =\n      state.actionData != null &&\n      state.navigation.formMethod != null &&\n      isMutationMethod(state.navigation.formMethod) &&\n      state.navigation.state === \"loading\" &&\n      location.state?._isRedirect !== true;\n\n    let actionData: RouteData | null;\n    if (newState.actionData) {\n      if (Object.keys(newState.actionData).length > 0) {\n        actionData = newState.actionData;\n      } else {\n        // Empty actionData -> clear prior actionData due to an action error\n        actionData = null;\n      }\n    } else if (isActionReload) {\n      // Keep the current data if we're wrapping up the action reload\n      actionData = state.actionData;\n    } else {\n      // Clear actionData on any other completed navigations\n      actionData = null;\n    }\n\n    // Always preserve any existing loaderData from re-used routes\n    let loaderData = newState.loaderData\n      ? mergeLoaderData(\n          state.loaderData,\n          newState.loaderData,\n          newState.matches || [],\n          newState.errors\n        )\n      : state.loaderData;\n\n    // On a successful navigation we can assume we got through all blockers\n    // so we can start fresh\n    let blockers = state.blockers;\n    if (blockers.size > 0) {\n      blockers = new Map(blockers);\n      blockers.forEach((_, k) => blockers.set(k, IDLE_BLOCKER));\n    }\n\n    // Always respect the user flag.  Otherwise don't reset on mutation\n    // submission navigations unless they redirect\n    let preventScrollReset =\n      pendingPreventScrollReset === true ||\n      (state.navigation.formMethod != null &&\n        isMutationMethod(state.navigation.formMethod) &&\n        location.state?._isRedirect !== true);\n\n    // Commit any in-flight routes at the end of the HMR revalidation \"navigation\"\n    if (inFlightDataRoutes) {\n      dataRoutes = inFlightDataRoutes;\n      inFlightDataRoutes = undefined;\n    }\n\n    if (isUninterruptedRevalidation) {\n      // If this was an uninterrupted revalidation then do not touch history\n    } else if (pendingAction === HistoryAction.Pop) {\n      // Do nothing for POP - URL has already been updated\n    } else if (pendingAction === HistoryAction.Push) {\n      init.history.push(location, location.state);\n    } else if (pendingAction === HistoryAction.Replace) {\n      init.history.replace(location, location.state);\n    }\n\n    let viewTransitionOpts: ViewTransitionOpts | undefined;\n\n    // On POP, enable transitions if they were enabled on the original navigation\n    if (pendingAction === HistoryAction.Pop) {\n      // Forward takes precedence so they behave like the original navigation\n      let priorPaths = appliedViewTransitions.get(state.location.pathname);\n      if (priorPaths && priorPaths.has(location.pathname)) {\n        viewTransitionOpts = {\n          currentLocation: state.location,\n          nextLocation: location,\n        };\n      } else if (appliedViewTransitions.has(location.pathname)) {\n        // If we don't have a previous forward nav, assume we're popping back to\n        // the new location and enable if that location previously enabled\n        viewTransitionOpts = {\n          currentLocation: location,\n          nextLocation: state.location,\n        };\n      }\n    } else if (pendingViewTransitionEnabled) {\n      // Store the applied transition on PUSH/REPLACE\n      let toPaths = appliedViewTransitions.get(state.location.pathname);\n      if (toPaths) {\n        toPaths.add(location.pathname);\n      } else {\n        toPaths = new Set<string>([location.pathname]);\n        appliedViewTransitions.set(state.location.pathname, toPaths);\n      }\n      viewTransitionOpts = {\n        currentLocation: state.location,\n        nextLocation: location,\n      };\n    }\n\n    updateState(\n      {\n        ...newState, // matches, errors, fetchers go through as-is\n        actionData,\n        loaderData,\n        historyAction: pendingAction,\n        location,\n        initialized: true,\n        navigation: IDLE_NAVIGATION,\n        revalidation: \"idle\",\n        restoreScrollPosition: getSavedScrollPosition(\n          location,\n          newState.matches || state.matches\n        ),\n        preventScrollReset,\n        blockers,\n      },\n      {\n        viewTransitionOpts,\n        flushSync: flushSync === true,\n      }\n    );\n\n    // Reset stateful navigation vars\n    pendingAction = HistoryAction.Pop;\n    pendingPreventScrollReset = false;\n    pendingViewTransitionEnabled = false;\n    isUninterruptedRevalidation = false;\n    isRevalidationRequired = false;\n    cancelledDeferredRoutes = [];\n    cancelledFetcherLoads = [];\n  }\n\n  // Trigger a navigation event, which can either be a numerical POP or a PUSH\n  // replace with an optional submission\n  async function navigate(\n    to: number | To | null,\n    opts?: RouterNavigateOptions\n  ): Promise<void> {\n    if (typeof to === \"number\") {\n      init.history.go(to);\n      return;\n    }\n\n    let normalizedPath = normalizeTo(\n      state.location,\n      state.matches,\n      basename,\n      future.v7_prependBasename,\n      to,\n      future.v7_relativeSplatPath,\n      opts?.fromRouteId,\n      opts?.relative\n    );\n    let { path, submission, error } = normalizeNavigateOptions(\n      future.v7_normalizeFormMethod,\n      false,\n      normalizedPath,\n      opts\n    );\n\n    let currentLocation = state.location;\n    let nextLocation = createLocation(state.location, path, opts && opts.state);\n\n    // When using navigate as a PUSH/REPLACE we aren't reading an already-encoded\n    // URL from window.location, so we need to encode it here so the behavior\n    // remains the same as POP and non-data-router usages.  new URL() does all\n    // the same encoding we'd get from a history.pushState/window.location read\n    // without having to touch history\n    nextLocation = {\n      ...nextLocation,\n      ...init.history.encodeLocation(nextLocation),\n    };\n\n    let userReplace = opts && opts.replace != null ? opts.replace : undefined;\n\n    let historyAction = HistoryAction.Push;\n\n    if (userReplace === true) {\n      historyAction = HistoryAction.Replace;\n    } else if (userReplace === false) {\n      // no-op\n    } else if (\n      submission != null &&\n      isMutationMethod(submission.formMethod) &&\n      submission.formAction === state.location.pathname + state.location.search\n    ) {\n      // By default on submissions to the current location we REPLACE so that\n      // users don't have to double-click the back button to get to the prior\n      // location.  If the user redirects to a different location from the\n      // action/loader this will be ignored and the redirect will be a PUSH\n      historyAction = HistoryAction.Replace;\n    }\n\n    let preventScrollReset =\n      opts && \"preventScrollReset\" in opts\n        ? opts.preventScrollReset === true\n        : undefined;\n\n    let flushSync = (opts && opts.unstable_flushSync) === true;\n\n    let blockerKey = shouldBlockNavigation({\n      currentLocation,\n      nextLocation,\n      historyAction,\n    });\n\n    if (blockerKey) {\n      // Put the blocker into a blocked state\n      updateBlocker(blockerKey, {\n        state: \"blocked\",\n        location: nextLocation,\n        proceed() {\n          updateBlocker(blockerKey!, {\n            state: \"proceeding\",\n            proceed: undefined,\n            reset: undefined,\n            location: nextLocation,\n          });\n          // Send the same navigation through\n          navigate(to, opts);\n        },\n        reset() {\n          let blockers = new Map(state.blockers);\n          blockers.set(blockerKey!, IDLE_BLOCKER);\n          updateState({ blockers });\n        },\n      });\n      return;\n    }\n\n    return await startNavigation(historyAction, nextLocation, {\n      submission,\n      // Send through the formData serialization error if we have one so we can\n      // render at the right error boundary after we match routes\n      pendingError: error,\n      preventScrollReset,\n      replace: opts && opts.replace,\n      enableViewTransition: opts && opts.unstable_viewTransition,\n      flushSync,\n    });\n  }\n\n  // Revalidate all current loaders.  If a navigation is in progress or if this\n  // is interrupted by a navigation, allow this to \"succeed\" by calling all\n  // loaders during the next loader round\n  function revalidate() {\n    interruptActiveLoads();\n    updateState({ revalidation: \"loading\" });\n\n    // If we're currently submitting an action, we don't need to start a new\n    // navigation, we'll just let the follow up loader execution call all loaders\n    if (state.navigation.state === \"submitting\") {\n      return;\n    }\n\n    // If we're currently in an idle state, start a new navigation for the current\n    // action/location and mark it as uninterrupted, which will skip the history\n    // update in completeNavigation\n    if (state.navigation.state === \"idle\") {\n      startNavigation(state.historyAction, state.location, {\n        startUninterruptedRevalidation: true,\n      });\n      return;\n    }\n\n    // Otherwise, if we're currently in a loading state, just start a new\n    // navigation to the navigation.location but do not trigger an uninterrupted\n    // revalidation so that history correctly updates once the navigation completes\n    startNavigation(\n      pendingAction || state.historyAction,\n      state.navigation.location,\n      { overrideNavigation: state.navigation }\n    );\n  }\n\n  // Start a navigation to the given action/location.  Can optionally provide a\n  // overrideNavigation which will override the normalLoad in the case of a redirect\n  // navigation\n  async function startNavigation(\n    historyAction: HistoryAction,\n    location: Location,\n    opts?: {\n      initialHydration?: boolean;\n      submission?: Submission;\n      fetcherSubmission?: Submission;\n      overrideNavigation?: Navigation;\n      pendingError?: ErrorResponseImpl;\n      startUninterruptedRevalidation?: boolean;\n      preventScrollReset?: boolean;\n      replace?: boolean;\n      enableViewTransition?: boolean;\n      flushSync?: boolean;\n    }\n  ): Promise<void> {\n    // Abort any in-progress navigations and start a new one. Unset any ongoing\n    // uninterrupted revalidations unless told otherwise, since we want this\n    // new navigation to update history normally\n    pendingNavigationController && pendingNavigationController.abort();\n    pendingNavigationController = null;\n    pendingAction = historyAction;\n    isUninterruptedRevalidation =\n      (opts && opts.startUninterruptedRevalidation) === true;\n\n    // Save the current scroll position every time we start a new navigation,\n    // and track whether we should reset scroll on completion\n    saveScrollPosition(state.location, state.matches);\n    pendingPreventScrollReset = (opts && opts.preventScrollReset) === true;\n\n    pendingViewTransitionEnabled = (opts && opts.enableViewTransition) === true;\n\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let loadingNavigation = opts && opts.overrideNavigation;\n    let matches = matchRoutes(routesToUse, location, basename);\n    let flushSync = (opts && opts.flushSync) === true;\n\n    let fogOfWar = checkFogOfWar(matches, routesToUse, location.pathname);\n    if (fogOfWar.active && fogOfWar.matches) {\n      matches = fogOfWar.matches;\n    }\n\n    // Short circuit with a 404 on the root error boundary if we match nothing\n    if (!matches) {\n      let { error, notFoundMatches, route } = handleNavigational404(\n        location.pathname\n      );\n      completeNavigation(\n        location,\n        {\n          matches: notFoundMatches,\n          loaderData: {},\n          errors: {\n            [route.id]: error,\n          },\n        },\n        { flushSync }\n      );\n      return;\n    }\n\n    // Short circuit if it's only a hash change and not a revalidation or\n    // mutation submission.\n    //\n    // Ignore on initial page loads because since the initial load will always\n    // be \"same hash\".  For example, on /page#hash and submit a <Form method=\"post\">\n    // which will default to a navigation to /page\n    if (\n      state.initialized &&\n      !isRevalidationRequired &&\n      isHashChangeOnly(state.location, location) &&\n      !(opts && opts.submission && isMutationMethod(opts.submission.formMethod))\n    ) {\n      completeNavigation(location, { matches }, { flushSync });\n      return;\n    }\n\n    // Create a controller/Request for this navigation\n    pendingNavigationController = new AbortController();\n    let request = createClientSideRequest(\n      init.history,\n      location,\n      pendingNavigationController.signal,\n      opts && opts.submission\n    );\n    let pendingActionResult: PendingActionResult | undefined;\n\n    if (opts && opts.pendingError) {\n      // If we have a pendingError, it means the user attempted a GET submission\n      // with binary FormData so assign here and skip to handleLoaders.  That\n      // way we handle calling loaders above the boundary etc.  It's not really\n      // different from an actionError in that sense.\n      pendingActionResult = [\n        findNearestBoundary(matches).route.id,\n        { type: ResultType.error, error: opts.pendingError },\n      ];\n    } else if (\n      opts &&\n      opts.submission &&\n      isMutationMethod(opts.submission.formMethod)\n    ) {\n      // Call action if we received an action submission\n      let actionResult = await handleAction(\n        request,\n        location,\n        opts.submission,\n        matches,\n        fogOfWar.active,\n        { replace: opts.replace, flushSync }\n      );\n\n      if (actionResult.shortCircuited) {\n        return;\n      }\n\n      // If we received a 404 from handleAction, it's because we couldn't lazily\n      // discover the destination route so we don't want to call loaders\n      if (actionResult.pendingActionResult) {\n        let [routeId, result] = actionResult.pendingActionResult;\n        if (\n          isErrorResult(result) &&\n          isRouteErrorResponse(result.error) &&\n          result.error.status === 404\n        ) {\n          pendingNavigationController = null;\n\n          completeNavigation(location, {\n            matches: actionResult.matches,\n            loaderData: {},\n            errors: {\n              [routeId]: result.error,\n            },\n          });\n          return;\n        }\n      }\n\n      matches = actionResult.matches || matches;\n      pendingActionResult = actionResult.pendingActionResult;\n      loadingNavigation = getLoadingNavigation(location, opts.submission);\n      flushSync = false;\n      // No need to do fog of war matching again on loader execution\n      fogOfWar.active = false;\n\n      // Create a GET request for the loaders\n      request = createClientSideRequest(\n        init.history,\n        request.url,\n        request.signal\n      );\n    }\n\n    // Call loaders\n    let {\n      shortCircuited,\n      matches: updatedMatches,\n      loaderData,\n      errors,\n    } = await handleLoaders(\n      request,\n      location,\n      matches,\n      fogOfWar.active,\n      loadingNavigation,\n      opts && opts.submission,\n      opts && opts.fetcherSubmission,\n      opts && opts.replace,\n      opts && opts.initialHydration === true,\n      flushSync,\n      pendingActionResult\n    );\n\n    if (shortCircuited) {\n      return;\n    }\n\n    // Clean up now that the action/loaders have completed.  Don't clean up if\n    // we short circuited because pendingNavigationController will have already\n    // been assigned to a new controller for the next navigation\n    pendingNavigationController = null;\n\n    completeNavigation(location, {\n      matches: updatedMatches || matches,\n      ...getActionDataForCommit(pendingActionResult),\n      loaderData,\n      errors,\n    });\n  }\n\n  // Call the action matched by the leaf route for this navigation and handle\n  // redirects/errors\n  async function handleAction(\n    request: Request,\n    location: Location,\n    submission: Submission,\n    matches: AgnosticDataRouteMatch[],\n    isFogOfWar: boolean,\n    opts: { replace?: boolean; flushSync?: boolean } = {}\n  ): Promise<HandleActionResult> {\n    interruptActiveLoads();\n\n    // Put us in a submitting state\n    let navigation = getSubmittingNavigation(location, submission);\n    updateState({ navigation }, { flushSync: opts.flushSync === true });\n\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(\n        matches,\n        location.pathname,\n        request.signal\n      );\n      if (discoverResult.type === \"aborted\") {\n        return { shortCircuited: true };\n      } else if (discoverResult.type === \"error\") {\n        let { error, notFoundMatches, route } = handleDiscoverRouteError(\n          location.pathname,\n          discoverResult\n        );\n        return {\n          matches: notFoundMatches,\n          pendingActionResult: [\n            route.id,\n            {\n              type: ResultType.error,\n              error,\n            },\n          ],\n        };\n      } else if (!discoverResult.matches) {\n        let { notFoundMatches, error, route } = handleNavigational404(\n          location.pathname\n        );\n        return {\n          matches: notFoundMatches,\n          pendingActionResult: [\n            route.id,\n            {\n              type: ResultType.error,\n              error,\n            },\n          ],\n        };\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n\n    // Call our action and get the result\n    let result: DataResult;\n    let actionMatch = getTargetMatch(matches, location);\n\n    if (!actionMatch.route.action && !actionMatch.route.lazy) {\n      result = {\n        type: ResultType.error,\n        error: getInternalRouterError(405, {\n          method: request.method,\n          pathname: location.pathname,\n          routeId: actionMatch.route.id,\n        }),\n      };\n    } else {\n      let results = await callDataStrategy(\n        \"action\",\n        request,\n        [actionMatch],\n        matches\n      );\n      result = results[0];\n\n      if (request.signal.aborted) {\n        return { shortCircuited: true };\n      }\n    }\n\n    if (isRedirectResult(result)) {\n      let replace: boolean;\n      if (opts && opts.replace != null) {\n        replace = opts.replace;\n      } else {\n        // If the user didn't explicity indicate replace behavior, replace if\n        // we redirected to the exact same location we're currently at to avoid\n        // double back-buttons\n        let location = normalizeRedirectLocation(\n          result.response.headers.get(\"Location\")!,\n          new URL(request.url),\n          basename\n        );\n        replace = location === state.location.pathname + state.location.search;\n      }\n      await startRedirectNavigation(request, result, {\n        submission,\n        replace,\n      });\n      return { shortCircuited: true };\n    }\n\n    if (isDeferredResult(result)) {\n      throw getInternalRouterError(400, { type: \"defer-action\" });\n    }\n\n    if (isErrorResult(result)) {\n      // Store off the pending error - we use it to determine which loaders\n      // to call and will commit it when we complete the navigation\n      let boundaryMatch = findNearestBoundary(matches, actionMatch.route.id);\n\n      // By default, all submissions to the current location are REPLACE\n      // navigations, but if the action threw an error that'll be rendered in\n      // an errorElement, we fall back to PUSH so that the user can use the\n      // back button to get back to the pre-submission form location to try\n      // again\n      if ((opts && opts.replace) !== true) {\n        pendingAction = HistoryAction.Push;\n      }\n\n      return {\n        matches,\n        pendingActionResult: [boundaryMatch.route.id, result],\n      };\n    }\n\n    return {\n      matches,\n      pendingActionResult: [actionMatch.route.id, result],\n    };\n  }\n\n  // Call all applicable loaders for the given matches, handling redirects,\n  // errors, etc.\n  async function handleLoaders(\n    request: Request,\n    location: Location,\n    matches: AgnosticDataRouteMatch[],\n    isFogOfWar: boolean,\n    overrideNavigation?: Navigation,\n    submission?: Submission,\n    fetcherSubmission?: Submission,\n    replace?: boolean,\n    initialHydration?: boolean,\n    flushSync?: boolean,\n    pendingActionResult?: PendingActionResult\n  ): Promise<HandleLoadersResult> {\n    // Figure out the right navigation we want to use for data loading\n    let loadingNavigation =\n      overrideNavigation || getLoadingNavigation(location, submission);\n\n    // If this was a redirect from an action we don't have a \"submission\" but\n    // we have it on the loading navigation so use that if available\n    let activeSubmission =\n      submission ||\n      fetcherSubmission ||\n      getSubmissionFromNavigation(loadingNavigation);\n\n    // If this is an uninterrupted revalidation, we remain in our current idle\n    // state.  If not, we need to switch to our loading state and load data,\n    // preserving any new action data or existing action data (in the case of\n    // a revalidation interrupting an actionReload)\n    // If we have partialHydration enabled, then don't update the state for the\n    // initial data load since it's not a \"navigation\"\n    let shouldUpdateNavigationState =\n      !isUninterruptedRevalidation &&\n      (!future.v7_partialHydration || !initialHydration);\n\n    // When fog of war is enabled, we enter our `loading` state earlier so we\n    // can discover new routes during the `loading` state.  We skip this if\n    // we've already run actions since we would have done our matching already.\n    // If the children() function threw then, we want to proceed with the\n    // partial matches it discovered.\n    if (isFogOfWar) {\n      if (shouldUpdateNavigationState) {\n        let actionData = getUpdatedActionData(pendingActionResult);\n        updateState(\n          {\n            navigation: loadingNavigation,\n            ...(actionData !== undefined ? { actionData } : {}),\n          },\n          {\n            flushSync,\n          }\n        );\n      }\n\n      let discoverResult = await discoverRoutes(\n        matches,\n        location.pathname,\n        request.signal\n      );\n\n      if (discoverResult.type === \"aborted\") {\n        return { shortCircuited: true };\n      } else if (discoverResult.type === \"error\") {\n        let { error, notFoundMatches, route } = handleDiscoverRouteError(\n          location.pathname,\n          discoverResult\n        );\n        return {\n          matches: notFoundMatches,\n          loaderData: {},\n          errors: {\n            [route.id]: error,\n          },\n        };\n      } else if (!discoverResult.matches) {\n        let { error, notFoundMatches, route } = handleNavigational404(\n          location.pathname\n        );\n        return {\n          matches: notFoundMatches,\n          loaderData: {},\n          errors: {\n            [route.id]: error,\n          },\n        };\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let [matchesToLoad, revalidatingFetchers] = getMatchesToLoad(\n      init.history,\n      state,\n      matches,\n      activeSubmission,\n      location,\n      future.v7_partialHydration && initialHydration === true,\n      future.unstable_skipActionErrorRevalidation,\n      isRevalidationRequired,\n      cancelledDeferredRoutes,\n      cancelledFetcherLoads,\n      deletedFetchers,\n      fetchLoadMatches,\n      fetchRedirectIds,\n      routesToUse,\n      basename,\n      pendingActionResult\n    );\n\n    // Cancel pending deferreds for no-longer-matched routes or routes we're\n    // about to reload.  Note that if this is an action reload we would have\n    // already cancelled all pending deferreds so this would be a no-op\n    cancelActiveDeferreds(\n      (routeId) =>\n        !(matches && matches.some((m) => m.route.id === routeId)) ||\n        (matchesToLoad && matchesToLoad.some((m) => m.route.id === routeId))\n    );\n\n    pendingNavigationLoadId = ++incrementingLoadId;\n\n    // Short circuit if we have no loaders to run\n    if (matchesToLoad.length === 0 && revalidatingFetchers.length === 0) {\n      let updatedFetchers = markFetchRedirectsDone();\n      completeNavigation(\n        location,\n        {\n          matches,\n          loaderData: {},\n          // Commit pending error if we're short circuiting\n          errors:\n            pendingActionResult && isErrorResult(pendingActionResult[1])\n              ? { [pendingActionResult[0]]: pendingActionResult[1].error }\n              : null,\n          ...getActionDataForCommit(pendingActionResult),\n          ...(updatedFetchers ? { fetchers: new Map(state.fetchers) } : {}),\n        },\n        { flushSync }\n      );\n      return { shortCircuited: true };\n    }\n\n    if (shouldUpdateNavigationState) {\n      let updates: Partial<RouterState> = {};\n      if (!isFogOfWar) {\n        // Only update navigation/actionNData if we didn't already do it above\n        updates.navigation = loadingNavigation;\n        let actionData = getUpdatedActionData(pendingActionResult);\n        if (actionData !== undefined) {\n          updates.actionData = actionData;\n        }\n      }\n      if (revalidatingFetchers.length > 0) {\n        updates.fetchers = getUpdatedRevalidatingFetchers(revalidatingFetchers);\n      }\n      updateState(updates, { flushSync });\n    }\n\n    revalidatingFetchers.forEach((rf) => {\n      if (fetchControllers.has(rf.key)) {\n        abortFetcher(rf.key);\n      }\n      if (rf.controller) {\n        // Fetchers use an independent AbortController so that aborting a fetcher\n        // (via deleteFetcher) does not abort the triggering navigation that\n        // triggered the revalidation\n        fetchControllers.set(rf.key, rf.controller);\n      }\n    });\n\n    // Proxy navigation abort through to revalidation fetchers\n    let abortPendingFetchRevalidations = () =>\n      revalidatingFetchers.forEach((f) => abortFetcher(f.key));\n    if (pendingNavigationController) {\n      pendingNavigationController.signal.addEventListener(\n        \"abort\",\n        abortPendingFetchRevalidations\n      );\n    }\n\n    let { loaderResults, fetcherResults } =\n      await callLoadersAndMaybeResolveData(\n        state.matches,\n        matches,\n        matchesToLoad,\n        revalidatingFetchers,\n        request\n      );\n\n    if (request.signal.aborted) {\n      return { shortCircuited: true };\n    }\n\n    // Clean up _after_ loaders have completed.  Don't clean up if we short\n    // circuited because fetchControllers would have been aborted and\n    // reassigned to new controllers for the next navigation\n    if (pendingNavigationController) {\n      pendingNavigationController.signal.removeEventListener(\n        \"abort\",\n        abortPendingFetchRevalidations\n      );\n    }\n    revalidatingFetchers.forEach((rf) => fetchControllers.delete(rf.key));\n\n    // If any loaders returned a redirect Response, start a new REPLACE navigation\n    let redirect = findRedirect([...loaderResults, ...fetcherResults]);\n    if (redirect) {\n      if (redirect.idx >= matchesToLoad.length) {\n        // If this redirect came from a fetcher make sure we mark it in\n        // fetchRedirectIds so it doesn't get revalidated on the next set of\n        // loader executions\n        let fetcherKey =\n          revalidatingFetchers[redirect.idx - matchesToLoad.length].key;\n        fetchRedirectIds.add(fetcherKey);\n      }\n      await startRedirectNavigation(request, redirect.result, {\n        replace,\n      });\n      return { shortCircuited: true };\n    }\n\n    // Process and commit output from loaders\n    let { loaderData, errors } = processLoaderData(\n      state,\n      matches,\n      matchesToLoad,\n      loaderResults,\n      pendingActionResult,\n      revalidatingFetchers,\n      fetcherResults,\n      activeDeferreds\n    );\n\n    // Wire up subscribers to update loaderData as promises settle\n    activeDeferreds.forEach((deferredData, routeId) => {\n      deferredData.subscribe((aborted) => {\n        // Note: No need to updateState here since the TrackedPromise on\n        // loaderData is stable across resolve/reject\n        // Remove this instance if we were aborted or if promises have settled\n        if (aborted || deferredData.done) {\n          activeDeferreds.delete(routeId);\n        }\n      });\n    });\n\n    // During partial hydration, preserve SSR errors for routes that don't re-run\n    if (future.v7_partialHydration && initialHydration && state.errors) {\n      Object.entries(state.errors)\n        .filter(([id]) => !matchesToLoad.some((m) => m.route.id === id))\n        .forEach(([routeId, error]) => {\n          errors = Object.assign(errors || {}, { [routeId]: error });\n        });\n    }\n\n    let updatedFetchers = markFetchRedirectsDone();\n    let didAbortFetchLoads = abortStaleFetchLoads(pendingNavigationLoadId);\n    let shouldUpdateFetchers =\n      updatedFetchers || didAbortFetchLoads || revalidatingFetchers.length > 0;\n\n    return {\n      matches,\n      loaderData,\n      errors,\n      ...(shouldUpdateFetchers ? { fetchers: new Map(state.fetchers) } : {}),\n    };\n  }\n\n  function getUpdatedActionData(\n    pendingActionResult: PendingActionResult | undefined\n  ): Record<string, RouteData> | null | undefined {\n    if (pendingActionResult && !isErrorResult(pendingActionResult[1])) {\n      // This is cast to `any` currently because `RouteData`uses any and it\n      // would be a breaking change to use any.\n      // TODO: v7 - change `RouteData` to use `unknown` instead of `any`\n      return {\n        [pendingActionResult[0]]: pendingActionResult[1].data as any,\n      };\n    } else if (state.actionData) {\n      if (Object.keys(state.actionData).length === 0) {\n        return null;\n      } else {\n        return state.actionData;\n      }\n    }\n  }\n\n  function getUpdatedRevalidatingFetchers(\n    revalidatingFetchers: RevalidatingFetcher[]\n  ) {\n    revalidatingFetchers.forEach((rf) => {\n      let fetcher = state.fetchers.get(rf.key);\n      let revalidatingFetcher = getLoadingFetcher(\n        undefined,\n        fetcher ? fetcher.data : undefined\n      );\n      state.fetchers.set(rf.key, revalidatingFetcher);\n    });\n    return new Map(state.fetchers);\n  }\n\n  // Trigger a fetcher load/submit for the given fetcher key\n  function fetch(\n    key: string,\n    routeId: string,\n    href: string | null,\n    opts?: RouterFetchOptions\n  ) {\n    if (isServer) {\n      throw new Error(\n        \"router.fetch() was called during the server render, but it shouldn't be. \" +\n          \"You are likely calling a useFetcher() method in the body of your component. \" +\n          \"Try moving it to a useEffect or a callback.\"\n      );\n    }\n\n    if (fetchControllers.has(key)) abortFetcher(key);\n    let flushSync = (opts && opts.unstable_flushSync) === true;\n\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let normalizedPath = normalizeTo(\n      state.location,\n      state.matches,\n      basename,\n      future.v7_prependBasename,\n      href,\n      future.v7_relativeSplatPath,\n      routeId,\n      opts?.relative\n    );\n    let matches = matchRoutes(routesToUse, normalizedPath, basename);\n\n    let fogOfWar = checkFogOfWar(matches, routesToUse, normalizedPath);\n    if (fogOfWar.active && fogOfWar.matches) {\n      matches = fogOfWar.matches;\n    }\n\n    if (!matches) {\n      setFetcherError(\n        key,\n        routeId,\n        getInternalRouterError(404, { pathname: normalizedPath }),\n        { flushSync }\n      );\n      return;\n    }\n\n    let { path, submission, error } = normalizeNavigateOptions(\n      future.v7_normalizeFormMethod,\n      true,\n      normalizedPath,\n      opts\n    );\n\n    if (error) {\n      setFetcherError(key, routeId, error, { flushSync });\n      return;\n    }\n\n    let match = getTargetMatch(matches, path);\n\n    pendingPreventScrollReset = (opts && opts.preventScrollReset) === true;\n\n    if (submission && isMutationMethod(submission.formMethod)) {\n      handleFetcherAction(\n        key,\n        routeId,\n        path,\n        match,\n        matches,\n        fogOfWar.active,\n        flushSync,\n        submission\n      );\n      return;\n    }\n\n    // Store off the match so we can call it's shouldRevalidate on subsequent\n    // revalidations\n    fetchLoadMatches.set(key, { routeId, path });\n    handleFetcherLoader(\n      key,\n      routeId,\n      path,\n      match,\n      matches,\n      fogOfWar.active,\n      flushSync,\n      submission\n    );\n  }\n\n  // Call the action for the matched fetcher.submit(), and then handle redirects,\n  // errors, and revalidation\n  async function handleFetcherAction(\n    key: string,\n    routeId: string,\n    path: string,\n    match: AgnosticDataRouteMatch,\n    requestMatches: AgnosticDataRouteMatch[],\n    isFogOfWar: boolean,\n    flushSync: boolean,\n    submission: Submission\n  ) {\n    interruptActiveLoads();\n    fetchLoadMatches.delete(key);\n\n    function detectAndHandle405Error(m: AgnosticDataRouteMatch) {\n      if (!m.route.action && !m.route.lazy) {\n        let error = getInternalRouterError(405, {\n          method: submission.formMethod,\n          pathname: path,\n          routeId: routeId,\n        });\n        setFetcherError(key, routeId, error, { flushSync });\n        return true;\n      }\n      return false;\n    }\n\n    if (!isFogOfWar && detectAndHandle405Error(match)) {\n      return;\n    }\n\n    // Put this fetcher into it's submitting state\n    let existingFetcher = state.fetchers.get(key);\n    updateFetcherState(key, getSubmittingFetcher(submission, existingFetcher), {\n      flushSync,\n    });\n\n    let abortController = new AbortController();\n    let fetchRequest = createClientSideRequest(\n      init.history,\n      path,\n      abortController.signal,\n      submission\n    );\n\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(\n        requestMatches,\n        path,\n        fetchRequest.signal\n      );\n\n      if (discoverResult.type === \"aborted\") {\n        return;\n      } else if (discoverResult.type === \"error\") {\n        let { error } = handleDiscoverRouteError(path, discoverResult);\n        setFetcherError(key, routeId, error, { flushSync });\n        return;\n      } else if (!discoverResult.matches) {\n        setFetcherError(\n          key,\n          routeId,\n          getInternalRouterError(404, { pathname: path }),\n          { flushSync }\n        );\n        return;\n      } else {\n        requestMatches = discoverResult.matches;\n        match = getTargetMatch(requestMatches, path);\n\n        if (detectAndHandle405Error(match)) {\n          return;\n        }\n      }\n    }\n\n    // Call the action for the fetcher\n    fetchControllers.set(key, abortController);\n\n    let originatingLoadId = incrementingLoadId;\n    let actionResults = await callDataStrategy(\n      \"action\",\n      fetchRequest,\n      [match],\n      requestMatches\n    );\n    let actionResult = actionResults[0];\n\n    if (fetchRequest.signal.aborted) {\n      // We can delete this so long as we weren't aborted by our own fetcher\n      // re-submit which would have put _new_ controller is in fetchControllers\n      if (fetchControllers.get(key) === abortController) {\n        fetchControllers.delete(key);\n      }\n      return;\n    }\n\n    // When using v7_fetcherPersist, we don't want errors bubbling up to the UI\n    // or redirects processed for unmounted fetchers so we just revert them to\n    // idle\n    if (future.v7_fetcherPersist && deletedFetchers.has(key)) {\n      if (isRedirectResult(actionResult) || isErrorResult(actionResult)) {\n        updateFetcherState(key, getDoneFetcher(undefined));\n        return;\n      }\n      // Let SuccessResult's fall through for revalidation\n    } else {\n      if (isRedirectResult(actionResult)) {\n        fetchControllers.delete(key);\n        if (pendingNavigationLoadId > originatingLoadId) {\n          // A new navigation was kicked off after our action started, so that\n          // should take precedence over this redirect navigation.  We already\n          // set isRevalidationRequired so all loaders for the new route should\n          // fire unless opted out via shouldRevalidate\n          updateFetcherState(key, getDoneFetcher(undefined));\n          return;\n        } else {\n          fetchRedirectIds.add(key);\n          updateFetcherState(key, getLoadingFetcher(submission));\n          return startRedirectNavigation(fetchRequest, actionResult, {\n            fetcherSubmission: submission,\n          });\n        }\n      }\n\n      // Process any non-redirect errors thrown\n      if (isErrorResult(actionResult)) {\n        setFetcherError(key, routeId, actionResult.error);\n        return;\n      }\n    }\n\n    if (isDeferredResult(actionResult)) {\n      throw getInternalRouterError(400, { type: \"defer-action\" });\n    }\n\n    // Start the data load for current matches, or the next location if we're\n    // in the middle of a navigation\n    let nextLocation = state.navigation.location || state.location;\n    let revalidationRequest = createClientSideRequest(\n      init.history,\n      nextLocation,\n      abortController.signal\n    );\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let matches =\n      state.navigation.state !== \"idle\"\n        ? matchRoutes(routesToUse, state.navigation.location, basename)\n        : state.matches;\n\n    invariant(matches, \"Didn't find any matches after fetcher action\");\n\n    let loadId = ++incrementingLoadId;\n    fetchReloadIds.set(key, loadId);\n\n    let loadFetcher = getLoadingFetcher(submission, actionResult.data);\n    state.fetchers.set(key, loadFetcher);\n\n    let [matchesToLoad, revalidatingFetchers] = getMatchesToLoad(\n      init.history,\n      state,\n      matches,\n      submission,\n      nextLocation,\n      false,\n      future.unstable_skipActionErrorRevalidation,\n      isRevalidationRequired,\n      cancelledDeferredRoutes,\n      cancelledFetcherLoads,\n      deletedFetchers,\n      fetchLoadMatches,\n      fetchRedirectIds,\n      routesToUse,\n      basename,\n      [match.route.id, actionResult]\n    );\n\n    // Put all revalidating fetchers into the loading state, except for the\n    // current fetcher which we want to keep in it's current loading state which\n    // contains it's action submission info + action data\n    revalidatingFetchers\n      .filter((rf) => rf.key !== key)\n      .forEach((rf) => {\n        let staleKey = rf.key;\n        let existingFetcher = state.fetchers.get(staleKey);\n        let revalidatingFetcher = getLoadingFetcher(\n          undefined,\n          existingFetcher ? existingFetcher.data : undefined\n        );\n        state.fetchers.set(staleKey, revalidatingFetcher);\n        if (fetchControllers.has(staleKey)) {\n          abortFetcher(staleKey);\n        }\n        if (rf.controller) {\n          fetchControllers.set(staleKey, rf.controller);\n        }\n      });\n\n    updateState({ fetchers: new Map(state.fetchers) });\n\n    let abortPendingFetchRevalidations = () =>\n      revalidatingFetchers.forEach((rf) => abortFetcher(rf.key));\n\n    abortController.signal.addEventListener(\n      \"abort\",\n      abortPendingFetchRevalidations\n    );\n\n    let { loaderResults, fetcherResults } =\n      await callLoadersAndMaybeResolveData(\n        state.matches,\n        matches,\n        matchesToLoad,\n        revalidatingFetchers,\n        revalidationRequest\n      );\n\n    if (abortController.signal.aborted) {\n      return;\n    }\n\n    abortController.signal.removeEventListener(\n      \"abort\",\n      abortPendingFetchRevalidations\n    );\n\n    fetchReloadIds.delete(key);\n    fetchControllers.delete(key);\n    revalidatingFetchers.forEach((r) => fetchControllers.delete(r.key));\n\n    let redirect = findRedirect([...loaderResults, ...fetcherResults]);\n    if (redirect) {\n      if (redirect.idx >= matchesToLoad.length) {\n        // If this redirect came from a fetcher make sure we mark it in\n        // fetchRedirectIds so it doesn't get revalidated on the next set of\n        // loader executions\n        let fetcherKey =\n          revalidatingFetchers[redirect.idx - matchesToLoad.length].key;\n        fetchRedirectIds.add(fetcherKey);\n      }\n      return startRedirectNavigation(revalidationRequest, redirect.result);\n    }\n\n    // Process and commit output from loaders\n    let { loaderData, errors } = processLoaderData(\n      state,\n      state.matches,\n      matchesToLoad,\n      loaderResults,\n      undefined,\n      revalidatingFetchers,\n      fetcherResults,\n      activeDeferreds\n    );\n\n    // Since we let revalidations complete even if the submitting fetcher was\n    // deleted, only put it back to idle if it hasn't been deleted\n    if (state.fetchers.has(key)) {\n      let doneFetcher = getDoneFetcher(actionResult.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n\n    abortStaleFetchLoads(loadId);\n\n    // If we are currently in a navigation loading state and this fetcher is\n    // more recent than the navigation, we want the newer data so abort the\n    // navigation and complete it with the fetcher data\n    if (\n      state.navigation.state === \"loading\" &&\n      loadId > pendingNavigationLoadId\n    ) {\n      invariant(pendingAction, \"Expected pending action\");\n      pendingNavigationController && pendingNavigationController.abort();\n\n      completeNavigation(state.navigation.location, {\n        matches,\n        loaderData,\n        errors,\n        fetchers: new Map(state.fetchers),\n      });\n    } else {\n      // otherwise just update with the fetcher data, preserving any existing\n      // loaderData for loaders that did not need to reload.  We have to\n      // manually merge here since we aren't going through completeNavigation\n      updateState({\n        errors,\n        loaderData: mergeLoaderData(\n          state.loaderData,\n          loaderData,\n          matches,\n          errors\n        ),\n        fetchers: new Map(state.fetchers),\n      });\n      isRevalidationRequired = false;\n    }\n  }\n\n  // Call the matched loader for fetcher.load(), handling redirects, errors, etc.\n  async function handleFetcherLoader(\n    key: string,\n    routeId: string,\n    path: string,\n    match: AgnosticDataRouteMatch,\n    matches: AgnosticDataRouteMatch[],\n    isFogOfWar: boolean,\n    flushSync: boolean,\n    submission?: Submission\n  ) {\n    let existingFetcher = state.fetchers.get(key);\n    updateFetcherState(\n      key,\n      getLoadingFetcher(\n        submission,\n        existingFetcher ? existingFetcher.data : undefined\n      ),\n      { flushSync }\n    );\n\n    let abortController = new AbortController();\n    let fetchRequest = createClientSideRequest(\n      init.history,\n      path,\n      abortController.signal\n    );\n\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(\n        matches,\n        path,\n        fetchRequest.signal\n      );\n\n      if (discoverResult.type === \"aborted\") {\n        return;\n      } else if (discoverResult.type === \"error\") {\n        let { error } = handleDiscoverRouteError(path, discoverResult);\n        setFetcherError(key, routeId, error, { flushSync });\n        return;\n      } else if (!discoverResult.matches) {\n        setFetcherError(\n          key,\n          routeId,\n          getInternalRouterError(404, { pathname: path }),\n          { flushSync }\n        );\n        return;\n      } else {\n        matches = discoverResult.matches;\n        match = getTargetMatch(matches, path);\n      }\n    }\n\n    // Call the loader for this fetcher route match\n    fetchControllers.set(key, abortController);\n\n    let originatingLoadId = incrementingLoadId;\n    let results = await callDataStrategy(\n      \"loader\",\n      fetchRequest,\n      [match],\n      matches\n    );\n    let result = results[0];\n\n    // Deferred isn't supported for fetcher loads, await everything and treat it\n    // as a normal load.  resolveDeferredData will return undefined if this\n    // fetcher gets aborted, so we just leave result untouched and short circuit\n    // below if that happens\n    if (isDeferredResult(result)) {\n      result =\n        (await resolveDeferredData(result, fetchRequest.signal, true)) ||\n        result;\n    }\n\n    // We can delete this so long as we weren't aborted by our our own fetcher\n    // re-load which would have put _new_ controller is in fetchControllers\n    if (fetchControllers.get(key) === abortController) {\n      fetchControllers.delete(key);\n    }\n\n    if (fetchRequest.signal.aborted) {\n      return;\n    }\n\n    // We don't want errors bubbling up or redirects followed for unmounted\n    // fetchers, so short circuit here if it was removed from the UI\n    if (deletedFetchers.has(key)) {\n      updateFetcherState(key, getDoneFetcher(undefined));\n      return;\n    }\n\n    // If the loader threw a redirect Response, start a new REPLACE navigation\n    if (isRedirectResult(result)) {\n      if (pendingNavigationLoadId > originatingLoadId) {\n        // A new navigation was kicked off after our loader started, so that\n        // should take precedence over this redirect navigation\n        updateFetcherState(key, getDoneFetcher(undefined));\n        return;\n      } else {\n        fetchRedirectIds.add(key);\n        await startRedirectNavigation(fetchRequest, result);\n        return;\n      }\n    }\n\n    // Process any non-redirect errors thrown\n    if (isErrorResult(result)) {\n      setFetcherError(key, routeId, result.error);\n      return;\n    }\n\n    invariant(!isDeferredResult(result), \"Unhandled fetcher deferred data\");\n\n    // Put the fetcher back into an idle state\n    updateFetcherState(key, getDoneFetcher(result.data));\n  }\n\n  /**\n   * Utility function to handle redirects returned from an action or loader.\n   * Normally, a redirect \"replaces\" the navigation that triggered it.  So, for\n   * example:\n   *\n   *  - user is on /a\n   *  - user clicks a link to /b\n   *  - loader for /b redirects to /c\n   *\n   * In a non-JS app the browser would track the in-flight navigation to /b and\n   * then replace it with /c when it encountered the redirect response.  In\n   * the end it would only ever update the URL bar with /c.\n   *\n   * In client-side routing using pushState/replaceState, we aim to emulate\n   * this behavior and we also do not update history until the end of the\n   * navigation (including processed redirects).  This means that we never\n   * actually touch history until we've processed redirects, so we just use\n   * the history action from the original navigation (PUSH or REPLACE).\n   */\n  async function startRedirectNavigation(\n    request: Request,\n    redirect: RedirectResult,\n    {\n      submission,\n      fetcherSubmission,\n      replace,\n    }: {\n      submission?: Submission;\n      fetcherSubmission?: Submission;\n      replace?: boolean;\n    } = {}\n  ) {\n    if (redirect.response.headers.has(\"X-Remix-Revalidate\")) {\n      isRevalidationRequired = true;\n    }\n\n    let location = redirect.response.headers.get(\"Location\");\n    invariant(location, \"Expected a Location header on the redirect Response\");\n    location = normalizeRedirectLocation(\n      location,\n      new URL(request.url),\n      basename\n    );\n    let redirectLocation = createLocation(state.location, location, {\n      _isRedirect: true,\n    });\n\n    if (isBrowser) {\n      let isDocumentReload = false;\n\n      if (redirect.response.headers.has(\"X-Remix-Reload-Document\")) {\n        // Hard reload if the response contained X-Remix-Reload-Document\n        isDocumentReload = true;\n      } else if (ABSOLUTE_URL_REGEX.test(location)) {\n        const url = init.history.createURL(location);\n        isDocumentReload =\n          // Hard reload if it's an absolute URL to a new origin\n          url.origin !== routerWindow.location.origin ||\n          // Hard reload if it's an absolute URL that does not match our basename\n          stripBasename(url.pathname, basename) == null;\n      }\n\n      if (isDocumentReload) {\n        if (replace) {\n          routerWindow.location.replace(location);\n        } else {\n          routerWindow.location.assign(location);\n        }\n        return;\n      }\n    }\n\n    // There's no need to abort on redirects, since we don't detect the\n    // redirect until the action/loaders have settled\n    pendingNavigationController = null;\n\n    let redirectHistoryAction =\n      replace === true ? HistoryAction.Replace : HistoryAction.Push;\n\n    // Use the incoming submission if provided, fallback on the active one in\n    // state.navigation\n    let { formMethod, formAction, formEncType } = state.navigation;\n    if (\n      !submission &&\n      !fetcherSubmission &&\n      formMethod &&\n      formAction &&\n      formEncType\n    ) {\n      submission = getSubmissionFromNavigation(state.navigation);\n    }\n\n    // If this was a 307/308 submission we want to preserve the HTTP method and\n    // re-submit the GET/POST/PUT/PATCH/DELETE as a submission navigation to the\n    // redirected location\n    let activeSubmission = submission || fetcherSubmission;\n    if (\n      redirectPreserveMethodStatusCodes.has(redirect.response.status) &&\n      activeSubmission &&\n      isMutationMethod(activeSubmission.formMethod)\n    ) {\n      await startNavigation(redirectHistoryAction, redirectLocation, {\n        submission: {\n          ...activeSubmission,\n          formAction: location,\n        },\n        // Preserve this flag across redirects\n        preventScrollReset: pendingPreventScrollReset,\n      });\n    } else {\n      // If we have a navigation submission, we will preserve it through the\n      // redirect navigation\n      let overrideNavigation = getLoadingNavigation(\n        redirectLocation,\n        submission\n      );\n      await startNavigation(redirectHistoryAction, redirectLocation, {\n        overrideNavigation,\n        // Send fetcher submissions through for shouldRevalidate\n        fetcherSubmission,\n        // Preserve this flag across redirects\n        preventScrollReset: pendingPreventScrollReset,\n      });\n    }\n  }\n\n  // Utility wrapper for calling dataStrategy client-side without having to\n  // pass around the manifest, mapRouteProperties, etc.\n  async function callDataStrategy(\n    type: \"loader\" | \"action\",\n    request: Request,\n    matchesToLoad: AgnosticDataRouteMatch[],\n    matches: AgnosticDataRouteMatch[]\n  ): Promise<DataResult[]> {\n    try {\n      let results = await callDataStrategyImpl(\n        dataStrategyImpl,\n        type,\n        request,\n        matchesToLoad,\n        matches,\n        manifest,\n        mapRouteProperties\n      );\n\n      return await Promise.all(\n        results.map((result, i) => {\n          if (isRedirectHandlerResult(result)) {\n            let response = result.result as Response;\n            return {\n              type: ResultType.redirect,\n              response: normalizeRelativeRoutingRedirectResponse(\n                response,\n                request,\n                matchesToLoad[i].route.id,\n                matches,\n                basename,\n                future.v7_relativeSplatPath\n              ),\n            };\n          }\n\n          return convertHandlerResultToDataResult(result);\n        })\n      );\n    } catch (e) {\n      // If the outer dataStrategy method throws, just return the error for all\n      // matches - and it'll naturally bubble to the root\n      return matchesToLoad.map(() => ({\n        type: ResultType.error,\n        error: e,\n      }));\n    }\n  }\n\n  async function callLoadersAndMaybeResolveData(\n    currentMatches: AgnosticDataRouteMatch[],\n    matches: AgnosticDataRouteMatch[],\n    matchesToLoad: AgnosticDataRouteMatch[],\n    fetchersToLoad: RevalidatingFetcher[],\n    request: Request\n  ) {\n    let [loaderResults, ...fetcherResults] = await Promise.all([\n      matchesToLoad.length\n        ? callDataStrategy(\"loader\", request, matchesToLoad, matches)\n        : [],\n      ...fetchersToLoad.map((f) => {\n        if (f.matches && f.match && f.controller) {\n          let fetcherRequest = createClientSideRequest(\n            init.history,\n            f.path,\n            f.controller.signal\n          );\n          return callDataStrategy(\n            \"loader\",\n            fetcherRequest,\n            [f.match],\n            f.matches\n          ).then((r) => r[0]);\n        } else {\n          return Promise.resolve<DataResult>({\n            type: ResultType.error,\n            error: getInternalRouterError(404, {\n              pathname: f.path,\n            }),\n          });\n        }\n      }),\n    ]);\n\n    await Promise.all([\n      resolveDeferredResults(\n        currentMatches,\n        matchesToLoad,\n        loaderResults,\n        loaderResults.map(() => request.signal),\n        false,\n        state.loaderData\n      ),\n      resolveDeferredResults(\n        currentMatches,\n        fetchersToLoad.map((f) => f.match),\n        fetcherResults,\n        fetchersToLoad.map((f) => (f.controller ? f.controller.signal : null)),\n        true\n      ),\n    ]);\n\n    return {\n      loaderResults,\n      fetcherResults,\n    };\n  }\n\n  function interruptActiveLoads() {\n    // Every interruption triggers a revalidation\n    isRevalidationRequired = true;\n\n    // Cancel pending route-level deferreds and mark cancelled routes for\n    // revalidation\n    cancelledDeferredRoutes.push(...cancelActiveDeferreds());\n\n    // Abort in-flight fetcher loads\n    fetchLoadMatches.forEach((_, key) => {\n      if (fetchControllers.has(key)) {\n        cancelledFetcherLoads.push(key);\n        abortFetcher(key);\n      }\n    });\n  }\n\n  function updateFetcherState(\n    key: string,\n    fetcher: Fetcher,\n    opts: { flushSync?: boolean } = {}\n  ) {\n    state.fetchers.set(key, fetcher);\n    updateState(\n      { fetchers: new Map(state.fetchers) },\n      { flushSync: (opts && opts.flushSync) === true }\n    );\n  }\n\n  function setFetcherError(\n    key: string,\n    routeId: string,\n    error: any,\n    opts: { flushSync?: boolean } = {}\n  ) {\n    let boundaryMatch = findNearestBoundary(state.matches, routeId);\n    deleteFetcher(key);\n    updateState(\n      {\n        errors: {\n          [boundaryMatch.route.id]: error,\n        },\n        fetchers: new Map(state.fetchers),\n      },\n      { flushSync: (opts && opts.flushSync) === true }\n    );\n  }\n\n  function getFetcher<TData = any>(key: string): Fetcher<TData> {\n    if (future.v7_fetcherPersist) {\n      activeFetchers.set(key, (activeFetchers.get(key) || 0) + 1);\n      // If this fetcher was previously marked for deletion, unmark it since we\n      // have a new instance\n      if (deletedFetchers.has(key)) {\n        deletedFetchers.delete(key);\n      }\n    }\n    return state.fetchers.get(key) || IDLE_FETCHER;\n  }\n\n  function deleteFetcher(key: string): void {\n    let fetcher = state.fetchers.get(key);\n    // Don't abort the controller if this is a deletion of a fetcher.submit()\n    // in it's loading phase since - we don't want to abort the corresponding\n    // revalidation and want them to complete and land\n    if (\n      fetchControllers.has(key) &&\n      !(fetcher && fetcher.state === \"loading\" && fetchReloadIds.has(key))\n    ) {\n      abortFetcher(key);\n    }\n    fetchLoadMatches.delete(key);\n    fetchReloadIds.delete(key);\n    fetchRedirectIds.delete(key);\n    deletedFetchers.delete(key);\n    state.fetchers.delete(key);\n  }\n\n  function deleteFetcherAndUpdateState(key: string): void {\n    if (future.v7_fetcherPersist) {\n      let count = (activeFetchers.get(key) || 0) - 1;\n      if (count <= 0) {\n        activeFetchers.delete(key);\n        deletedFetchers.add(key);\n      } else {\n        activeFetchers.set(key, count);\n      }\n    } else {\n      deleteFetcher(key);\n    }\n    updateState({ fetchers: new Map(state.fetchers) });\n  }\n\n  function abortFetcher(key: string) {\n    let controller = fetchControllers.get(key);\n    invariant(controller, `Expected fetch controller: ${key}`);\n    controller.abort();\n    fetchControllers.delete(key);\n  }\n\n  function markFetchersDone(keys: string[]) {\n    for (let key of keys) {\n      let fetcher = getFetcher(key);\n      let doneFetcher = getDoneFetcher(fetcher.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n  }\n\n  function markFetchRedirectsDone(): boolean {\n    let doneKeys = [];\n    let updatedFetchers = false;\n    for (let key of fetchRedirectIds) {\n      let fetcher = state.fetchers.get(key);\n      invariant(fetcher, `Expected fetcher: ${key}`);\n      if (fetcher.state === \"loading\") {\n        fetchRedirectIds.delete(key);\n        doneKeys.push(key);\n        updatedFetchers = true;\n      }\n    }\n    markFetchersDone(doneKeys);\n    return updatedFetchers;\n  }\n\n  function abortStaleFetchLoads(landedId: number): boolean {\n    let yeetedKeys = [];\n    for (let [key, id] of fetchReloadIds) {\n      if (id < landedId) {\n        let fetcher = state.fetchers.get(key);\n        invariant(fetcher, `Expected fetcher: ${key}`);\n        if (fetcher.state === \"loading\") {\n          abortFetcher(key);\n          fetchReloadIds.delete(key);\n          yeetedKeys.push(key);\n        }\n      }\n    }\n    markFetchersDone(yeetedKeys);\n    return yeetedKeys.length > 0;\n  }\n\n  function getBlocker(key: string, fn: BlockerFunction) {\n    let blocker: Blocker = state.blockers.get(key) || IDLE_BLOCKER;\n\n    if (blockerFunctions.get(key) !== fn) {\n      blockerFunctions.set(key, fn);\n    }\n\n    return blocker;\n  }\n\n  function deleteBlocker(key: string) {\n    state.blockers.delete(key);\n    blockerFunctions.delete(key);\n  }\n\n  // Utility function to update blockers, ensuring valid state transitions\n  function updateBlocker(key: string, newBlocker: Blocker) {\n    let blocker = state.blockers.get(key) || IDLE_BLOCKER;\n\n    // Poor mans state machine :)\n    // https://mermaid.live/edit#pako:eNqVkc9OwzAMxl8l8nnjAYrEtDIOHEBIgwvKJTReGy3_lDpIqO27k6awMG0XcrLlnz87nwdonESogKXXBuE79rq75XZO3-yHds0RJVuv70YrPlUrCEe2HfrORS3rubqZfuhtpg5C9wk5tZ4VKcRUq88q9Z8RS0-48cE1iHJkL0ugbHuFLus9L6spZy8nX9MP2CNdomVaposqu3fGayT8T8-jJQwhepo_UtpgBQaDEUom04dZhAN1aJBDlUKJBxE1ceB2Smj0Mln-IBW5AFU2dwUiktt_2Qaq2dBfaKdEup85UV7Yd-dKjlnkabl2Pvr0DTkTreM\n    invariant(\n      (blocker.state === \"unblocked\" && newBlocker.state === \"blocked\") ||\n        (blocker.state === \"blocked\" && newBlocker.state === \"blocked\") ||\n        (blocker.state === \"blocked\" && newBlocker.state === \"proceeding\") ||\n        (blocker.state === \"blocked\" && newBlocker.state === \"unblocked\") ||\n        (blocker.state === \"proceeding\" && newBlocker.state === \"unblocked\"),\n      `Invalid blocker state transition: ${blocker.state} -> ${newBlocker.state}`\n    );\n\n    let blockers = new Map(state.blockers);\n    blockers.set(key, newBlocker);\n    updateState({ blockers });\n  }\n\n  function shouldBlockNavigation({\n    currentLocation,\n    nextLocation,\n    historyAction,\n  }: {\n    currentLocation: Location;\n    nextLocation: Location;\n    historyAction: HistoryAction;\n  }): string | undefined {\n    if (blockerFunctions.size === 0) {\n      return;\n    }\n\n    // We ony support a single active blocker at the moment since we don't have\n    // any compelling use cases for multi-blocker yet\n    if (blockerFunctions.size > 1) {\n      warning(false, \"A router only supports one blocker at a time\");\n    }\n\n    let entries = Array.from(blockerFunctions.entries());\n    let [blockerKey, blockerFunction] = entries[entries.length - 1];\n    let blocker = state.blockers.get(blockerKey);\n\n    if (blocker && blocker.state === \"proceeding\") {\n      // If the blocker is currently proceeding, we don't need to re-check\n      // it and can let this navigation continue\n      return;\n    }\n\n    // At this point, we know we're unblocked/blocked so we need to check the\n    // user-provided blocker function\n    if (blockerFunction({ currentLocation, nextLocation, historyAction })) {\n      return blockerKey;\n    }\n  }\n\n  function handleNavigational404(pathname: string) {\n    let error = getInternalRouterError(404, { pathname });\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let { matches, route } = getShortCircuitMatches(routesToUse);\n\n    // Cancel all pending deferred on 404s since we don't keep any routes\n    cancelActiveDeferreds();\n\n    return { notFoundMatches: matches, route, error };\n  }\n\n  function handleDiscoverRouteError(\n    pathname: string,\n    discoverResult: DiscoverRoutesErrorResult\n  ) {\n    let matches = discoverResult.partialMatches;\n    let route = matches[matches.length - 1].route;\n    let error = getInternalRouterError(400, {\n      type: \"route-discovery\",\n      routeId: route.id,\n      pathname,\n      message:\n        discoverResult.error != null && \"message\" in discoverResult.error\n          ? discoverResult.error\n          : String(discoverResult.error),\n    });\n    return { notFoundMatches: matches, route, error };\n  }\n\n  function cancelActiveDeferreds(\n    predicate?: (routeId: string) => boolean\n  ): string[] {\n    let cancelledRouteIds: string[] = [];\n    activeDeferreds.forEach((dfd, routeId) => {\n      if (!predicate || predicate(routeId)) {\n        // Cancel the deferred - but do not remove from activeDeferreds here -\n        // we rely on the subscribers to do that so our tests can assert proper\n        // cleanup via _internalActiveDeferreds\n        dfd.cancel();\n        cancelledRouteIds.push(routeId);\n        activeDeferreds.delete(routeId);\n      }\n    });\n    return cancelledRouteIds;\n  }\n\n  // Opt in to capturing and reporting scroll positions during navigations,\n  // used by the <ScrollRestoration> component\n  function enableScrollRestoration(\n    positions: Record<string, number>,\n    getPosition: GetScrollPositionFunction,\n    getKey?: GetScrollRestorationKeyFunction\n  ) {\n    savedScrollPositions = positions;\n    getScrollPosition = getPosition;\n    getScrollRestorationKey = getKey || null;\n\n    // Perform initial hydration scroll restoration, since we miss the boat on\n    // the initial updateState() because we've not yet rendered <ScrollRestoration/>\n    // and therefore have no savedScrollPositions available\n    if (!initialScrollRestored && state.navigation === IDLE_NAVIGATION) {\n      initialScrollRestored = true;\n      let y = getSavedScrollPosition(state.location, state.matches);\n      if (y != null) {\n        updateState({ restoreScrollPosition: y });\n      }\n    }\n\n    return () => {\n      savedScrollPositions = null;\n      getScrollPosition = null;\n      getScrollRestorationKey = null;\n    };\n  }\n\n  function getScrollKey(location: Location, matches: AgnosticDataRouteMatch[]) {\n    if (getScrollRestorationKey) {\n      let key = getScrollRestorationKey(\n        location,\n        matches.map((m) => convertRouteMatchToUiMatch(m, state.loaderData))\n      );\n      return key || location.key;\n    }\n    return location.key;\n  }\n\n  function saveScrollPosition(\n    location: Location,\n    matches: AgnosticDataRouteMatch[]\n  ): void {\n    if (savedScrollPositions && getScrollPosition) {\n      let key = getScrollKey(location, matches);\n      savedScrollPositions[key] = getScrollPosition();\n    }\n  }\n\n  function getSavedScrollPosition(\n    location: Location,\n    matches: AgnosticDataRouteMatch[]\n  ): number | null {\n    if (savedScrollPositions) {\n      let key = getScrollKey(location, matches);\n      let y = savedScrollPositions[key];\n      if (typeof y === \"number\") {\n        return y;\n      }\n    }\n    return null;\n  }\n\n  function checkFogOfWar(\n    matches: AgnosticDataRouteMatch[] | null,\n    routesToUse: AgnosticDataRouteObject[],\n    pathname: string\n  ): { active: boolean; matches: AgnosticDataRouteMatch[] | null } {\n    if (patchRoutesOnMissImpl) {\n      if (!matches) {\n        let fogMatches = matchRoutesImpl<AgnosticDataRouteObject>(\n          routesToUse,\n          pathname,\n          basename,\n          true\n        );\n\n        return { active: true, matches: fogMatches || [] };\n      } else {\n        let leafRoute = matches[matches.length - 1].route;\n        if (\n          leafRoute.path &&\n          (leafRoute.path === \"*\" || leafRoute.path.endsWith(\"/*\"))\n        ) {\n          // If we matched a splat, it might only be because we haven't yet fetched\n          // the children that would match with a higher score, so let's fetch\n          // around and find out\n          let partialMatches = matchRoutesImpl<AgnosticDataRouteObject>(\n            routesToUse,\n            pathname,\n            basename,\n            true\n          );\n          return { active: true, matches: partialMatches };\n        }\n      }\n    }\n\n    return { active: false, matches: null };\n  }\n\n  type DiscoverRoutesSuccessResult = {\n    type: \"success\";\n    matches: AgnosticDataRouteMatch[] | null;\n  };\n  type DiscoverRoutesErrorResult = {\n    type: \"error\";\n    error: any;\n    partialMatches: AgnosticDataRouteMatch[];\n  };\n  type DiscoverRoutesAbortedResult = { type: \"aborted\" };\n  type DiscoverRoutesResult =\n    | DiscoverRoutesSuccessResult\n    | DiscoverRoutesErrorResult\n    | DiscoverRoutesAbortedResult;\n\n  async function discoverRoutes(\n    matches: AgnosticDataRouteMatch[],\n    pathname: string,\n    signal: AbortSignal\n  ): Promise<DiscoverRoutesResult> {\n    let partialMatches: AgnosticDataRouteMatch[] | null = matches;\n    let route =\n      partialMatches.length > 0\n        ? partialMatches[partialMatches.length - 1].route\n        : null;\n    while (true) {\n      let isNonHMR = inFlightDataRoutes == null;\n      let routesToUse = inFlightDataRoutes || dataRoutes;\n      try {\n        await loadLazyRouteChildren(\n          patchRoutesOnMissImpl!,\n          pathname,\n          partialMatches,\n          routesToUse,\n          manifest,\n          mapRouteProperties,\n          pendingPatchRoutes,\n          signal\n        );\n      } catch (e) {\n        return { type: \"error\", error: e, partialMatches };\n      } finally {\n        // If we are not in the middle of an HMR revalidation and we changed the\n        // routes, provide a new identity so when we `updateState` at the end of\n        // this navigation/fetch `router.routes` will be a new identity and\n        // trigger a re-run of memoized `router.routes` dependencies.\n        // HMR will already update the identity and reflow when it lands\n        // `inFlightDataRoutes` in `completeNavigation`\n        if (isNonHMR) {\n          dataRoutes = [...dataRoutes];\n        }\n      }\n\n      if (signal.aborted) {\n        return { type: \"aborted\" };\n      }\n\n      let newMatches = matchRoutes(routesToUse, pathname, basename);\n      let matchedSplat = false;\n      if (newMatches) {\n        let leafRoute = newMatches[newMatches.length - 1].route;\n\n        if (leafRoute.index) {\n          // If we found an index route, we can stop\n          return { type: \"success\", matches: newMatches };\n        }\n\n        if (leafRoute.path && leafRoute.path.length > 0) {\n          if (leafRoute.path === \"*\") {\n            // If we found a splat route, we can't be sure there's not a\n            // higher-scoring route down some partial matches trail so we need\n            // to check that out\n            matchedSplat = true;\n          } else {\n            // If we found a non-splat route, we can stop\n            return { type: \"success\", matches: newMatches };\n          }\n        }\n      }\n\n      let newPartialMatches = matchRoutesImpl<AgnosticDataRouteObject>(\n        routesToUse,\n        pathname,\n        basename,\n        true\n      );\n\n      // If we are no longer partially matching anything, this was either a\n      // legit splat match above, or it's a 404.  Also avoid loops if the\n      // second pass results in the same partial matches\n      if (\n        !newPartialMatches ||\n        partialMatches.map((m) => m.route.id).join(\"-\") ===\n          newPartialMatches.map((m) => m.route.id).join(\"-\")\n      ) {\n        return { type: \"success\", matches: matchedSplat ? newMatches : null };\n      }\n\n      partialMatches = newPartialMatches;\n      route = partialMatches[partialMatches.length - 1].route;\n      if (route.path === \"*\") {\n        // The splat is still our most accurate partial, so run with it\n        return { type: \"success\", matches: partialMatches };\n      }\n    }\n  }\n\n  function _internalSetRoutes(newRoutes: AgnosticDataRouteObject[]) {\n    manifest = {};\n    inFlightDataRoutes = convertRoutesToDataRoutes(\n      newRoutes,\n      mapRouteProperties,\n      undefined,\n      manifest\n    );\n  }\n\n  function patchRoutes(\n    routeId: string | null,\n    children: AgnosticRouteObject[]\n  ): void {\n    let isNonHMR = inFlightDataRoutes == null;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    patchRoutesImpl(\n      routeId,\n      children,\n      routesToUse,\n      manifest,\n      mapRouteProperties\n    );\n\n    // If we are not in the middle of an HMR revalidation and we changed the\n    // routes, provide a new identity and trigger a reflow via `updateState`\n    // to re-run memoized `router.routes` dependencies.\n    // HMR will already update the identity and reflow when it lands\n    // `inFlightDataRoutes` in `completeNavigation`\n    if (isNonHMR) {\n      dataRoutes = [...dataRoutes];\n      updateState({});\n    }\n  }\n\n  router = {\n    get basename() {\n      return basename;\n    },\n    get future() {\n      return future;\n    },\n    get state() {\n      return state;\n    },\n    get routes() {\n      return dataRoutes;\n    },\n    get window() {\n      return routerWindow;\n    },\n    initialize,\n    subscribe,\n    enableScrollRestoration,\n    navigate,\n    fetch,\n    revalidate,\n    // Passthrough to history-aware createHref used by useHref so we get proper\n    // hash-aware URLs in DOM paths\n    createHref: (to: To) => init.history.createHref(to),\n    encodeLocation: (to: To) => init.history.encodeLocation(to),\n    getFetcher,\n    deleteFetcher: deleteFetcherAndUpdateState,\n    dispose,\n    getBlocker,\n    deleteBlocker,\n    patchRoutes,\n    _internalFetchControllers: fetchControllers,\n    _internalActiveDeferreds: activeDeferreds,\n    // TODO: Remove setRoutes, it's temporary to avoid dealing with\n    // updating the tree while validating the update algorithm.\n    _internalSetRoutes,\n  };\n\n  return router;\n}\n//#endregion\n\n////////////////////////////////////////////////////////////////////////////////\n//#region createStaticHandler\n////////////////////////////////////////////////////////////////////////////////\n\nexport const UNSAFE_DEFERRED_SYMBOL = Symbol(\"deferred\");\n\n/**\n * Future flags to toggle new feature behavior\n */\nexport interface StaticHandlerFutureConfig {\n  v7_relativeSplatPath: boolean;\n  v7_throwAbortReason: boolean;\n}\n\nexport interface CreateStaticHandlerOptions {\n  basename?: string;\n  /**\n   * @deprecated Use `mapRouteProperties` instead\n   */\n  detectErrorBoundary?: DetectErrorBoundaryFunction;\n  mapRouteProperties?: MapRoutePropertiesFunction;\n  future?: Partial<StaticHandlerFutureConfig>;\n}\n\nexport function createStaticHandler(\n  routes: AgnosticRouteObject[],\n  opts?: CreateStaticHandlerOptions\n): StaticHandler {\n  invariant(\n    routes.length > 0,\n    \"You must provide a non-empty routes array to createStaticHandler\"\n  );\n\n  let manifest: RouteManifest = {};\n  let basename = (opts ? opts.basename : null) || \"/\";\n  let mapRouteProperties: MapRoutePropertiesFunction;\n  if (opts?.mapRouteProperties) {\n    mapRouteProperties = opts.mapRouteProperties;\n  } else if (opts?.detectErrorBoundary) {\n    // If they are still using the deprecated version, wrap it with the new API\n    let detectErrorBoundary = opts.detectErrorBoundary;\n    mapRouteProperties = (route) => ({\n      hasErrorBoundary: detectErrorBoundary(route),\n    });\n  } else {\n    mapRouteProperties = defaultMapRouteProperties;\n  }\n  // Config driven behavior flags\n  let future: StaticHandlerFutureConfig = {\n    v7_relativeSplatPath: false,\n    v7_throwAbortReason: false,\n    ...(opts ? opts.future : null),\n  };\n\n  let dataRoutes = convertRoutesToDataRoutes(\n    routes,\n    mapRouteProperties,\n    undefined,\n    manifest\n  );\n\n  /**\n   * The query() method is intended for document requests, in which we want to\n   * call an optional action and potentially multiple loaders for all nested\n   * routes.  It returns a StaticHandlerContext object, which is very similar\n   * to the router state (location, loaderData, actionData, errors, etc.) and\n   * also adds SSR-specific information such as the statusCode and headers\n   * from action/loaders Responses.\n   *\n   * It _should_ never throw and should report all errors through the\n   * returned context.errors object, properly associating errors to their error\n   * boundary.  Additionally, it tracks _deepestRenderedBoundaryId which can be\n   * used to emulate React error boundaries during SSr by performing a second\n   * pass only down to the boundaryId.\n   *\n   * The one exception where we do not return a StaticHandlerContext is when a\n   * redirect response is returned or thrown from any action/loader.  We\n   * propagate that out and return the raw Response so the HTTP server can\n   * return it directly.\n   *\n   * - `opts.requestContext` is an optional server context that will be passed\n   *   to actions/loaders in the `context` parameter\n   * - `opts.skipLoaderErrorBubbling` is an optional parameter that will prevent\n   *   the bubbling of errors which allows single-fetch-type implementations\n   *   where the client will handle the bubbling and we may need to return data\n   *   for the handling route\n   */\n  async function query(\n    request: Request,\n    {\n      requestContext,\n      skipLoaderErrorBubbling,\n      unstable_dataStrategy,\n    }: {\n      requestContext?: unknown;\n      skipLoaderErrorBubbling?: boolean;\n      unstable_dataStrategy?: DataStrategyFunction;\n    } = {}\n  ): Promise<StaticHandlerContext | Response> {\n    let url = new URL(request.url);\n    let method = request.method;\n    let location = createLocation(\"\", createPath(url), null, \"default\");\n    let matches = matchRoutes(dataRoutes, location, basename);\n\n    // SSR supports HEAD requests while SPA doesn't\n    if (!isValidMethod(method) && method !== \"HEAD\") {\n      let error = getInternalRouterError(405, { method });\n      let { matches: methodNotAllowedMatches, route } =\n        getShortCircuitMatches(dataRoutes);\n      return {\n        basename,\n        location,\n        matches: methodNotAllowedMatches,\n        loaderData: {},\n        actionData: null,\n        errors: {\n          [route.id]: error,\n        },\n        statusCode: error.status,\n        loaderHeaders: {},\n        actionHeaders: {},\n        activeDeferreds: null,\n      };\n    } else if (!matches) {\n      let error = getInternalRouterError(404, { pathname: location.pathname });\n      let { matches: notFoundMatches, route } =\n        getShortCircuitMatches(dataRoutes);\n      return {\n        basename,\n        location,\n        matches: notFoundMatches,\n        loaderData: {},\n        actionData: null,\n        errors: {\n          [route.id]: error,\n        },\n        statusCode: error.status,\n        loaderHeaders: {},\n        actionHeaders: {},\n        activeDeferreds: null,\n      };\n    }\n\n    let result = await queryImpl(\n      request,\n      location,\n      matches,\n      requestContext,\n      unstable_dataStrategy || null,\n      skipLoaderErrorBubbling === true,\n      null\n    );\n    if (isResponse(result)) {\n      return result;\n    }\n\n    // When returning StaticHandlerContext, we patch back in the location here\n    // since we need it for React Context.  But this helps keep our submit and\n    // loadRouteData operating on a Request instead of a Location\n    return { location, basename, ...result };\n  }\n\n  /**\n   * The queryRoute() method is intended for targeted route requests, either\n   * for fetch ?_data requests or resource route requests.  In this case, we\n   * are only ever calling a single action or loader, and we are returning the\n   * returned value directly.  In most cases, this will be a Response returned\n   * from the action/loader, but it may be a primitive or other value as well -\n   * and in such cases the calling context should handle that accordingly.\n   *\n   * We do respect the throw/return differentiation, so if an action/loader\n   * throws, then this method will throw the value.  This is important so we\n   * can do proper boundary identification in Remix where a thrown Response\n   * must go to the Catch Boundary but a returned Response is happy-path.\n   *\n   * One thing to note is that any Router-initiated Errors that make sense\n   * to associate with a status code will be thrown as an ErrorResponse\n   * instance which include the raw Error, such that the calling context can\n   * serialize the error as they see fit while including the proper response\n   * code.  Examples here are 404 and 405 errors that occur prior to reaching\n   * any user-defined loaders.\n   *\n   * - `opts.routeId` allows you to specify the specific route handler to call.\n   *   If not provided the handler will determine the proper route by matching\n   *   against `request.url`\n   * - `opts.requestContext` is an optional server context that will be passed\n   *    to actions/loaders in the `context` parameter\n   */\n  async function queryRoute(\n    request: Request,\n    {\n      routeId,\n      requestContext,\n      unstable_dataStrategy,\n    }: {\n      requestContext?: unknown;\n      routeId?: string;\n      unstable_dataStrategy?: DataStrategyFunction;\n    } = {}\n  ): Promise<any> {\n    let url = new URL(request.url);\n    let method = request.method;\n    let location = createLocation(\"\", createPath(url), null, \"default\");\n    let matches = matchRoutes(dataRoutes, location, basename);\n\n    // SSR supports HEAD requests while SPA doesn't\n    if (!isValidMethod(method) && method !== \"HEAD\" && method !== \"OPTIONS\") {\n      throw getInternalRouterError(405, { method });\n    } else if (!matches) {\n      throw getInternalRouterError(404, { pathname: location.pathname });\n    }\n\n    let match = routeId\n      ? matches.find((m) => m.route.id === routeId)\n      : getTargetMatch(matches, location);\n\n    if (routeId && !match) {\n      throw getInternalRouterError(403, {\n        pathname: location.pathname,\n        routeId,\n      });\n    } else if (!match) {\n      // This should never hit I don't think?\n      throw getInternalRouterError(404, { pathname: location.pathname });\n    }\n\n    let result = await queryImpl(\n      request,\n      location,\n      matches,\n      requestContext,\n      unstable_dataStrategy || null,\n      false,\n      match\n    );\n\n    if (isResponse(result)) {\n      return result;\n    }\n\n    let error = result.errors ? Object.values(result.errors)[0] : undefined;\n    if (error !== undefined) {\n      // If we got back result.errors, that means the loader/action threw\n      // _something_ that wasn't a Response, but it's not guaranteed/required\n      // to be an `instanceof Error` either, so we have to use throw here to\n      // preserve the \"error\" state outside of queryImpl.\n      throw error;\n    }\n\n    // Pick off the right state value to return\n    if (result.actionData) {\n      return Object.values(result.actionData)[0];\n    }\n\n    if (result.loaderData) {\n      let data = Object.values(result.loaderData)[0];\n      if (result.activeDeferreds?.[match.route.id]) {\n        data[UNSAFE_DEFERRED_SYMBOL] = result.activeDeferreds[match.route.id];\n      }\n      return data;\n    }\n\n    return undefined;\n  }\n\n  async function queryImpl(\n    request: Request,\n    location: Location,\n    matches: AgnosticDataRouteMatch[],\n    requestContext: unknown,\n    unstable_dataStrategy: DataStrategyFunction | null,\n    skipLoaderErrorBubbling: boolean,\n    routeMatch: AgnosticDataRouteMatch | null\n  ): Promise<Omit<StaticHandlerContext, \"location\" | \"basename\"> | Response> {\n    invariant(\n      request.signal,\n      \"query()/queryRoute() requests must contain an AbortController signal\"\n    );\n\n    try {\n      if (isMutationMethod(request.method.toLowerCase())) {\n        let result = await submit(\n          request,\n          matches,\n          routeMatch || getTargetMatch(matches, location),\n          requestContext,\n          unstable_dataStrategy,\n          skipLoaderErrorBubbling,\n          routeMatch != null\n        );\n        return result;\n      }\n\n      let result = await loadRouteData(\n        request,\n        matches,\n        requestContext,\n        unstable_dataStrategy,\n        skipLoaderErrorBubbling,\n        routeMatch\n      );\n      return isResponse(result)\n        ? result\n        : {\n            ...result,\n            actionData: null,\n            actionHeaders: {},\n          };\n    } catch (e) {\n      // If the user threw/returned a Response in callLoaderOrAction for a\n      // `queryRoute` call, we throw the `HandlerResult` to bail out early\n      // and then return or throw the raw Response here accordingly\n      if (isHandlerResult(e) && isResponse(e.result)) {\n        if (e.type === ResultType.error) {\n          throw e.result;\n        }\n        return e.result;\n      }\n      // Redirects are always returned since they don't propagate to catch\n      // boundaries\n      if (isRedirectResponse(e)) {\n        return e;\n      }\n      throw e;\n    }\n  }\n\n  async function submit(\n    request: Request,\n    matches: AgnosticDataRouteMatch[],\n    actionMatch: AgnosticDataRouteMatch,\n    requestContext: unknown,\n    unstable_dataStrategy: DataStrategyFunction | null,\n    skipLoaderErrorBubbling: boolean,\n    isRouteRequest: boolean\n  ): Promise<Omit<StaticHandlerContext, \"location\" | \"basename\"> | Response> {\n    let result: DataResult;\n\n    if (!actionMatch.route.action && !actionMatch.route.lazy) {\n      let error = getInternalRouterError(405, {\n        method: request.method,\n        pathname: new URL(request.url).pathname,\n        routeId: actionMatch.route.id,\n      });\n      if (isRouteRequest) {\n        throw error;\n      }\n      result = {\n        type: ResultType.error,\n        error,\n      };\n    } else {\n      let results = await callDataStrategy(\n        \"action\",\n        request,\n        [actionMatch],\n        matches,\n        isRouteRequest,\n        requestContext,\n        unstable_dataStrategy\n      );\n      result = results[0];\n\n      if (request.signal.aborted) {\n        throwStaticHandlerAbortedError(request, isRouteRequest, future);\n      }\n    }\n\n    if (isRedirectResult(result)) {\n      // Uhhhh - this should never happen, we should always throw these from\n      // callLoaderOrAction, but the type narrowing here keeps TS happy and we\n      // can get back on the \"throw all redirect responses\" train here should\n      // this ever happen :/\n      throw new Response(null, {\n        status: result.response.status,\n        headers: {\n          Location: result.response.headers.get(\"Location\")!,\n        },\n      });\n    }\n\n    if (isDeferredResult(result)) {\n      let error = getInternalRouterError(400, { type: \"defer-action\" });\n      if (isRouteRequest) {\n        throw error;\n      }\n      result = {\n        type: ResultType.error,\n        error,\n      };\n    }\n\n    if (isRouteRequest) {\n      // Note: This should only be non-Response values if we get here, since\n      // isRouteRequest should throw any Response received in callLoaderOrAction\n      if (isErrorResult(result)) {\n        throw result.error;\n      }\n\n      return {\n        matches: [actionMatch],\n        loaderData: {},\n        actionData: { [actionMatch.route.id]: result.data },\n        errors: null,\n        // Note: statusCode + headers are unused here since queryRoute will\n        // return the raw Response or value\n        statusCode: 200,\n        loaderHeaders: {},\n        actionHeaders: {},\n        activeDeferreds: null,\n      };\n    }\n\n    // Create a GET request for the loaders\n    let loaderRequest = new Request(request.url, {\n      headers: request.headers,\n      redirect: request.redirect,\n      signal: request.signal,\n    });\n\n    if (isErrorResult(result)) {\n      // Store off the pending error - we use it to determine which loaders\n      // to call and will commit it when we complete the navigation\n      let boundaryMatch = skipLoaderErrorBubbling\n        ? actionMatch\n        : findNearestBoundary(matches, actionMatch.route.id);\n\n      let context = await loadRouteData(\n        loaderRequest,\n        matches,\n        requestContext,\n        unstable_dataStrategy,\n        skipLoaderErrorBubbling,\n        null,\n        [boundaryMatch.route.id, result]\n      );\n\n      // action status codes take precedence over loader status codes\n      return {\n        ...context,\n        statusCode: isRouteErrorResponse(result.error)\n          ? result.error.status\n          : result.statusCode != null\n          ? result.statusCode\n          : 500,\n        actionData: null,\n        actionHeaders: {\n          ...(result.headers ? { [actionMatch.route.id]: result.headers } : {}),\n        },\n      };\n    }\n\n    let context = await loadRouteData(\n      loaderRequest,\n      matches,\n      requestContext,\n      unstable_dataStrategy,\n      skipLoaderErrorBubbling,\n      null\n    );\n\n    return {\n      ...context,\n      actionData: {\n        [actionMatch.route.id]: result.data,\n      },\n      // action status codes take precedence over loader status codes\n      ...(result.statusCode ? { statusCode: result.statusCode } : {}),\n      actionHeaders: result.headers\n        ? { [actionMatch.route.id]: result.headers }\n        : {},\n    };\n  }\n\n  async function loadRouteData(\n    request: Request,\n    matches: AgnosticDataRouteMatch[],\n    requestContext: unknown,\n    unstable_dataStrategy: DataStrategyFunction | null,\n    skipLoaderErrorBubbling: boolean,\n    routeMatch: AgnosticDataRouteMatch | null,\n    pendingActionResult?: PendingActionResult\n  ): Promise<\n    | Omit<\n        StaticHandlerContext,\n        \"location\" | \"basename\" | \"actionData\" | \"actionHeaders\"\n      >\n    | Response\n  > {\n    let isRouteRequest = routeMatch != null;\n\n    // Short circuit if we have no loaders to run (queryRoute())\n    if (\n      isRouteRequest &&\n      !routeMatch?.route.loader &&\n      !routeMatch?.route.lazy\n    ) {\n      throw getInternalRouterError(400, {\n        method: request.method,\n        pathname: new URL(request.url).pathname,\n        routeId: routeMatch?.route.id,\n      });\n    }\n\n    let requestMatches = routeMatch\n      ? [routeMatch]\n      : pendingActionResult && isErrorResult(pendingActionResult[1])\n      ? getLoaderMatchesUntilBoundary(matches, pendingActionResult[0])\n      : matches;\n    let matchesToLoad = requestMatches.filter(\n      (m) => m.route.loader || m.route.lazy\n    );\n\n    // Short circuit if we have no loaders to run (query())\n    if (matchesToLoad.length === 0) {\n      return {\n        matches,\n        // Add a null for all matched routes for proper revalidation on the client\n        loaderData: matches.reduce(\n          (acc, m) => Object.assign(acc, { [m.route.id]: null }),\n          {}\n        ),\n        errors:\n          pendingActionResult && isErrorResult(pendingActionResult[1])\n            ? {\n                [pendingActionResult[0]]: pendingActionResult[1].error,\n              }\n            : null,\n        statusCode: 200,\n        loaderHeaders: {},\n        activeDeferreds: null,\n      };\n    }\n\n    let results = await callDataStrategy(\n      \"loader\",\n      request,\n      matchesToLoad,\n      matches,\n      isRouteRequest,\n      requestContext,\n      unstable_dataStrategy\n    );\n\n    if (request.signal.aborted) {\n      throwStaticHandlerAbortedError(request, isRouteRequest, future);\n    }\n\n    // Process and commit output from loaders\n    let activeDeferreds = new Map<string, DeferredData>();\n    let context = processRouteLoaderData(\n      matches,\n      matchesToLoad,\n      results,\n      pendingActionResult,\n      activeDeferreds,\n      skipLoaderErrorBubbling\n    );\n\n    // Add a null for any non-loader matches for proper revalidation on the client\n    let executedLoaders = new Set<string>(\n      matchesToLoad.map((match) => match.route.id)\n    );\n    matches.forEach((match) => {\n      if (!executedLoaders.has(match.route.id)) {\n        context.loaderData[match.route.id] = null;\n      }\n    });\n\n    return {\n      ...context,\n      matches,\n      activeDeferreds:\n        activeDeferreds.size > 0\n          ? Object.fromEntries(activeDeferreds.entries())\n          : null,\n    };\n  }\n\n  // Utility wrapper for calling dataStrategy server-side without having to\n  // pass around the manifest, mapRouteProperties, etc.\n  async function callDataStrategy(\n    type: \"loader\" | \"action\",\n    request: Request,\n    matchesToLoad: AgnosticDataRouteMatch[],\n    matches: AgnosticDataRouteMatch[],\n    isRouteRequest: boolean,\n    requestContext: unknown,\n    unstable_dataStrategy: DataStrategyFunction | null\n  ): Promise<DataResult[]> {\n    let results = await callDataStrategyImpl(\n      unstable_dataStrategy || defaultDataStrategy,\n      type,\n      request,\n      matchesToLoad,\n      matches,\n      manifest,\n      mapRouteProperties,\n      requestContext\n    );\n\n    return await Promise.all(\n      results.map((result, i) => {\n        if (isRedirectHandlerResult(result)) {\n          let response = result.result as Response;\n          // Throw redirects and let the server handle them with an HTTP redirect\n          throw normalizeRelativeRoutingRedirectResponse(\n            response,\n            request,\n            matchesToLoad[i].route.id,\n            matches,\n            basename,\n            future.v7_relativeSplatPath\n          );\n        }\n        if (isResponse(result.result) && isRouteRequest) {\n          // For SSR single-route requests, we want to hand Responses back\n          // directly without unwrapping\n          throw result;\n        }\n\n        return convertHandlerResultToDataResult(result);\n      })\n    );\n  }\n\n  return {\n    dataRoutes,\n    query,\n    queryRoute,\n  };\n}\n\n//#endregion\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Helpers\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n * Given an existing StaticHandlerContext and an error thrown at render time,\n * provide an updated StaticHandlerContext suitable for a second SSR render\n */\nexport function getStaticContextFromError(\n  routes: AgnosticDataRouteObject[],\n  context: StaticHandlerContext,\n  error: any\n) {\n  let newContext: StaticHandlerContext = {\n    ...context,\n    statusCode: isRouteErrorResponse(error) ? error.status : 500,\n    errors: {\n      [context._deepestRenderedBoundaryId || routes[0].id]: error,\n    },\n  };\n  return newContext;\n}\n\nfunction throwStaticHandlerAbortedError(\n  request: Request,\n  isRouteRequest: boolean,\n  future: StaticHandlerFutureConfig\n) {\n  if (future.v7_throwAbortReason && request.signal.reason !== undefined) {\n    throw request.signal.reason;\n  }\n\n  let method = isRouteRequest ? \"queryRoute\" : \"query\";\n  throw new Error(`${method}() call aborted: ${request.method} ${request.url}`);\n}\n\nfunction isSubmissionNavigation(\n  opts: BaseNavigateOrFetchOptions\n): opts is SubmissionNavigateOptions {\n  return (\n    opts != null &&\n    ((\"formData\" in opts && opts.formData != null) ||\n      (\"body\" in opts && opts.body !== undefined))\n  );\n}\n\nfunction normalizeTo(\n  location: Path,\n  matches: AgnosticDataRouteMatch[],\n  basename: string,\n  prependBasename: boolean,\n  to: To | null,\n  v7_relativeSplatPath: boolean,\n  fromRouteId?: string,\n  relative?: RelativeRoutingType\n) {\n  let contextualMatches: AgnosticDataRouteMatch[];\n  let activeRouteMatch: AgnosticDataRouteMatch | undefined;\n  if (fromRouteId) {\n    // Grab matches up to the calling route so our route-relative logic is\n    // relative to the correct source route\n    contextualMatches = [];\n    for (let match of matches) {\n      contextualMatches.push(match);\n      if (match.route.id === fromRouteId) {\n        activeRouteMatch = match;\n        break;\n      }\n    }\n  } else {\n    contextualMatches = matches;\n    activeRouteMatch = matches[matches.length - 1];\n  }\n\n  // Resolve the relative path\n  let path = resolveTo(\n    to ? to : \".\",\n    getResolveToMatches(contextualMatches, v7_relativeSplatPath),\n    stripBasename(location.pathname, basename) || location.pathname,\n    relative === \"path\"\n  );\n\n  // When `to` is not specified we inherit search/hash from the current\n  // location, unlike when to=\".\" and we just inherit the path.\n  // See https://github.com/remix-run/remix/issues/927\n  if (to == null) {\n    path.search = location.search;\n    path.hash = location.hash;\n  }\n\n  // Add an ?index param for matched index routes if we don't already have one\n  if (\n    (to == null || to === \"\" || to === \".\") &&\n    activeRouteMatch &&\n    activeRouteMatch.route.index &&\n    !hasNakedIndexQuery(path.search)\n  ) {\n    path.search = path.search\n      ? path.search.replace(/^\\?/, \"?index&\")\n      : \"?index\";\n  }\n\n  // If we're operating within a basename, prepend it to the pathname.  If\n  // this is a root navigation, then just use the raw basename which allows\n  // the basename to have full control over the presence of a trailing slash\n  // on root actions\n  if (prependBasename && basename !== \"/\") {\n    path.pathname =\n      path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n  }\n\n  return createPath(path);\n}\n\n// Normalize navigation options by converting formMethod=GET formData objects to\n// URLSearchParams so they behave identically to links with query params\nfunction normalizeNavigateOptions(\n  normalizeFormMethod: boolean,\n  isFetcher: boolean,\n  path: string,\n  opts?: BaseNavigateOrFetchOptions\n): {\n  path: string;\n  submission?: Submission;\n  error?: ErrorResponseImpl;\n} {\n  // Return location verbatim on non-submission navigations\n  if (!opts || !isSubmissionNavigation(opts)) {\n    return { path };\n  }\n\n  if (opts.formMethod && !isValidMethod(opts.formMethod)) {\n    return {\n      path,\n      error: getInternalRouterError(405, { method: opts.formMethod }),\n    };\n  }\n\n  let getInvalidBodyError = () => ({\n    path,\n    error: getInternalRouterError(400, { type: \"invalid-body\" }),\n  });\n\n  // Create a Submission on non-GET navigations\n  let rawFormMethod = opts.formMethod || \"get\";\n  let formMethod = normalizeFormMethod\n    ? (rawFormMethod.toUpperCase() as V7_FormMethod)\n    : (rawFormMethod.toLowerCase() as FormMethod);\n  let formAction = stripHashFromPath(path);\n\n  if (opts.body !== undefined) {\n    if (opts.formEncType === \"text/plain\") {\n      // text only support POST/PUT/PATCH/DELETE submissions\n      if (!isMutationMethod(formMethod)) {\n        return getInvalidBodyError();\n      }\n\n      let text =\n        typeof opts.body === \"string\"\n          ? opts.body\n          : opts.body instanceof FormData ||\n            opts.body instanceof URLSearchParams\n          ? // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plain-text-form-data\n            Array.from(opts.body.entries()).reduce(\n              (acc, [name, value]) => `${acc}${name}=${value}\\n`,\n              \"\"\n            )\n          : String(opts.body);\n\n      return {\n        path,\n        submission: {\n          formMethod,\n          formAction,\n          formEncType: opts.formEncType,\n          formData: undefined,\n          json: undefined,\n          text,\n        },\n      };\n    } else if (opts.formEncType === \"application/json\") {\n      // json only supports POST/PUT/PATCH/DELETE submissions\n      if (!isMutationMethod(formMethod)) {\n        return getInvalidBodyError();\n      }\n\n      try {\n        let json =\n          typeof opts.body === \"string\" ? JSON.parse(opts.body) : opts.body;\n\n        return {\n          path,\n          submission: {\n            formMethod,\n            formAction,\n            formEncType: opts.formEncType,\n            formData: undefined,\n            json,\n            text: undefined,\n          },\n        };\n      } catch (e) {\n        return getInvalidBodyError();\n      }\n    }\n  }\n\n  invariant(\n    typeof FormData === \"function\",\n    \"FormData is not available in this environment\"\n  );\n\n  let searchParams: URLSearchParams;\n  let formData: FormData;\n\n  if (opts.formData) {\n    searchParams = convertFormDataToSearchParams(opts.formData);\n    formData = opts.formData;\n  } else if (opts.body instanceof FormData) {\n    searchParams = convertFormDataToSearchParams(opts.body);\n    formData = opts.body;\n  } else if (opts.body instanceof URLSearchParams) {\n    searchParams = opts.body;\n    formData = convertSearchParamsToFormData(searchParams);\n  } else if (opts.body == null) {\n    searchParams = new URLSearchParams();\n    formData = new FormData();\n  } else {\n    try {\n      searchParams = new URLSearchParams(opts.body);\n      formData = convertSearchParamsToFormData(searchParams);\n    } catch (e) {\n      return getInvalidBodyError();\n    }\n  }\n\n  let submission: Submission = {\n    formMethod,\n    formAction,\n    formEncType:\n      (opts && opts.formEncType) || \"application/x-www-form-urlencoded\",\n    formData,\n    json: undefined,\n    text: undefined,\n  };\n\n  if (isMutationMethod(submission.formMethod)) {\n    return { path, submission };\n  }\n\n  // Flatten submission onto URLSearchParams for GET submissions\n  let parsedPath = parsePath(path);\n  // On GET navigation submissions we can drop the ?index param from the\n  // resulting location since all loaders will run.  But fetcher GET submissions\n  // only run a single loader so we need to preserve any incoming ?index params\n  if (isFetcher && parsedPath.search && hasNakedIndexQuery(parsedPath.search)) {\n    searchParams.append(\"index\", \"\");\n  }\n  parsedPath.search = `?${searchParams}`;\n\n  return { path: createPath(parsedPath), submission };\n}\n\n// Filter out all routes below any caught error as they aren't going to\n// render so we don't need to load them\nfunction getLoaderMatchesUntilBoundary(\n  matches: AgnosticDataRouteMatch[],\n  boundaryId: string\n) {\n  let boundaryMatches = matches;\n  if (boundaryId) {\n    let index = matches.findIndex((m) => m.route.id === boundaryId);\n    if (index >= 0) {\n      boundaryMatches = matches.slice(0, index);\n    }\n  }\n  return boundaryMatches;\n}\n\nfunction getMatchesToLoad(\n  history: History,\n  state: RouterState,\n  matches: AgnosticDataRouteMatch[],\n  submission: Submission | undefined,\n  location: Location,\n  isInitialLoad: boolean,\n  skipActionErrorRevalidation: boolean,\n  isRevalidationRequired: boolean,\n  cancelledDeferredRoutes: string[],\n  cancelledFetcherLoads: string[],\n  deletedFetchers: Set<string>,\n  fetchLoadMatches: Map<string, FetchLoadMatch>,\n  fetchRedirectIds: Set<string>,\n  routesToUse: AgnosticDataRouteObject[],\n  basename: string | undefined,\n  pendingActionResult?: PendingActionResult\n): [AgnosticDataRouteMatch[], RevalidatingFetcher[]] {\n  let actionResult = pendingActionResult\n    ? isErrorResult(pendingActionResult[1])\n      ? pendingActionResult[1].error\n      : pendingActionResult[1].data\n    : undefined;\n  let currentUrl = history.createURL(state.location);\n  let nextUrl = history.createURL(location);\n\n  // Pick navigation matches that are net-new or qualify for revalidation\n  let boundaryId =\n    pendingActionResult && isErrorResult(pendingActionResult[1])\n      ? pendingActionResult[0]\n      : undefined;\n  let boundaryMatches = boundaryId\n    ? getLoaderMatchesUntilBoundary(matches, boundaryId)\n    : matches;\n\n  // Don't revalidate loaders by default after action 4xx/5xx responses\n  // when the flag is enabled.  They can still opt-into revalidation via\n  // `shouldRevalidate` via `actionResult`\n  let actionStatus = pendingActionResult\n    ? pendingActionResult[1].statusCode\n    : undefined;\n  let shouldSkipRevalidation =\n    skipActionErrorRevalidation && actionStatus && actionStatus >= 400;\n\n  let navigationMatches = boundaryMatches.filter((match, index) => {\n    let { route } = match;\n    if (route.lazy) {\n      // We haven't loaded this route yet so we don't know if it's got a loader!\n      return true;\n    }\n\n    if (route.loader == null) {\n      return false;\n    }\n\n    if (isInitialLoad) {\n      if (typeof route.loader !== \"function\" || route.loader.hydrate) {\n        return true;\n      }\n      return (\n        state.loaderData[route.id] === undefined &&\n        // Don't re-run if the loader ran and threw an error\n        (!state.errors || state.errors[route.id] === undefined)\n      );\n    }\n\n    // Always call the loader on new route instances and pending defer cancellations\n    if (\n      isNewLoader(state.loaderData, state.matches[index], match) ||\n      cancelledDeferredRoutes.some((id) => id === match.route.id)\n    ) {\n      return true;\n    }\n\n    // This is the default implementation for when we revalidate.  If the route\n    // provides it's own implementation, then we give them full control but\n    // provide this value so they can leverage it if needed after they check\n    // their own specific use cases\n    let currentRouteMatch = state.matches[index];\n    let nextRouteMatch = match;\n\n    return shouldRevalidateLoader(match, {\n      currentUrl,\n      currentParams: currentRouteMatch.params,\n      nextUrl,\n      nextParams: nextRouteMatch.params,\n      ...submission,\n      actionResult,\n      unstable_actionStatus: actionStatus,\n      defaultShouldRevalidate: shouldSkipRevalidation\n        ? false\n        : // Forced revalidation due to submission, useRevalidator, or X-Remix-Revalidate\n          isRevalidationRequired ||\n          currentUrl.pathname + currentUrl.search ===\n            nextUrl.pathname + nextUrl.search ||\n          // Search params affect all loaders\n          currentUrl.search !== nextUrl.search ||\n          isNewRouteInstance(currentRouteMatch, nextRouteMatch),\n    });\n  });\n\n  // Pick fetcher.loads that need to be revalidated\n  let revalidatingFetchers: RevalidatingFetcher[] = [];\n  fetchLoadMatches.forEach((f, key) => {\n    // Don't revalidate:\n    //  - on initial load (shouldn't be any fetchers then anyway)\n    //  - if fetcher won't be present in the subsequent render\n    //    - no longer matches the URL (v7_fetcherPersist=false)\n    //    - was unmounted but persisted due to v7_fetcherPersist=true\n    if (\n      isInitialLoad ||\n      !matches.some((m) => m.route.id === f.routeId) ||\n      deletedFetchers.has(key)\n    ) {\n      return;\n    }\n\n    let fetcherMatches = matchRoutes(routesToUse, f.path, basename);\n\n    // If the fetcher path no longer matches, push it in with null matches so\n    // we can trigger a 404 in callLoadersAndMaybeResolveData.  Note this is\n    // currently only a use-case for Remix HMR where the route tree can change\n    // at runtime and remove a route previously loaded via a fetcher\n    if (!fetcherMatches) {\n      revalidatingFetchers.push({\n        key,\n        routeId: f.routeId,\n        path: f.path,\n        matches: null,\n        match: null,\n        controller: null,\n      });\n      return;\n    }\n\n    // Revalidating fetchers are decoupled from the route matches since they\n    // load from a static href.  They revalidate based on explicit revalidation\n    // (submission, useRevalidator, or X-Remix-Revalidate)\n    let fetcher = state.fetchers.get(key);\n    let fetcherMatch = getTargetMatch(fetcherMatches, f.path);\n\n    let shouldRevalidate = false;\n    if (fetchRedirectIds.has(key)) {\n      // Never trigger a revalidation of an actively redirecting fetcher\n      shouldRevalidate = false;\n    } else if (cancelledFetcherLoads.includes(key)) {\n      // Always revalidate if the fetcher was cancelled\n      shouldRevalidate = true;\n    } else if (\n      fetcher &&\n      fetcher.state !== \"idle\" &&\n      fetcher.data === undefined\n    ) {\n      // If the fetcher hasn't ever completed loading yet, then this isn't a\n      // revalidation, it would just be a brand new load if an explicit\n      // revalidation is required\n      shouldRevalidate = isRevalidationRequired;\n    } else {\n      // Otherwise fall back on any user-defined shouldRevalidate, defaulting\n      // to explicit revalidations only\n      shouldRevalidate = shouldRevalidateLoader(fetcherMatch, {\n        currentUrl,\n        currentParams: state.matches[state.matches.length - 1].params,\n        nextUrl,\n        nextParams: matches[matches.length - 1].params,\n        ...submission,\n        actionResult,\n        unstable_actionStatus: actionStatus,\n        defaultShouldRevalidate: shouldSkipRevalidation\n          ? false\n          : isRevalidationRequired,\n      });\n    }\n\n    if (shouldRevalidate) {\n      revalidatingFetchers.push({\n        key,\n        routeId: f.routeId,\n        path: f.path,\n        matches: fetcherMatches,\n        match: fetcherMatch,\n        controller: new AbortController(),\n      });\n    }\n  });\n\n  return [navigationMatches, revalidatingFetchers];\n}\n\nfunction isNewLoader(\n  currentLoaderData: RouteData,\n  currentMatch: AgnosticDataRouteMatch,\n  match: AgnosticDataRouteMatch\n) {\n  let isNew =\n    // [a] -> [a, b]\n    !currentMatch ||\n    // [a, b] -> [a, c]\n    match.route.id !== currentMatch.route.id;\n\n  // Handle the case that we don't have data for a re-used route, potentially\n  // from a prior error or from a cancelled pending deferred\n  let isMissingData = currentLoaderData[match.route.id] === undefined;\n\n  // Always load if this is a net-new route or we don't yet have data\n  return isNew || isMissingData;\n}\n\nfunction isNewRouteInstance(\n  currentMatch: AgnosticDataRouteMatch,\n  match: AgnosticDataRouteMatch\n) {\n  let currentPath = currentMatch.route.path;\n  return (\n    // param change for this match, /users/123 -> /users/456\n    currentMatch.pathname !== match.pathname ||\n    // splat param changed, which is not present in match.path\n    // e.g. /files/images/avatar.jpg -> files/finances.xls\n    (currentPath != null &&\n      currentPath.endsWith(\"*\") &&\n      currentMatch.params[\"*\"] !== match.params[\"*\"])\n  );\n}\n\nfunction shouldRevalidateLoader(\n  loaderMatch: AgnosticDataRouteMatch,\n  arg: ShouldRevalidateFunctionArgs\n) {\n  if (loaderMatch.route.shouldRevalidate) {\n    let routeChoice = loaderMatch.route.shouldRevalidate(arg);\n    if (typeof routeChoice === \"boolean\") {\n      return routeChoice;\n    }\n  }\n\n  return arg.defaultShouldRevalidate;\n}\n\n/**\n * Idempotent utility to execute patchRoutesOnMiss() to lazily load route\n * definitions and update the routes/routeManifest\n */\nasync function loadLazyRouteChildren(\n  patchRoutesOnMissImpl: AgnosticPatchRoutesOnMissFunction,\n  path: string,\n  matches: AgnosticDataRouteMatch[],\n  routes: AgnosticDataRouteObject[],\n  manifest: RouteManifest,\n  mapRouteProperties: MapRoutePropertiesFunction,\n  pendingRouteChildren: Map<string, ReturnType<typeof patchRoutesOnMissImpl>>,\n  signal: AbortSignal\n) {\n  let key = [path, ...matches.map((m) => m.route.id)].join(\"-\");\n  try {\n    let pending = pendingRouteChildren.get(key);\n    if (!pending) {\n      pending = patchRoutesOnMissImpl({\n        path,\n        matches,\n        patch: (routeId, children) => {\n          if (!signal.aborted) {\n            patchRoutesImpl(\n              routeId,\n              children,\n              routes,\n              manifest,\n              mapRouteProperties\n            );\n          }\n        },\n      });\n      pendingRouteChildren.set(key, pending);\n    }\n\n    if (pending && isPromise<AgnosticRouteObject[]>(pending)) {\n      await pending;\n    }\n  } finally {\n    pendingRouteChildren.delete(key);\n  }\n}\n\nfunction patchRoutesImpl(\n  routeId: string | null,\n  children: AgnosticRouteObject[],\n  routesToUse: AgnosticDataRouteObject[],\n  manifest: RouteManifest,\n  mapRouteProperties: MapRoutePropertiesFunction\n) {\n  if (routeId) {\n    let route = manifest[routeId];\n    invariant(\n      route,\n      `No route found to patch children into: routeId = ${routeId}`\n    );\n    let dataChildren = convertRoutesToDataRoutes(\n      children,\n      mapRouteProperties,\n      [routeId, \"patch\", String(route.children?.length || \"0\")],\n      manifest\n    );\n    if (route.children) {\n      route.children.push(...dataChildren);\n    } else {\n      route.children = dataChildren;\n    }\n  } else {\n    let dataChildren = convertRoutesToDataRoutes(\n      children,\n      mapRouteProperties,\n      [\"patch\", String(routesToUse.length || \"0\")],\n      manifest\n    );\n    routesToUse.push(...dataChildren);\n  }\n}\n\n/**\n * Execute route.lazy() methods to lazily load route modules (loader, action,\n * shouldRevalidate) and update the routeManifest in place which shares objects\n * with dataRoutes so those get updated as well.\n */\nasync function loadLazyRouteModule(\n  route: AgnosticDataRouteObject,\n  mapRouteProperties: MapRoutePropertiesFunction,\n  manifest: RouteManifest\n) {\n  if (!route.lazy) {\n    return;\n  }\n\n  let lazyRoute = await route.lazy();\n\n  // If the lazy route function was executed and removed by another parallel\n  // call then we can return - first lazy() to finish wins because the return\n  // value of lazy is expected to be static\n  if (!route.lazy) {\n    return;\n  }\n\n  let routeToUpdate = manifest[route.id];\n  invariant(routeToUpdate, \"No route found in manifest\");\n\n  // Update the route in place.  This should be safe because there's no way\n  // we could yet be sitting on this route as we can't get there without\n  // resolving lazy() first.\n  //\n  // This is different than the HMR \"update\" use-case where we may actively be\n  // on the route being updated.  The main concern boils down to \"does this\n  // mutation affect any ongoing navigations or any current state.matches\n  // values?\".  If not, it should be safe to update in place.\n  let routeUpdates: Record<string, any> = {};\n  for (let lazyRouteProperty in lazyRoute) {\n    let staticRouteValue =\n      routeToUpdate[lazyRouteProperty as keyof typeof routeToUpdate];\n\n    let isPropertyStaticallyDefined =\n      staticRouteValue !== undefined &&\n      // This property isn't static since it should always be updated based\n      // on the route updates\n      lazyRouteProperty !== \"hasErrorBoundary\";\n\n    warning(\n      !isPropertyStaticallyDefined,\n      `Route \"${routeToUpdate.id}\" has a static property \"${lazyRouteProperty}\" ` +\n        `defined but its lazy function is also returning a value for this property. ` +\n        `The lazy route property \"${lazyRouteProperty}\" will be ignored.`\n    );\n\n    if (\n      !isPropertyStaticallyDefined &&\n      !immutableRouteKeys.has(lazyRouteProperty as ImmutableRouteKey)\n    ) {\n      routeUpdates[lazyRouteProperty] =\n        lazyRoute[lazyRouteProperty as keyof typeof lazyRoute];\n    }\n  }\n\n  // Mutate the route with the provided updates.  Do this first so we pass\n  // the updated version to mapRouteProperties\n  Object.assign(routeToUpdate, routeUpdates);\n\n  // Mutate the `hasErrorBoundary` property on the route based on the route\n  // updates and remove the `lazy` function so we don't resolve the lazy\n  // route again.\n  Object.assign(routeToUpdate, {\n    // To keep things framework agnostic, we use the provided\n    // `mapRouteProperties` (or wrapped `detectErrorBoundary`) function to\n    // set the framework-aware properties (`element`/`hasErrorBoundary`) since\n    // the logic will differ between frameworks.\n    ...mapRouteProperties(routeToUpdate),\n    lazy: undefined,\n  });\n}\n\n// Default implementation of `dataStrategy` which fetches all loaders in parallel\nfunction defaultDataStrategy(\n  opts: DataStrategyFunctionArgs\n): ReturnType<DataStrategyFunction> {\n  return Promise.all(opts.matches.map((m) => m.resolve()));\n}\n\nasync function callDataStrategyImpl(\n  dataStrategyImpl: DataStrategyFunction,\n  type: \"loader\" | \"action\",\n  request: Request,\n  matchesToLoad: AgnosticDataRouteMatch[],\n  matches: AgnosticDataRouteMatch[],\n  manifest: RouteManifest,\n  mapRouteProperties: MapRoutePropertiesFunction,\n  requestContext?: unknown\n): Promise<HandlerResult[]> {\n  let routeIdsToLoad = matchesToLoad.reduce(\n    (acc, m) => acc.add(m.route.id),\n    new Set<string>()\n  );\n  let loadedMatches = new Set<string>();\n\n  // Send all matches here to allow for a middleware-type implementation.\n  // handler will be a no-op for unneeded routes and we filter those results\n  // back out below.\n  let results = await dataStrategyImpl({\n    matches: matches.map((match) => {\n      let shouldLoad = routeIdsToLoad.has(match.route.id);\n      // `resolve` encapsulates the route.lazy, executing the\n      // loader/action, and mapping return values/thrown errors to a\n      // HandlerResult.  Users can pass a callback to take fine-grained control\n      // over the execution of the loader/action\n      let resolve: DataStrategyMatch[\"resolve\"] = (handlerOverride) => {\n        loadedMatches.add(match.route.id);\n        return shouldLoad\n          ? callLoaderOrAction(\n              type,\n              request,\n              match,\n              manifest,\n              mapRouteProperties,\n              handlerOverride,\n              requestContext\n            )\n          : Promise.resolve({ type: ResultType.data, result: undefined });\n      };\n\n      return {\n        ...match,\n        shouldLoad,\n        resolve,\n      };\n    }),\n    request,\n    params: matches[0].params,\n    context: requestContext,\n  });\n\n  // Throw if any loadRoute implementations not called since they are what\n  // ensures a route is fully loaded\n  matches.forEach((m) =>\n    invariant(\n      loadedMatches.has(m.route.id),\n      `\\`match.resolve()\\` was not called for route id \"${m.route.id}\". ` +\n        \"You must call `match.resolve()` on every match passed to \" +\n        \"`dataStrategy` to ensure all routes are properly loaded.\"\n    )\n  );\n\n  // Filter out any middleware-only matches for which we didn't need to run handlers\n  return results.filter((_, i) => routeIdsToLoad.has(matches[i].route.id));\n}\n\n// Default logic for calling a loader/action is the user has no specified a dataStrategy\nasync function callLoaderOrAction(\n  type: \"loader\" | \"action\",\n  request: Request,\n  match: AgnosticDataRouteMatch,\n  manifest: RouteManifest,\n  mapRouteProperties: MapRoutePropertiesFunction,\n  handlerOverride: Parameters<DataStrategyMatch[\"resolve\"]>[0],\n  staticContext?: unknown\n): Promise<HandlerResult> {\n  let result: HandlerResult;\n  let onReject: (() => void) | undefined;\n\n  let runHandler = (\n    handler: AgnosticRouteObject[\"loader\"] | AgnosticRouteObject[\"action\"]\n  ): Promise<HandlerResult> => {\n    // Setup a promise we can race against so that abort signals short circuit\n    let reject: () => void;\n    // This will never resolve so safe to type it as Promise<HandlerResult> to\n    // satisfy the function return value\n    let abortPromise = new Promise<HandlerResult>((_, r) => (reject = r));\n    onReject = () => reject();\n    request.signal.addEventListener(\"abort\", onReject);\n\n    let actualHandler = (ctx?: unknown) => {\n      if (typeof handler !== \"function\") {\n        return Promise.reject(\n          new Error(\n            `You cannot call the handler for a route which defines a boolean ` +\n              `\"${type}\" [routeId: ${match.route.id}]`\n          )\n        );\n      }\n      return handler(\n        {\n          request,\n          params: match.params,\n          context: staticContext,\n        },\n        ...(ctx !== undefined ? [ctx] : [])\n      );\n    };\n\n    let handlerPromise: Promise<HandlerResult>;\n    if (handlerOverride) {\n      handlerPromise = handlerOverride((ctx: unknown) => actualHandler(ctx));\n    } else {\n      handlerPromise = (async () => {\n        try {\n          let val = await actualHandler();\n          return { type: \"data\", result: val };\n        } catch (e) {\n          return { type: \"error\", result: e };\n        }\n      })();\n    }\n\n    return Promise.race([handlerPromise, abortPromise]);\n  };\n\n  try {\n    let handler = match.route[type];\n\n    if (match.route.lazy) {\n      if (handler) {\n        // Run statically defined handler in parallel with lazy()\n        let handlerError;\n        let [value] = await Promise.all([\n          // If the handler throws, don't let it immediately bubble out,\n          // since we need to let the lazy() execution finish so we know if this\n          // route has a boundary that can handle the error\n          runHandler(handler).catch((e) => {\n            handlerError = e;\n          }),\n          loadLazyRouteModule(match.route, mapRouteProperties, manifest),\n        ]);\n        if (handlerError !== undefined) {\n          throw handlerError;\n        }\n        result = value!;\n      } else {\n        // Load lazy route module, then run any returned handler\n        await loadLazyRouteModule(match.route, mapRouteProperties, manifest);\n\n        handler = match.route[type];\n        if (handler) {\n          // Handler still runs even if we got interrupted to maintain consistency\n          // with un-abortable behavior of handler execution on non-lazy or\n          // previously-lazy-loaded routes\n          result = await runHandler(handler);\n        } else if (type === \"action\") {\n          let url = new URL(request.url);\n          let pathname = url.pathname + url.search;\n          throw getInternalRouterError(405, {\n            method: request.method,\n            pathname,\n            routeId: match.route.id,\n          });\n        } else {\n          // lazy() route has no loader to run.  Short circuit here so we don't\n          // hit the invariant below that errors on returning undefined.\n          return { type: ResultType.data, result: undefined };\n        }\n      }\n    } else if (!handler) {\n      let url = new URL(request.url);\n      let pathname = url.pathname + url.search;\n      throw getInternalRouterError(404, {\n        pathname,\n      });\n    } else {\n      result = await runHandler(handler);\n    }\n\n    invariant(\n      result.result !== undefined,\n      `You defined ${type === \"action\" ? \"an action\" : \"a loader\"} for route ` +\n        `\"${match.route.id}\" but didn't return anything from your \\`${type}\\` ` +\n        `function. Please return a value or \\`null\\`.`\n    );\n  } catch (e) {\n    // We should already be catching and converting normal handler executions to\n    // HandlerResults and returning them, so anything that throws here is an\n    // unexpected error we still need to wrap\n    return { type: ResultType.error, result: e };\n  } finally {\n    if (onReject) {\n      request.signal.removeEventListener(\"abort\", onReject);\n    }\n  }\n\n  return result;\n}\n\nasync function convertHandlerResultToDataResult(\n  handlerResult: HandlerResult\n): Promise<DataResult> {\n  let { result, type, status } = handlerResult;\n\n  if (isResponse(result)) {\n    let data: any;\n\n    try {\n      let contentType = result.headers.get(\"Content-Type\");\n      // Check between word boundaries instead of startsWith() due to the last\n      // paragraph of https://httpwg.org/specs/rfc9110.html#field.content-type\n      if (contentType && /\\bapplication\\/json\\b/.test(contentType)) {\n        if (result.body == null) {\n          data = null;\n        } else {\n          data = await result.json();\n        }\n      } else {\n        data = await result.text();\n      }\n    } catch (e) {\n      return { type: ResultType.error, error: e };\n    }\n\n    if (type === ResultType.error) {\n      return {\n        type: ResultType.error,\n        error: new ErrorResponseImpl(result.status, result.statusText, data),\n        statusCode: result.status,\n        headers: result.headers,\n      };\n    }\n\n    return {\n      type: ResultType.data,\n      data,\n      statusCode: result.status,\n      headers: result.headers,\n    };\n  }\n\n  if (type === ResultType.error) {\n    return {\n      type: ResultType.error,\n      error: result,\n      statusCode: isRouteErrorResponse(result) ? result.status : status,\n    };\n  }\n\n  if (isDeferredData(result)) {\n    return {\n      type: ResultType.deferred,\n      deferredData: result,\n      statusCode: result.init?.status,\n      headers: result.init?.headers && new Headers(result.init.headers),\n    };\n  }\n\n  return { type: ResultType.data, data: result, statusCode: status };\n}\n\n// Support relative routing in internal redirects\nfunction normalizeRelativeRoutingRedirectResponse(\n  response: Response,\n  request: Request,\n  routeId: string,\n  matches: AgnosticDataRouteMatch[],\n  basename: string,\n  v7_relativeSplatPath: boolean\n) {\n  let location = response.headers.get(\"Location\");\n  invariant(\n    location,\n    \"Redirects returned/thrown from loaders/actions must have a Location header\"\n  );\n\n  if (!ABSOLUTE_URL_REGEX.test(location)) {\n    let trimmedMatches = matches.slice(\n      0,\n      matches.findIndex((m) => m.route.id === routeId) + 1\n    );\n    location = normalizeTo(\n      new URL(request.url),\n      trimmedMatches,\n      basename,\n      true,\n      location,\n      v7_relativeSplatPath\n    );\n    response.headers.set(\"Location\", location);\n  }\n\n  return response;\n}\n\nfunction normalizeRedirectLocation(\n  location: string,\n  currentUrl: URL,\n  basename: string\n): string {\n  if (ABSOLUTE_URL_REGEX.test(location)) {\n    // Strip off the protocol+origin for same-origin + same-basename absolute redirects\n    let normalizedLocation = location;\n    let url = normalizedLocation.startsWith(\"//\")\n      ? new URL(currentUrl.protocol + normalizedLocation)\n      : new URL(normalizedLocation);\n    let isSameBasename = stripBasename(url.pathname, basename) != null;\n    if (url.origin === currentUrl.origin && isSameBasename) {\n      return url.pathname + url.search + url.hash;\n    }\n  }\n  return location;\n}\n\n// Utility method for creating the Request instances for loaders/actions during\n// client-side navigations and fetches.  During SSR we will always have a\n// Request instance from the static handler (query/queryRoute)\nfunction createClientSideRequest(\n  history: History,\n  location: string | Location,\n  signal: AbortSignal,\n  submission?: Submission\n): Request {\n  let url = history.createURL(stripHashFromPath(location)).toString();\n  let init: RequestInit = { signal };\n\n  if (submission && isMutationMethod(submission.formMethod)) {\n    let { formMethod, formEncType } = submission;\n    // Didn't think we needed this but it turns out unlike other methods, patch\n    // won't be properly normalized to uppercase and results in a 405 error.\n    // See: https://fetch.spec.whatwg.org/#concept-method\n    init.method = formMethod.toUpperCase();\n\n    if (formEncType === \"application/json\") {\n      init.headers = new Headers({ \"Content-Type\": formEncType });\n      init.body = JSON.stringify(submission.json);\n    } else if (formEncType === \"text/plain\") {\n      // Content-Type is inferred (https://fetch.spec.whatwg.org/#dom-request)\n      init.body = submission.text;\n    } else if (\n      formEncType === \"application/x-www-form-urlencoded\" &&\n      submission.formData\n    ) {\n      // Content-Type is inferred (https://fetch.spec.whatwg.org/#dom-request)\n      init.body = convertFormDataToSearchParams(submission.formData);\n    } else {\n      // Content-Type is inferred (https://fetch.spec.whatwg.org/#dom-request)\n      init.body = submission.formData;\n    }\n  }\n\n  return new Request(url, init);\n}\n\nfunction convertFormDataToSearchParams(formData: FormData): URLSearchParams {\n  let searchParams = new URLSearchParams();\n\n  for (let [key, value] of formData.entries()) {\n    // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#converting-an-entry-list-to-a-list-of-name-value-pairs\n    searchParams.append(key, typeof value === \"string\" ? value : value.name);\n  }\n\n  return searchParams;\n}\n\nfunction convertSearchParamsToFormData(\n  searchParams: URLSearchParams\n): FormData {\n  let formData = new FormData();\n  for (let [key, value] of searchParams.entries()) {\n    formData.append(key, value);\n  }\n  return formData;\n}\n\nfunction processRouteLoaderData(\n  matches: AgnosticDataRouteMatch[],\n  matchesToLoad: AgnosticDataRouteMatch[],\n  results: DataResult[],\n  pendingActionResult: PendingActionResult | undefined,\n  activeDeferreds: Map<string, DeferredData>,\n  skipLoaderErrorBubbling: boolean\n): {\n  loaderData: RouterState[\"loaderData\"];\n  errors: RouterState[\"errors\"] | null;\n  statusCode: number;\n  loaderHeaders: Record<string, Headers>;\n} {\n  // Fill in loaderData/errors from our loaders\n  let loaderData: RouterState[\"loaderData\"] = {};\n  let errors: RouterState[\"errors\"] | null = null;\n  let statusCode: number | undefined;\n  let foundError = false;\n  let loaderHeaders: Record<string, Headers> = {};\n  let pendingError =\n    pendingActionResult && isErrorResult(pendingActionResult[1])\n      ? pendingActionResult[1].error\n      : undefined;\n\n  // Process loader results into state.loaderData/state.errors\n  results.forEach((result, index) => {\n    let id = matchesToLoad[index].route.id;\n    invariant(\n      !isRedirectResult(result),\n      \"Cannot handle redirect results in processLoaderData\"\n    );\n    if (isErrorResult(result)) {\n      let error = result.error;\n      // If we have a pending action error, we report it at the highest-route\n      // that throws a loader error, and then clear it out to indicate that\n      // it was consumed\n      if (pendingError !== undefined) {\n        error = pendingError;\n        pendingError = undefined;\n      }\n\n      errors = errors || {};\n\n      if (skipLoaderErrorBubbling) {\n        errors[id] = error;\n      } else {\n        // Look upwards from the matched route for the closest ancestor error\n        // boundary, defaulting to the root match.  Prefer higher error values\n        // if lower errors bubble to the same boundary\n        let boundaryMatch = findNearestBoundary(matches, id);\n        if (errors[boundaryMatch.route.id] == null) {\n          errors[boundaryMatch.route.id] = error;\n        }\n      }\n\n      // Clear our any prior loaderData for the throwing route\n      loaderData[id] = undefined;\n\n      // Once we find our first (highest) error, we set the status code and\n      // prevent deeper status codes from overriding\n      if (!foundError) {\n        foundError = true;\n        statusCode = isRouteErrorResponse(result.error)\n          ? result.error.status\n          : 500;\n      }\n      if (result.headers) {\n        loaderHeaders[id] = result.headers;\n      }\n    } else {\n      if (isDeferredResult(result)) {\n        activeDeferreds.set(id, result.deferredData);\n        loaderData[id] = result.deferredData.data;\n        // Error status codes always override success status codes, but if all\n        // loaders are successful we take the deepest status code.\n        if (\n          result.statusCode != null &&\n          result.statusCode !== 200 &&\n          !foundError\n        ) {\n          statusCode = result.statusCode;\n        }\n        if (result.headers) {\n          loaderHeaders[id] = result.headers;\n        }\n      } else {\n        loaderData[id] = result.data;\n        // Error status codes always override success status codes, but if all\n        // loaders are successful we take the deepest status code.\n        if (result.statusCode && result.statusCode !== 200 && !foundError) {\n          statusCode = result.statusCode;\n        }\n        if (result.headers) {\n          loaderHeaders[id] = result.headers;\n        }\n      }\n    }\n  });\n\n  // If we didn't consume the pending action error (i.e., all loaders\n  // resolved), then consume it here.  Also clear out any loaderData for the\n  // throwing route\n  if (pendingError !== undefined && pendingActionResult) {\n    errors = { [pendingActionResult[0]]: pendingError };\n    loaderData[pendingActionResult[0]] = undefined;\n  }\n\n  return {\n    loaderData,\n    errors,\n    statusCode: statusCode || 200,\n    loaderHeaders,\n  };\n}\n\nfunction processLoaderData(\n  state: RouterState,\n  matches: AgnosticDataRouteMatch[],\n  matchesToLoad: AgnosticDataRouteMatch[],\n  results: DataResult[],\n  pendingActionResult: PendingActionResult | undefined,\n  revalidatingFetchers: RevalidatingFetcher[],\n  fetcherResults: DataResult[],\n  activeDeferreds: Map<string, DeferredData>\n): {\n  loaderData: RouterState[\"loaderData\"];\n  errors?: RouterState[\"errors\"];\n} {\n  let { loaderData, errors } = processRouteLoaderData(\n    matches,\n    matchesToLoad,\n    results,\n    pendingActionResult,\n    activeDeferreds,\n    false // This method is only called client side so we always want to bubble\n  );\n\n  // Process results from our revalidating fetchers\n  for (let index = 0; index < revalidatingFetchers.length; index++) {\n    let { key, match, controller } = revalidatingFetchers[index];\n    invariant(\n      fetcherResults !== undefined && fetcherResults[index] !== undefined,\n      \"Did not find corresponding fetcher result\"\n    );\n    let result = fetcherResults[index];\n\n    // Process fetcher non-redirect errors\n    if (controller && controller.signal.aborted) {\n      // Nothing to do for aborted fetchers\n      continue;\n    } else if (isErrorResult(result)) {\n      let boundaryMatch = findNearestBoundary(state.matches, match?.route.id);\n      if (!(errors && errors[boundaryMatch.route.id])) {\n        errors = {\n          ...errors,\n          [boundaryMatch.route.id]: result.error,\n        };\n      }\n      state.fetchers.delete(key);\n    } else if (isRedirectResult(result)) {\n      // Should never get here, redirects should get processed above, but we\n      // keep this to type narrow to a success result in the else\n      invariant(false, \"Unhandled fetcher revalidation redirect\");\n    } else if (isDeferredResult(result)) {\n      // Should never get here, deferred data should be awaited for fetchers\n      // in resolveDeferredResults\n      invariant(false, \"Unhandled fetcher deferred data\");\n    } else {\n      let doneFetcher = getDoneFetcher(result.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n  }\n\n  return { loaderData, errors };\n}\n\nfunction mergeLoaderData(\n  loaderData: RouteData,\n  newLoaderData: RouteData,\n  matches: AgnosticDataRouteMatch[],\n  errors: RouteData | null | undefined\n): RouteData {\n  let mergedLoaderData = { ...newLoaderData };\n  for (let match of matches) {\n    let id = match.route.id;\n    if (newLoaderData.hasOwnProperty(id)) {\n      if (newLoaderData[id] !== undefined) {\n        mergedLoaderData[id] = newLoaderData[id];\n      } else {\n        // No-op - this is so we ignore existing data if we have a key in the\n        // incoming object with an undefined value, which is how we unset a prior\n        // loaderData if we encounter a loader error\n      }\n    } else if (loaderData[id] !== undefined && match.route.loader) {\n      // Preserve existing keys not included in newLoaderData and where a loader\n      // wasn't removed by HMR\n      mergedLoaderData[id] = loaderData[id];\n    }\n\n    if (errors && errors.hasOwnProperty(id)) {\n      // Don't keep any loader data below the boundary\n      break;\n    }\n  }\n  return mergedLoaderData;\n}\n\nfunction getActionDataForCommit(\n  pendingActionResult: PendingActionResult | undefined\n) {\n  if (!pendingActionResult) {\n    return {};\n  }\n  return isErrorResult(pendingActionResult[1])\n    ? {\n        // Clear out prior actionData on errors\n        actionData: {},\n      }\n    : {\n        actionData: {\n          [pendingActionResult[0]]: pendingActionResult[1].data,\n        },\n      };\n}\n\n// Find the nearest error boundary, looking upwards from the leaf route (or the\n// route specified by routeId) for the closest ancestor error boundary,\n// defaulting to the root match\nfunction findNearestBoundary(\n  matches: AgnosticDataRouteMatch[],\n  routeId?: string\n): AgnosticDataRouteMatch {\n  let eligibleMatches = routeId\n    ? matches.slice(0, matches.findIndex((m) => m.route.id === routeId) + 1)\n    : [...matches];\n  return (\n    eligibleMatches.reverse().find((m) => m.route.hasErrorBoundary === true) ||\n    matches[0]\n  );\n}\n\nfunction getShortCircuitMatches(routes: AgnosticDataRouteObject[]): {\n  matches: AgnosticDataRouteMatch[];\n  route: AgnosticDataRouteObject;\n} {\n  // Prefer a root layout route if present, otherwise shim in a route object\n  let route =\n    routes.length === 1\n      ? routes[0]\n      : routes.find((r) => r.index || !r.path || r.path === \"/\") || {\n          id: `__shim-error-route__`,\n        };\n\n  return {\n    matches: [\n      {\n        params: {},\n        pathname: \"\",\n        pathnameBase: \"\",\n        route,\n      },\n    ],\n    route,\n  };\n}\n\nfunction getInternalRouterError(\n  status: number,\n  {\n    pathname,\n    routeId,\n    method,\n    type,\n    message,\n  }: {\n    pathname?: string;\n    routeId?: string;\n    method?: string;\n    type?: \"defer-action\" | \"invalid-body\" | \"route-discovery\";\n    message?: string;\n  } = {}\n) {\n  let statusText = \"Unknown Server Error\";\n  let errorMessage = \"Unknown @remix-run/router error\";\n\n  if (status === 400) {\n    statusText = \"Bad Request\";\n    if (type === \"route-discovery\") {\n      errorMessage =\n        `Unable to match URL \"${pathname}\" - the \\`children()\\` function for ` +\n        `route \\`${routeId}\\` threw the following error:\\n${message}`;\n    } else if (method && pathname && routeId) {\n      errorMessage =\n        `You made a ${method} request to \"${pathname}\" but ` +\n        `did not provide a \\`loader\\` for route \"${routeId}\", ` +\n        `so there is no way to handle the request.`;\n    } else if (type === \"defer-action\") {\n      errorMessage = \"defer() is not supported in actions\";\n    } else if (type === \"invalid-body\") {\n      errorMessage = \"Unable to encode submission body\";\n    }\n  } else if (status === 403) {\n    statusText = \"Forbidden\";\n    errorMessage = `Route \"${routeId}\" does not match URL \"${pathname}\"`;\n  } else if (status === 404) {\n    statusText = \"Not Found\";\n    errorMessage = `No route matches URL \"${pathname}\"`;\n  } else if (status === 405) {\n    statusText = \"Method Not Allowed\";\n    if (method && pathname && routeId) {\n      errorMessage =\n        `You made a ${method.toUpperCase()} request to \"${pathname}\" but ` +\n        `did not provide an \\`action\\` for route \"${routeId}\", ` +\n        `so there is no way to handle the request.`;\n    } else if (method) {\n      errorMessage = `Invalid request method \"${method.toUpperCase()}\"`;\n    }\n  }\n\n  return new ErrorResponseImpl(\n    status || 500,\n    statusText,\n    new Error(errorMessage),\n    true\n  );\n}\n\n// Find any returned redirect errors, starting from the lowest match\nfunction findRedirect(\n  results: DataResult[]\n): { result: RedirectResult; idx: number } | undefined {\n  for (let i = results.length - 1; i >= 0; i--) {\n    let result = results[i];\n    if (isRedirectResult(result)) {\n      return { result, idx: i };\n    }\n  }\n}\n\nfunction stripHashFromPath(path: To) {\n  let parsedPath = typeof path === \"string\" ? parsePath(path) : path;\n  return createPath({ ...parsedPath, hash: \"\" });\n}\n\nfunction isHashChangeOnly(a: Location, b: Location): boolean {\n  if (a.pathname !== b.pathname || a.search !== b.search) {\n    return false;\n  }\n\n  if (a.hash === \"\") {\n    // /page -> /page#hash\n    return b.hash !== \"\";\n  } else if (a.hash === b.hash) {\n    // /page#hash -> /page#hash\n    return true;\n  } else if (b.hash !== \"\") {\n    // /page#hash -> /page#other\n    return true;\n  }\n\n  // If the hash is removed the browser will re-perform a request to the server\n  // /page#hash -> /page\n  return false;\n}\n\nfunction isPromise<T = unknown>(val: unknown): val is Promise<T> {\n  return typeof val === \"object\" && val != null && \"then\" in val;\n}\n\nfunction isHandlerResult(result: unknown): result is HandlerResult {\n  return (\n    result != null &&\n    typeof result === \"object\" &&\n    \"type\" in result &&\n    \"result\" in result &&\n    (result.type === ResultType.data || result.type === ResultType.error)\n  );\n}\n\nfunction isRedirectHandlerResult(result: HandlerResult) {\n  return (\n    isResponse(result.result) && redirectStatusCodes.has(result.result.status)\n  );\n}\n\nfunction isDeferredResult(result: DataResult): result is DeferredResult {\n  return result.type === ResultType.deferred;\n}\n\nfunction isErrorResult(result: DataResult): result is ErrorResult {\n  return result.type === ResultType.error;\n}\n\nfunction isRedirectResult(result?: DataResult): result is RedirectResult {\n  return (result && result.type) === ResultType.redirect;\n}\n\nexport function isDeferredData(value: any): value is DeferredData {\n  let deferred: DeferredData = value;\n  return (\n    deferred &&\n    typeof deferred === \"object\" &&\n    typeof deferred.data === \"object\" &&\n    typeof deferred.subscribe === \"function\" &&\n    typeof deferred.cancel === \"function\" &&\n    typeof deferred.resolveData === \"function\"\n  );\n}\n\nfunction isResponse(value: any): value is Response {\n  return (\n    value != null &&\n    typeof value.status === \"number\" &&\n    typeof value.statusText === \"string\" &&\n    typeof value.headers === \"object\" &&\n    typeof value.body !== \"undefined\"\n  );\n}\n\nfunction isRedirectResponse(result: any): result is Response {\n  if (!isResponse(result)) {\n    return false;\n  }\n\n  let status = result.status;\n  let location = result.headers.get(\"Location\");\n  return status >= 300 && status <= 399 && location != null;\n}\n\nfunction isValidMethod(method: string): method is FormMethod | V7_FormMethod {\n  return validRequestMethods.has(method.toLowerCase() as FormMethod);\n}\n\nfunction isMutationMethod(\n  method: string\n): method is MutationFormMethod | V7_MutationFormMethod {\n  return validMutationMethods.has(method.toLowerCase() as MutationFormMethod);\n}\n\nasync function resolveDeferredResults(\n  currentMatches: AgnosticDataRouteMatch[],\n  matchesToLoad: (AgnosticDataRouteMatch | null)[],\n  results: DataResult[],\n  signals: (AbortSignal | null)[],\n  isFetcher: boolean,\n  currentLoaderData?: RouteData\n) {\n  for (let index = 0; index < results.length; index++) {\n    let result = results[index];\n    let match = matchesToLoad[index];\n    // If we don't have a match, then we can have a deferred result to do\n    // anything with.  This is for revalidating fetchers where the route was\n    // removed during HMR\n    if (!match) {\n      continue;\n    }\n\n    let currentMatch = currentMatches.find(\n      (m) => m.route.id === match!.route.id\n    );\n    let isRevalidatingLoader =\n      currentMatch != null &&\n      !isNewRouteInstance(currentMatch, match) &&\n      (currentLoaderData && currentLoaderData[match.route.id]) !== undefined;\n\n    if (isDeferredResult(result) && (isFetcher || isRevalidatingLoader)) {\n      // Note: we do not have to touch activeDeferreds here since we race them\n      // against the signal in resolveDeferredData and they'll get aborted\n      // there if needed\n      let signal = signals[index];\n      invariant(\n        signal,\n        \"Expected an AbortSignal for revalidating fetcher deferred result\"\n      );\n      await resolveDeferredData(result, signal, isFetcher).then((result) => {\n        if (result) {\n          results[index] = result || results[index];\n        }\n      });\n    }\n  }\n}\n\nasync function resolveDeferredData(\n  result: DeferredResult,\n  signal: AbortSignal,\n  unwrap = false\n): Promise<SuccessResult | ErrorResult | undefined> {\n  let aborted = await result.deferredData.resolveData(signal);\n  if (aborted) {\n    return;\n  }\n\n  if (unwrap) {\n    try {\n      return {\n        type: ResultType.data,\n        data: result.deferredData.unwrappedData,\n      };\n    } catch (e) {\n      // Handle any TrackedPromise._error values encountered while unwrapping\n      return {\n        type: ResultType.error,\n        error: e,\n      };\n    }\n  }\n\n  return {\n    type: ResultType.data,\n    data: result.deferredData.data,\n  };\n}\n\nfunction hasNakedIndexQuery(search: string): boolean {\n  return new URLSearchParams(search).getAll(\"index\").some((v) => v === \"\");\n}\n\nfunction getTargetMatch(\n  matches: AgnosticDataRouteMatch[],\n  location: Location | string\n) {\n  let search =\n    typeof location === \"string\" ? parsePath(location).search : location.search;\n  if (\n    matches[matches.length - 1].route.index &&\n    hasNakedIndexQuery(search || \"\")\n  ) {\n    // Return the leaf index route when index is present\n    return matches[matches.length - 1];\n  }\n  // Otherwise grab the deepest \"path contributing\" match (ignoring index and\n  // pathless layout routes)\n  let pathMatches = getPathContributingMatches(matches);\n  return pathMatches[pathMatches.length - 1];\n}\n\nfunction getSubmissionFromNavigation(\n  navigation: Navigation\n): Submission | undefined {\n  let { formMethod, formAction, formEncType, text, formData, json } =\n    navigation;\n  if (!formMethod || !formAction || !formEncType) {\n    return;\n  }\n\n  if (text != null) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData: undefined,\n      json: undefined,\n      text,\n    };\n  } else if (formData != null) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData,\n      json: undefined,\n      text: undefined,\n    };\n  } else if (json !== undefined) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData: undefined,\n      json,\n      text: undefined,\n    };\n  }\n}\n\nfunction getLoadingNavigation(\n  location: Location,\n  submission?: Submission\n): NavigationStates[\"Loading\"] {\n  if (submission) {\n    let navigation: NavigationStates[\"Loading\"] = {\n      state: \"loading\",\n      location,\n      formMethod: submission.formMethod,\n      formAction: submission.formAction,\n      formEncType: submission.formEncType,\n      formData: submission.formData,\n      json: submission.json,\n      text: submission.text,\n    };\n    return navigation;\n  } else {\n    let navigation: NavigationStates[\"Loading\"] = {\n      state: \"loading\",\n      location,\n      formMethod: undefined,\n      formAction: undefined,\n      formEncType: undefined,\n      formData: undefined,\n      json: undefined,\n      text: undefined,\n    };\n    return navigation;\n  }\n}\n\nfunction getSubmittingNavigation(\n  location: Location,\n  submission: Submission\n): NavigationStates[\"Submitting\"] {\n  let navigation: NavigationStates[\"Submitting\"] = {\n    state: \"submitting\",\n    location,\n    formMethod: submission.formMethod,\n    formAction: submission.formAction,\n    formEncType: submission.formEncType,\n    formData: submission.formData,\n    json: submission.json,\n    text: submission.text,\n  };\n  return navigation;\n}\n\nfunction getLoadingFetcher(\n  submission?: Submission,\n  data?: Fetcher[\"data\"]\n): FetcherStates[\"Loading\"] {\n  if (submission) {\n    let fetcher: FetcherStates[\"Loading\"] = {\n      state: \"loading\",\n      formMethod: submission.formMethod,\n      formAction: submission.formAction,\n      formEncType: submission.formEncType,\n      formData: submission.formData,\n      json: submission.json,\n      text: submission.text,\n      data,\n    };\n    return fetcher;\n  } else {\n    let fetcher: FetcherStates[\"Loading\"] = {\n      state: \"loading\",\n      formMethod: undefined,\n      formAction: undefined,\n      formEncType: undefined,\n      formData: undefined,\n      json: undefined,\n      text: undefined,\n      data,\n    };\n    return fetcher;\n  }\n}\n\nfunction getSubmittingFetcher(\n  submission: Submission,\n  existingFetcher?: Fetcher\n): FetcherStates[\"Submitting\"] {\n  let fetcher: FetcherStates[\"Submitting\"] = {\n    state: \"submitting\",\n    formMethod: submission.formMethod,\n    formAction: submission.formAction,\n    formEncType: submission.formEncType,\n    formData: submission.formData,\n    json: submission.json,\n    text: submission.text,\n    data: existingFetcher ? existingFetcher.data : undefined,\n  };\n  return fetcher;\n}\n\nfunction getDoneFetcher(data: Fetcher[\"data\"]): FetcherStates[\"Idle\"] {\n  let fetcher: FetcherStates[\"Idle\"] = {\n    state: \"idle\",\n    formMethod: undefined,\n    formAction: undefined,\n    formEncType: undefined,\n    formData: undefined,\n    json: undefined,\n    text: undefined,\n    data,\n  };\n  return fetcher;\n}\n\nfunction restoreAppliedTransitions(\n  _window: Window,\n  transitions: Map<string, Set<string>>\n) {\n  try {\n    let sessionPositions = _window.sessionStorage.getItem(\n      TRANSITIONS_STORAGE_KEY\n    );\n    if (sessionPositions) {\n      let json = JSON.parse(sessionPositions);\n      for (let [k, v] of Object.entries(json || {})) {\n        if (v && Array.isArray(v)) {\n          transitions.set(k, new Set(v || []));\n        }\n      }\n    }\n  } catch (e) {\n    // no-op, use default empty object\n  }\n}\n\nfunction persistAppliedTransitions(\n  _window: Window,\n  transitions: Map<string, Set<string>>\n) {\n  if (transitions.size > 0) {\n    let json: Record<string, string[]> = {};\n    for (let [k, v] of transitions) {\n      json[k] = [...v];\n    }\n    try {\n      _window.sessionStorage.setItem(\n        TRANSITIONS_STORAGE_KEY,\n        JSON.stringify(json)\n      );\n    } catch (error) {\n      warning(\n        false,\n        `Failed to save applied view transitions in sessionStorage (${error}).`\n      );\n    }\n  }\n}\n//#endregion\n","import * as React from \"react\";\nimport type {\n  AgnosticIndexRouteObject,\n  AgnosticNonIndexRouteObject,\n  AgnosticRouteMatch,\n  History,\n  LazyRouteFunction,\n  Location,\n  Action as NavigationType,\n  RelativeRoutingType,\n  Router,\n  StaticHandlerContext,\n  To,\n  TrackedPromise,\n} from \"@remix-run/router\";\n\n// Create react-specific types from the agnostic types in @remix-run/router to\n// export from react-router\nexport interface IndexRouteObject {\n  caseSensitive?: AgnosticIndexRouteObject[\"caseSensitive\"];\n  path?: AgnosticIndexRouteObject[\"path\"];\n  id?: AgnosticIndexRouteObject[\"id\"];\n  loader?: AgnosticIndexRouteObject[\"loader\"];\n  action?: AgnosticIndexRouteObject[\"action\"];\n  hasErrorBoundary?: AgnosticIndexRouteObject[\"hasErrorBoundary\"];\n  shouldRevalidate?: AgnosticIndexRouteObject[\"shouldRevalidate\"];\n  handle?: AgnosticIndexRouteObject[\"handle\"];\n  index: true;\n  children?: undefined;\n  element?: React.ReactNode | null;\n  hydrateFallbackElement?: React.ReactNode | null;\n  errorElement?: React.ReactNode | null;\n  Component?: React.ComponentType | null;\n  HydrateFallback?: React.ComponentType | null;\n  ErrorBoundary?: React.ComponentType | null;\n  lazy?: LazyRouteFunction<RouteObject>;\n}\n\nexport interface NonIndexRouteObject {\n  caseSensitive?: AgnosticNonIndexRouteObject[\"caseSensitive\"];\n  path?: AgnosticNonIndexRouteObject[\"path\"];\n  id?: AgnosticNonIndexRouteObject[\"id\"];\n  loader?: AgnosticNonIndexRouteObject[\"loader\"];\n  action?: AgnosticNonIndexRouteObject[\"action\"];\n  hasErrorBoundary?: AgnosticNonIndexRouteObject[\"hasErrorBoundary\"];\n  shouldRevalidate?: AgnosticNonIndexRouteObject[\"shouldRevalidate\"];\n  handle?: AgnosticNonIndexRouteObject[\"handle\"];\n  index?: false;\n  children?: RouteObject[];\n  element?: React.ReactNode | null;\n  hydrateFallbackElement?: React.ReactNode | null;\n  errorElement?: React.ReactNode | null;\n  Component?: React.ComponentType | null;\n  HydrateFallback?: React.ComponentType | null;\n  ErrorBoundary?: React.ComponentType | null;\n  lazy?: LazyRouteFunction<RouteObject>;\n}\n\nexport type RouteObject = IndexRouteObject | NonIndexRouteObject;\n\nexport type DataRouteObject = RouteObject & {\n  children?: DataRouteObject[];\n  id: string;\n};\n\nexport interface RouteMatch<\n  ParamKey extends string = string,\n  RouteObjectType extends RouteObject = RouteObject\n> extends AgnosticRouteMatch<ParamKey, RouteObjectType> {}\n\nexport interface DataRouteMatch extends RouteMatch<string, DataRouteObject> {}\n\nexport interface DataRouterContextObject\n  // Omit `future` since those can be pulled from the `router`\n  // `NavigationContext` needs future since it doesn't have a `router` in all cases\n  extends Omit<NavigationContextObject, \"future\"> {\n  router: Router;\n  staticContext?: StaticHandlerContext;\n}\n\nexport const DataRouterContext =\n  React.createContext<DataRouterContextObject | null>(null);\nif (__DEV__) {\n  DataRouterContext.displayName = \"DataRouter\";\n}\n\nexport const DataRouterStateContext = React.createContext<\n  Router[\"state\"] | null\n>(null);\nif (__DEV__) {\n  DataRouterStateContext.displayName = \"DataRouterState\";\n}\n\nexport const AwaitContext = React.createContext<TrackedPromise | null>(null);\nif (__DEV__) {\n  AwaitContext.displayName = \"Await\";\n}\n\nexport interface NavigateOptions {\n  replace?: boolean;\n  state?: any;\n  preventScrollReset?: boolean;\n  relative?: RelativeRoutingType;\n  unstable_flushSync?: boolean;\n  unstable_viewTransition?: boolean;\n}\n\n/**\n * A Navigator is a \"location changer\"; it's how you get to different locations.\n *\n * Every history instance conforms to the Navigator interface, but the\n * distinction is useful primarily when it comes to the low-level `<Router>` API\n * where both the location and a navigator must be provided separately in order\n * to avoid \"tearing\" that may occur in a suspense-enabled app if the action\n * and/or location were to be read directly from the history instance.\n */\nexport interface Navigator {\n  createHref: History[\"createHref\"];\n  // Optional for backwards-compat with Router/HistoryRouter usage (edge case)\n  encodeLocation?: History[\"encodeLocation\"];\n  go: History[\"go\"];\n  push(to: To, state?: any, opts?: NavigateOptions): void;\n  replace(to: To, state?: any, opts?: NavigateOptions): void;\n}\n\ninterface NavigationContextObject {\n  basename: string;\n  navigator: Navigator;\n  static: boolean;\n  future: {\n    v7_relativeSplatPath: boolean;\n  };\n}\n\nexport const NavigationContext = React.createContext<NavigationContextObject>(\n  null!\n);\n\nif (__DEV__) {\n  NavigationContext.displayName = \"Navigation\";\n}\n\ninterface LocationContextObject {\n  location: Location;\n  navigationType: NavigationType;\n}\n\nexport const LocationContext = React.createContext<LocationContextObject>(\n  null!\n);\n\nif (__DEV__) {\n  LocationContext.displayName = \"Location\";\n}\n\nexport interface RouteContextObject {\n  outlet: React.ReactElement | null;\n  matches: RouteMatch[];\n  isDataRoute: boolean;\n}\n\nexport const RouteContext = React.createContext<RouteContextObject>({\n  outlet: null,\n  matches: [],\n  isDataRoute: false,\n});\n\nif (__DEV__) {\n  RouteContext.displayName = \"Route\";\n}\n\nexport const RouteErrorContext = React.createContext<any>(null);\n\nif (__DEV__) {\n  RouteErrorContext.displayName = \"RouteError\";\n}\n","import * as React from \"react\";\nimport type {\n  Blocker,\n  BlockerFunction,\n  Location,\n  ParamParseKey,\n  Params,\n  Path,\n  PathMatch,\n  PathPattern,\n  RelativeRoutingType,\n  Router as RemixRouter,\n  RevalidationState,\n  To,\n  UIMatch,\n} from \"@remix-run/router\";\nimport {\n  IDLE_BLOCKER,\n  Action as NavigationType,\n  UNSAFE_convertRouteMatchToUiMatch as convertRouteMatchToUiMatch,\n  UNSAFE_getResolveToMatches as getResolveToMatches,\n  UNSAFE_invariant as invariant,\n  isRouteErrorResponse,\n  joinPaths,\n  matchPath,\n  matchRoutes,\n  parsePath,\n  resolveTo,\n  stripBasename,\n  UNSAFE_warning as warning,\n} from \"@remix-run/router\";\n\nimport type {\n  DataRouteMatch,\n  NavigateOptions,\n  RouteContextObject,\n  RouteMatch,\n  RouteObject,\n} from \"./context\";\nimport {\n  AwaitContext,\n  DataRouterContext,\n  DataRouterStateContext,\n  LocationContext,\n  NavigationContext,\n  RouteContext,\n  RouteErrorContext,\n} from \"./context\";\n\n/**\n * Returns the full href for the given \"to\" value. This is useful for building\n * custom links that are also accessible and preserve right-click behavior.\n *\n * @see https://reactrouter.com/hooks/use-href\n */\nexport function useHref(\n  to: To,\n  { relative }: { relative?: RelativeRoutingType } = {}\n): string {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useHref() may be used only in the context of a <Router> component.`\n  );\n\n  let { basename, navigator } = React.useContext(NavigationContext);\n  let { hash, pathname, search } = useResolvedPath(to, { relative });\n\n  let joinedPathname = pathname;\n\n  // If we're operating within a basename, prepend it to the pathname prior\n  // to creating the href.  If this is a root navigation, then just use the raw\n  // basename which allows the basename to have full control over the presence\n  // of a trailing slash on root links\n  if (basename !== \"/\") {\n    joinedPathname =\n      pathname === \"/\" ? basename : joinPaths([basename, pathname]);\n  }\n\n  return navigator.createHref({ pathname: joinedPathname, search, hash });\n}\n\n/**\n * Returns true if this component is a descendant of a `<Router>`.\n *\n * @see https://reactrouter.com/hooks/use-in-router-context\n */\nexport function useInRouterContext(): boolean {\n  return React.useContext(LocationContext) != null;\n}\n\n/**\n * Returns the current location object, which represents the current URL in web\n * browsers.\n *\n * Note: If you're using this it may mean you're doing some of your own\n * \"routing\" in your app, and we'd like to know what your use case is. We may\n * be able to provide something higher-level to better suit your needs.\n *\n * @see https://reactrouter.com/hooks/use-location\n */\nexport function useLocation(): Location {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useLocation() may be used only in the context of a <Router> component.`\n  );\n\n  return React.useContext(LocationContext).location;\n}\n\n/**\n * Returns the current navigation action which describes how the router came to\n * the current location, either by a pop, push, or replace on the history stack.\n *\n * @see https://reactrouter.com/hooks/use-navigation-type\n */\nexport function useNavigationType(): NavigationType {\n  return React.useContext(LocationContext).navigationType;\n}\n\n/**\n * Returns a PathMatch object if the given pattern matches the current URL.\n * This is useful for components that need to know \"active\" state, e.g.\n * `<NavLink>`.\n *\n * @see https://reactrouter.com/hooks/use-match\n */\nexport function useMatch<\n  ParamKey extends ParamParseKey<Path>,\n  Path extends string\n>(pattern: PathPattern<Path> | Path): PathMatch<ParamKey> | null {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useMatch() may be used only in the context of a <Router> component.`\n  );\n\n  let { pathname } = useLocation();\n  return React.useMemo(\n    () => matchPath<ParamKey, Path>(pattern, pathname),\n    [pathname, pattern]\n  );\n}\n\n/**\n * The interface for the navigate() function returned from useNavigate().\n */\nexport interface NavigateFunction {\n  (to: To, options?: NavigateOptions): void;\n  (delta: number): void;\n}\n\nconst navigateEffectWarning =\n  `You should call navigate() in a React.useEffect(), not when ` +\n  `your component is first rendered.`;\n\n// Mute warnings for calls to useNavigate in SSR environments\nfunction useIsomorphicLayoutEffect(\n  cb: Parameters<typeof React.useLayoutEffect>[0]\n) {\n  let isStatic = React.useContext(NavigationContext).static;\n  if (!isStatic) {\n    // We should be able to get rid of this once react 18.3 is released\n    // See: https://github.com/facebook/react/pull/26395\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(cb);\n  }\n}\n\n/**\n * Returns an imperative method for changing the location. Used by `<Link>`s, but\n * may also be used by other elements to change the location.\n *\n * @see https://reactrouter.com/hooks/use-navigate\n */\nexport function useNavigate(): NavigateFunction {\n  let { isDataRoute } = React.useContext(RouteContext);\n  // Conditional usage is OK here because the usage of a data router is static\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  return isDataRoute ? useNavigateStable() : useNavigateUnstable();\n}\n\nfunction useNavigateUnstable(): NavigateFunction {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useNavigate() may be used only in the context of a <Router> component.`\n  );\n\n  let dataRouterContext = React.useContext(DataRouterContext);\n  let { basename, future, navigator } = React.useContext(NavigationContext);\n  let { matches } = React.useContext(RouteContext);\n  let { pathname: locationPathname } = useLocation();\n\n  let routePathnamesJson = JSON.stringify(\n    getResolveToMatches(matches, future.v7_relativeSplatPath)\n  );\n\n  let activeRef = React.useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    activeRef.current = true;\n  });\n\n  let navigate: NavigateFunction = React.useCallback(\n    (to: To | number, options: NavigateOptions = {}) => {\n      warning(activeRef.current, navigateEffectWarning);\n\n      // Short circuit here since if this happens on first render the navigate\n      // is useless because we haven't wired up our history listener yet\n      if (!activeRef.current) return;\n\n      if (typeof to === \"number\") {\n        navigator.go(to);\n        return;\n      }\n\n      let path = resolveTo(\n        to,\n        JSON.parse(routePathnamesJson),\n        locationPathname,\n        options.relative === \"path\"\n      );\n\n      // If we're operating within a basename, prepend it to the pathname prior\n      // to handing off to history (but only if we're not in a data router,\n      // otherwise it'll prepend the basename inside of the router).\n      // If this is a root navigation, then we navigate to the raw basename\n      // which allows the basename to have full control over the presence of a\n      // trailing slash on root links\n      if (dataRouterContext == null && basename !== \"/\") {\n        path.pathname =\n          path.pathname === \"/\"\n            ? basename\n            : joinPaths([basename, path.pathname]);\n      }\n\n      (!!options.replace ? navigator.replace : navigator.push)(\n        path,\n        options.state,\n        options\n      );\n    },\n    [\n      basename,\n      navigator,\n      routePathnamesJson,\n      locationPathname,\n      dataRouterContext,\n    ]\n  );\n\n  return navigate;\n}\n\nconst OutletContext = React.createContext<unknown>(null);\n\n/**\n * Returns the context (if provided) for the child route at this level of the route\n * hierarchy.\n * @see https://reactrouter.com/hooks/use-outlet-context\n */\nexport function useOutletContext<Context = unknown>(): Context {\n  return React.useContext(OutletContext) as Context;\n}\n\n/**\n * Returns the element for the child route at this level of the route\n * hierarchy. Used internally by `<Outlet>` to render child routes.\n *\n * @see https://reactrouter.com/hooks/use-outlet\n */\nexport function useOutlet(context?: unknown): React.ReactElement | null {\n  let outlet = React.useContext(RouteContext).outlet;\n  if (outlet) {\n    return (\n      <OutletContext.Provider value={context}>{outlet}</OutletContext.Provider>\n    );\n  }\n  return outlet;\n}\n\n/**\n * Returns an object of key/value pairs of the dynamic params from the current\n * URL that were matched by the route path.\n *\n * @see https://reactrouter.com/hooks/use-params\n */\nexport function useParams<\n  ParamsOrKey extends string | Record<string, string | undefined> = string\n>(): Readonly<\n  [ParamsOrKey] extends [string] ? Params<ParamsOrKey> : Partial<ParamsOrKey>\n> {\n  let { matches } = React.useContext(RouteContext);\n  let routeMatch = matches[matches.length - 1];\n  return routeMatch ? (routeMatch.params as any) : {};\n}\n\n/**\n * Resolves the pathname of the given `to` value against the current location.\n *\n * @see https://reactrouter.com/hooks/use-resolved-path\n */\nexport function useResolvedPath(\n  to: To,\n  { relative }: { relative?: RelativeRoutingType } = {}\n): Path {\n  let { future } = React.useContext(NavigationContext);\n  let { matches } = React.useContext(RouteContext);\n  let { pathname: locationPathname } = useLocation();\n  let routePathnamesJson = JSON.stringify(\n    getResolveToMatches(matches, future.v7_relativeSplatPath)\n  );\n\n  return React.useMemo(\n    () =>\n      resolveTo(\n        to,\n        JSON.parse(routePathnamesJson),\n        locationPathname,\n        relative === \"path\"\n      ),\n    [to, routePathnamesJson, locationPathname, relative]\n  );\n}\n\n/**\n * Returns the element of the route that matched the current location, prepared\n * with the correct context to render the remainder of the route tree. Route\n * elements in the tree must render an `<Outlet>` to render their child route's\n * element.\n *\n * @see https://reactrouter.com/hooks/use-routes\n */\nexport function useRoutes(\n  routes: RouteObject[],\n  locationArg?: Partial<Location> | string\n): React.ReactElement | null {\n  return useRoutesImpl(routes, locationArg);\n}\n\n// Internal implementation with accept optional param for RouterProvider usage\nexport function useRoutesImpl(\n  routes: RouteObject[],\n  locationArg?: Partial<Location> | string,\n  dataRouterState?: RemixRouter[\"state\"],\n  future?: RemixRouter[\"future\"]\n): React.ReactElement | null {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of the\n    // router loaded. We can help them understand how to avoid that.\n    `useRoutes() may be used only in the context of a <Router> component.`\n  );\n\n  let { navigator } = React.useContext(NavigationContext);\n  let { matches: parentMatches } = React.useContext(RouteContext);\n  let routeMatch = parentMatches[parentMatches.length - 1];\n  let parentParams = routeMatch ? routeMatch.params : {};\n  let parentPathname = routeMatch ? routeMatch.pathname : \"/\";\n  let parentPathnameBase = routeMatch ? routeMatch.pathnameBase : \"/\";\n  let parentRoute = routeMatch && routeMatch.route;\n\n  if (__DEV__) {\n    // You won't get a warning about 2 different <Routes> under a <Route>\n    // without a trailing *, but this is a best-effort warning anyway since we\n    // cannot even give the warning unless they land at the parent route.\n    //\n    // Example:\n    //\n    // <Routes>\n    //   {/* This route path MUST end with /* because otherwise\n    //       it will never match /blog/post/123 */}\n    //   <Route path=\"blog\" element={<Blog />} />\n    //   <Route path=\"blog/feed\" element={<BlogFeed />} />\n    // </Routes>\n    //\n    // function Blog() {\n    //   return (\n    //     <Routes>\n    //       <Route path=\"post/:id\" element={<Post />} />\n    //     </Routes>\n    //   );\n    // }\n    let parentPath = (parentRoute && parentRoute.path) || \"\";\n    warningOnce(\n      parentPathname,\n      !parentRoute || parentPath.endsWith(\"*\"),\n      `You rendered descendant <Routes> (or called \\`useRoutes()\\`) at ` +\n        `\"${parentPathname}\" (under <Route path=\"${parentPath}\">) but the ` +\n        `parent route path has no trailing \"*\". This means if you navigate ` +\n        `deeper, the parent won't match anymore and therefore the child ` +\n        `routes will never render.\\n\\n` +\n        `Please change the parent <Route path=\"${parentPath}\"> to <Route ` +\n        `path=\"${parentPath === \"/\" ? \"*\" : `${parentPath}/*`}\">.`\n    );\n  }\n\n  let locationFromContext = useLocation();\n\n  let location;\n  if (locationArg) {\n    let parsedLocationArg =\n      typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n\n    invariant(\n      parentPathnameBase === \"/\" ||\n        parsedLocationArg.pathname?.startsWith(parentPathnameBase),\n      `When overriding the location using \\`<Routes location>\\` or \\`useRoutes(routes, location)\\`, ` +\n        `the location pathname must begin with the portion of the URL pathname that was ` +\n        `matched by all parent routes. The current pathname base is \"${parentPathnameBase}\" ` +\n        `but pathname \"${parsedLocationArg.pathname}\" was given in the \\`location\\` prop.`\n    );\n\n    location = parsedLocationArg;\n  } else {\n    location = locationFromContext;\n  }\n\n  let pathname = location.pathname || \"/\";\n\n  let remainingPathname = pathname;\n  if (parentPathnameBase !== \"/\") {\n    // Determine the remaining pathname by removing the # of URL segments the\n    // parentPathnameBase has, instead of removing based on character count.\n    // This is because we can't guarantee that incoming/outgoing encodings/\n    // decodings will match exactly.\n    // We decode paths before matching on a per-segment basis with\n    // decodeURIComponent(), but we re-encode pathnames via `new URL()` so they\n    // match what `window.location.pathname` would reflect.  Those don't 100%\n    // align when it comes to encoded URI characters such as % and &.\n    //\n    // So we may end up with:\n    //   pathname:           \"/descendant/a%25b/match\"\n    //   parentPathnameBase: \"/descendant/a%b\"\n    //\n    // And the direct substring removal approach won't work :/\n    let parentSegments = parentPathnameBase.replace(/^\\//, \"\").split(\"/\");\n    let segments = pathname.replace(/^\\//, \"\").split(\"/\");\n    remainingPathname = \"/\" + segments.slice(parentSegments.length).join(\"/\");\n  }\n\n  let matches = matchRoutes(routes, { pathname: remainingPathname });\n\n  if (__DEV__) {\n    warning(\n      parentRoute || matches != null,\n      `No routes matched location \"${location.pathname}${location.search}${location.hash}\" `\n    );\n\n    warning(\n      matches == null ||\n        matches[matches.length - 1].route.element !== undefined ||\n        matches[matches.length - 1].route.Component !== undefined ||\n        matches[matches.length - 1].route.lazy !== undefined,\n      `Matched leaf route at location \"${location.pathname}${location.search}${location.hash}\" ` +\n        `does not have an element or Component. This means it will render an <Outlet /> with a ` +\n        `null value by default resulting in an \"empty\" page.`\n    );\n  }\n\n  let renderedMatches = _renderMatches(\n    matches &&\n      matches.map((match) =>\n        Object.assign({}, match, {\n          params: Object.assign({}, parentParams, match.params),\n          pathname: joinPaths([\n            parentPathnameBase,\n            // Re-encode pathnames that were decoded inside matchRoutes\n            navigator.encodeLocation\n              ? navigator.encodeLocation(match.pathname).pathname\n              : match.pathname,\n          ]),\n          pathnameBase:\n            match.pathnameBase === \"/\"\n              ? parentPathnameBase\n              : joinPaths([\n                  parentPathnameBase,\n                  // Re-encode pathnames that were decoded inside matchRoutes\n                  navigator.encodeLocation\n                    ? navigator.encodeLocation(match.pathnameBase).pathname\n                    : match.pathnameBase,\n                ]),\n        })\n      ),\n    parentMatches,\n    dataRouterState,\n    future\n  );\n\n  // When a user passes in a `locationArg`, the associated routes need to\n  // be wrapped in a new `LocationContext.Provider` in order for `useLocation`\n  // to use the scoped location instead of the global location.\n  if (locationArg && renderedMatches) {\n    return (\n      <LocationContext.Provider\n        value={{\n          location: {\n            pathname: \"/\",\n            search: \"\",\n            hash: \"\",\n            state: null,\n            key: \"default\",\n            ...location,\n          },\n          navigationType: NavigationType.Pop,\n        }}\n      >\n        {renderedMatches}\n      </LocationContext.Provider>\n    );\n  }\n\n  return renderedMatches;\n}\n\nfunction DefaultErrorComponent() {\n  let error = useRouteError();\n  let message = isRouteErrorResponse(error)\n    ? `${error.status} ${error.statusText}`\n    : error instanceof Error\n    ? error.message\n    : JSON.stringify(error);\n  let stack = error instanceof Error ? error.stack : null;\n  let lightgrey = \"rgba(200,200,200, 0.5)\";\n  let preStyles = { padding: \"0.5rem\", backgroundColor: lightgrey };\n  let codeStyles = { padding: \"2px 4px\", backgroundColor: lightgrey };\n\n  let devInfo = null;\n  if (__DEV__) {\n    console.error(\n      \"Error handled by React Router default ErrorBoundary:\",\n      error\n    );\n\n    devInfo = (\n      <>\n        <p> Hey developer </p>\n        <p>\n          You can provide a way better UX than this when your app throws errors\n          by providing your own <code style={codeStyles}>ErrorBoundary</code> or{\" \"}\n          <code style={codeStyles}>errorElement</code> prop on your route.\n        </p>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <h2>Unexpected Application Error!</h2>\n      <h3 style={{ fontStyle: \"italic\" }}>{message}</h3>\n      {stack ? <pre style={preStyles}>{stack}</pre> : null}\n      {devInfo}\n    </>\n  );\n}\n\nconst defaultErrorElement = <DefaultErrorComponent />;\n\ntype RenderErrorBoundaryProps = React.PropsWithChildren<{\n  location: Location;\n  revalidation: RevalidationState;\n  error: any;\n  component: React.ReactNode;\n  routeContext: RouteContextObject;\n}>;\n\ntype RenderErrorBoundaryState = {\n  location: Location;\n  revalidation: RevalidationState;\n  error: any;\n};\n\nexport class RenderErrorBoundary extends React.Component<\n  RenderErrorBoundaryProps,\n  RenderErrorBoundaryState\n> {\n  constructor(props: RenderErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      location: props.location,\n      revalidation: props.revalidation,\n      error: props.error,\n    };\n  }\n\n  static getDerivedStateFromError(error: any) {\n    return { error: error };\n  }\n\n  static getDerivedStateFromProps(\n    props: RenderErrorBoundaryProps,\n    state: RenderErrorBoundaryState\n  ) {\n    // When we get into an error state, the user will likely click \"back\" to the\n    // previous page that didn't have an error. Because this wraps the entire\n    // application, that will have no effect--the error page continues to display.\n    // This gives us a mechanism to recover from the error when the location changes.\n    //\n    // Whether we're in an error state or not, we update the location in state\n    // so that when we are in an error state, it gets reset when a new location\n    // comes in and the user recovers from the error.\n    if (\n      state.location !== props.location ||\n      (state.revalidation !== \"idle\" && props.revalidation === \"idle\")\n    ) {\n      return {\n        error: props.error,\n        location: props.location,\n        revalidation: props.revalidation,\n      };\n    }\n\n    // If we're not changing locations, preserve the location but still surface\n    // any new errors that may come through. We retain the existing error, we do\n    // this because the error provided from the app state may be cleared without\n    // the location changing.\n    return {\n      error: props.error !== undefined ? props.error : state.error,\n      location: state.location,\n      revalidation: props.revalidation || state.revalidation,\n    };\n  }\n\n  componentDidCatch(error: any, errorInfo: any) {\n    console.error(\n      \"React Router caught the following error during render\",\n      error,\n      errorInfo\n    );\n  }\n\n  render() {\n    return this.state.error !== undefined ? (\n      <RouteContext.Provider value={this.props.routeContext}>\n        <RouteErrorContext.Provider\n          value={this.state.error}\n          children={this.props.component}\n        />\n      </RouteContext.Provider>\n    ) : (\n      this.props.children\n    );\n  }\n}\n\ninterface RenderedRouteProps {\n  routeContext: RouteContextObject;\n  match: RouteMatch<string, RouteObject>;\n  children: React.ReactNode | null;\n}\n\nfunction RenderedRoute({ routeContext, match, children }: RenderedRouteProps) {\n  let dataRouterContext = React.useContext(DataRouterContext);\n\n  // Track how deep we got in our render pass to emulate SSR componentDidCatch\n  // in a DataStaticRouter\n  if (\n    dataRouterContext &&\n    dataRouterContext.static &&\n    dataRouterContext.staticContext &&\n    (match.route.errorElement || match.route.ErrorBoundary)\n  ) {\n    dataRouterContext.staticContext._deepestRenderedBoundaryId = match.route.id;\n  }\n\n  return (\n    <RouteContext.Provider value={routeContext}>\n      {children}\n    </RouteContext.Provider>\n  );\n}\n\nexport function _renderMatches(\n  matches: RouteMatch[] | null,\n  parentMatches: RouteMatch[] = [],\n  dataRouterState: RemixRouter[\"state\"] | null = null,\n  future: RemixRouter[\"future\"] | null = null\n): React.ReactElement | null {\n  if (matches == null) {\n    if (dataRouterState?.errors) {\n      // Don't bail if we have data router errors so we can render them in the\n      // boundary.  Use the pre-matched (or shimmed) matches\n      matches = dataRouterState.matches as DataRouteMatch[];\n    } else {\n      return null;\n    }\n  }\n\n  let renderedMatches = matches;\n\n  // If we have data errors, trim matches to the highest error boundary\n  let errors = dataRouterState?.errors;\n  if (errors != null) {\n    let errorIndex = renderedMatches.findIndex(\n      (m) => m.route.id && errors?.[m.route.id] !== undefined\n    );\n    invariant(\n      errorIndex >= 0,\n      `Could not find a matching route for errors on route IDs: ${Object.keys(\n        errors\n      ).join(\",\")}`\n    );\n    renderedMatches = renderedMatches.slice(\n      0,\n      Math.min(renderedMatches.length, errorIndex + 1)\n    );\n  }\n\n  // If we're in a partial hydration mode, detect if we need to render down to\n  // a given HydrateFallback while we load the rest of the hydration data\n  let renderFallback = false;\n  let fallbackIndex = -1;\n  if (dataRouterState && future && future.v7_partialHydration) {\n    for (let i = 0; i < renderedMatches.length; i++) {\n      let match = renderedMatches[i];\n      // Track the deepest fallback up until the first route without data\n      if (match.route.HydrateFallback || match.route.hydrateFallbackElement) {\n        fallbackIndex = i;\n      }\n\n      if (match.route.id) {\n        let { loaderData, errors } = dataRouterState;\n        let needsToRunLoader =\n          match.route.loader &&\n          loaderData[match.route.id] === undefined &&\n          (!errors || errors[match.route.id] === undefined);\n        if (match.route.lazy || needsToRunLoader) {\n          // We found the first route that's not ready to render (waiting on\n          // lazy, or has a loader that hasn't run yet).  Flag that we need to\n          // render a fallback and render up until the appropriate fallback\n          renderFallback = true;\n          if (fallbackIndex >= 0) {\n            renderedMatches = renderedMatches.slice(0, fallbackIndex + 1);\n          } else {\n            renderedMatches = [renderedMatches[0]];\n          }\n          break;\n        }\n      }\n    }\n  }\n\n  return renderedMatches.reduceRight((outlet, match, index) => {\n    // Only data routers handle errors/fallbacks\n    let error: any;\n    let shouldRenderHydrateFallback = false;\n    let errorElement: React.ReactNode | null = null;\n    let hydrateFallbackElement: React.ReactNode | null = null;\n    if (dataRouterState) {\n      error = errors && match.route.id ? errors[match.route.id] : undefined;\n      errorElement = match.route.errorElement || defaultErrorElement;\n\n      if (renderFallback) {\n        if (fallbackIndex < 0 && index === 0) {\n          warningOnce(\n            \"route-fallback\",\n            false,\n            \"No `HydrateFallback` element provided to render during initial hydration\"\n          );\n          shouldRenderHydrateFallback = true;\n          hydrateFallbackElement = null;\n        } else if (fallbackIndex === index) {\n          shouldRenderHydrateFallback = true;\n          hydrateFallbackElement = match.route.hydrateFallbackElement || null;\n        }\n      }\n    }\n\n    let matches = parentMatches.concat(renderedMatches.slice(0, index + 1));\n    let getChildren = () => {\n      let children: React.ReactNode;\n      if (error) {\n        children = errorElement;\n      } else if (shouldRenderHydrateFallback) {\n        children = hydrateFallbackElement;\n      } else if (match.route.Component) {\n        // Note: This is a de-optimized path since React won't re-use the\n        // ReactElement since it's identity changes with each new\n        // React.createElement call.  We keep this so folks can use\n        // `<Route Component={...}>` in `<Routes>` but generally `Component`\n        // usage is only advised in `RouterProvider` when we can convert it to\n        // `element` ahead of time.\n        children = <match.route.Component />;\n      } else if (match.route.element) {\n        children = match.route.element;\n      } else {\n        children = outlet;\n      }\n      return (\n        <RenderedRoute\n          match={match}\n          routeContext={{\n            outlet,\n            matches,\n            isDataRoute: dataRouterState != null,\n          }}\n          children={children}\n        />\n      );\n    };\n    // Only wrap in an error boundary within data router usages when we have an\n    // ErrorBoundary/errorElement on this route.  Otherwise let it bubble up to\n    // an ancestor ErrorBoundary/errorElement\n    return dataRouterState &&\n      (match.route.ErrorBoundary || match.route.errorElement || index === 0) ? (\n      <RenderErrorBoundary\n        location={dataRouterState.location}\n        revalidation={dataRouterState.revalidation}\n        component={errorElement}\n        error={error}\n        children={getChildren()}\n        routeContext={{ outlet: null, matches, isDataRoute: true }}\n      />\n    ) : (\n      getChildren()\n    );\n  }, null as React.ReactElement | null);\n}\n\nenum DataRouterHook {\n  UseBlocker = \"useBlocker\",\n  UseRevalidator = \"useRevalidator\",\n  UseNavigateStable = \"useNavigate\",\n}\n\nenum DataRouterStateHook {\n  UseBlocker = \"useBlocker\",\n  UseLoaderData = \"useLoaderData\",\n  UseActionData = \"useActionData\",\n  UseRouteError = \"useRouteError\",\n  UseNavigation = \"useNavigation\",\n  UseRouteLoaderData = \"useRouteLoaderData\",\n  UseMatches = \"useMatches\",\n  UseRevalidator = \"useRevalidator\",\n  UseNavigateStable = \"useNavigate\",\n  UseRouteId = \"useRouteId\",\n}\n\nfunction getDataRouterConsoleError(\n  hookName: DataRouterHook | DataRouterStateHook\n) {\n  return `${hookName} must be used within a data router.  See https://reactrouter.com/routers/picking-a-router.`;\n}\n\nfunction useDataRouterContext(hookName: DataRouterHook) {\n  let ctx = React.useContext(DataRouterContext);\n  invariant(ctx, getDataRouterConsoleError(hookName));\n  return ctx;\n}\n\nfunction useDataRouterState(hookName: DataRouterStateHook) {\n  let state = React.useContext(DataRouterStateContext);\n  invariant(state, getDataRouterConsoleError(hookName));\n  return state;\n}\n\nfunction useRouteContext(hookName: DataRouterStateHook) {\n  let route = React.useContext(RouteContext);\n  invariant(route, getDataRouterConsoleError(hookName));\n  return route;\n}\n\n// Internal version with hookName-aware debugging\nfunction useCurrentRouteId(hookName: DataRouterStateHook) {\n  let route = useRouteContext(hookName);\n  let thisRoute = route.matches[route.matches.length - 1];\n  invariant(\n    thisRoute.route.id,\n    `${hookName} can only be used on routes that contain a unique \"id\"`\n  );\n  return thisRoute.route.id;\n}\n\n/**\n * Returns the ID for the nearest contextual route\n */\nexport function useRouteId() {\n  return useCurrentRouteId(DataRouterStateHook.UseRouteId);\n}\n\n/**\n * Returns the current navigation, defaulting to an \"idle\" navigation when\n * no navigation is in progress\n */\nexport function useNavigation() {\n  let state = useDataRouterState(DataRouterStateHook.UseNavigation);\n  return state.navigation;\n}\n\n/**\n * Returns a revalidate function for manually triggering revalidation, as well\n * as the current state of any manual revalidations\n */\nexport function useRevalidator() {\n  let dataRouterContext = useDataRouterContext(DataRouterHook.UseRevalidator);\n  let state = useDataRouterState(DataRouterStateHook.UseRevalidator);\n  return React.useMemo(\n    () => ({\n      revalidate: dataRouterContext.router.revalidate,\n      state: state.revalidation,\n    }),\n    [dataRouterContext.router.revalidate, state.revalidation]\n  );\n}\n\n/**\n * Returns the active route matches, useful for accessing loaderData for\n * parent/child routes or the route \"handle\" property\n */\nexport function useMatches(): UIMatch[] {\n  let { matches, loaderData } = useDataRouterState(\n    DataRouterStateHook.UseMatches\n  );\n  return React.useMemo(\n    () => matches.map((m) => convertRouteMatchToUiMatch(m, loaderData)),\n    [matches, loaderData]\n  );\n}\n\n/**\n * Returns the loader data for the nearest ancestor Route loader\n */\nexport function useLoaderData(): unknown {\n  let state = useDataRouterState(DataRouterStateHook.UseLoaderData);\n  let routeId = useCurrentRouteId(DataRouterStateHook.UseLoaderData);\n\n  if (state.errors && state.errors[routeId] != null) {\n    console.error(\n      `You cannot \\`useLoaderData\\` in an errorElement (routeId: ${routeId})`\n    );\n    return undefined;\n  }\n  return state.loaderData[routeId];\n}\n\n/**\n * Returns the loaderData for the given routeId\n */\nexport function useRouteLoaderData(routeId: string): unknown {\n  let state = useDataRouterState(DataRouterStateHook.UseRouteLoaderData);\n  return state.loaderData[routeId];\n}\n\n/**\n * Returns the action data for the nearest ancestor Route action\n */\nexport function useActionData(): unknown {\n  let state = useDataRouterState(DataRouterStateHook.UseActionData);\n  let routeId = useCurrentRouteId(DataRouterStateHook.UseLoaderData);\n  return state.actionData ? state.actionData[routeId] : undefined;\n}\n\n/**\n * Returns the nearest ancestor Route error, which could be a loader/action\n * error or a render error.  This is intended to be called from your\n * ErrorBoundary/errorElement to display a proper error message.\n */\nexport function useRouteError(): unknown {\n  let error = React.useContext(RouteErrorContext);\n  let state = useDataRouterState(DataRouterStateHook.UseRouteError);\n  let routeId = useCurrentRouteId(DataRouterStateHook.UseRouteError);\n\n  // If this was a render error, we put it in a RouteError context inside\n  // of RenderErrorBoundary\n  if (error !== undefined) {\n    return error;\n  }\n\n  // Otherwise look for errors from our data router state\n  return state.errors?.[routeId];\n}\n\n/**\n * Returns the happy-path data from the nearest ancestor `<Await />` value\n */\nexport function useAsyncValue(): unknown {\n  let value = React.useContext(AwaitContext);\n  return value?._data;\n}\n\n/**\n * Returns the error from the nearest ancestor `<Await />` value\n */\nexport function useAsyncError(): unknown {\n  let value = React.useContext(AwaitContext);\n  return value?._error;\n}\n\nlet blockerId = 0;\n\n/**\n * Allow the application to block navigations within the SPA and present the\n * user a confirmation dialog to confirm the navigation.  Mostly used to avoid\n * using half-filled form data.  This does not handle hard-reloads or\n * cross-origin navigations.\n */\nexport function useBlocker(shouldBlock: boolean | BlockerFunction): Blocker {\n  let { router, basename } = useDataRouterContext(DataRouterHook.UseBlocker);\n  let state = useDataRouterState(DataRouterStateHook.UseBlocker);\n\n  let [blockerKey, setBlockerKey] = React.useState(\"\");\n  let blockerFunction = React.useCallback<BlockerFunction>(\n    (arg) => {\n      if (typeof shouldBlock !== \"function\") {\n        return !!shouldBlock;\n      }\n      if (basename === \"/\") {\n        return shouldBlock(arg);\n      }\n\n      // If they provided us a function and we've got an active basename, strip\n      // it from the locations we expose to the user to match the behavior of\n      // useLocation\n      let { currentLocation, nextLocation, historyAction } = arg;\n      return shouldBlock({\n        currentLocation: {\n          ...currentLocation,\n          pathname:\n            stripBasename(currentLocation.pathname, basename) ||\n            currentLocation.pathname,\n        },\n        nextLocation: {\n          ...nextLocation,\n          pathname:\n            stripBasename(nextLocation.pathname, basename) ||\n            nextLocation.pathname,\n        },\n        historyAction,\n      });\n    },\n    [basename, shouldBlock]\n  );\n\n  // This effect is in charge of blocker key assignment and deletion (which is\n  // tightly coupled to the key)\n  React.useEffect(() => {\n    let key = String(++blockerId);\n    setBlockerKey(key);\n    return () => router.deleteBlocker(key);\n  }, [router]);\n\n  // This effect handles assigning the blockerFunction.  This is to handle\n  // unstable blocker function identities, and happens only after the prior\n  // effect so we don't get an orphaned blockerFunction in the router with a\n  // key of \"\".  Until then we just have the IDLE_BLOCKER.\n  React.useEffect(() => {\n    if (blockerKey !== \"\") {\n      router.getBlocker(blockerKey, blockerFunction);\n    }\n  }, [router, blockerKey, blockerFunction]);\n\n  // Prefer the blocker from `state` not `router.state` since DataRouterContext\n  // is memoized so this ensures we update on blocker state updates\n  return blockerKey && state.blockers.has(blockerKey)\n    ? state.blockers.get(blockerKey)!\n    : IDLE_BLOCKER;\n}\n\n/**\n * Stable version of useNavigate that is used when we are in the context of\n * a RouterProvider.\n */\nfunction useNavigateStable(): NavigateFunction {\n  let { router } = useDataRouterContext(DataRouterHook.UseNavigateStable);\n  let id = useCurrentRouteId(DataRouterStateHook.UseNavigateStable);\n\n  let activeRef = React.useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    activeRef.current = true;\n  });\n\n  let navigate: NavigateFunction = React.useCallback(\n    (to: To | number, options: NavigateOptions = {}) => {\n      warning(activeRef.current, navigateEffectWarning);\n\n      // Short circuit here since if this happens on first render the navigate\n      // is useless because we haven't wired up our router subscriber yet\n      if (!activeRef.current) return;\n\n      if (typeof to === \"number\") {\n        router.navigate(to);\n      } else {\n        router.navigate(to, { fromRouteId: id, ...options });\n      }\n    },\n    [router, id]\n  );\n\n  return navigate;\n}\n\nconst alreadyWarned: Record<string, boolean> = {};\n\nfunction warningOnce(key: string, cond: boolean, message: string) {\n  if (!cond && !alreadyWarned[key]) {\n    alreadyWarned[key] = true;\n    warning(false, message);\n  }\n}\n","import type {\n  InitialEntry,\n  LazyRouteFunction,\n  Location,\n  MemoryHistory,\n  RelativeRoutingType,\n  Router as RemixRouter,\n  RouterState,\n  RouterSubscriber,\n  To,\n  TrackedPromise,\n} from \"@remix-run/router\";\nimport {\n  AbortedDeferredError,\n  Action as NavigationType,\n  createMemoryHistory,\n  UNSAFE_getResolveToMatches as getResolveToMatches,\n  UNSAFE_invariant as invariant,\n  parsePath,\n  resolveTo,\n  stripBasename,\n  UNSAFE_warning as warning,\n} from \"@remix-run/router\";\nimport * as React from \"react\";\n\nimport type {\n  DataRouteObject,\n  IndexRouteObject,\n  Navigator,\n  NonIndexRouteObject,\n  RouteMatch,\n  RouteObject,\n} from \"./context\";\nimport {\n  AwaitContext,\n  DataRouterContext,\n  DataRouterStateContext,\n  LocationContext,\n  NavigationContext,\n  RouteContext,\n} from \"./context\";\nimport {\n  _renderMatches,\n  useAsyncValue,\n  useInRouterContext,\n  useLocation,\n  useNavigate,\n  useOutlet,\n  useRoutes,\n  useRoutesImpl,\n} from \"./hooks\";\n\nexport interface FutureConfig {\n  v7_relativeSplatPath: boolean;\n  v7_startTransition: boolean;\n}\n\nexport interface RouterProviderProps {\n  fallbackElement?: React.ReactNode;\n  router: RemixRouter;\n  // Only accept future flags relevant to rendering behavior\n  // routing flags should be accessed via router.future\n  future?: Partial<Pick<FutureConfig, \"v7_startTransition\">>;\n}\n\n/**\n  Webpack + React 17 fails to compile on any of the following because webpack\n  complains that `startTransition` doesn't exist in `React`:\n  * import { startTransition } from \"react\"\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React.startTransition(() => setState()) : setState()\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React[\"startTransition\"](() => setState()) : setState()\n\n  Moving it to a constant such as the following solves the Webpack/React 17 issue:\n  * import * as React from from \"react\";\n    const START_TRANSITION = \"startTransition\";\n    START_TRANSITION in React ? React[START_TRANSITION](() => setState()) : setState()\n\n  However, that introduces webpack/terser minification issues in production builds\n  in React 18 where minification/obfuscation ends up removing the call of\n  React.startTransition entirely from the first half of the ternary.  Grabbing\n  this exported reference once up front resolves that issue.\n\n  See https://github.com/remix-run/react-router/issues/10579\n*/\nconst START_TRANSITION = \"startTransition\";\nconst startTransitionImpl = React[START_TRANSITION];\n\n/**\n * Given a Remix Router instance, render the appropriate UI\n */\nexport function RouterProvider({\n  fallbackElement,\n  router,\n  future,\n}: RouterProviderProps): React.ReactElement {\n  let [state, setStateImpl] = React.useState(router.state);\n  let { v7_startTransition } = future || {};\n\n  let setState = React.useCallback<RouterSubscriber>(\n    (newState: RouterState) => {\n      if (v7_startTransition && startTransitionImpl) {\n        startTransitionImpl(() => setStateImpl(newState));\n      } else {\n        setStateImpl(newState);\n      }\n    },\n    [setStateImpl, v7_startTransition]\n  );\n\n  // Need to use a layout effect here so we are subscribed early enough to\n  // pick up on any render-driven redirects/navigations (useEffect/<Navigate>)\n  React.useLayoutEffect(() => router.subscribe(setState), [router, setState]);\n\n  React.useEffect(() => {\n    warning(\n      fallbackElement == null || !router.future.v7_partialHydration,\n      \"`<RouterProvider fallbackElement>` is deprecated when using \" +\n        \"`v7_partialHydration`, use a `HydrateFallback` component instead\"\n    );\n    // Only log this once on initial mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  let navigator = React.useMemo((): Navigator => {\n    return {\n      createHref: router.createHref,\n      encodeLocation: router.encodeLocation,\n      go: (n) => router.navigate(n),\n      push: (to, state, opts) =>\n        router.navigate(to, {\n          state,\n          preventScrollReset: opts?.preventScrollReset,\n        }),\n      replace: (to, state, opts) =>\n        router.navigate(to, {\n          replace: true,\n          state,\n          preventScrollReset: opts?.preventScrollReset,\n        }),\n    };\n  }, [router]);\n\n  let basename = router.basename || \"/\";\n\n  let dataRouterContext = React.useMemo(\n    () => ({\n      router,\n      navigator,\n      static: false,\n      basename,\n    }),\n    [router, navigator, basename]\n  );\n\n  // The fragment and {null} here are important!  We need them to keep React 18's\n  // useId happy when we are server-rendering since we may have a <script> here\n  // containing the hydrated server-side staticContext (from StaticRouterProvider).\n  // useId relies on the component tree structure to generate deterministic id's\n  // so we need to ensure it remains the same on the client even though\n  // we don't need the <script> tag\n  return (\n    <>\n      <DataRouterContext.Provider value={dataRouterContext}>\n        <DataRouterStateContext.Provider value={state}>\n          <Router\n            basename={basename}\n            location={state.location}\n            navigationType={state.historyAction}\n            navigator={navigator}\n            future={{\n              v7_relativeSplatPath: router.future.v7_relativeSplatPath,\n            }}\n          >\n            {state.initialized || router.future.v7_partialHydration ? (\n              <DataRoutes\n                routes={router.routes}\n                future={router.future}\n                state={state}\n              />\n            ) : (\n              fallbackElement\n            )}\n          </Router>\n        </DataRouterStateContext.Provider>\n      </DataRouterContext.Provider>\n      {null}\n    </>\n  );\n}\n\nfunction DataRoutes({\n  routes,\n  future,\n  state,\n}: {\n  routes: DataRouteObject[];\n  future: RemixRouter[\"future\"];\n  state: RouterState;\n}): React.ReactElement | null {\n  return useRoutesImpl(routes, undefined, state, future);\n}\n\nexport interface MemoryRouterProps {\n  basename?: string;\n  children?: React.ReactNode;\n  initialEntries?: InitialEntry[];\n  initialIndex?: number;\n  future?: Partial<FutureConfig>;\n}\n\n/**\n * A `<Router>` that stores all entries in memory.\n *\n * @see https://reactrouter.com/router-components/memory-router\n */\nexport function MemoryRouter({\n  basename,\n  children,\n  initialEntries,\n  initialIndex,\n  future,\n}: MemoryRouterProps): React.ReactElement {\n  let historyRef = React.useRef<MemoryHistory>();\n  if (historyRef.current == null) {\n    historyRef.current = createMemoryHistory({\n      initialEntries,\n      initialIndex,\n      v5Compat: true,\n    });\n  }\n\n  let history = historyRef.current;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location,\n  });\n  let { v7_startTransition } = future || {};\n  let setState = React.useCallback(\n    (newState: { action: NavigationType; location: Location }) => {\n      v7_startTransition && startTransitionImpl\n        ? startTransitionImpl(() => setStateImpl(newState))\n        : setStateImpl(newState);\n    },\n    [setStateImpl, v7_startTransition]\n  );\n\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n\n  return (\n    <Router\n      basename={basename}\n      children={children}\n      location={state.location}\n      navigationType={state.action}\n      navigator={history}\n      future={future}\n    />\n  );\n}\n\nexport interface NavigateProps {\n  to: To;\n  replace?: boolean;\n  state?: any;\n  relative?: RelativeRoutingType;\n}\n\n/**\n * Changes the current location.\n *\n * Note: This API is mostly useful in React.Component subclasses that are not\n * able to use hooks. In functional components, we recommend you use the\n * `useNavigate` hook instead.\n *\n * @see https://reactrouter.com/components/navigate\n */\nexport function Navigate({\n  to,\n  replace,\n  state,\n  relative,\n}: NavigateProps): null {\n  invariant(\n    useInRouterContext(),\n    // TODO: This error is probably because they somehow have 2 versions of\n    // the router loaded. We can help them understand how to avoid that.\n    `<Navigate> may be used only in the context of a <Router> component.`\n  );\n\n  let { future, static: isStatic } = React.useContext(NavigationContext);\n\n  warning(\n    !isStatic,\n    `<Navigate> must not be used on the initial render in a <StaticRouter>. ` +\n      `This is a no-op, but you should modify your code so the <Navigate> is ` +\n      `only ever rendered in response to some user interaction or state change.`\n  );\n\n  let { matches } = React.useContext(RouteContext);\n  let { pathname: locationPathname } = useLocation();\n  let navigate = useNavigate();\n\n  // Resolve the path outside of the effect so that when effects run twice in\n  // StrictMode they navigate to the same place\n  let path = resolveTo(\n    to,\n    getResolveToMatches(matches, future.v7_relativeSplatPath),\n    locationPathname,\n    relative === \"path\"\n  );\n  let jsonPath = JSON.stringify(path);\n\n  React.useEffect(\n    () => navigate(JSON.parse(jsonPath), { replace, state, relative }),\n    [navigate, jsonPath, relative, replace, state]\n  );\n\n  return null;\n}\n\nexport interface OutletProps {\n  context?: unknown;\n}\n\n/**\n * Renders the child route's element, if there is one.\n *\n * @see https://reactrouter.com/components/outlet\n */\nexport function Outlet(props: OutletProps): React.ReactElement | null {\n  return useOutlet(props.context);\n}\n\nexport interface PathRouteProps {\n  caseSensitive?: NonIndexRouteObject[\"caseSensitive\"];\n  path?: NonIndexRouteObject[\"path\"];\n  id?: NonIndexRouteObject[\"id\"];\n  lazy?: LazyRouteFunction<NonIndexRouteObject>;\n  loader?: NonIndexRouteObject[\"loader\"];\n  action?: NonIndexRouteObject[\"action\"];\n  hasErrorBoundary?: NonIndexRouteObject[\"hasErrorBoundary\"];\n  shouldRevalidate?: NonIndexRouteObject[\"shouldRevalidate\"];\n  handle?: NonIndexRouteObject[\"handle\"];\n  index?: false;\n  children?: React.ReactNode;\n  element?: React.ReactNode | null;\n  hydrateFallbackElement?: React.ReactNode | null;\n  errorElement?: React.ReactNode | null;\n  Component?: React.ComponentType | null;\n  HydrateFallback?: React.ComponentType | null;\n  ErrorBoundary?: React.ComponentType | null;\n}\n\nexport interface LayoutRouteProps extends PathRouteProps {}\n\nexport interface IndexRouteProps {\n  caseSensitive?: IndexRouteObject[\"caseSensitive\"];\n  path?: IndexRouteObject[\"path\"];\n  id?: IndexRouteObject[\"id\"];\n  lazy?: LazyRouteFunction<IndexRouteObject>;\n  loader?: IndexRouteObject[\"loader\"];\n  action?: IndexRouteObject[\"action\"];\n  hasErrorBoundary?: IndexRouteObject[\"hasErrorBoundary\"];\n  shouldRevalidate?: IndexRouteObject[\"shouldRevalidate\"];\n  handle?: IndexRouteObject[\"handle\"];\n  index: true;\n  children?: undefined;\n  element?: React.ReactNode | null;\n  hydrateFallbackElement?: React.ReactNode | null;\n  errorElement?: React.ReactNode | null;\n  Component?: React.ComponentType | null;\n  HydrateFallback?: React.ComponentType | null;\n  ErrorBoundary?: React.ComponentType | null;\n}\n\nexport type RouteProps = PathRouteProps | LayoutRouteProps | IndexRouteProps;\n\n/**\n * Declares an element that should be rendered at a certain URL path.\n *\n * @see https://reactrouter.com/components/route\n */\nexport function Route(_props: RouteProps): React.ReactElement | null {\n  invariant(\n    false,\n    `A <Route> is only ever to be used as the child of <Routes> element, ` +\n      `never rendered directly. Please wrap your <Route> in a <Routes>.`\n  );\n}\n\nexport interface RouterProps {\n  basename?: string;\n  children?: React.ReactNode;\n  location: Partial<Location> | string;\n  navigationType?: NavigationType;\n  navigator: Navigator;\n  static?: boolean;\n  future?: Partial<Pick<FutureConfig, \"v7_relativeSplatPath\">>;\n}\n\n/**\n * Provides location context for the rest of the app.\n *\n * Note: You usually won't render a `<Router>` directly. Instead, you'll render a\n * router that is more specific to your environment such as a `<BrowserRouter>`\n * in web browsers or a `<StaticRouter>` for server rendering.\n *\n * @see https://reactrouter.com/router-components/router\n */\nexport function Router({\n  basename: basenameProp = \"/\",\n  children = null,\n  location: locationProp,\n  navigationType = NavigationType.Pop,\n  navigator,\n  static: staticProp = false,\n  future,\n}: RouterProps): React.ReactElement | null {\n  invariant(\n    !useInRouterContext(),\n    `You cannot render a <Router> inside another <Router>.` +\n      ` You should never have more than one in your app.`\n  );\n\n  // Preserve trailing slashes on basename, so we can let the user control\n  // the enforcement of trailing slashes throughout the app\n  let basename = basenameProp.replace(/^\\/*/, \"/\");\n  let navigationContext = React.useMemo(\n    () => ({\n      basename,\n      navigator,\n      static: staticProp,\n      future: {\n        v7_relativeSplatPath: false,\n        ...future,\n      },\n    }),\n    [basename, future, navigator, staticProp]\n  );\n\n  if (typeof locationProp === \"string\") {\n    locationProp = parsePath(locationProp);\n  }\n\n  let {\n    pathname = \"/\",\n    search = \"\",\n    hash = \"\",\n    state = null,\n    key = \"default\",\n  } = locationProp;\n\n  let locationContext = React.useMemo(() => {\n    let trailingPathname = stripBasename(pathname, basename);\n\n    if (trailingPathname == null) {\n      return null;\n    }\n\n    return {\n      location: {\n        pathname: trailingPathname,\n        search,\n        hash,\n        state,\n        key,\n      },\n      navigationType,\n    };\n  }, [basename, pathname, search, hash, state, key, navigationType]);\n\n  warning(\n    locationContext != null,\n    `<Router basename=\"${basename}\"> is not able to match the URL ` +\n      `\"${pathname}${search}${hash}\" because it does not start with the ` +\n      `basename, so the <Router> won't render anything.`\n  );\n\n  if (locationContext == null) {\n    return null;\n  }\n\n  return (\n    <NavigationContext.Provider value={navigationContext}>\n      <LocationContext.Provider children={children} value={locationContext} />\n    </NavigationContext.Provider>\n  );\n}\n\nexport interface RoutesProps {\n  children?: React.ReactNode;\n  location?: Partial<Location> | string;\n}\n\n/**\n * A container for a nested tree of `<Route>` elements that renders the branch\n * that best matches the current location.\n *\n * @see https://reactrouter.com/components/routes\n */\nexport function Routes({\n  children,\n  location,\n}: RoutesProps): React.ReactElement | null {\n  return useRoutes(createRoutesFromChildren(children), location);\n}\n\nexport interface AwaitResolveRenderFunction {\n  (data: Awaited<any>): React.ReactNode;\n}\n\nexport interface AwaitProps {\n  children: React.ReactNode | AwaitResolveRenderFunction;\n  errorElement?: React.ReactNode;\n  resolve: TrackedPromise | any;\n}\n\n/**\n * Component to use for rendering lazily loaded data from returning defer()\n * in a loader function\n */\nexport function Await({ children, errorElement, resolve }: AwaitProps) {\n  return (\n    <AwaitErrorBoundary resolve={resolve} errorElement={errorElement}>\n      <ResolveAwait>{children}</ResolveAwait>\n    </AwaitErrorBoundary>\n  );\n}\n\ntype AwaitErrorBoundaryProps = React.PropsWithChildren<{\n  errorElement?: React.ReactNode;\n  resolve: TrackedPromise | any;\n}>;\n\ntype AwaitErrorBoundaryState = {\n  error: any;\n};\n\nenum AwaitRenderStatus {\n  pending,\n  success,\n  error,\n}\n\nconst neverSettledPromise = new Promise(() => {});\n\nclass AwaitErrorBoundary extends React.Component<\n  AwaitErrorBoundaryProps,\n  AwaitErrorBoundaryState\n> {\n  constructor(props: AwaitErrorBoundaryProps) {\n    super(props);\n    this.state = { error: null };\n  }\n\n  static getDerivedStateFromError(error: any) {\n    return { error };\n  }\n\n  componentDidCatch(error: any, errorInfo: any) {\n    console.error(\n      \"<Await> caught the following error during render\",\n      error,\n      errorInfo\n    );\n  }\n\n  render() {\n    let { children, errorElement, resolve } = this.props;\n\n    let promise: TrackedPromise | null = null;\n    let status: AwaitRenderStatus = AwaitRenderStatus.pending;\n\n    if (!(resolve instanceof Promise)) {\n      // Didn't get a promise - provide as a resolved promise\n      status = AwaitRenderStatus.success;\n      promise = Promise.resolve();\n      Object.defineProperty(promise, \"_tracked\", { get: () => true });\n      Object.defineProperty(promise, \"_data\", { get: () => resolve });\n    } else if (this.state.error) {\n      // Caught a render error, provide it as a rejected promise\n      status = AwaitRenderStatus.error;\n      let renderError = this.state.error;\n      promise = Promise.reject().catch(() => {}); // Avoid unhandled rejection warnings\n      Object.defineProperty(promise, \"_tracked\", { get: () => true });\n      Object.defineProperty(promise, \"_error\", { get: () => renderError });\n    } else if ((resolve as TrackedPromise)._tracked) {\n      // Already tracked promise - check contents\n      promise = resolve;\n      status =\n        \"_error\" in promise\n          ? AwaitRenderStatus.error\n          : \"_data\" in promise\n          ? AwaitRenderStatus.success\n          : AwaitRenderStatus.pending;\n    } else {\n      // Raw (untracked) promise - track it\n      status = AwaitRenderStatus.pending;\n      Object.defineProperty(resolve, \"_tracked\", { get: () => true });\n      promise = resolve.then(\n        (data: any) =>\n          Object.defineProperty(resolve, \"_data\", { get: () => data }),\n        (error: any) =>\n          Object.defineProperty(resolve, \"_error\", { get: () => error })\n      );\n    }\n\n    if (\n      status === AwaitRenderStatus.error &&\n      promise._error instanceof AbortedDeferredError\n    ) {\n      // Freeze the UI by throwing a never resolved promise\n      throw neverSettledPromise;\n    }\n\n    if (status === AwaitRenderStatus.error && !errorElement) {\n      // No errorElement, throw to the nearest route-level error boundary\n      throw promise._error;\n    }\n\n    if (status === AwaitRenderStatus.error) {\n      // Render via our errorElement\n      return <AwaitContext.Provider value={promise} children={errorElement} />;\n    }\n\n    if (status === AwaitRenderStatus.success) {\n      // Render children with resolved value\n      return <AwaitContext.Provider value={promise} children={children} />;\n    }\n\n    // Throw to the suspense boundary\n    throw promise;\n  }\n}\n\n/**\n * @private\n * Indirection to leverage useAsyncValue for a render-prop API on `<Await>`\n */\nfunction ResolveAwait({\n  children,\n}: {\n  children: React.ReactNode | AwaitResolveRenderFunction;\n}) {\n  let data = useAsyncValue();\n  let toRender = typeof children === \"function\" ? children(data) : children;\n  return <>{toRender}</>;\n}\n\n///////////////////////////////////////////////////////////////////////////////\n// UTILS\n///////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates a route config from a React \"children\" object, which is usually\n * either a `<Route>` element or an array of them. Used internally by\n * `<Routes>` to create a route config from its children.\n *\n * @see https://reactrouter.com/utils/create-routes-from-children\n */\nexport function createRoutesFromChildren(\n  children: React.ReactNode,\n  parentPath: number[] = []\n): RouteObject[] {\n  let routes: RouteObject[] = [];\n\n  React.Children.forEach(children, (element, index) => {\n    if (!React.isValidElement(element)) {\n      // Ignore non-elements. This allows people to more easily inline\n      // conditionals in their route config.\n      return;\n    }\n\n    let treePath = [...parentPath, index];\n\n    if (element.type === React.Fragment) {\n      // Transparently support React.Fragment and its children.\n      routes.push.apply(\n        routes,\n        createRoutesFromChildren(element.props.children, treePath)\n      );\n      return;\n    }\n\n    invariant(\n      element.type === Route,\n      `[${\n        typeof element.type === \"string\" ? element.type : element.type.name\n      }] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`\n    );\n\n    invariant(\n      !element.props.index || !element.props.children,\n      \"An index route cannot have child routes.\"\n    );\n\n    let route: RouteObject = {\n      id: element.props.id || treePath.join(\"-\"),\n      caseSensitive: element.props.caseSensitive,\n      element: element.props.element,\n      Component: element.props.Component,\n      index: element.props.index,\n      path: element.props.path,\n      loader: element.props.loader,\n      action: element.props.action,\n      errorElement: element.props.errorElement,\n      ErrorBoundary: element.props.ErrorBoundary,\n      hasErrorBoundary:\n        element.props.ErrorBoundary != null ||\n        element.props.errorElement != null,\n      shouldRevalidate: element.props.shouldRevalidate,\n      handle: element.props.handle,\n      lazy: element.props.lazy,\n    };\n\n    if (element.props.children) {\n      route.children = createRoutesFromChildren(\n        element.props.children,\n        treePath\n      );\n    }\n\n    routes.push(route);\n  });\n\n  return routes;\n}\n\n/**\n * Renders the result of `matchRoutes()` into a React element.\n */\nexport function renderMatches(\n  matches: RouteMatch[] | null\n): React.ReactElement | null {\n  return _renderMatches(matches);\n}\n","import type {\n  FormEncType,\n  HTMLFormMethod,\n  RelativeRoutingType,\n} from \"@remix-run/router\";\nimport { stripBasename, UNSAFE_warning as warning } from \"@remix-run/router\";\n\nexport const defaultMethod: HTMLFormMethod = \"get\";\nconst defaultEncType: FormEncType = \"application/x-www-form-urlencoded\";\n\nexport function isHtmlElement(object: any): object is HTMLElement {\n  return object != null && typeof object.tagName === \"string\";\n}\n\nexport function isButtonElement(object: any): object is HTMLButtonElement {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"button\";\n}\n\nexport function isFormElement(object: any): object is HTMLFormElement {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"form\";\n}\n\nexport function isInputElement(object: any): object is HTMLInputElement {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"input\";\n}\n\ntype LimitedMouseEvent = Pick<\n  MouseEvent,\n  \"button\" | \"metaKey\" | \"altKey\" | \"ctrlKey\" | \"shiftKey\"\n>;\n\nfunction isModifiedEvent(event: LimitedMouseEvent) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\nexport function shouldProcessLinkClick(\n  event: LimitedMouseEvent,\n  target?: string\n) {\n  return (\n    event.button === 0 && // Ignore everything but left clicks\n    (!target || target === \"_self\") && // Let browser handle \"target=_blank\" etc.\n    !isModifiedEvent(event) // Ignore clicks with modifier keys\n  );\n}\n\nexport type ParamKeyValuePair = [string, string];\n\nexport type URLSearchParamsInit =\n  | string\n  | ParamKeyValuePair[]\n  | Record<string, string | string[]>\n  | URLSearchParams;\n\n/**\n * Creates a URLSearchParams object using the given initializer.\n *\n * This is identical to `new URLSearchParams(init)` except it also\n * supports arrays as values in the object form of the initializer\n * instead of just strings. This is convenient when you need multiple\n * values for a given key, but don't want to use an array initializer.\n *\n * For example, instead of:\n *\n *   let searchParams = new URLSearchParams([\n *     ['sort', 'name'],\n *     ['sort', 'price']\n *   ]);\n *\n * you can do:\n *\n *   let searchParams = createSearchParams({\n *     sort: ['name', 'price']\n *   });\n */\nexport function createSearchParams(\n  init: URLSearchParamsInit = \"\"\n): URLSearchParams {\n  return new URLSearchParams(\n    typeof init === \"string\" ||\n    Array.isArray(init) ||\n    init instanceof URLSearchParams\n      ? init\n      : Object.keys(init).reduce((memo, key) => {\n          let value = init[key];\n          return memo.concat(\n            Array.isArray(value) ? value.map((v) => [key, v]) : [[key, value]]\n          );\n        }, [] as ParamKeyValuePair[])\n  );\n}\n\nexport function getSearchParamsForLocation(\n  locationSearch: string,\n  defaultSearchParams: URLSearchParams | null\n) {\n  let searchParams = createSearchParams(locationSearch);\n\n  if (defaultSearchParams) {\n    // Use `defaultSearchParams.forEach(...)` here instead of iterating of\n    // `defaultSearchParams.keys()` to work-around a bug in Firefox related to\n    // web extensions. Relevant Bugzilla tickets:\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1414602\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1023984\n    defaultSearchParams.forEach((_, key) => {\n      if (!searchParams.has(key)) {\n        defaultSearchParams.getAll(key).forEach((value) => {\n          searchParams.append(key, value);\n        });\n      }\n    });\n  }\n\n  return searchParams;\n}\n\n// Thanks https://github.com/sindresorhus/type-fest!\ntype JsonObject = { [Key in string]: JsonValue } & {\n  [Key in string]?: JsonValue | undefined;\n};\ntype JsonArray = JsonValue[] | readonly JsonValue[];\ntype JsonPrimitive = string | number | boolean | null;\ntype JsonValue = JsonPrimitive | JsonObject | JsonArray;\n\nexport type SubmitTarget =\n  | HTMLFormElement\n  | HTMLButtonElement\n  | HTMLInputElement\n  | FormData\n  | URLSearchParams\n  | JsonValue\n  | null;\n\n// One-time check for submitter support\nlet _formDataSupportsSubmitter: boolean | null = null;\n\nfunction isFormDataSubmitterSupported() {\n  if (_formDataSupportsSubmitter === null) {\n    try {\n      new FormData(\n        document.createElement(\"form\"),\n        // @ts-expect-error if FormData supports the submitter parameter, this will throw\n        0\n      );\n      _formDataSupportsSubmitter = false;\n    } catch (e) {\n      _formDataSupportsSubmitter = true;\n    }\n  }\n  return _formDataSupportsSubmitter;\n}\n\n/**\n * Submit options shared by both navigations and fetchers\n */\ninterface SharedSubmitOptions {\n  /**\n   * The HTTP method used to submit the form. Overrides `<form method>`.\n   * Defaults to \"GET\".\n   */\n  method?: HTMLFormMethod;\n\n  /**\n   * The action URL path used to submit the form. Overrides `<form action>`.\n   * Defaults to the path of the current route.\n   */\n  action?: string;\n\n  /**\n   * The encoding used to submit the form. Overrides `<form encType>`.\n   * Defaults to \"application/x-www-form-urlencoded\".\n   */\n  encType?: FormEncType;\n\n  /**\n   * Determines whether the form action is relative to the route hierarchy or\n   * the pathname.  Use this if you want to opt out of navigating the route\n   * hierarchy and want to instead route based on /-delimited URL segments\n   */\n  relative?: RelativeRoutingType;\n\n  /**\n   * In browser-based environments, prevent resetting scroll after this\n   * navigation when using the <ScrollRestoration> component\n   */\n  preventScrollReset?: boolean;\n\n  /**\n   * Enable flushSync for this submission's state updates\n   */\n  unstable_flushSync?: boolean;\n}\n\n/**\n * Submit options available to fetchers\n */\nexport interface FetcherSubmitOptions extends SharedSubmitOptions {}\n\n/**\n * Submit options available to navigations\n */\nexport interface SubmitOptions extends FetcherSubmitOptions {\n  /**\n   * Set `true` to replace the current entry in the browser's history stack\n   * instead of creating a new one (i.e. stay on \"the same page\"). Defaults\n   * to `false`.\n   */\n  replace?: boolean;\n\n  /**\n   * State object to add to the history stack entry for this navigation\n   */\n  state?: any;\n\n  /**\n   * Indicate a specific fetcherKey to use when using navigate=false\n   */\n  fetcherKey?: string;\n\n  /**\n   * navigate=false will use a fetcher instead of a navigation\n   */\n  navigate?: boolean;\n\n  /**\n   * Enable view transitions on this submission navigation\n   */\n  unstable_viewTransition?: boolean;\n}\n\nconst supportedFormEncTypes: Set<FormEncType> = new Set([\n  \"application/x-www-form-urlencoded\",\n  \"multipart/form-data\",\n  \"text/plain\",\n]);\n\nfunction getFormEncType(encType: string | null) {\n  if (encType != null && !supportedFormEncTypes.has(encType as FormEncType)) {\n    warning(\n      false,\n      `\"${encType}\" is not a valid \\`encType\\` for \\`<Form>\\`/\\`<fetcher.Form>\\` ` +\n        `and will default to \"${defaultEncType}\"`\n    );\n\n    return null;\n  }\n  return encType;\n}\n\nexport function getFormSubmissionInfo(\n  target: SubmitTarget,\n  basename: string\n): {\n  action: string | null;\n  method: string;\n  encType: string;\n  formData: FormData | undefined;\n  body: any;\n} {\n  let method: string;\n  let action: string | null;\n  let encType: string;\n  let formData: FormData | undefined;\n  let body: any;\n\n  if (isFormElement(target)) {\n    // When grabbing the action from the element, it will have had the basename\n    // prefixed to ensure non-JS scenarios work, so strip it since we'll\n    // re-prefix in the router\n    let attr = target.getAttribute(\"action\");\n    action = attr ? stripBasename(attr, basename) : null;\n    method = target.getAttribute(\"method\") || defaultMethod;\n    encType = getFormEncType(target.getAttribute(\"enctype\")) || defaultEncType;\n\n    formData = new FormData(target);\n  } else if (\n    isButtonElement(target) ||\n    (isInputElement(target) &&\n      (target.type === \"submit\" || target.type === \"image\"))\n  ) {\n    let form = target.form;\n\n    if (form == null) {\n      throw new Error(\n        `Cannot submit a <button> or <input type=\"submit\"> without a <form>`\n      );\n    }\n\n    // <button>/<input type=\"submit\"> may override attributes of <form>\n\n    // When grabbing the action from the element, it will have had the basename\n    // prefixed to ensure non-JS scenarios work, so strip it since we'll\n    // re-prefix in the router\n    let attr = target.getAttribute(\"formaction\") || form.getAttribute(\"action\");\n    action = attr ? stripBasename(attr, basename) : null;\n\n    method =\n      target.getAttribute(\"formmethod\") ||\n      form.getAttribute(\"method\") ||\n      defaultMethod;\n    encType =\n      getFormEncType(target.getAttribute(\"formenctype\")) ||\n      getFormEncType(form.getAttribute(\"enctype\")) ||\n      defaultEncType;\n\n    // Build a FormData object populated from a form and submitter\n    formData = new FormData(form, target);\n\n    // If this browser doesn't support the `FormData(el, submitter)` format,\n    // then tack on the submitter value at the end.  This is a lightweight\n    // solution that is not 100% spec compliant.  For complete support in older\n    // browsers, consider using the `formdata-submitter-polyfill` package\n    if (!isFormDataSubmitterSupported()) {\n      let { name, type, value } = target;\n      if (type === \"image\") {\n        let prefix = name ? `${name}.` : \"\";\n        formData.append(`${prefix}x`, \"0\");\n        formData.append(`${prefix}y`, \"0\");\n      } else if (name) {\n        formData.append(name, value);\n      }\n    }\n  } else if (isHtmlElement(target)) {\n    throw new Error(\n      `Cannot submit element that is not <form>, <button>, or ` +\n        `<input type=\"submit|image\">`\n    );\n  } else {\n    method = defaultMethod;\n    action = null;\n    encType = defaultEncType;\n    body = target;\n  }\n\n  // Send body for <Form encType=\"text/plain\" so we encode it into text\n  if (formData && encType === \"text/plain\") {\n    body = formData;\n    formData = undefined;\n  }\n\n  return { action, method: method.toLowerCase(), encType, formData, body };\n}\n","/**\n * NOTE: If you refactor this to split up the modules into separate files,\n * you'll need to update the rollup config for react-router-dom-v5-compat.\n */\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport type {\n  DataRouteObject,\n  FutureConfig,\n  Location,\n  NavigateOptions,\n  NavigationType,\n  Navigator,\n  RelativeRoutingType,\n  RouteObject,\n  RouterProviderProps,\n  To,\n  unstable_PatchRoutesOnMissFunction,\n} from \"react-router\";\nimport {\n  Router,\n  createPath,\n  useHref,\n  useLocation,\n  useMatches,\n  useNavigate,\n  useNavigation,\n  useResolvedPath,\n  useBlocker,\n  UNSAFE_DataRouterContext as DataRouterContext,\n  UNSAFE_DataRouterStateContext as DataRouterStateContext,\n  UNSAFE_NavigationContext as NavigationContext,\n  UNSAFE_RouteContext as RouteContext,\n  UNSAFE_mapRouteProperties as mapRouteProperties,\n  UNSAFE_useRouteId as useRouteId,\n  UNSAFE_useRoutesImpl as useRoutesImpl,\n} from \"react-router\";\nimport type {\n  BrowserHistory,\n  unstable_DataStrategyFunction,\n  unstable_DataStrategyFunctionArgs,\n  unstable_DataStrategyMatch,\n  Fetcher,\n  FormEncType,\n  FormMethod,\n  FutureConfig as RouterFutureConfig,\n  GetScrollRestorationKeyFunction,\n  HashHistory,\n  History,\n  HTMLFormMethod,\n  HydrationState,\n  Router as RemixRouter,\n  V7_FormMethod,\n  RouterState,\n  RouterSubscriber,\n  BlockerFunction,\n} from \"@remix-run/router\";\nimport {\n  createRouter,\n  createBrowserHistory,\n  createHashHistory,\n  joinPaths,\n  stripBasename,\n  UNSAFE_ErrorResponseImpl as ErrorResponseImpl,\n  UNSAFE_invariant as invariant,\n  UNSAFE_warning as warning,\n  matchPath,\n  IDLE_FETCHER,\n} from \"@remix-run/router\";\n\nimport type {\n  SubmitOptions,\n  ParamKeyValuePair,\n  URLSearchParamsInit,\n  SubmitTarget,\n  FetcherSubmitOptions,\n} from \"./dom\";\nimport {\n  createSearchParams,\n  defaultMethod,\n  getFormSubmissionInfo,\n  getSearchParamsForLocation,\n  shouldProcessLinkClick,\n} from \"./dom\";\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Re-exports\n////////////////////////////////////////////////////////////////////////////////\n\nexport type {\n  unstable_DataStrategyFunction,\n  unstable_DataStrategyFunctionArgs,\n  unstable_DataStrategyMatch,\n  FormEncType,\n  FormMethod,\n  GetScrollRestorationKeyFunction,\n  ParamKeyValuePair,\n  SubmitOptions,\n  URLSearchParamsInit,\n  V7_FormMethod,\n};\nexport { createSearchParams, ErrorResponseImpl as UNSAFE_ErrorResponseImpl };\n\n// Note: Keep in sync with react-router exports!\nexport type {\n  ActionFunction,\n  ActionFunctionArgs,\n  AwaitProps,\n  Blocker,\n  BlockerFunction,\n  DataRouteMatch,\n  DataRouteObject,\n  ErrorResponse,\n  Fetcher,\n  FutureConfig,\n  Hash,\n  IndexRouteObject,\n  IndexRouteProps,\n  JsonFunction,\n  LazyRouteFunction,\n  LayoutRouteProps,\n  LoaderFunction,\n  LoaderFunctionArgs,\n  Location,\n  MemoryRouterProps,\n  NavigateFunction,\n  NavigateOptions,\n  NavigateProps,\n  Navigation,\n  Navigator,\n  NonIndexRouteObject,\n  OutletProps,\n  Params,\n  ParamParseKey,\n  Path,\n  PathMatch,\n  Pathname,\n  PathParam,\n  PathPattern,\n  PathRouteProps,\n  RedirectFunction,\n  RelativeRoutingType,\n  RouteMatch,\n  RouteObject,\n  RouteProps,\n  RouterProps,\n  RouterProviderProps,\n  RoutesProps,\n  Search,\n  ShouldRevalidateFunction,\n  ShouldRevalidateFunctionArgs,\n  To,\n  UIMatch,\n  unstable_HandlerResult,\n  unstable_PatchRoutesOnMissFunction,\n} from \"react-router\";\nexport {\n  AbortedDeferredError,\n  Await,\n  MemoryRouter,\n  Navigate,\n  NavigationType,\n  Outlet,\n  Route,\n  Router,\n  Routes,\n  createMemoryRouter,\n  createPath,\n  createRoutesFromChildren,\n  createRoutesFromElements,\n  defer,\n  isRouteErrorResponse,\n  generatePath,\n  json,\n  matchPath,\n  matchRoutes,\n  parsePath,\n  redirect,\n  redirectDocument,\n  renderMatches,\n  resolvePath,\n  useActionData,\n  useAsyncError,\n  useAsyncValue,\n  useBlocker,\n  useHref,\n  useInRouterContext,\n  useLoaderData,\n  useLocation,\n  useMatch,\n  useMatches,\n  useNavigate,\n  useNavigation,\n  useNavigationType,\n  useOutlet,\n  useOutletContext,\n  useParams,\n  useResolvedPath,\n  useRevalidator,\n  useRouteError,\n  useRouteLoaderData,\n  useRoutes,\n} from \"react-router\";\n\n///////////////////////////////////////////////////////////////////////////////\n// DANGER! PLEASE READ ME!\n// We provide these exports as an escape hatch in the event that you need any\n// routing data that we don't provide an explicit API for. With that said, we\n// want to cover your use case if we can, so if you feel the need to use these\n// we want to hear from you. Let us know what you're building and we'll do our\n// best to make sure we can support you!\n//\n// We consider these exports an implementation detail and do not guarantee\n// against any breaking changes, regardless of the semver release. Use with\n// extreme caution and only if you understand the consequences. Godspeed.\n///////////////////////////////////////////////////////////////////////////////\n\n/** @internal */\nexport {\n  UNSAFE_DataRouterContext,\n  UNSAFE_DataRouterStateContext,\n  UNSAFE_NavigationContext,\n  UNSAFE_LocationContext,\n  UNSAFE_RouteContext,\n  UNSAFE_useRouteId,\n} from \"react-router\";\n//#endregion\n\ndeclare global {\n  var __staticRouterHydrationData: HydrationState | undefined;\n  var __reactRouterVersion: string;\n  interface Document {\n    startViewTransition(cb: () => Promise<void> | void): ViewTransition;\n  }\n}\n\n// HEY YOU! DON'T TOUCH THIS VARIABLE!\n//\n// It is replaced with the proper version at build time via a babel plugin in\n// the rollup config.\n//\n// Export a global property onto the window for React Router detection by the\n// Core Web Vitals Technology Report.  This way they can configure the `wappalyzer`\n// to detect and properly classify live websites as being built with React Router:\n// https://github.com/HTTPArchive/wappalyzer/blob/main/src/technologies/r.json\nconst REACT_ROUTER_VERSION = \"0\";\ntry {\n  window.__reactRouterVersion = REACT_ROUTER_VERSION;\n} catch (e) {\n  // no-op\n}\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Routers\n////////////////////////////////////////////////////////////////////////////////\n\ninterface DOMRouterOpts {\n  basename?: string;\n  future?: Partial<Omit<RouterFutureConfig, \"v7_prependBasename\">>;\n  hydrationData?: HydrationState;\n  unstable_dataStrategy?: unstable_DataStrategyFunction;\n  unstable_patchRoutesOnMiss?: unstable_PatchRoutesOnMissFunction;\n  window?: Window;\n}\n\nexport function createBrowserRouter(\n  routes: RouteObject[],\n  opts?: DOMRouterOpts\n): RemixRouter {\n  return createRouter({\n    basename: opts?.basename,\n    future: {\n      ...opts?.future,\n      v7_prependBasename: true,\n    },\n    history: createBrowserHistory({ window: opts?.window }),\n    hydrationData: opts?.hydrationData || parseHydrationData(),\n    routes,\n    mapRouteProperties,\n    unstable_dataStrategy: opts?.unstable_dataStrategy,\n    unstable_patchRoutesOnMiss: opts?.unstable_patchRoutesOnMiss,\n    window: opts?.window,\n  }).initialize();\n}\n\nexport function createHashRouter(\n  routes: RouteObject[],\n  opts?: DOMRouterOpts\n): RemixRouter {\n  return createRouter({\n    basename: opts?.basename,\n    future: {\n      ...opts?.future,\n      v7_prependBasename: true,\n    },\n    history: createHashHistory({ window: opts?.window }),\n    hydrationData: opts?.hydrationData || parseHydrationData(),\n    routes,\n    mapRouteProperties,\n    unstable_dataStrategy: opts?.unstable_dataStrategy,\n    unstable_patchRoutesOnMiss: opts?.unstable_patchRoutesOnMiss,\n    window: opts?.window,\n  }).initialize();\n}\n\nfunction parseHydrationData(): HydrationState | undefined {\n  let state = window?.__staticRouterHydrationData;\n  if (state && state.errors) {\n    state = {\n      ...state,\n      errors: deserializeErrors(state.errors),\n    };\n  }\n  return state;\n}\n\nfunction deserializeErrors(\n  errors: RemixRouter[\"state\"][\"errors\"]\n): RemixRouter[\"state\"][\"errors\"] {\n  if (!errors) return null;\n  let entries = Object.entries(errors);\n  let serialized: RemixRouter[\"state\"][\"errors\"] = {};\n  for (let [key, val] of entries) {\n    // Hey you!  If you change this, please change the corresponding logic in\n    // serializeErrors in react-router-dom/server.tsx :)\n    if (val && val.__type === \"RouteErrorResponse\") {\n      serialized[key] = new ErrorResponseImpl(\n        val.status,\n        val.statusText,\n        val.data,\n        val.internal === true\n      );\n    } else if (val && val.__type === \"Error\") {\n      // Attempt to reconstruct the right type of Error (i.e., ReferenceError)\n      if (val.__subType) {\n        let ErrorConstructor = window[val.__subType];\n        if (typeof ErrorConstructor === \"function\") {\n          try {\n            // @ts-expect-error\n            let error = new ErrorConstructor(val.message);\n            // Wipe away the client-side stack trace.  Nothing to fill it in with\n            // because we don't serialize SSR stack traces for security reasons\n            error.stack = \"\";\n            serialized[key] = error;\n          } catch (e) {\n            // no-op - fall through and create a normal Error\n          }\n        }\n      }\n\n      if (serialized[key] == null) {\n        let error = new Error(val.message);\n        // Wipe away the client-side stack trace.  Nothing to fill it in with\n        // because we don't serialize SSR stack traces for security reasons\n        error.stack = \"\";\n        serialized[key] = error;\n      }\n    } else {\n      serialized[key] = val;\n    }\n  }\n  return serialized;\n}\n\n//#endregion\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Contexts\n////////////////////////////////////////////////////////////////////////////////\n\ntype ViewTransitionContextObject =\n  | {\n      isTransitioning: false;\n    }\n  | {\n      isTransitioning: true;\n      flushSync: boolean;\n      currentLocation: Location;\n      nextLocation: Location;\n    };\n\nconst ViewTransitionContext = React.createContext<ViewTransitionContextObject>({\n  isTransitioning: false,\n});\nif (__DEV__) {\n  ViewTransitionContext.displayName = \"ViewTransition\";\n}\n\nexport { ViewTransitionContext as UNSAFE_ViewTransitionContext };\n\n// TODO: (v7) Change the useFetcher data from `any` to `unknown`\ntype FetchersContextObject = Map<string, any>;\n\nconst FetchersContext = React.createContext<FetchersContextObject>(new Map());\nif (__DEV__) {\n  FetchersContext.displayName = \"Fetchers\";\n}\n\nexport { FetchersContext as UNSAFE_FetchersContext };\n\n//#endregion\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Components\n////////////////////////////////////////////////////////////////////////////////\n\n/**\n  Webpack + React 17 fails to compile on any of the following because webpack\n  complains that `startTransition` doesn't exist in `React`:\n  * import { startTransition } from \"react\"\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React.startTransition(() => setState()) : setState()\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React[\"startTransition\"](() => setState()) : setState()\n\n  Moving it to a constant such as the following solves the Webpack/React 17 issue:\n  * import * as React from from \"react\";\n    const START_TRANSITION = \"startTransition\";\n    START_TRANSITION in React ? React[START_TRANSITION](() => setState()) : setState()\n\n  However, that introduces webpack/terser minification issues in production builds\n  in React 18 where minification/obfuscation ends up removing the call of\n  React.startTransition entirely from the first half of the ternary.  Grabbing\n  this exported reference once up front resolves that issue.\n\n  See https://github.com/remix-run/react-router/issues/10579\n*/\nconst START_TRANSITION = \"startTransition\";\nconst startTransitionImpl = React[START_TRANSITION];\nconst FLUSH_SYNC = \"flushSync\";\nconst flushSyncImpl = ReactDOM[FLUSH_SYNC];\nconst USE_ID = \"useId\";\nconst useIdImpl = React[USE_ID];\n\nfunction startTransitionSafe(cb: () => void) {\n  if (startTransitionImpl) {\n    startTransitionImpl(cb);\n  } else {\n    cb();\n  }\n}\n\nfunction flushSyncSafe(cb: () => void) {\n  if (flushSyncImpl) {\n    flushSyncImpl(cb);\n  } else {\n    cb();\n  }\n}\n\ninterface ViewTransition {\n  finished: Promise<void>;\n  ready: Promise<void>;\n  updateCallbackDone: Promise<void>;\n  skipTransition(): void;\n}\n\nclass Deferred<T> {\n  status: \"pending\" | \"resolved\" | \"rejected\" = \"pending\";\n  promise: Promise<T>;\n  // @ts-expect-error - no initializer\n  resolve: (value: T) => void;\n  // @ts-expect-error - no initializer\n  reject: (reason?: unknown) => void;\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = (value) => {\n        if (this.status === \"pending\") {\n          this.status = \"resolved\";\n          resolve(value);\n        }\n      };\n      this.reject = (reason) => {\n        if (this.status === \"pending\") {\n          this.status = \"rejected\";\n          reject(reason);\n        }\n      };\n    });\n  }\n}\n\n/**\n * Given a Remix Router instance, render the appropriate UI\n */\nexport function RouterProvider({\n  fallbackElement,\n  router,\n  future,\n}: RouterProviderProps): React.ReactElement {\n  let [state, setStateImpl] = React.useState(router.state);\n  let [pendingState, setPendingState] = React.useState<RouterState>();\n  let [vtContext, setVtContext] = React.useState<ViewTransitionContextObject>({\n    isTransitioning: false,\n  });\n  let [renderDfd, setRenderDfd] = React.useState<Deferred<void>>();\n  let [transition, setTransition] = React.useState<ViewTransition>();\n  let [interruption, setInterruption] = React.useState<{\n    state: RouterState;\n    currentLocation: Location;\n    nextLocation: Location;\n  }>();\n  let fetcherData = React.useRef<Map<string, any>>(new Map());\n  let { v7_startTransition } = future || {};\n\n  let optInStartTransition = React.useCallback(\n    (cb: () => void) => {\n      if (v7_startTransition) {\n        startTransitionSafe(cb);\n      } else {\n        cb();\n      }\n    },\n    [v7_startTransition]\n  );\n\n  let setState = React.useCallback<RouterSubscriber>(\n    (\n      newState: RouterState,\n      {\n        deletedFetchers,\n        unstable_flushSync: flushSync,\n        unstable_viewTransitionOpts: viewTransitionOpts,\n      }\n    ) => {\n      deletedFetchers.forEach((key) => fetcherData.current.delete(key));\n      newState.fetchers.forEach((fetcher, key) => {\n        if (fetcher.data !== undefined) {\n          fetcherData.current.set(key, fetcher.data);\n        }\n      });\n\n      let isViewTransitionUnavailable =\n        router.window == null ||\n        router.window.document == null ||\n        typeof router.window.document.startViewTransition !== \"function\";\n\n      // If this isn't a view transition or it's not available in this browser,\n      // just update and be done with it\n      if (!viewTransitionOpts || isViewTransitionUnavailable) {\n        if (flushSync) {\n          flushSyncSafe(() => setStateImpl(newState));\n        } else {\n          optInStartTransition(() => setStateImpl(newState));\n        }\n        return;\n      }\n\n      // flushSync + startViewTransition\n      if (flushSync) {\n        // Flush through the context to mark DOM elements as transition=ing\n        flushSyncSafe(() => {\n          // Cancel any pending transitions\n          if (transition) {\n            renderDfd && renderDfd.resolve();\n            transition.skipTransition();\n          }\n          setVtContext({\n            isTransitioning: true,\n            flushSync: true,\n            currentLocation: viewTransitionOpts.currentLocation,\n            nextLocation: viewTransitionOpts.nextLocation,\n          });\n        });\n\n        // Update the DOM\n        let t = router.window!.document.startViewTransition(() => {\n          flushSyncSafe(() => setStateImpl(newState));\n        });\n\n        // Clean up after the animation completes\n        t.finished.finally(() => {\n          flushSyncSafe(() => {\n            setRenderDfd(undefined);\n            setTransition(undefined);\n            setPendingState(undefined);\n            setVtContext({ isTransitioning: false });\n          });\n        });\n\n        flushSyncSafe(() => setTransition(t));\n        return;\n      }\n\n      // startTransition + startViewTransition\n      if (transition) {\n        // Interrupting an in-progress transition, cancel and let everything flush\n        // out, and then kick off a new transition from the interruption state\n        renderDfd && renderDfd.resolve();\n        transition.skipTransition();\n        setInterruption({\n          state: newState,\n          currentLocation: viewTransitionOpts.currentLocation,\n          nextLocation: viewTransitionOpts.nextLocation,\n        });\n      } else {\n        // Completed navigation update with opted-in view transitions, let 'er rip\n        setPendingState(newState);\n        setVtContext({\n          isTransitioning: true,\n          flushSync: false,\n          currentLocation: viewTransitionOpts.currentLocation,\n          nextLocation: viewTransitionOpts.nextLocation,\n        });\n      }\n    },\n    [router.window, transition, renderDfd, fetcherData, optInStartTransition]\n  );\n\n  // Need to use a layout effect here so we are subscribed early enough to\n  // pick up on any render-driven redirects/navigations (useEffect/<Navigate>)\n  React.useLayoutEffect(() => router.subscribe(setState), [router, setState]);\n\n  // When we start a view transition, create a Deferred we can use for the\n  // eventual \"completed\" render\n  React.useEffect(() => {\n    if (vtContext.isTransitioning && !vtContext.flushSync) {\n      setRenderDfd(new Deferred<void>());\n    }\n  }, [vtContext]);\n\n  // Once the deferred is created, kick off startViewTransition() to update the\n  // DOM and then wait on the Deferred to resolve (indicating the DOM update has\n  // happened)\n  React.useEffect(() => {\n    if (renderDfd && pendingState && router.window) {\n      let newState = pendingState;\n      let renderPromise = renderDfd.promise;\n      let transition = router.window.document.startViewTransition(async () => {\n        optInStartTransition(() => setStateImpl(newState));\n        await renderPromise;\n      });\n      transition.finished.finally(() => {\n        setRenderDfd(undefined);\n        setTransition(undefined);\n        setPendingState(undefined);\n        setVtContext({ isTransitioning: false });\n      });\n      setTransition(transition);\n    }\n  }, [optInStartTransition, pendingState, renderDfd, router.window]);\n\n  // When the new location finally renders and is committed to the DOM, this\n  // effect will run to resolve the transition\n  React.useEffect(() => {\n    if (\n      renderDfd &&\n      pendingState &&\n      state.location.key === pendingState.location.key\n    ) {\n      renderDfd.resolve();\n    }\n  }, [renderDfd, transition, state.location, pendingState]);\n\n  // If we get interrupted with a new navigation during a transition, we skip\n  // the active transition, let it cleanup, then kick it off again here\n  React.useEffect(() => {\n    if (!vtContext.isTransitioning && interruption) {\n      setPendingState(interruption.state);\n      setVtContext({\n        isTransitioning: true,\n        flushSync: false,\n        currentLocation: interruption.currentLocation,\n        nextLocation: interruption.nextLocation,\n      });\n      setInterruption(undefined);\n    }\n  }, [vtContext.isTransitioning, interruption]);\n\n  React.useEffect(() => {\n    warning(\n      fallbackElement == null || !router.future.v7_partialHydration,\n      \"`<RouterProvider fallbackElement>` is deprecated when using \" +\n        \"`v7_partialHydration`, use a `HydrateFallback` component instead\"\n    );\n    // Only log this once on initial mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  let navigator = React.useMemo((): Navigator => {\n    return {\n      createHref: router.createHref,\n      encodeLocation: router.encodeLocation,\n      go: (n) => router.navigate(n),\n      push: (to, state, opts) =>\n        router.navigate(to, {\n          state,\n          preventScrollReset: opts?.preventScrollReset,\n        }),\n      replace: (to, state, opts) =>\n        router.navigate(to, {\n          replace: true,\n          state,\n          preventScrollReset: opts?.preventScrollReset,\n        }),\n    };\n  }, [router]);\n\n  let basename = router.basename || \"/\";\n\n  let dataRouterContext = React.useMemo(\n    () => ({\n      router,\n      navigator,\n      static: false,\n      basename,\n    }),\n    [router, navigator, basename]\n  );\n\n  // The fragment and {null} here are important!  We need them to keep React 18's\n  // useId happy when we are server-rendering since we may have a <script> here\n  // containing the hydrated server-side staticContext (from StaticRouterProvider).\n  // useId relies on the component tree structure to generate deterministic id's\n  // so we need to ensure it remains the same on the client even though\n  // we don't need the <script> tag\n  return (\n    <>\n      <DataRouterContext.Provider value={dataRouterContext}>\n        <DataRouterStateContext.Provider value={state}>\n          <FetchersContext.Provider value={fetcherData.current}>\n            <ViewTransitionContext.Provider value={vtContext}>\n              <Router\n                basename={basename}\n                location={state.location}\n                navigationType={state.historyAction}\n                navigator={navigator}\n                future={{\n                  v7_relativeSplatPath: router.future.v7_relativeSplatPath,\n                }}\n              >\n                {state.initialized || router.future.v7_partialHydration ? (\n                  <DataRoutes\n                    routes={router.routes}\n                    future={router.future}\n                    state={state}\n                  />\n                ) : (\n                  fallbackElement\n                )}\n              </Router>\n            </ViewTransitionContext.Provider>\n          </FetchersContext.Provider>\n        </DataRouterStateContext.Provider>\n      </DataRouterContext.Provider>\n      {null}\n    </>\n  );\n}\n\nfunction DataRoutes({\n  routes,\n  future,\n  state,\n}: {\n  routes: DataRouteObject[];\n  future: RemixRouter[\"future\"];\n  state: RouterState;\n}): React.ReactElement | null {\n  return useRoutesImpl(routes, undefined, state, future);\n}\n\nexport interface BrowserRouterProps {\n  basename?: string;\n  children?: React.ReactNode;\n  future?: Partial<FutureConfig>;\n  window?: Window;\n}\n\n/**\n * A `<Router>` for use in web browsers. Provides the cleanest URLs.\n */\nexport function BrowserRouter({\n  basename,\n  children,\n  future,\n  window,\n}: BrowserRouterProps) {\n  let historyRef = React.useRef<BrowserHistory>();\n  if (historyRef.current == null) {\n    historyRef.current = createBrowserHistory({ window, v5Compat: true });\n  }\n\n  let history = historyRef.current;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location,\n  });\n  let { v7_startTransition } = future || {};\n  let setState = React.useCallback(\n    (newState: { action: NavigationType; location: Location }) => {\n      v7_startTransition && startTransitionImpl\n        ? startTransitionImpl(() => setStateImpl(newState))\n        : setStateImpl(newState);\n    },\n    [setStateImpl, v7_startTransition]\n  );\n\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n\n  return (\n    <Router\n      basename={basename}\n      children={children}\n      location={state.location}\n      navigationType={state.action}\n      navigator={history}\n      future={future}\n    />\n  );\n}\n\nexport interface HashRouterProps {\n  basename?: string;\n  children?: React.ReactNode;\n  future?: Partial<FutureConfig>;\n  window?: Window;\n}\n\n/**\n * A `<Router>` for use in web browsers. Stores the location in the hash\n * portion of the URL so it is not sent to the server.\n */\nexport function HashRouter({\n  basename,\n  children,\n  future,\n  window,\n}: HashRouterProps) {\n  let historyRef = React.useRef<HashHistory>();\n  if (historyRef.current == null) {\n    historyRef.current = createHashHistory({ window, v5Compat: true });\n  }\n\n  let history = historyRef.current;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location,\n  });\n  let { v7_startTransition } = future || {};\n  let setState = React.useCallback(\n    (newState: { action: NavigationType; location: Location }) => {\n      v7_startTransition && startTransitionImpl\n        ? startTransitionImpl(() => setStateImpl(newState))\n        : setStateImpl(newState);\n    },\n    [setStateImpl, v7_startTransition]\n  );\n\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n\n  return (\n    <Router\n      basename={basename}\n      children={children}\n      location={state.location}\n      navigationType={state.action}\n      navigator={history}\n      future={future}\n    />\n  );\n}\n\nexport interface HistoryRouterProps {\n  basename?: string;\n  children?: React.ReactNode;\n  future?: FutureConfig;\n  history: History;\n}\n\n/**\n * A `<Router>` that accepts a pre-instantiated history object. It's important\n * to note that using your own history object is highly discouraged and may add\n * two versions of the history library to your bundles unless you use the same\n * version of the history library that React Router uses internally.\n */\nfunction HistoryRouter({\n  basename,\n  children,\n  future,\n  history,\n}: HistoryRouterProps) {\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location,\n  });\n  let { v7_startTransition } = future || {};\n  let setState = React.useCallback(\n    (newState: { action: NavigationType; location: Location }) => {\n      v7_startTransition && startTransitionImpl\n        ? startTransitionImpl(() => setStateImpl(newState))\n        : setStateImpl(newState);\n    },\n    [setStateImpl, v7_startTransition]\n  );\n\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n\n  return (\n    <Router\n      basename={basename}\n      children={children}\n      location={state.location}\n      navigationType={state.action}\n      navigator={history}\n      future={future}\n    />\n  );\n}\n\nif (__DEV__) {\n  HistoryRouter.displayName = \"unstable_HistoryRouter\";\n}\n\nexport { HistoryRouter as unstable_HistoryRouter };\n\nexport interface LinkProps\n  extends Omit<React.AnchorHTMLAttributes<HTMLAnchorElement>, \"href\"> {\n  reloadDocument?: boolean;\n  replace?: boolean;\n  state?: any;\n  preventScrollReset?: boolean;\n  relative?: RelativeRoutingType;\n  to: To;\n  unstable_viewTransition?: boolean;\n}\n\nconst isBrowser =\n  typeof window !== \"undefined\" &&\n  typeof window.document !== \"undefined\" &&\n  typeof window.document.createElement !== \"undefined\";\n\nconst ABSOLUTE_URL_REGEX = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\n\n/**\n * The public API for rendering a history-aware `<a>`.\n */\nexport const Link = React.forwardRef<HTMLAnchorElement, LinkProps>(\n  function LinkWithRef(\n    {\n      onClick,\n      relative,\n      reloadDocument,\n      replace,\n      state,\n      target,\n      to,\n      preventScrollReset,\n      unstable_viewTransition,\n      ...rest\n    },\n    ref\n  ) {\n    let { basename } = React.useContext(NavigationContext);\n\n    // Rendered into <a href> for absolute URLs\n    let absoluteHref;\n    let isExternal = false;\n\n    if (typeof to === \"string\" && ABSOLUTE_URL_REGEX.test(to)) {\n      // Render the absolute href server- and client-side\n      absoluteHref = to;\n\n      // Only check for external origins client-side\n      if (isBrowser) {\n        try {\n          let currentUrl = new URL(window.location.href);\n          let targetUrl = to.startsWith(\"//\")\n            ? new URL(currentUrl.protocol + to)\n            : new URL(to);\n          let path = stripBasename(targetUrl.pathname, basename);\n\n          if (targetUrl.origin === currentUrl.origin && path != null) {\n            // Strip the protocol/origin/basename for same-origin absolute URLs\n            to = path + targetUrl.search + targetUrl.hash;\n          } else {\n            isExternal = true;\n          }\n        } catch (e) {\n          // We can't do external URL detection without a valid URL\n          warning(\n            false,\n            `<Link to=\"${to}\"> contains an invalid URL which will probably break ` +\n              `when clicked - please update to a valid URL path.`\n          );\n        }\n      }\n    }\n\n    // Rendered into <a href> for relative URLs\n    let href = useHref(to, { relative });\n\n    let internalOnClick = useLinkClickHandler(to, {\n      replace,\n      state,\n      target,\n      preventScrollReset,\n      relative,\n      unstable_viewTransition,\n    });\n    function handleClick(\n      event: React.MouseEvent<HTMLAnchorElement, MouseEvent>\n    ) {\n      if (onClick) onClick(event);\n      if (!event.defaultPrevented) {\n        internalOnClick(event);\n      }\n    }\n\n    return (\n      // eslint-disable-next-line jsx-a11y/anchor-has-content\n      <a\n        {...rest}\n        href={absoluteHref || href}\n        onClick={isExternal || reloadDocument ? onClick : handleClick}\n        ref={ref}\n        target={target}\n      />\n    );\n  }\n);\n\nif (__DEV__) {\n  Link.displayName = \"Link\";\n}\n\nexport type NavLinkRenderProps = {\n  isActive: boolean;\n  isPending: boolean;\n  isTransitioning: boolean;\n};\n\nexport interface NavLinkProps\n  extends Omit<LinkProps, \"className\" | \"style\" | \"children\"> {\n  children?: React.ReactNode | ((props: NavLinkRenderProps) => React.ReactNode);\n  caseSensitive?: boolean;\n  className?: string | ((props: NavLinkRenderProps) => string | undefined);\n  end?: boolean;\n  style?:\n    | React.CSSProperties\n    | ((props: NavLinkRenderProps) => React.CSSProperties | undefined);\n}\n\n/**\n * A `<Link>` wrapper that knows if it's \"active\" or not.\n */\nexport const NavLink = React.forwardRef<HTMLAnchorElement, NavLinkProps>(\n  function NavLinkWithRef(\n    {\n      \"aria-current\": ariaCurrentProp = \"page\",\n      caseSensitive = false,\n      className: classNameProp = \"\",\n      end = false,\n      style: styleProp,\n      to,\n      unstable_viewTransition,\n      children,\n      ...rest\n    },\n    ref\n  ) {\n    let path = useResolvedPath(to, { relative: rest.relative });\n    let location = useLocation();\n    let routerState = React.useContext(DataRouterStateContext);\n    let { navigator, basename } = React.useContext(NavigationContext);\n    let isTransitioning =\n      routerState != null &&\n      // Conditional usage is OK here because the usage of a data router is static\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      useViewTransitionState(path) &&\n      unstable_viewTransition === true;\n\n    let toPathname = navigator.encodeLocation\n      ? navigator.encodeLocation(path).pathname\n      : path.pathname;\n    let locationPathname = location.pathname;\n    let nextLocationPathname =\n      routerState && routerState.navigation && routerState.navigation.location\n        ? routerState.navigation.location.pathname\n        : null;\n\n    if (!caseSensitive) {\n      locationPathname = locationPathname.toLowerCase();\n      nextLocationPathname = nextLocationPathname\n        ? nextLocationPathname.toLowerCase()\n        : null;\n      toPathname = toPathname.toLowerCase();\n    }\n\n    if (nextLocationPathname && basename) {\n      nextLocationPathname =\n        stripBasename(nextLocationPathname, basename) || nextLocationPathname;\n    }\n\n    // If the `to` has a trailing slash, look at that exact spot.  Otherwise,\n    // we're looking for a slash _after_ what's in `to`.  For example:\n    //\n    // <NavLink to=\"/users\"> and <NavLink to=\"/users/\">\n    // both want to look for a / at index 6 to match URL `/users/matt`\n    const endSlashPosition =\n      toPathname !== \"/\" && toPathname.endsWith(\"/\")\n        ? toPathname.length - 1\n        : toPathname.length;\n    let isActive =\n      locationPathname === toPathname ||\n      (!end &&\n        locationPathname.startsWith(toPathname) &&\n        locationPathname.charAt(endSlashPosition) === \"/\");\n\n    let isPending =\n      nextLocationPathname != null &&\n      (nextLocationPathname === toPathname ||\n        (!end &&\n          nextLocationPathname.startsWith(toPathname) &&\n          nextLocationPathname.charAt(toPathname.length) === \"/\"));\n\n    let renderProps = {\n      isActive,\n      isPending,\n      isTransitioning,\n    };\n\n    let ariaCurrent = isActive ? ariaCurrentProp : undefined;\n\n    let className: string | undefined;\n    if (typeof classNameProp === \"function\") {\n      className = classNameProp(renderProps);\n    } else {\n      // If the className prop is not a function, we use a default `active`\n      // class for <NavLink />s that are active. In v5 `active` was the default\n      // value for `activeClassName`, but we are removing that API and can still\n      // use the old default behavior for a cleaner upgrade path and keep the\n      // simple styling rules working as they currently do.\n      className = [\n        classNameProp,\n        isActive ? \"active\" : null,\n        isPending ? \"pending\" : null,\n        isTransitioning ? \"transitioning\" : null,\n      ]\n        .filter(Boolean)\n        .join(\" \");\n    }\n\n    let style =\n      typeof styleProp === \"function\" ? styleProp(renderProps) : styleProp;\n\n    return (\n      <Link\n        {...rest}\n        aria-current={ariaCurrent}\n        className={className}\n        ref={ref}\n        style={style}\n        to={to}\n        unstable_viewTransition={unstable_viewTransition}\n      >\n        {typeof children === \"function\" ? children(renderProps) : children}\n      </Link>\n    );\n  }\n);\n\nif (__DEV__) {\n  NavLink.displayName = \"NavLink\";\n}\n\n/**\n * Form props shared by navigations and fetchers\n */\ninterface SharedFormProps extends React.FormHTMLAttributes<HTMLFormElement> {\n  /**\n   * The HTTP verb to use when the form is submit. Supports \"get\", \"post\",\n   * \"put\", \"delete\", \"patch\".\n   */\n  method?: HTMLFormMethod;\n\n  /**\n   * `<form encType>` - enhancing beyond the normal string type and limiting\n   * to the built-in browser supported values\n   */\n  encType?:\n    | \"application/x-www-form-urlencoded\"\n    | \"multipart/form-data\"\n    | \"text/plain\";\n\n  /**\n   * Normal `<form action>` but supports React Router's relative paths.\n   */\n  action?: string;\n\n  /**\n   * Determines whether the form action is relative to the route hierarchy or\n   * the pathname.  Use this if you want to opt out of navigating the route\n   * hierarchy and want to instead route based on /-delimited URL segments\n   */\n  relative?: RelativeRoutingType;\n\n  /**\n   * Prevent the scroll position from resetting to the top of the viewport on\n   * completion of the navigation when using the <ScrollRestoration> component\n   */\n  preventScrollReset?: boolean;\n\n  /**\n   * A function to call when the form is submitted. If you call\n   * `event.preventDefault()` then this form will not do anything.\n   */\n  onSubmit?: React.FormEventHandler<HTMLFormElement>;\n}\n\n/**\n * Form props available to fetchers\n */\nexport interface FetcherFormProps extends SharedFormProps {}\n\n/**\n * Form props available to navigations\n */\nexport interface FormProps extends SharedFormProps {\n  /**\n   * Indicate a specific fetcherKey to use when using navigate=false\n   */\n  fetcherKey?: string;\n\n  /**\n   * navigate=false will use a fetcher instead of a navigation\n   */\n  navigate?: boolean;\n\n  /**\n   * Forces a full document navigation instead of a fetch.\n   */\n  reloadDocument?: boolean;\n\n  /**\n   * Replaces the current entry in the browser history stack when the form\n   * navigates. Use this if you don't want the user to be able to click \"back\"\n   * to the page with the form on it.\n   */\n  replace?: boolean;\n\n  /**\n   * State object to add to the history stack entry for this navigation\n   */\n  state?: any;\n\n  /**\n   * Enable view transitions on this Form navigation\n   */\n  unstable_viewTransition?: boolean;\n}\n\ntype HTMLSubmitEvent = React.BaseSyntheticEvent<\n  SubmitEvent,\n  Event,\n  HTMLFormElement\n>;\n\ntype HTMLFormSubmitter = HTMLButtonElement | HTMLInputElement;\n\n/**\n * A `@remix-run/router`-aware `<form>`. It behaves like a normal form except\n * that the interaction with the server is with `fetch` instead of new document\n * requests, allowing components to add nicer UX to the page as the form is\n * submitted and returns with data.\n */\nexport const Form = React.forwardRef<HTMLFormElement, FormProps>(\n  (\n    {\n      fetcherKey,\n      navigate,\n      reloadDocument,\n      replace,\n      state,\n      method = defaultMethod,\n      action,\n      onSubmit,\n      relative,\n      preventScrollReset,\n      unstable_viewTransition,\n      ...props\n    },\n    forwardedRef\n  ) => {\n    let submit = useSubmit();\n    let formAction = useFormAction(action, { relative });\n    let formMethod: HTMLFormMethod =\n      method.toLowerCase() === \"get\" ? \"get\" : \"post\";\n\n    let submitHandler: React.FormEventHandler<HTMLFormElement> = (event) => {\n      onSubmit && onSubmit(event);\n      if (event.defaultPrevented) return;\n      event.preventDefault();\n\n      let submitter = (event as unknown as HTMLSubmitEvent).nativeEvent\n        .submitter as HTMLFormSubmitter | null;\n\n      let submitMethod =\n        (submitter?.getAttribute(\"formmethod\") as HTMLFormMethod | undefined) ||\n        method;\n\n      submit(submitter || event.currentTarget, {\n        fetcherKey,\n        method: submitMethod,\n        navigate,\n        replace,\n        state,\n        relative,\n        preventScrollReset,\n        unstable_viewTransition,\n      });\n    };\n\n    return (\n      <form\n        ref={forwardedRef}\n        method={formMethod}\n        action={formAction}\n        onSubmit={reloadDocument ? onSubmit : submitHandler}\n        {...props}\n      />\n    );\n  }\n);\n\nif (__DEV__) {\n  Form.displayName = \"Form\";\n}\n\nexport interface ScrollRestorationProps {\n  getKey?: GetScrollRestorationKeyFunction;\n  storageKey?: string;\n}\n\n/**\n * This component will emulate the browser's scroll restoration on location\n * changes.\n */\nexport function ScrollRestoration({\n  getKey,\n  storageKey,\n}: ScrollRestorationProps) {\n  useScrollRestoration({ getKey, storageKey });\n  return null;\n}\n\nif (__DEV__) {\n  ScrollRestoration.displayName = \"ScrollRestoration\";\n}\n//#endregion\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Hooks\n////////////////////////////////////////////////////////////////////////////////\n\nenum DataRouterHook {\n  UseScrollRestoration = \"useScrollRestoration\",\n  UseSubmit = \"useSubmit\",\n  UseSubmitFetcher = \"useSubmitFetcher\",\n  UseFetcher = \"useFetcher\",\n  useViewTransitionState = \"useViewTransitionState\",\n}\n\nenum DataRouterStateHook {\n  UseFetcher = \"useFetcher\",\n  UseFetchers = \"useFetchers\",\n  UseScrollRestoration = \"useScrollRestoration\",\n}\n\n// Internal hooks\n\nfunction getDataRouterConsoleError(\n  hookName: DataRouterHook | DataRouterStateHook\n) {\n  return `${hookName} must be used within a data router.  See https://reactrouter.com/routers/picking-a-router.`;\n}\n\nfunction useDataRouterContext(hookName: DataRouterHook) {\n  let ctx = React.useContext(DataRouterContext);\n  invariant(ctx, getDataRouterConsoleError(hookName));\n  return ctx;\n}\n\nfunction useDataRouterState(hookName: DataRouterStateHook) {\n  let state = React.useContext(DataRouterStateContext);\n  invariant(state, getDataRouterConsoleError(hookName));\n  return state;\n}\n\n// External hooks\n\n/**\n * Handles the click behavior for router `<Link>` components. This is useful if\n * you need to create custom `<Link>` components with the same click behavior we\n * use in our exported `<Link>`.\n */\nexport function useLinkClickHandler<E extends Element = HTMLAnchorElement>(\n  to: To,\n  {\n    target,\n    replace: replaceProp,\n    state,\n    preventScrollReset,\n    relative,\n    unstable_viewTransition,\n  }: {\n    target?: React.HTMLAttributeAnchorTarget;\n    replace?: boolean;\n    state?: any;\n    preventScrollReset?: boolean;\n    relative?: RelativeRoutingType;\n    unstable_viewTransition?: boolean;\n  } = {}\n): (event: React.MouseEvent<E, MouseEvent>) => void {\n  let navigate = useNavigate();\n  let location = useLocation();\n  let path = useResolvedPath(to, { relative });\n\n  return React.useCallback(\n    (event: React.MouseEvent<E, MouseEvent>) => {\n      if (shouldProcessLinkClick(event, target)) {\n        event.preventDefault();\n\n        // If the URL hasn't changed, a regular <a> will do a replace instead of\n        // a push, so do the same here unless the replace prop is explicitly set\n        let replace =\n          replaceProp !== undefined\n            ? replaceProp\n            : createPath(location) === createPath(path);\n\n        navigate(to, {\n          replace,\n          state,\n          preventScrollReset,\n          relative,\n          unstable_viewTransition,\n        });\n      }\n    },\n    [\n      location,\n      navigate,\n      path,\n      replaceProp,\n      state,\n      target,\n      to,\n      preventScrollReset,\n      relative,\n      unstable_viewTransition,\n    ]\n  );\n}\n\n/**\n * A convenient wrapper for reading and writing search parameters via the\n * URLSearchParams interface.\n */\nexport function useSearchParams(\n  defaultInit?: URLSearchParamsInit\n): [URLSearchParams, SetURLSearchParams] {\n  warning(\n    typeof URLSearchParams !== \"undefined\",\n    `You cannot use the \\`useSearchParams\\` hook in a browser that does not ` +\n      `support the URLSearchParams API. If you need to support Internet ` +\n      `Explorer 11, we recommend you load a polyfill such as ` +\n      `https://github.com/ungap/url-search-params.`\n  );\n\n  let defaultSearchParamsRef = React.useRef(createSearchParams(defaultInit));\n  let hasSetSearchParamsRef = React.useRef(false);\n\n  let location = useLocation();\n  let searchParams = React.useMemo(\n    () =>\n      // Only merge in the defaults if we haven't yet called setSearchParams.\n      // Once we call that we want those to take precedence, otherwise you can't\n      // remove a param with setSearchParams({}) if it has an initial value\n      getSearchParamsForLocation(\n        location.search,\n        hasSetSearchParamsRef.current ? null : defaultSearchParamsRef.current\n      ),\n    [location.search]\n  );\n\n  let navigate = useNavigate();\n  let setSearchParams = React.useCallback<SetURLSearchParams>(\n    (nextInit, navigateOptions) => {\n      const newSearchParams = createSearchParams(\n        typeof nextInit === \"function\" ? nextInit(searchParams) : nextInit\n      );\n      hasSetSearchParamsRef.current = true;\n      navigate(\"?\" + newSearchParams, navigateOptions);\n    },\n    [navigate, searchParams]\n  );\n\n  return [searchParams, setSearchParams];\n}\n\nexport type SetURLSearchParams = (\n  nextInit?:\n    | URLSearchParamsInit\n    | ((prev: URLSearchParams) => URLSearchParamsInit),\n  navigateOpts?: NavigateOptions\n) => void;\n\n/**\n * Submits a HTML `<form>` to the server without reloading the page.\n */\nexport interface SubmitFunction {\n  (\n    /**\n     * Specifies the `<form>` to be submitted to the server, a specific\n     * `<button>` or `<input type=\"submit\">` to use to submit the form, or some\n     * arbitrary data to submit.\n     *\n     * Note: When using a `<button>` its `name` and `value` will also be\n     * included in the form data that is submitted.\n     */\n    target: SubmitTarget,\n\n    /**\n     * Options that override the `<form>`'s own attributes. Required when\n     * submitting arbitrary data without a backing `<form>`.\n     */\n    options?: SubmitOptions\n  ): void;\n}\n\n/**\n * Submits a fetcher `<form>` to the server without reloading the page.\n */\nexport interface FetcherSubmitFunction {\n  (\n    target: SubmitTarget,\n    // Fetchers cannot replace or set state because they are not navigation events\n    options?: FetcherSubmitOptions\n  ): void;\n}\n\nfunction validateClientSideSubmission() {\n  if (typeof document === \"undefined\") {\n    throw new Error(\n      \"You are calling submit during the server render. \" +\n        \"Try calling submit within a `useEffect` or callback instead.\"\n    );\n  }\n}\n\nlet fetcherId = 0;\nlet getUniqueFetcherId = () => `__${String(++fetcherId)}__`;\n\n/**\n * Returns a function that may be used to programmatically submit a form (or\n * some arbitrary data) to the server.\n */\nexport function useSubmit(): SubmitFunction {\n  let { router } = useDataRouterContext(DataRouterHook.UseSubmit);\n  let { basename } = React.useContext(NavigationContext);\n  let currentRouteId = useRouteId();\n\n  return React.useCallback<SubmitFunction>(\n    (target, options = {}) => {\n      validateClientSideSubmission();\n\n      let { action, method, encType, formData, body } = getFormSubmissionInfo(\n        target,\n        basename\n      );\n\n      if (options.navigate === false) {\n        let key = options.fetcherKey || getUniqueFetcherId();\n        router.fetch(key, currentRouteId, options.action || action, {\n          preventScrollReset: options.preventScrollReset,\n          formData,\n          body,\n          formMethod: options.method || (method as HTMLFormMethod),\n          formEncType: options.encType || (encType as FormEncType),\n          unstable_flushSync: options.unstable_flushSync,\n        });\n      } else {\n        router.navigate(options.action || action, {\n          preventScrollReset: options.preventScrollReset,\n          formData,\n          body,\n          formMethod: options.method || (method as HTMLFormMethod),\n          formEncType: options.encType || (encType as FormEncType),\n          replace: options.replace,\n          state: options.state,\n          fromRouteId: currentRouteId,\n          unstable_flushSync: options.unstable_flushSync,\n          unstable_viewTransition: options.unstable_viewTransition,\n        });\n      }\n    },\n    [router, basename, currentRouteId]\n  );\n}\n\n// v7: Eventually we should deprecate this entirely in favor of using the\n// router method directly?\nexport function useFormAction(\n  action?: string,\n  { relative }: { relative?: RelativeRoutingType } = {}\n): string {\n  let { basename } = React.useContext(NavigationContext);\n  let routeContext = React.useContext(RouteContext);\n  invariant(routeContext, \"useFormAction must be used inside a RouteContext\");\n\n  let [match] = routeContext.matches.slice(-1);\n  // Shallow clone path so we can modify it below, otherwise we modify the\n  // object referenced by useMemo inside useResolvedPath\n  let path = { ...useResolvedPath(action ? action : \".\", { relative }) };\n\n  // If no action was specified, browsers will persist current search params\n  // when determining the path, so match that behavior\n  // https://github.com/remix-run/remix/issues/927\n  let location = useLocation();\n  if (action == null) {\n    // Safe to write to this directly here since if action was undefined, we\n    // would have called useResolvedPath(\".\") which will never include a search\n    path.search = location.search;\n\n    // When grabbing search params from the URL, remove any included ?index param\n    // since it might not apply to our contextual route.  We add it back based\n    // on match.route.index below\n    let params = new URLSearchParams(path.search);\n    if (params.has(\"index\") && params.get(\"index\") === \"\") {\n      params.delete(\"index\");\n      path.search = params.toString() ? `?${params.toString()}` : \"\";\n    }\n  }\n\n  if ((!action || action === \".\") && match.route.index) {\n    path.search = path.search\n      ? path.search.replace(/^\\?/, \"?index&\")\n      : \"?index\";\n  }\n\n  // If we're operating within a basename, prepend it to the pathname prior\n  // to creating the form action.  If this is a root navigation, then just use\n  // the raw basename which allows the basename to have full control over the\n  // presence of a trailing slash on root actions\n  if (basename !== \"/\") {\n    path.pathname =\n      path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n  }\n\n  return createPath(path);\n}\n\nexport type FetcherWithComponents<TData> = Fetcher<TData> & {\n  Form: React.ForwardRefExoticComponent<\n    FetcherFormProps & React.RefAttributes<HTMLFormElement>\n  >;\n  submit: FetcherSubmitFunction;\n  load: (href: string, opts?: { unstable_flushSync?: boolean }) => void;\n};\n\n// TODO: (v7) Change the useFetcher generic default from `any` to `unknown`\n\n/**\n * Interacts with route loaders and actions without causing a navigation. Great\n * for any interaction that stays on the same page.\n */\nexport function useFetcher<TData = any>({\n  key,\n}: { key?: string } = {}): FetcherWithComponents<TData> {\n  let { router } = useDataRouterContext(DataRouterHook.UseFetcher);\n  let state = useDataRouterState(DataRouterStateHook.UseFetcher);\n  let fetcherData = React.useContext(FetchersContext);\n  let route = React.useContext(RouteContext);\n  let routeId = route.matches[route.matches.length - 1]?.route.id;\n\n  invariant(fetcherData, `useFetcher must be used inside a FetchersContext`);\n  invariant(route, `useFetcher must be used inside a RouteContext`);\n  invariant(\n    routeId != null,\n    `useFetcher can only be used on routes that contain a unique \"id\"`\n  );\n\n  // Fetcher key handling\n  // OK to call conditionally to feature detect `useId`\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  let defaultKey = useIdImpl ? useIdImpl() : \"\";\n  let [fetcherKey, setFetcherKey] = React.useState<string>(key || defaultKey);\n  if (key && key !== fetcherKey) {\n    setFetcherKey(key);\n  } else if (!fetcherKey) {\n    // We will only fall through here when `useId` is not available\n    setFetcherKey(getUniqueFetcherId());\n  }\n\n  // Registration/cleanup\n  React.useEffect(() => {\n    router.getFetcher(fetcherKey);\n    return () => {\n      // Tell the router we've unmounted - if v7_fetcherPersist is enabled this\n      // will not delete immediately but instead queue up a delete after the\n      // fetcher returns to an `idle` state\n      router.deleteFetcher(fetcherKey);\n    };\n  }, [router, fetcherKey]);\n\n  // Fetcher additions\n  let load = React.useCallback(\n    (href: string, opts?: { unstable_flushSync?: boolean }) => {\n      invariant(routeId, \"No routeId available for fetcher.load()\");\n      router.fetch(fetcherKey, routeId, href, opts);\n    },\n    [fetcherKey, routeId, router]\n  );\n\n  let submitImpl = useSubmit();\n  let submit = React.useCallback<FetcherSubmitFunction>(\n    (target, opts) => {\n      submitImpl(target, {\n        ...opts,\n        navigate: false,\n        fetcherKey,\n      });\n    },\n    [fetcherKey, submitImpl]\n  );\n\n  let FetcherForm = React.useMemo(() => {\n    let FetcherForm = React.forwardRef<HTMLFormElement, FetcherFormProps>(\n      (props, ref) => {\n        return (\n          <Form {...props} navigate={false} fetcherKey={fetcherKey} ref={ref} />\n        );\n      }\n    );\n    if (__DEV__) {\n      FetcherForm.displayName = \"fetcher.Form\";\n    }\n    return FetcherForm;\n  }, [fetcherKey]);\n\n  // Exposed FetcherWithComponents\n  let fetcher = state.fetchers.get(fetcherKey) || IDLE_FETCHER;\n  let data = fetcherData.get(fetcherKey);\n  let fetcherWithComponents = React.useMemo(\n    () => ({\n      Form: FetcherForm,\n      submit,\n      load,\n      ...fetcher,\n      data,\n    }),\n    [FetcherForm, submit, load, fetcher, data]\n  );\n\n  return fetcherWithComponents;\n}\n\n/**\n * Provides all fetchers currently on the page. Useful for layouts and parent\n * routes that need to provide pending/optimistic UI regarding the fetch.\n */\nexport function useFetchers(): (Fetcher & { key: string })[] {\n  let state = useDataRouterState(DataRouterStateHook.UseFetchers);\n  return Array.from(state.fetchers.entries()).map(([key, fetcher]) => ({\n    ...fetcher,\n    key,\n  }));\n}\n\nconst SCROLL_RESTORATION_STORAGE_KEY = \"react-router-scroll-positions\";\nlet savedScrollPositions: Record<string, number> = {};\n\n/**\n * When rendered inside a RouterProvider, will restore scroll positions on navigations\n */\nfunction useScrollRestoration({\n  getKey,\n  storageKey,\n}: {\n  getKey?: GetScrollRestorationKeyFunction;\n  storageKey?: string;\n} = {}) {\n  let { router } = useDataRouterContext(DataRouterHook.UseScrollRestoration);\n  let { restoreScrollPosition, preventScrollReset } = useDataRouterState(\n    DataRouterStateHook.UseScrollRestoration\n  );\n  let { basename } = React.useContext(NavigationContext);\n  let location = useLocation();\n  let matches = useMatches();\n  let navigation = useNavigation();\n\n  // Trigger manual scroll restoration while we're active\n  React.useEffect(() => {\n    window.history.scrollRestoration = \"manual\";\n    return () => {\n      window.history.scrollRestoration = \"auto\";\n    };\n  }, []);\n\n  // Save positions on pagehide\n  usePageHide(\n    React.useCallback(() => {\n      if (navigation.state === \"idle\") {\n        let key = (getKey ? getKey(location, matches) : null) || location.key;\n        savedScrollPositions[key] = window.scrollY;\n      }\n      try {\n        sessionStorage.setItem(\n          storageKey || SCROLL_RESTORATION_STORAGE_KEY,\n          JSON.stringify(savedScrollPositions)\n        );\n      } catch (error) {\n        warning(\n          false,\n          `Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${error}).`\n        );\n      }\n      window.history.scrollRestoration = \"auto\";\n    }, [storageKey, getKey, navigation.state, location, matches])\n  );\n\n  // Read in any saved scroll locations\n  if (typeof document !== \"undefined\") {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(() => {\n      try {\n        let sessionPositions = sessionStorage.getItem(\n          storageKey || SCROLL_RESTORATION_STORAGE_KEY\n        );\n        if (sessionPositions) {\n          savedScrollPositions = JSON.parse(sessionPositions);\n        }\n      } catch (e) {\n        // no-op, use default empty object\n      }\n    }, [storageKey]);\n\n    // Enable scroll restoration in the router\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(() => {\n      let getKeyWithoutBasename: GetScrollRestorationKeyFunction | undefined =\n        getKey && basename !== \"/\"\n          ? (location, matches) =>\n              getKey(\n                // Strip the basename to match useLocation()\n                {\n                  ...location,\n                  pathname:\n                    stripBasename(location.pathname, basename) ||\n                    location.pathname,\n                },\n                matches\n              )\n          : getKey;\n      let disableScrollRestoration = router?.enableScrollRestoration(\n        savedScrollPositions,\n        () => window.scrollY,\n        getKeyWithoutBasename\n      );\n      return () => disableScrollRestoration && disableScrollRestoration();\n    }, [router, basename, getKey]);\n\n    // Restore scrolling when state.restoreScrollPosition changes\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(() => {\n      // Explicit false means don't do anything (used for submissions)\n      if (restoreScrollPosition === false) {\n        return;\n      }\n\n      // been here before, scroll to it\n      if (typeof restoreScrollPosition === \"number\") {\n        window.scrollTo(0, restoreScrollPosition);\n        return;\n      }\n\n      // try to scroll to the hash\n      if (location.hash) {\n        let el = document.getElementById(\n          decodeURIComponent(location.hash.slice(1))\n        );\n        if (el) {\n          el.scrollIntoView();\n          return;\n        }\n      }\n\n      // Don't reset if this navigation opted out\n      if (preventScrollReset === true) {\n        return;\n      }\n\n      // otherwise go to the top on new locations\n      window.scrollTo(0, 0);\n    }, [location, restoreScrollPosition, preventScrollReset]);\n  }\n}\n\nexport { useScrollRestoration as UNSAFE_useScrollRestoration };\n\n/**\n * Setup a callback to be fired on the window's `beforeunload` event. This is\n * useful for saving some data to `window.localStorage` just before the page\n * refreshes.\n *\n * Note: The `callback` argument should be a function created with\n * `React.useCallback()`.\n */\nexport function useBeforeUnload(\n  callback: (event: BeforeUnloadEvent) => any,\n  options?: { capture?: boolean }\n): void {\n  let { capture } = options || {};\n  React.useEffect(() => {\n    let opts = capture != null ? { capture } : undefined;\n    window.addEventListener(\"beforeunload\", callback, opts);\n    return () => {\n      window.removeEventListener(\"beforeunload\", callback, opts);\n    };\n  }, [callback, capture]);\n}\n\n/**\n * Setup a callback to be fired on the window's `pagehide` event. This is\n * useful for saving some data to `window.localStorage` just before the page\n * refreshes.  This event is better supported than beforeunload across browsers.\n *\n * Note: The `callback` argument should be a function created with\n * `React.useCallback()`.\n */\nfunction usePageHide(\n  callback: (event: PageTransitionEvent) => any,\n  options?: { capture?: boolean }\n): void {\n  let { capture } = options || {};\n  React.useEffect(() => {\n    let opts = capture != null ? { capture } : undefined;\n    window.addEventListener(\"pagehide\", callback, opts);\n    return () => {\n      window.removeEventListener(\"pagehide\", callback, opts);\n    };\n  }, [callback, capture]);\n}\n\n/**\n * Wrapper around useBlocker to show a window.confirm prompt to users instead\n * of building a custom UI with useBlocker.\n *\n * Warning: This has *a lot of rough edges* and behaves very differently (and\n * very incorrectly in some cases) across browsers if user click addition\n * back/forward navigations while the confirm is open.  Use at your own risk.\n */\nfunction usePrompt({\n  when,\n  message,\n}: {\n  when: boolean | BlockerFunction;\n  message: string;\n}) {\n  let blocker = useBlocker(when);\n\n  React.useEffect(() => {\n    if (blocker.state === \"blocked\") {\n      let proceed = window.confirm(message);\n      if (proceed) {\n        // This timeout is needed to avoid a weird \"race\" on POP navigations\n        // between the `window.history` revert navigation and the result of\n        // `window.confirm`\n        setTimeout(blocker.proceed, 0);\n      } else {\n        blocker.reset();\n      }\n    }\n  }, [blocker, message]);\n\n  React.useEffect(() => {\n    if (blocker.state === \"blocked\" && !when) {\n      blocker.reset();\n    }\n  }, [blocker, when]);\n}\n\nexport { usePrompt as unstable_usePrompt };\n\n/**\n * Return a boolean indicating if there is an active view transition to the\n * given href.  You can use this value to render CSS classes or viewTransitionName\n * styles onto your elements\n *\n * @param href The destination href\n * @param [opts.relative] Relative routing type (\"route\" | \"path\")\n */\nfunction useViewTransitionState(\n  to: To,\n  opts: { relative?: RelativeRoutingType } = {}\n) {\n  let vtContext = React.useContext(ViewTransitionContext);\n\n  invariant(\n    vtContext != null,\n    \"`unstable_useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  \" +\n      \"Did you accidentally import `RouterProvider` from `react-router`?\"\n  );\n\n  let { basename } = useDataRouterContext(\n    DataRouterHook.useViewTransitionState\n  );\n  let path = useResolvedPath(to, { relative: opts.relative });\n  if (!vtContext.isTransitioning) {\n    return false;\n  }\n\n  let currentPath =\n    stripBasename(vtContext.currentLocation.pathname, basename) ||\n    vtContext.currentLocation.pathname;\n  let nextPath =\n    stripBasename(vtContext.nextLocation.pathname, basename) ||\n    vtContext.nextLocation.pathname;\n\n  // Transition is active if we're going to or coming from the indicated\n  // destination.  This ensures that other PUSH navigations that reverse\n  // an indicated transition apply.  I.e., on the list view you have:\n  //\n  //   <NavLink to=\"/details/1\" unstable_viewTransition>\n  //\n  // If you click the breadcrumb back to the list view:\n  //\n  //   <NavLink to=\"/list\" unstable_viewTransition>\n  //\n  // We should apply the transition because it's indicated as active going\n  // from /list -> /details/1 and therefore should be active on the reverse\n  // (even though this isn't strictly a POP reverse)\n  return (\n    matchPath(path.pathname, nextPath) != null ||\n    matchPath(path.pathname, currentPath) != null\n  );\n}\n\nexport { useViewTransitionState as unstable_useViewTransitionState };\n\n//#endregion\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","var randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  var uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    offset = offset || 0;\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(rnds);\n}\nexport default v4;","/*\n * Copyright (c) 2013 Kevin van Zonneveld (http://kvz.io)\n * and Contributors (http://phpjs.org/authors)\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of\n * this software and associated documentation files (the \"Software\"), to deal in\n * the Software without restriction, including without limitation the rights to\n * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\n * of the Software, and to permit persons to whom the Software is furnished to do\n * so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n// Deprecated and removed in TypeScript\ndeclare function unescape(s: string): string;\n\n/**\n * Decodes a url safe Base 64 encoded string\n * @remarks See: {@link http://tools.ietf.org/html/rfc4648#page-7}\n * @param data - String to decode\n * @returns The decoded string\n */\nexport function base64urldecode(data: string): string {\n  if (!data) {\n    return data;\n  }\n  const padding = 4 - (data.length % 4);\n  switch (padding) {\n    case 2:\n      data += '==';\n      break;\n    case 3:\n      data += '=';\n      break;\n  }\n  const b64Data = data.replace(/-/g, '+').replace(/_/g, '/');\n  return base64decode(b64Data);\n}\n\n/**\n * Encodes a string into a url safe Base 64 encoded string\n * @remarks See: {@link http://tools.ietf.org/html/rfc4648#page-7}\n * @param data - String to encode\n * @returns The url safe Base 64 string\n */\nexport function base64urlencode(data: string): string {\n  if (!data) {\n    return data;\n  }\n\n  const enc = base64encode(data);\n  return enc.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n\nconst b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n/**\n * Encode string as base64.\n * Any type can be passed, but will be stringified\n *\n * @param data - string to encode\n * @returns base64-encoded string\n */\nexport function base64encode(data: string): string {\n  // discuss at: http://phpjs.org/functions/base64_encode/\n  // original by: Tyler Akins (http://rumkin.com)\n  // improved by: Bayron Guevara\n  // improved by: Thunder.m\n  // improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n  // improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n  // improved by: Rafa Kukawski (http://kukawski.pl)\n  // bugfixed by: Pellentesque Malesuada\n  // example 1: base64_encode('Kevin van Zonneveld');\n  // returns 1: 'S2V2aW4gdmFuIFpvbm5ldmVsZA=='\n  // example 2: base64_encode('a');\n  // returns 2: 'YQ=='\n  // example 3: base64_encode('  la mode');\n  // returns 3: '4pyTIMOgIGxhIG1vZGU='\n\n  let o1,\n    o2,\n    o3,\n    h1,\n    h2,\n    h3,\n    h4,\n    bits,\n    i = 0,\n    ac = 0;\n  const tmp_arr: Array<string> = [];\n\n  if (!data) {\n    return data;\n  }\n\n  data = unescape(encodeURIComponent(data));\n\n  do {\n    // pack three octets into four hexets\n    o1 = data.charCodeAt(i++);\n    o2 = data.charCodeAt(i++);\n    o3 = data.charCodeAt(i++);\n\n    bits = (o1 << 16) | (o2 << 8) | o3;\n\n    h1 = (bits >> 18) & 0x3f;\n    h2 = (bits >> 12) & 0x3f;\n    h3 = (bits >> 6) & 0x3f;\n    h4 = bits & 0x3f;\n\n    // use hexets to index into b64, and append result to encoded string\n    tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n  } while (i < data.length);\n\n  const enc = tmp_arr.join('');\n\n  const r = data.length % 3;\n\n  return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);\n}\n\n/**\n * Decode base64 to string\n *\n * @param data - base64 to string\n * @returns decoded string\n */\nexport function base64decode(encodedData: string): string {\n  //  discuss at: http://locutus.io/php/base64_decode/\n  // original by: Tyler Akins (http://rumkin.com)\n  // improved by: Thunder.m\n  // improved by: Kevin van Zonneveld (http://kvz.io)\n  // improved by: Kevin van Zonneveld (http://kvz.io)\n  //    input by: Aman Gupta\n  //    input by: Brett Zamir (http://brett-zamir.me)\n  // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman)\n  // bugfixed by: Pellentesque Malesuada\n  // bugfixed by: Kevin van Zonneveld (http://kvz.io)\n  // improved by: Indigo744\n  //   example 1: base64_decode('S2V2aW4gdmFuIFpvbm5ldmVsZA==')\n  //   returns 1: 'Kevin van Zonneveld'\n  //   example 2: base64_decode('YQ==')\n  //   returns 2: 'a'\n  //   example 3: base64_decode('4pyTIMOgIGxhIG1vZGU=')\n  //   returns 3: '  la mode'\n\n  // decodeUTF8string()\n  // Internal function to decode properly UTF8 string\n  // Adapted from Solution #1 at https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\n  const decodeUTF8string = function (str: string) {\n    // Going backwards: from bytestream, to percent-encoding, to original string.\n    return decodeURIComponent(\n      str\n        .split('')\n        .map(function (c) {\n          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        })\n        .join('')\n    );\n  };\n\n  let o1,\n    o2,\n    o3,\n    h1,\n    h2,\n    h3,\n    h4,\n    bits,\n    i = 0,\n    ac = 0,\n    dec = '';\n  const tmpArr: Array<string> = [];\n\n  if (!encodedData) {\n    return encodedData;\n  }\n\n  encodedData += '';\n\n  do {\n    // unpack four hexets into three octets using index points in b64\n    h1 = b64.indexOf(encodedData.charAt(i++));\n    h2 = b64.indexOf(encodedData.charAt(i++));\n    h3 = b64.indexOf(encodedData.charAt(i++));\n    h4 = b64.indexOf(encodedData.charAt(i++));\n\n    bits = (h1 << 18) | (h2 << 12) | (h3 << 6) | h4;\n\n    o1 = (bits >> 16) & 0xff;\n    o2 = (bits >> 8) & 0xff;\n    o3 = bits & 0xff;\n\n    if (h3 === 64) {\n      tmpArr[ac++] = String.fromCharCode(o1);\n    } else if (h4 === 64) {\n      tmpArr[ac++] = String.fromCharCode(o1, o2);\n    } else {\n      tmpArr[ac++] = String.fromCharCode(o1, o2, o3);\n    }\n  } while (i < encodedData.length);\n\n  dec = tmpArr.join('');\n\n  return decodeUTF8string(dec.replace(/\\0+$/, ''));\n}\n","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport { base64urlencode, base64urldecode } from './base64';\nimport type { SelfDescribingJson, SelfDescribingJsonArray } from './core';\n\n/**\n * Type for a Payload dictionary\n */\nexport type Payload = Record<string, unknown>;\n\n/**\n * A tuple which represents the unprocessed JSON to be added to the Payload\n */\nexport type EventJsonWithKeys = { keyIfEncoded: string; keyIfNotEncoded: string; json: Record<string, unknown> };\n\n/**\n * An array of tuples which represents the unprocessed JSON to be added to the Payload\n */\nexport type EventJson = Array<EventJsonWithKeys>;\n\n/**\n * A function which will processor the Json onto the injected PayloadBuilder\n */\nexport type JsonProcessor = (\n  payloadBuilder: PayloadBuilder,\n  jsonForProcessing: EventJson,\n  contextEntitiesForProcessing: SelfDescribingJson[]\n) => void;\n\n/**\n * Interface for mutable object encapsulating tracker payload\n */\nexport interface PayloadBuilder {\n  /**\n   * Adds an entry to the Payload\n   * @param key - Key for Payload dictionary entry\n   * @param value - Value for Payload dictionaty entry\n   */\n  add: (key: string, value: unknown) => void;\n\n  /**\n   * Merges a payload into the existing payload\n   * @param dict - The payload to merge\n   */\n  addDict: (dict: Payload) => void;\n\n  /**\n   * Caches a JSON object to be added to payload on build\n   * @param keyIfEncoded - key if base64 encoding is enabled\n   * @param keyIfNotEncoded - key if base64 encoding is disabled\n   * @param json - The json to be stringified and added to the payload\n   */\n  addJson: (keyIfEncoded: string, keyIfNotEncoded: string, json: Record<string, unknown>) => void;\n\n  /**\n   * Caches a context entity to be added to payload on build\n   * @param entity - Context entity to add to the event\n   */\n  addContextEntity: (entity: SelfDescribingJson) => void;\n\n  /**\n   * Gets the current payload, before cached JSON is processed\n   */\n  getPayload: () => Payload;\n\n  /**\n   * Gets all JSON objects added to payload\n   */\n  getJson: () => EventJson;\n\n  /**\n   * Adds a function which will be executed when building\n   * the payload to process the JSON which has been added to this payload\n   * @param jsonProcessor - The JsonProcessor function for this builder\n   */\n  withJsonProcessor: (jsonProcessor: JsonProcessor) => void;\n\n  /**\n   * Builds and returns the Payload\n   * @param base64Encode - configures if unprocessed, cached json should be encoded\n   */\n  build: () => Payload;\n}\n\nexport function payloadBuilder(): PayloadBuilder {\n  const dict: Payload = {},\n    allJson: EventJson = [],\n    jsonForProcessing: EventJson = [],\n    contextEntitiesForProcessing: SelfDescribingJson[] = [];\n  let processor: JsonProcessor | undefined;\n\n  const add = (key: string, value: unknown): void => {\n    if (value != null && value !== '') {\n      // null also checks undefined\n      dict[key] = value;\n    }\n  };\n\n  const addDict = (dict: Payload): void => {\n    for (const key in dict) {\n      if (Object.prototype.hasOwnProperty.call(dict, key)) {\n        add(key, dict[key]);\n      }\n    }\n  };\n\n  const addJson = (keyIfEncoded: string, keyIfNotEncoded: string, json?: Record<string, unknown>): void => {\n    if (json && isNonEmptyJson(json)) {\n      const jsonWithKeys = { keyIfEncoded, keyIfNotEncoded, json };\n      jsonForProcessing.push(jsonWithKeys);\n      allJson.push(jsonWithKeys);\n    }\n  };\n\n  const addContextEntity = (entity: SelfDescribingJson): void => {\n    contextEntitiesForProcessing.push(entity);\n  };\n\n  return {\n    add,\n    addDict,\n    addJson,\n    addContextEntity,\n    getPayload: () => dict,\n    getJson: () => allJson,\n    withJsonProcessor: (jsonProcessor) => {\n      processor = jsonProcessor;\n    },\n    build: function () {\n      processor?.(this, jsonForProcessing, contextEntitiesForProcessing);\n      return dict;\n    },\n  };\n}\n\n/**\n * A helper to build a Snowplow request from a set of name-value pairs, provided using the add methods.\n * Will base64 encode JSON, if desired, on build\n *\n * @returns The request builder, with add and build methods\n */\nexport function payloadJsonProcessor(encodeBase64: boolean): JsonProcessor {\n  return (\n    payloadBuilder: PayloadBuilder,\n    jsonForProcessing: EventJson,\n    contextEntitiesForProcessing: SelfDescribingJson[]\n  ) => {\n    const add = (json: any, keyIfEncoded: string, keyIfNotEncoded: string): void => {\n      const str = JSON.stringify(json);\n      if (encodeBase64) {\n        payloadBuilder.add(keyIfEncoded, base64urlencode(str));\n      } else {\n        payloadBuilder.add(keyIfNotEncoded, str);\n      }\n    };\n\n    const getContextFromPayload = () => {\n      let payload = payloadBuilder.getPayload();\n      if (encodeBase64 ? payload.cx : payload.co) {\n        return JSON.parse(\n          encodeBase64 ? base64urldecode(payload.cx as string) : (payload.co as string)\n        ) as SelfDescribingJsonArray;\n      }\n      return undefined;\n    };\n\n    const combineContexts = (\n      originalContext: SelfDescribingJsonArray | undefined,\n      newContext: SelfDescribingJsonArray\n    ) => {\n      let context = originalContext || getContextFromPayload();\n      if (context) {\n        context.data = context.data.concat(newContext.data);\n      } else {\n        context = newContext;\n      }\n      return context;\n    };\n\n    let context: SelfDescribingJsonArray | undefined = undefined;\n    for (const json of jsonForProcessing) {\n      if (json.keyIfEncoded === 'cx') {\n        context = combineContexts(context, json.json as SelfDescribingJsonArray);\n      } else {\n        add(json.json, json.keyIfEncoded, json.keyIfNotEncoded);\n      }\n    }\n    jsonForProcessing.length = 0;\n\n    if (contextEntitiesForProcessing.length) {\n      let newContext = {\n        schema: 'iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0',\n        data: [...contextEntitiesForProcessing],\n      };\n      context = combineContexts(context, newContext);\n      contextEntitiesForProcessing.length = 0;\n    }\n\n    if (context) {\n      add(context, 'cx', 'co');\n    }\n  };\n}\n\n/**\n * Is property a non-empty JSON?\n * @param property - Checks if object is non-empty json\n */\nexport function isNonEmptyJson(property?: Record<string, unknown>): boolean {\n  if (!isJson(property)) {\n    return false;\n  }\n  for (const key in property) {\n    if (Object.prototype.hasOwnProperty.call(property, key)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Is property a JSON?\n * @param property - Checks if object is json\n */\nexport function isJson(property?: Record<string, unknown>): boolean {\n  return (\n    typeof property !== 'undefined' &&\n    property !== null &&\n    (property.constructor === {}.constructor || property.constructor === [].constructor)\n  );\n}\n","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nconst label = 'Snowplow: ';\n\nexport enum LOG_LEVEL {\n  none = 0,\n  error = 1,\n  warn = 2,\n  debug = 3,\n  info = 4,\n}\n\nexport interface Logger {\n  setLogLevel: (level: LOG_LEVEL) => void;\n  info: (message: string, ...extraParams: unknown[]) => void;\n  debug: (message: string, ...extraParams: unknown[]) => void;\n  warn: (message: string, error?: unknown, ...extraParams: unknown[]) => void;\n  error: (message: string, error?: unknown, ...extraParams: unknown[]) => void;\n}\n\nexport const LOG = logger();\n\nfunction logger(logLevel: LOG_LEVEL = LOG_LEVEL.warn): Logger {\n  function setLogLevel(level: LOG_LEVEL) {\n    if (LOG_LEVEL[level]) {\n      logLevel = level;\n    } else {\n      logLevel = LOG_LEVEL.warn;\n    }\n  }\n\n  /**\n   * Log errors, with or without error object\n   */\n  function error(message: string, error?: unknown, ...extraParams: unknown[]) {\n    if (logLevel >= LOG_LEVEL.error && typeof console !== 'undefined') {\n      const logMsg = label + message + '\\n';\n      if (error) {\n        console.error(logMsg + '\\n', error, ...extraParams);\n      } else {\n        console.error(logMsg, ...extraParams);\n      }\n    }\n  }\n\n  /**\n   * Log warnings, with or without error object\n   */\n  function warn(message: string, error?: unknown, ...extraParams: unknown[]) {\n    if (logLevel >= LOG_LEVEL.warn && typeof console !== 'undefined') {\n      const logMsg = label + message;\n      if (error) {\n        console.warn(logMsg + '\\n', error, ...extraParams);\n      } else {\n        console.warn(logMsg, ...extraParams);\n      }\n    }\n  }\n\n  /**\n   * Log debug messages\n   */\n  function debug(message: string, ...extraParams: unknown[]) {\n    if (logLevel >= LOG_LEVEL.debug && typeof console !== 'undefined') {\n      console.debug(label + message, ...extraParams);\n    }\n  }\n\n  /**\n   * Log info messages\n   */\n  function info(message: string, ...extraParams: unknown[]) {\n    if (logLevel >= LOG_LEVEL.info && typeof console !== 'undefined') {\n      console.info(label + message, ...extraParams);\n    }\n  }\n\n  return { setLogLevel, warn, error, debug, info };\n}\n","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport { PayloadBuilder, Payload, isNonEmptyJson } from './payload';\nimport { SelfDescribingJson } from './core';\nimport { CorePlugin } from './plugins';\nimport { LOG } from './logger';\n\n/**\n * Argument for {@link ContextGenerator} and {@link ContextFilter} callback\n */\nexport interface ContextEvent {\n  /** The event payload */\n  event: Payload;\n  /** The event type\n   * @example 'page_view'\n   */\n  eventType: string;\n  /** The event schema where one is available, or empty string\n   * @example 'iglu:com.snowplowanalytics.snowplow/ad_impression/jsonschema/1-0-0'\n   */\n  eventSchema: string;\n}\n\n/**\n * A context generator is a user-supplied callback that is evaluated for each event\n * to allow an additional context to be dynamically attached to the event\n * @param args - - Object which contains the event information to help decide what should be included in the returned Context\n */\nexport type ContextGenerator = (args?: ContextEvent) => SelfDescribingJson | SelfDescribingJson[] | undefined;\n\n/**\n * A context filter is a user-supplied callback that is evaluated for each event\n * to determine if the context associated with the filter should be attached to the event\n * @param args - - Object that contains: event, eventType, eventSchema\n */\nexport type ContextFilter = (args?: ContextEvent) => boolean;\n\n/**\n * A context primitive is either a self-describing JSON or a context generator\n */\nexport type ContextPrimitive = SelfDescribingJson | ContextGenerator;\n\n/**\n * A filter provider is a tuple that has two parts: a context filter and the context primitive(s)\n * If the context filter evaluates to true, the tracker will attach the context primitive(s)\n */\nexport type FilterProvider = [ContextFilter, Array<ContextPrimitive> | ContextPrimitive];\n\n/**\n * A ruleset has accept or reject properties that contain rules for matching Iglu schema URIs\n */\nexport interface RuleSet {\n  accept?: Array<string> | string;\n  reject?: Array<string> | string;\n}\n\n/**\n * A ruleset provider is aa tuple that has two parts: a ruleset and the context primitive(s)\n * If the ruleset allows the current event schema URI, the tracker will attach the context primitive(s)\n */\nexport type RuleSetProvider = [RuleSet, Array<ContextPrimitive> | ContextPrimitive];\n\n/**\n * Conditional context providers are two element arrays used to decide when to attach contexts, where:\n * - the first element is some conditional criterion\n * - the second element is any number of context primitives\n */\nexport type ConditionalContextProvider = FilterProvider | RuleSetProvider;\n\n/**\n * A Dynamic context is an array of Self Describing JSON contexts, or an array of callbacks which return Self Describing JSON contexts\n * The array can be a mix of both contexts and callbacks which generate contexts\n */\nexport type DynamicContext = Array<SelfDescribingJson | ((...params: any[]) => SelfDescribingJson | null)>;\n\nexport interface GlobalContexts {\n  /**\n   * Returns all Context Primitives\n   */\n  getGlobalPrimitives(): Array<ContextPrimitive>;\n\n  /**\n   * Returns all Conditional Contexts\n   */\n  getConditionalProviders(): Array<ConditionalContextProvider>;\n\n  /**\n   * Adds conditional or primitive global contexts\n   * @param contexts - An Array of either Conditional Contexts or Primitive Contexts\n   */\n  addGlobalContexts(\n    contexts:\n      | Array<ConditionalContextProvider | ContextPrimitive>\n      | Record<string, ConditionalContextProvider | ContextPrimitive>\n  ): void;\n\n  /**\n   * Removes all global contexts\n   */\n  clearGlobalContexts(): void;\n\n  /**\n   * Removes previously added global context, performs a deep comparison of the contexts or conditional contexts\n   * @param contexts - An Array of either Condition Contexts or Primitive Contexts\n   */\n  removeGlobalContexts(contexts: Array<ConditionalContextProvider | ContextPrimitive | string>): void;\n\n  /**\n   * Returns all applicable global contexts for a specified event\n   * @param event - The event to check for applicable global contexts for\n   */\n  getApplicableContexts(event: PayloadBuilder): Array<SelfDescribingJson>;\n}\n\n/**\n * Contains helper functions to aid in the addition and removal of Global Contexts\n */\nexport function globalContexts(): GlobalContexts {\n  let globalPrimitives: Array<ContextPrimitive> = [];\n  let conditionalProviders: Array<ConditionalContextProvider> = [];\n  let namedPrimitives: Record<string, ContextPrimitive> = {};\n  let namedConditionalProviders: Record<string, ConditionalContextProvider> = {};\n\n  /**\n   * Returns all applicable global contexts for a specified event\n   * @param event - The event to check for applicable global contexts for\n   * @returns An array of contexts\n   */\n  const assembleAllContexts = (event: PayloadBuilder): Array<SelfDescribingJson> => {\n    const eventSchema = getUsefulSchema(event);\n    const eventType = getEventType(event);\n    const contexts: Array<SelfDescribingJson> = [];\n    const generatedPrimitives = generatePrimitives(\n      globalPrimitives.concat(Object.values(namedPrimitives)),\n      event,\n      eventType,\n      eventSchema\n    );\n    contexts.push(...generatedPrimitives);\n\n    const generatedConditionals = generateConditionals(\n      conditionalProviders.concat(Object.values(namedConditionalProviders)),\n      event,\n      eventType,\n      eventSchema\n    );\n    contexts.push(...generatedConditionals);\n\n    return contexts;\n  };\n\n  return {\n    getGlobalPrimitives(): Array<ContextPrimitive> {\n      return globalPrimitives.concat(Object.values(namedPrimitives));\n    },\n\n    getConditionalProviders(): Array<ConditionalContextProvider> {\n      return conditionalProviders.concat(Object.values(namedConditionalProviders));\n    },\n\n    addGlobalContexts(\n      contexts:\n        | Array<ConditionalContextProvider | ContextPrimitive>\n        | Record<string, ConditionalContextProvider | ContextPrimitive>\n    ): void {\n      if (Array.isArray(contexts)) {\n        const acceptedConditionalContexts: ConditionalContextProvider[] = [];\n        const acceptedContextPrimitives: ContextPrimitive[] = [];\n        for (const context of contexts) {\n          if (isConditionalContextProvider(context)) {\n            acceptedConditionalContexts.push(context);\n          } else if (isContextPrimitive(context)) {\n            acceptedContextPrimitives.push(context);\n          }\n        }\n        globalPrimitives = globalPrimitives.concat(acceptedContextPrimitives);\n        conditionalProviders = conditionalProviders.concat(acceptedConditionalContexts);\n      } else {\n        for (const [name, context] of Object.entries(contexts)) {\n          if (isConditionalContextProvider(context)) {\n            namedConditionalProviders[name] = context;\n          } else if (isContextPrimitive(context)) {\n            namedPrimitives[name] = context;\n          }\n        }\n      }\n    },\n\n    clearGlobalContexts(): void {\n      conditionalProviders = [];\n      globalPrimitives = [];\n      namedConditionalProviders = {};\n      namedPrimitives = {};\n    },\n\n    removeGlobalContexts(contexts: Array<ConditionalContextProvider | ContextPrimitive | string>): void {\n      for (const context of contexts) {\n        if (typeof context === 'string') {\n          delete namedConditionalProviders[context];\n          delete namedPrimitives[context];\n        } else if (isConditionalContextProvider(context)) {\n          conditionalProviders = conditionalProviders.filter((item) => !compareProvider(context, item));\n        } else if (isContextPrimitive(context)) {\n          globalPrimitives = globalPrimitives.filter((item) => !compareProvider(context, item));\n        }\n      }\n    },\n\n    getApplicableContexts(event: PayloadBuilder): Array<SelfDescribingJson> {\n      return assembleAllContexts(event);\n    },\n  };\n}\n\nexport interface PluginContexts {\n  /**\n   * Returns list of contexts from all active plugins\n   */\n  addPluginContexts: <T = Record<string, unknown>>(\n    additionalContexts?: SelfDescribingJson<T>[] | null\n  ) => SelfDescribingJson[];\n}\n\nexport function pluginContexts(plugins: Array<CorePlugin>): PluginContexts {\n  /**\n   * Add common contexts to every event\n   *\n   * @param array - additionalContexts List of user-defined contexts\n   * @returns userContexts combined with commonContexts\n   */\n  return {\n    addPluginContexts: <T = Record<string, unknown>>(additionalContexts?: SelfDescribingJson<T>[] | null) => {\n      const combinedContexts: SelfDescribingJson<T | Record<string, unknown>>[] = additionalContexts\n        ? [...additionalContexts]\n        : [];\n\n      plugins.forEach((plugin) => {\n        try {\n          if (plugin.contexts) {\n            combinedContexts.push(...plugin.contexts());\n          }\n        } catch (ex) {\n          LOG.error('Error adding plugin contexts', ex);\n        }\n      });\n\n      return combinedContexts as SelfDescribingJson[];\n    },\n  };\n}\n\n/**\n * Find dynamic context generating functions and return their results to be merged into the static contexts\n * Combine an array of unchanging contexts with the result of a context-creating function\n *\n * @param dynamicOrStaticContexts - Array of custom context Objects or custom context generating functions\n * @param Parameters - to pass to dynamic context callbacks\n * @returns An array of Self Describing JSON context\n */\nexport function resolveDynamicContext(\n  dynamicOrStaticContexts?: DynamicContext | null,\n  ...extraParams: any[]\n): Array<SelfDescribingJson> {\n  return (\n    (dynamicOrStaticContexts\n      ?.map(function (context) {\n        if (typeof context === 'function') {\n          try {\n            return context(...extraParams);\n          } catch (e) {\n            //TODO: provide warning\n            return undefined;\n          }\n        } else {\n          return context;\n        }\n      })\n      .filter(Boolean) as Array<SelfDescribingJson>) ?? []\n  );\n}\n\n/**\n * Slices a schema into its composite parts. Useful for ruleset filtering.\n * @param input - A schema string\n * @returns The vendor, schema name, major, minor and patch information of a schema string\n */\nexport function getSchemaParts(input: string): Array<string> | undefined {\n  const re = new RegExp(\n    '^iglu:([a-zA-Z0-9-_.]+)/([a-zA-Z0-9-_]+)/jsonschema/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$'\n  );\n  const matches = re.exec(input);\n  if (matches !== null) return matches.slice(1, 6);\n  return undefined;\n}\n\n/**\n * Validates the vendor section of a schema string contains allowed wildcard values\n * @param parts - Array of parts from a schema string\n * @returns Whether the vendor validation parts are a valid combination\n */\nexport function validateVendorParts(parts: Array<string>): boolean {\n  if (parts[0] === '*' || parts[1] === '*') {\n    return false; // no wildcard in first or second part\n  }\n  if (parts.slice(2).length > 0) {\n    let asterisk = false;\n    for (const part of parts.slice(2)) {\n      if (part === '*')\n        // mark when we've found a wildcard\n        asterisk = true;\n      else if (asterisk)\n        // invalid if alpha parts come after wildcard\n        return false;\n    }\n    return true;\n  } else if (parts.length == 2) return true;\n\n  return false;\n}\n\n/**\n * Validates the vendor part of a schema string is valid for a rule set\n * @param input - Vendor part of a schema string\n * @returns Whether the vendor validation string is valid\n */\nexport function validateVendor(input: string): boolean {\n  const parts = input.split('.');\n  if (parts && parts.length > 1) return validateVendorParts(parts);\n  return false;\n}\n\n/**\n * Checks for validity of input and returns all the sections of a schema string that are used to match rules in a ruleset\n * @param input - A Schema string\n * @returns The sections of a schema string that are used to match rules in a ruleset\n */\nexport function getRuleParts(input: string): Array<string> | undefined {\n  const re = new RegExp(\n    '^iglu:((?:(?:[a-zA-Z0-9-_]+|\\\\*).)+(?:[a-zA-Z0-9-_]+|\\\\*))/([a-zA-Z0-9-_.]+|\\\\*)/jsonschema/([1-9][0-9]*|\\\\*)-(0|[1-9][0-9]*|\\\\*)-(0|[1-9][0-9]*|\\\\*)$'\n  );\n  const matches = re.exec(input);\n  if (matches !== null && validateVendor(matches[1])) return matches.slice(1, 6);\n  return undefined;\n}\n\n/**\n * Ensures the rules specified in a schema string of a ruleset are valid\n * @param input - A Schema string\n * @returns if there rule is valid\n */\nexport function isValidRule(input: string): boolean {\n  const ruleParts = getRuleParts(input);\n  if (ruleParts) {\n    const vendor = ruleParts[0];\n    return ruleParts.length === 5 && validateVendor(vendor);\n  }\n  return false;\n}\n\n/**\n * Check if a variable is an Array containing only strings\n * @param input - The variable to validate\n * @returns True if the input is an array containing only strings\n */\nexport function isStringArray(input: unknown): input is Array<string> {\n  return (\n    Array.isArray(input) &&\n    input.every((x) => {\n      return typeof x === 'string';\n    })\n  );\n}\n\n/**\n * Validates whether a rule set is an array of valid ruleset strings\n * @param input - The Array of rule set arguments\n * @returns True is the input is an array of valid rules\n */\nexport function isValidRuleSetArg(input: unknown): boolean {\n  if (isStringArray(input))\n    return input.every((x: string) => {\n      return isValidRule(x);\n    });\n  else if (typeof input === 'string') return isValidRule(input);\n  return false;\n}\n\n/**\n * Check if a variable is a valid, non-empty Self Describing JSON\n * @param input - The variable to validate\n * @returns True if a valid Self Describing JSON\n */\nexport function isSelfDescribingJson(input: unknown): input is SelfDescribingJson {\n  const sdj = input as SelfDescribingJson;\n  if (isNonEmptyJson(sdj))\n    if ('schema' in sdj && 'data' in sdj) return typeof sdj.schema === 'string' && typeof sdj.data === 'object';\n  return false;\n}\n\n/**\n * Validates if the input object contains the expected properties of a ruleset\n * @param input - The object containing a rule set\n * @returns True if a valid rule set\n */\nexport function isRuleSet(input: unknown): input is Record<string, unknown> {\n  const ruleSet = input as Record<string, unknown>;\n  let ruleCount = 0;\n  if (input != null && typeof input === 'object' && !Array.isArray(input)) {\n    if (Object.prototype.hasOwnProperty.call(ruleSet, 'accept')) {\n      if (isValidRuleSetArg(ruleSet['accept'])) {\n        ruleCount += 1;\n      } else {\n        return false;\n      }\n    }\n    if (Object.prototype.hasOwnProperty.call(ruleSet, 'reject')) {\n      if (isValidRuleSetArg(ruleSet['reject'])) {\n        ruleCount += 1;\n      } else {\n        return false;\n      }\n    }\n    // if either 'reject' or 'accept' or both exists,\n    // we have a valid ruleset\n    return ruleCount > 0 && ruleCount <= 2;\n  }\n  return false;\n}\n\n/**\n * Validates if the function can be a valid context generator function\n * @param input - The function to be validated\n */\nexport function isContextCallbackFunction(input: unknown): boolean {\n  return typeof input === 'function' && input.length <= 1;\n}\n\n/**\n * Validates if the function can be a valid context primitive function or self describing json\n * @param input - The function or orbject to be validated\n * @returns True if either a Context Generator or Self Describing JSON\n */\nexport function isContextPrimitive(input: unknown): input is ContextPrimitive {\n  return isContextCallbackFunction(input) || isSelfDescribingJson(input);\n}\n\n/**\n * Validates if an array is a valid shape to be a Filter Provider\n * @param input - The Array of Context filter callbacks\n */\nexport function isFilterProvider(input: unknown): boolean {\n  if (Array.isArray(input)) {\n    if (input.length === 2) {\n      if (Array.isArray(input[1])) {\n        return isContextCallbackFunction(input[0]) && input[1].every(isContextPrimitive);\n      }\n      return isContextCallbackFunction(input[0]) && isContextPrimitive(input[1]);\n    }\n  }\n  return false;\n}\n\n/**\n * Validates if an array is a valid shape to be an array of rule sets\n * @param input - The Array of Rule Sets\n */\nexport function isRuleSetProvider(input: unknown): boolean {\n  if (Array.isArray(input) && input.length === 2) {\n    if (!isRuleSet(input[0])) return false;\n    if (Array.isArray(input[1])) return input[1].every(isContextPrimitive);\n    return isContextPrimitive(input[1]);\n  }\n  return false;\n}\n\n/**\n * Checks if an input array is either a filter provider or a rule set provider\n * @param input - An array of filter providers or rule set providers\n * @returns Whether the array is a valid {@link ConditionalContextProvider}\n */\nexport function isConditionalContextProvider(input: unknown): input is ConditionalContextProvider {\n  return isFilterProvider(input) || isRuleSetProvider(input);\n}\n\n/**\n * Checks if a given schema matches any rules within the provided rule set\n * @param ruleSet - The rule set containing rules to match schema against\n * @param schema - The schema to be matched against the rule set\n */\nexport function matchSchemaAgainstRuleSet(ruleSet: RuleSet, schema: string): boolean {\n  let rejectCount = 0;\n  let acceptCount = 0;\n  const acceptRules = ruleSet['accept'];\n  if (Array.isArray(acceptRules)) {\n    if ((ruleSet.accept as Array<string>).some((rule) => matchSchemaAgainstRule(rule, schema))) {\n      acceptCount++;\n    }\n  } else if (typeof acceptRules === 'string') {\n    if (matchSchemaAgainstRule(acceptRules, schema)) {\n      acceptCount++;\n    }\n  }\n\n  const rejectRules = ruleSet['reject'];\n  if (Array.isArray(rejectRules)) {\n    if ((ruleSet.reject as Array<string>).some((rule) => matchSchemaAgainstRule(rule, schema))) {\n      rejectCount++;\n    }\n  } else if (typeof rejectRules === 'string') {\n    if (matchSchemaAgainstRule(rejectRules, schema)) {\n      rejectCount++;\n    }\n  }\n\n  if (acceptCount > 0 && rejectCount === 0) {\n    return true;\n  } else if (acceptCount === 0 && rejectCount > 0) {\n    return false;\n  }\n\n  return false;\n}\n\n/**\n * Checks if a given schema matches a specific rule from a rule set\n * @param rule - The rule to match schema against\n * @param schema - The schema to be matched against the rule\n */\nexport function matchSchemaAgainstRule(rule: string, schema: string): boolean {\n  if (!isValidRule(rule)) return false;\n  const ruleParts = getRuleParts(rule);\n  const schemaParts = getSchemaParts(schema);\n  if (ruleParts && schemaParts) {\n    if (!matchVendor(ruleParts[0], schemaParts[0])) return false;\n    for (let i = 1; i < 5; i++) {\n      if (!matchPart(ruleParts[i], schemaParts[i])) return false;\n    }\n    return true; // if it hasn't failed, it passes\n  }\n  return false;\n}\n\nfunction matchVendor(rule: string, vendor: string): boolean {\n  // rule and vendor must have same number of elements\n  const vendorParts = vendor.split('.');\n  const ruleParts = rule.split('.');\n  if (vendorParts && ruleParts) {\n    if (vendorParts.length !== ruleParts.length) return false;\n    for (let i = 0; i < ruleParts.length; i++) {\n      if (!matchPart(vendorParts[i], ruleParts[i])) return false;\n    }\n    return true;\n  }\n  return false;\n}\n\nfunction matchPart(rule: string, schema: string): boolean {\n  // parts should be the string nested between slashes in the URI: /example/\n  return (rule && schema && rule === '*') || rule === schema;\n}\n\n// Returns the \"useful\" schema, i.e. what would someone want to use to identify events.\n// For some events this is the 'e' property but for unstructured events, this is the\n// 'schema' from the 'ue_px' field.\nfunction getUsefulSchema(sb: PayloadBuilder): string {\n  let eventJson = sb.getJson();\n  for (const json of eventJson) {\n    if (json.keyIfEncoded === 'ue_px' && typeof json.json['data'] === 'object') {\n      const schema = (json.json['data'] as Record<string, unknown>)['schema'];\n      if (typeof schema == 'string') {\n        return schema;\n      }\n    }\n  }\n  return '';\n}\n\nfunction getEventType(payloadBuilder: PayloadBuilder): string {\n  const eventType = payloadBuilder.getPayload()['e'];\n  return typeof eventType === 'string' ? eventType : '';\n}\n\nfunction buildGenerator(\n  generator: ContextGenerator,\n  event: PayloadBuilder,\n  eventType: string,\n  eventSchema: string\n): SelfDescribingJson | Array<SelfDescribingJson> | undefined {\n  let contextGeneratorResult: SelfDescribingJson | Array<SelfDescribingJson> | undefined = undefined;\n  try {\n    // try to evaluate context generator\n    const args = {\n      event: event.getPayload(),\n      eventType: eventType,\n      eventSchema: eventSchema,\n    };\n    contextGeneratorResult = generator(args);\n    // determine if the produced result is a valid SDJ\n    if (Array.isArray(contextGeneratorResult) && contextGeneratorResult.every(isSelfDescribingJson)) {\n      return contextGeneratorResult;\n    } else if (isSelfDescribingJson(contextGeneratorResult)) {\n      return contextGeneratorResult;\n    } else {\n      return undefined;\n    }\n  } catch (error) {\n    contextGeneratorResult = undefined;\n  }\n  return contextGeneratorResult;\n}\n\nfunction normalizeToArray<T>(input: Array<T> | T): Array<T> {\n  if (Array.isArray(input)) {\n    return input;\n  }\n  return Array.of(input);\n}\n\nfunction generatePrimitives(\n  contextPrimitives: Array<ContextPrimitive> | ContextPrimitive,\n  event: PayloadBuilder,\n  eventType: string,\n  eventSchema: string\n): Array<SelfDescribingJson> {\n  const normalizedInputs: Array<ContextPrimitive> = normalizeToArray(contextPrimitives);\n  const partialEvaluate = (primitive: ContextPrimitive) => {\n    const result = evaluatePrimitive(primitive, event, eventType, eventSchema);\n    if (result && result.length !== 0) {\n      return result;\n    }\n    return undefined;\n  };\n  const generatedContexts = normalizedInputs.map(partialEvaluate);\n  return ([] as Array<SelfDescribingJson>).concat(\n    ...(generatedContexts.filter((c) => c != null && c.filter(Boolean)) as Array<Array<SelfDescribingJson>>)\n  );\n}\n\nfunction evaluatePrimitive(\n  contextPrimitive: ContextPrimitive,\n  event: PayloadBuilder,\n  eventType: string,\n  eventSchema: string\n): Array<SelfDescribingJson> | undefined {\n  if (isSelfDescribingJson(contextPrimitive)) {\n    return [contextPrimitive as SelfDescribingJson];\n  } else if (isContextCallbackFunction(contextPrimitive)) {\n    const generatorOutput = buildGenerator(contextPrimitive as ContextGenerator, event, eventType, eventSchema);\n    if (isSelfDescribingJson(generatorOutput)) {\n      return [generatorOutput as SelfDescribingJson];\n    } else if (Array.isArray(generatorOutput)) {\n      return generatorOutput;\n    }\n  }\n  return undefined;\n}\n\nfunction evaluateProvider(\n  provider: ConditionalContextProvider,\n  event: PayloadBuilder,\n  eventType: string,\n  eventSchema: string\n): Array<SelfDescribingJson> {\n  if (isFilterProvider(provider)) {\n    const filter: ContextFilter = (provider as FilterProvider)[0];\n    let filterResult = false;\n    try {\n      const args = {\n        event: event.getPayload(),\n        eventType: eventType,\n        eventSchema: eventSchema,\n      };\n      filterResult = filter(args);\n    } catch (error) {\n      filterResult = false;\n    }\n    if (filterResult === true) {\n      return generatePrimitives((provider as FilterProvider)[1], event, eventType, eventSchema);\n    }\n  } else if (isRuleSetProvider(provider)) {\n    if (matchSchemaAgainstRuleSet((provider as RuleSetProvider)[0], eventSchema)) {\n      return generatePrimitives((provider as RuleSetProvider)[1], event, eventType, eventSchema);\n    }\n  }\n  return [];\n}\n\nfunction compareProviderPart(\n  a: ContextFilter | RuleSet | ContextPrimitive,\n  b: ContextFilter | RuleSet | ContextPrimitive\n): boolean {\n  if (typeof a === 'function') return a === b;\n  return JSON.stringify(a) === JSON.stringify(b);\n}\n\nfunction compareProvider(\n  a: ConditionalContextProvider | ContextPrimitive,\n  b: ConditionalContextProvider | ContextPrimitive\n): boolean {\n  if (isConditionalContextProvider(a)) {\n    if (!isConditionalContextProvider(b)) return false;\n    const [ruleA, primitivesA] = a;\n    const [ruleB, primitivesB] = b;\n\n    if (!compareProviderPart(ruleA, ruleB)) return false;\n    if (Array.isArray(primitivesA)) {\n      if (!Array.isArray(primitivesB)) return false;\n      if (primitivesA.length !== primitivesB.length) return false;\n      return primitivesA.reduce<boolean>((matches, a, i) => matches && compareProviderPart(a, primitivesB[i]), true);\n    } else {\n      if (Array.isArray(primitivesB)) return false;\n      return compareProviderPart(primitivesA, primitivesB);\n    }\n  } else if (isContextPrimitive(a)) {\n    if (!isContextPrimitive(b)) return false;\n    return compareProviderPart(a, b);\n  }\n\n  return false;\n}\n\nfunction generateConditionals(\n  providers: Array<ConditionalContextProvider> | ConditionalContextProvider,\n  event: PayloadBuilder,\n  eventType: string,\n  eventSchema: string\n): Array<SelfDescribingJson> {\n  const normalizedInput: Array<ConditionalContextProvider> = normalizeToArray(providers);\n  const partialEvaluate = (provider: ConditionalContextProvider) => {\n    const result = evaluateProvider(provider, event, eventType, eventSchema);\n    if (result && result.length !== 0) {\n      return result;\n    }\n    return undefined;\n  };\n  const generatedContexts = normalizedInput.map(partialEvaluate);\n  return ([] as Array<SelfDescribingJson>).concat(\n    ...(generatedContexts.filter((c) => c != null && c.filter(Boolean)) as Array<Array<SelfDescribingJson>>)\n  );\n}\n","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport { v4 as uuid } from 'uuid';\nimport { payloadBuilder, PayloadBuilder, Payload, isJson, payloadJsonProcessor } from './payload';\nimport {\n  globalContexts,\n  ConditionalContextProvider,\n  ContextPrimitive,\n  GlobalContexts,\n  PluginContexts,\n  pluginContexts,\n} from './contexts';\nimport { CorePlugin } from './plugins';\nimport { LOG } from './logger';\n\n/**\n * Export interface for any Self-Describing JSON such as context or Self Describing events\n * @typeParam T - The type of the data object within a SelfDescribingJson\n */\nexport type SelfDescribingJson<T = Record<string, unknown>> = {\n  /**\n   * The schema string\n   * @example 'iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0'\n   */\n  schema: string;\n  /**\n   * The data object which should conform to the supplied schema\n   */\n  data: T extends any[] ? never : T extends {} ? T : never;\n};\n\n/**\n * Export interface for any Self-Describing JSON which has the data attribute as an array\n * @typeParam T - The type of the data object within the SelfDescribingJson data array\n */\nexport type SelfDescribingJsonArray<T = Record<string, unknown>> = {\n  /**\n   * The schema string\n   * @example 'iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-1'\n   */\n  schema: string;\n  /**\n   * The data array which should conform to the supplied schema\n   */\n  data: (T extends SelfDescribingJson ? T : SelfDescribingJson<T>)[];\n};\n\n/**\n * Algebraic datatype representing possible timestamp type choice\n */\nexport type Timestamp = TrueTimestamp | DeviceTimestamp | number;\n\n/**\n * A representation of a True Timestamp (ttm)\n */\nexport interface TrueTimestamp {\n  readonly type: 'ttm';\n  readonly value: number;\n}\n\n/**\n * A representation of a Device Timestamp (dtm)\n */\nexport interface DeviceTimestamp {\n  readonly type: 'dtm';\n  readonly value: number;\n}\n\n/**\n * Pair of timestamp type ready to be included to payload\n */\ntype TimestampPayload = TrueTimestamp | DeviceTimestamp;\n\n/**\n * Transform optional/old-behavior number timestamp into`Timestamp` ADT\n *\n * @param timestamp - optional number or timestamp object\n * @returns correct timestamp object\n */\nfunction getTimestamp(timestamp?: Timestamp | null): TimestampPayload {\n  if (timestamp == null) {\n    return { type: 'dtm', value: new Date().getTime() };\n  } else if (typeof timestamp === 'number') {\n    return { type: 'dtm', value: timestamp };\n  } else if (timestamp.type === 'ttm') {\n    // We can return timestamp here, but this is safer fallback\n    return { type: 'ttm', value: timestamp.value };\n  } else {\n    return { type: 'dtm', value: timestamp.value || new Date().getTime() };\n  }\n}\n\n/** Additional data points to set when tracking an event */\nexport interface CommonEventProperties<T = Record<string, unknown>> {\n  /** Add context to an event by setting an Array of Self Describing JSON */\n  context?: Array<SelfDescribingJson<T>> | null;\n  /** Set the true timestamp or overwrite the device sent timestamp on an event */\n  timestamp?: Timestamp | null;\n}\n\n/**\n * Export interface containing all Core functions\n */\nexport interface TrackerCore {\n  /**\n   * Call with a payload from a buildX function\n   * Adds context and payloadPairs name-value pairs to the payload\n   * Applies the callback to the built payload\n   *\n   * @param pb - Payload\n   * @param context - Custom contexts relating to the event\n   * @param timestamp - Timestamp of the event\n   * @returns Payload after the callback is applied or undefined if the event is skipped\n   */\n  track: (\n    /** A PayloadBuilder created by one of the `buildX` functions */\n    pb: PayloadBuilder,\n    /** The additional contextual information related to the event */\n    context?: Array<SelfDescribingJson> | null,\n    /** Timestamp override */\n    timestamp?: Timestamp | null\n  ) => Payload | undefined;\n\n  /**\n   * Set a persistent key-value pair to be added to every payload\n   *\n   * @param key - Field name\n   * @param value - Field value\n   */\n  addPayloadPair: (key: string, value: unknown) => void;\n\n  /**\n   * Get current base64 encoding state\n   */\n  getBase64Encoding(): boolean;\n\n  /**\n   * Turn base 64 encoding on or off\n   *\n   * @param encode - Whether to encode payload\n   */\n  setBase64Encoding(encode: boolean): void;\n\n  /**\n   * Merges a dictionary into payloadPairs\n   *\n   * @param dict - Adds a new payload dictionary to the existing one\n   */\n  addPayloadDict(dict: Payload): void;\n\n  /**\n   * Replace payloadPairs with a new dictionary\n   *\n   * @param dict - Resets all current payload pairs with a new dictionary of pairs\n   */\n  resetPayloadPairs(dict: Payload): void;\n\n  /**\n   * Set the tracker version\n   *\n   * @param version - The version of the current tracker\n   */\n  setTrackerVersion(version: string): void;\n\n  /**\n   * Set the tracker namespace\n   *\n   * @param name - The trackers namespace\n   */\n  setTrackerNamespace(name: string): void;\n\n  /**\n   * Set the application ID\n   *\n   * @param appId - An application ID which identifies the current application\n   */\n  setAppId(appId: string): void;\n\n  /**\n   * Set the platform\n   *\n   * @param value - A valid Snowplow platform value\n   */\n  setPlatform(value: string): void;\n\n  /**\n   * Set the user ID\n   *\n   * @param userId - The custom user id\n   */\n  setUserId(userId: string): void;\n\n  /**\n   * Set the screen resolution\n   *\n   * @param width - screen resolution width\n   * @param height - screen resolution height\n   */\n  setScreenResolution(width: string, height: string): void;\n\n  /**\n   * Set the viewport dimensions\n   *\n   * @param width - viewport width\n   * @param height - viewport height\n   */\n  setViewport(width: string, height: string): void;\n\n  /**\n   * Set the color depth\n   *\n   * @param depth - A color depth value as string\n   */\n  setColorDepth(depth: string): void;\n\n  /**\n   * Set the timezone\n   *\n   * @param timezone - A timezone string\n   */\n  setTimezone(timezone: string): void;\n\n  /**\n   * Set the language\n   *\n   * @param lang - A language string e.g. 'en-UK'\n   */\n  setLang(lang: string): void;\n\n  /**\n   * Set the IP address\n   *\n   * @param ip - An IP Address string\n   */\n  setIpAddress(ip: string): void;\n\n  /**\n   * Set the Useragent\n   *\n   * @param useragent - A useragent string\n   */\n  setUseragent(useragent: string): void;\n\n  /**\n   * Adds contexts globally, contexts added here will be attached to all applicable events\n   * @param contexts - An array containing either contexts or a conditional contexts\n   */\n  addGlobalContexts(\n    contexts:\n      | Array<ConditionalContextProvider | ContextPrimitive>\n      | Record<string, ConditionalContextProvider | ContextPrimitive>\n  ): void;\n\n  /**\n   * Removes all global contexts\n   */\n  clearGlobalContexts(): void;\n\n  /**\n   * Removes previously added global context, performs a deep comparison of the contexts or conditional contexts\n   * @param contexts - An array containing either contexts or a conditional contexts\n   */\n  removeGlobalContexts(contexts: Array<ConditionalContextProvider | ContextPrimitive | string>): void;\n\n  /**\n   * Add a plugin into the plugin collection after Core has already been initialised\n   * @param configuration - The plugin to add\n   */\n  addPlugin(configuration: CorePluginConfiguration): void;\n}\n\n/**\n * The configuration object for the tracker core library\n */\nexport interface CoreConfiguration {\n  /* Should payloads be base64 encoded when built */\n  base64?: boolean;\n  /* A list of all the plugins to include at load */\n  corePlugins?: Array<CorePlugin>;\n  /* The callback which will fire each time `track()` is called */\n  callback?: (PayloadData: PayloadBuilder) => void;\n}\n\n/**\n * The configuration of the plugin to add\n */\nexport interface CorePluginConfiguration {\n  /* The plugin to add */\n  plugin: CorePlugin;\n}\n\n/**\n * Create a tracker core object\n *\n * @param base64 - Whether to base 64 encode contexts and self describing event JSONs\n * @param corePlugins - The core plugins to be processed with each event\n * @param callback - Function applied to every payload dictionary object\n * @returns Tracker core\n */\nexport function trackerCore(configuration: CoreConfiguration = {}): TrackerCore {\n  function newCore(base64: boolean, corePlugins: Array<CorePlugin>, callback?: (PayloadData: PayloadBuilder) => void) {\n    const pluginContextsHelper: PluginContexts = pluginContexts(corePlugins),\n      globalContextsHelper: GlobalContexts = globalContexts();\n\n    let encodeBase64 = base64,\n      payloadPairs: Payload = {}; // Dictionary of key-value pairs which get added to every payload, e.g. tracker version\n\n    /**\n     * Wraps an array of custom contexts in a self-describing JSON\n     *\n     * @param contexts - Array of custom context self-describing JSONs\n     * @returns Outer JSON\n     */\n    function completeContexts(\n      contexts?: Array<SelfDescribingJson>\n    ): SelfDescribingJsonArray<SelfDescribingJson> | undefined {\n      if (contexts && contexts.length) {\n        return {\n          schema: 'iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0',\n          data: contexts,\n        };\n      }\n      return undefined;\n    }\n\n    /**\n     * Adds all global contexts to a contexts array\n     *\n     * @param pb - PayloadData\n     * @param contexts - Custom contexts relating to the event\n     */\n    function attachGlobalContexts(\n      pb: PayloadBuilder,\n      contexts?: Array<SelfDescribingJson> | null\n    ): Array<SelfDescribingJson> {\n      const applicableContexts: Array<SelfDescribingJson> = globalContextsHelper.getApplicableContexts(pb);\n      const returnedContexts: Array<SelfDescribingJson> = [];\n      if (contexts && contexts.length) {\n        returnedContexts.push(...contexts);\n      }\n      if (applicableContexts && applicableContexts.length) {\n        returnedContexts.push(...applicableContexts);\n      }\n      return returnedContexts;\n    }\n\n    /**\n     * Gets called by every trackXXX method\n     * Adds context and payloadPairs name-value pairs to the payload\n     * Applies the callback to the built payload\n     *\n     * @param pb - Payload\n     * @param context - Custom contexts relating to the event\n     * @param timestamp - Timestamp of the event\n     * @returns Payload after the callback is applied or undefined if the event is skipped\n     */\n    function track<C = Record<string, unknown>>(\n      pb: PayloadBuilder,\n      context?: Array<SelfDescribingJson<C>> | null,\n      timestamp?: Timestamp | null\n    ): Payload | undefined {\n      pb.withJsonProcessor(payloadJsonProcessor(encodeBase64));\n      pb.add('eid', uuid());\n      pb.addDict(payloadPairs);\n      const tstamp = getTimestamp(timestamp);\n      pb.add(tstamp.type, tstamp.value.toString());\n      const allContexts = attachGlobalContexts(pb, pluginContextsHelper.addPluginContexts(context));\n      const wrappedContexts = completeContexts(allContexts);\n      if (wrappedContexts !== undefined) {\n        pb.addJson('cx', 'co', wrappedContexts);\n      }\n\n      corePlugins.forEach((plugin) => {\n        try {\n          if (plugin.beforeTrack) {\n            plugin.beforeTrack(pb);\n          }\n        } catch (ex) {\n          LOG.error('Plugin beforeTrack', ex);\n        }\n      });\n\n      // Call the filter on plugins to determine if the event should be tracked\n      const skip = corePlugins.find((plugin) => {\n        try {\n          return plugin.filter && plugin.filter(pb.build()) === false;\n        } catch (ex) {\n          LOG.error('Plugin filter', ex);\n          return false;\n        }\n      });\n      if (skip) {\n        return undefined;\n      }\n\n      if (typeof callback === 'function') {\n        callback(pb);\n      }\n\n      const finalPayload = pb.build();\n\n      corePlugins.forEach((plugin) => {\n        try {\n          if (plugin.afterTrack) {\n            plugin.afterTrack(finalPayload);\n          }\n        } catch (ex) {\n          LOG.error('Plugin afterTrack', ex);\n        }\n      });\n\n      return finalPayload;\n    }\n\n    /**\n     * Set a persistent key-value pair to be added to every payload\n     *\n     * @param key - Field name\n     * @param value - Field value\n     */\n    function addPayloadPair(key: string, value: unknown): void {\n      payloadPairs[key] = value;\n    }\n\n    const core = {\n      track,\n\n      addPayloadPair,\n\n      getBase64Encoding() {\n        return encodeBase64;\n      },\n\n      setBase64Encoding(encode: boolean) {\n        encodeBase64 = encode;\n      },\n\n      addPayloadDict(dict: Payload) {\n        for (const key in dict) {\n          if (Object.prototype.hasOwnProperty.call(dict, key)) {\n            payloadPairs[key] = dict[key];\n          }\n        }\n      },\n\n      resetPayloadPairs(dict: Payload) {\n        payloadPairs = isJson(dict) ? dict : {};\n      },\n\n      setTrackerVersion(version: string) {\n        addPayloadPair('tv', version);\n      },\n\n      setTrackerNamespace(name: string) {\n        addPayloadPair('tna', name);\n      },\n\n      setAppId(appId: string) {\n        addPayloadPair('aid', appId);\n      },\n\n      setPlatform(value: string) {\n        addPayloadPair('p', value);\n      },\n\n      setUserId(userId: string) {\n        addPayloadPair('uid', userId);\n      },\n\n      setScreenResolution(width: string, height: string) {\n        addPayloadPair('res', width + 'x' + height);\n      },\n\n      setViewport(width: string, height: string) {\n        addPayloadPair('vp', width + 'x' + height);\n      },\n\n      setColorDepth(depth: string) {\n        addPayloadPair('cd', depth);\n      },\n\n      setTimezone(timezone: string) {\n        addPayloadPair('tz', timezone);\n      },\n\n      setLang(lang: string) {\n        addPayloadPair('lang', lang);\n      },\n\n      setIpAddress(ip: string) {\n        addPayloadPair('ip', ip);\n      },\n\n      setUseragent(useragent: string) {\n        addPayloadPair('ua', useragent);\n      },\n\n      addGlobalContexts(contexts: Array<ConditionalContextProvider | ContextPrimitive>) {\n        globalContextsHelper.addGlobalContexts(contexts);\n      },\n\n      clearGlobalContexts(): void {\n        globalContextsHelper.clearGlobalContexts();\n      },\n\n      removeGlobalContexts(contexts: Array<ConditionalContextProvider | ContextPrimitive>) {\n        globalContextsHelper.removeGlobalContexts(contexts);\n      },\n    };\n\n    return core;\n  }\n\n  const { base64, corePlugins, callback } = configuration,\n    plugins = corePlugins ?? [],\n    partialCore = newCore(base64 ?? true, plugins, callback),\n    core = {\n      ...partialCore,\n      addPlugin: (configuration: CorePluginConfiguration) => {\n        const { plugin } = configuration;\n        plugins.push(plugin);\n        plugin.logger?.(LOG);\n        plugin.activateCorePlugin?.(core);\n      },\n    };\n\n  plugins?.forEach((plugin) => {\n    plugin.logger?.(LOG);\n    plugin.activateCorePlugin?.(core);\n  });\n\n  return core;\n}\n\n/**\n * A Self Describing Event\n * A custom event type, allowing for an event to be tracked using your own custom schema\n * and a data object which conforms to the supplied schema\n */\nexport interface SelfDescribingEvent<T = Record<string, unknown>> {\n  /** The Self Describing JSON which describes the event */\n  event: SelfDescribingJson<T>;\n}\n\n/**\n * Build a self-describing event\n * A custom event type, allowing for an event to be tracked using your own custom schema\n * and a data object which conforms to the supplied schema\n *\n * @param event - Contains the properties and schema location for the event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildSelfDescribingEvent<T = Record<string, unknown>>(event: SelfDescribingEvent<T>): PayloadBuilder {\n  const {\n      event: { schema, data },\n    } = event,\n    pb = payloadBuilder();\n  const ueJson = {\n    schema: 'iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0',\n    data: { schema, data },\n  };\n\n  pb.add('e', 'ue');\n  pb.addJson('ue_px', 'ue_pr', ueJson);\n\n  return pb;\n}\n\n/**\n * A Page View Event\n * Represents a Page View, which is typically fired as soon as possible when a web page\n * is loaded within the users browser. Often also fired on \"virtual page views\" within\n * Single Page Applications (SPA).\n */\nexport interface PageViewEvent {\n  /** The current URL visible in the users browser */\n  pageUrl?: string | null;\n  /** The current page title in the users browser */\n  pageTitle?: string | null;\n  /** The URL of the referring page */\n  referrer?: string | null;\n}\n\n/**\n * Build a Page View Event\n * Represents a Page View, which is typically fired as soon as possible when a web page\n * is loaded within the users browser. Often also fired on \"virtual page views\" within\n * Single Page Applications (SPA).\n *\n * @param event - Contains the properties for the Page View event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildPageView(event: PageViewEvent): PayloadBuilder {\n  const { pageUrl, pageTitle, referrer } = event,\n    pb = payloadBuilder();\n  pb.add('e', 'pv'); // 'pv' for Page View\n  pb.add('url', pageUrl);\n  pb.add('page', pageTitle);\n  pb.add('refr', referrer);\n\n  return pb;\n}\n\n/**\n * A Page Ping Event\n * Fires when activity tracking is enabled in the browser.\n * Tracks same information as the last tracked Page View and includes scroll\n * information from the current page view\n */\nexport interface PagePingEvent extends PageViewEvent {\n  /** The minimum X scroll position for the current page view */\n  minXOffset?: number;\n  /** The maximum X scroll position for the current page view */\n  maxXOffset?: number;\n  /** The minimum Y scroll position for the current page view */\n  minYOffset?: number;\n  /** The maximum Y scroll position for the current page view */\n  maxYOffset?: number;\n}\n\n/**\n * Build a Page Ping Event\n * Fires when activity tracking is enabled in the browser.\n * Tracks same information as the last tracked Page View and includes scroll\n * information from the current page view\n *\n * @param event - Contains the properties for the Page Ping event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildPagePing(event: PagePingEvent): PayloadBuilder {\n  const { pageUrl, pageTitle, referrer, minXOffset, maxXOffset, minYOffset, maxYOffset } = event,\n    pb = payloadBuilder();\n  pb.add('e', 'pp'); // 'pp' for Page Ping\n  pb.add('url', pageUrl);\n  pb.add('page', pageTitle);\n  pb.add('refr', referrer);\n  if (minXOffset && !isNaN(Number(minXOffset))) pb.add('pp_mix', minXOffset.toString());\n  if (maxXOffset && !isNaN(Number(maxXOffset))) pb.add('pp_max', maxXOffset.toString());\n  if (minYOffset && !isNaN(Number(minYOffset))) pb.add('pp_miy', minYOffset.toString());\n  if (maxYOffset && !isNaN(Number(maxYOffset))) pb.add('pp_may', maxYOffset.toString());\n\n  return pb;\n}\n\n/**\n * A Structured Event\n * A classic style of event tracking, allows for easier movement between analytics\n * systems. A loosely typed event, creating a Self Describing event is preferred, but\n * useful for interoperability.\n */\nexport interface StructuredEvent {\n  category: string;\n  action: string;\n  label?: string;\n  property?: string;\n  value?: number;\n}\n\n/**\n * Build a Structured Event\n * A classic style of event tracking, allows for easier movement between analytics\n * systems. A loosely typed event, creating a Self Describing event is preferred, but\n * useful for interoperability.\n *\n * @param event - Contains the properties for the Structured event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildStructEvent(event: StructuredEvent): PayloadBuilder {\n  const { category, action, label, property, value } = event,\n    pb = payloadBuilder();\n  pb.add('e', 'se'); // 'se' for Structured Event\n  pb.add('se_ca', category);\n  pb.add('se_ac', action);\n  pb.add('se_la', label);\n  pb.add('se_pr', property);\n  pb.add('se_va', value == null ? undefined : value.toString());\n\n  return pb;\n}\n\n/**\n * An Ecommerce Transaction Event\n * Allows for tracking common ecommerce events, this event is usually used when\n * a customer completes a transaction.\n */\nexport interface EcommerceTransactionEvent {\n  /** An identifier for the order */\n  orderId: string;\n  /** The total value of the order  */\n  total: number;\n  /** Transaction affiliation (e.g. store where sale took place) */\n  affiliation?: string;\n  /** The amount of tax on the transaction */\n  tax?: number;\n  /** The amount of shipping costs for this transaction */\n  shipping?: number;\n  /** Delivery address, city */\n  city?: string;\n  /** Delivery address, state */\n  state?: string;\n  /** Delivery address, country */\n  country?: string;\n  /** Currency of the transaction */\n  currency?: string;\n}\n\n/**\n * Build an Ecommerce Transaction Event\n * Allows for tracking common ecommerce events, this event is usually used when\n * a consumer completes a transaction.\n *\n * @param event - Contains the properties for the Ecommerce Transactoion event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildEcommerceTransaction(event: EcommerceTransactionEvent): PayloadBuilder {\n  const { orderId, total, affiliation, tax, shipping, city, state, country, currency } = event,\n    pb = payloadBuilder();\n  pb.add('e', 'tr'); // 'tr' for Transaction\n  pb.add('tr_id', orderId);\n  pb.add('tr_af', affiliation);\n  pb.add('tr_tt', total);\n  pb.add('tr_tx', tax);\n  pb.add('tr_sh', shipping);\n  pb.add('tr_ci', city);\n  pb.add('tr_st', state);\n  pb.add('tr_co', country);\n  pb.add('tr_cu', currency);\n\n  return pb;\n}\n\n/**\n * An Ecommerce Transaction Item\n * Related to the {@link EcommerceTransactionEvent}\n * Each Ecommerce Transaction may contain one or more EcommerceTransactionItem events\n */\nexport interface EcommerceTransactionItemEvent {\n  /** An identifier for the order */\n  orderId: string;\n  /** A Product Stock Keeping Unit (SKU) */\n  sku: string;\n  /** The price of the product */\n  price: number;\n  /** The name of the product */\n  name?: string;\n  /** The category the product belongs to */\n  category?: string;\n  /** The quanity of this product within the transaction */\n  quantity?: number;\n  /** The currency of the product for the transaction */\n  currency?: string;\n}\n\n/**\n * Build an Ecommerce Transaction Item Event\n * Related to the {@link buildEcommerceTransaction}\n * Each Ecommerce Transaction may contain one or more EcommerceTransactionItem events\n *\n * @param event - Contains the properties for the Ecommerce Transaction Item event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildEcommerceTransactionItem(event: EcommerceTransactionItemEvent): PayloadBuilder {\n  const { orderId, sku, price, name, category, quantity, currency } = event,\n    pb = payloadBuilder();\n  pb.add('e', 'ti'); // 'tr' for Transaction Item\n  pb.add('ti_id', orderId);\n  pb.add('ti_sk', sku);\n  pb.add('ti_nm', name);\n  pb.add('ti_ca', category);\n  pb.add('ti_pr', price);\n  pb.add('ti_qu', quantity);\n  pb.add('ti_cu', currency);\n\n  return pb;\n}\n\n/**\n * A Screen View Event\n * Similar to a Page View but less focused on typical web properties\n * Often used for mobile applications as the user is presented with\n * new views as they performance navigation events\n */\nexport interface ScreenViewEvent {\n  /** The name of the screen */\n  name?: string;\n  /** The identifier of the screen */\n  id?: string;\n}\n\n/**\n * Build a Scren View Event\n * Similar to a Page View but less focused on typical web properties\n * Often used for mobile applications as the user is presented with\n * new views as they performance navigation events\n *\n * @param event - Contains the properties for the Screen View event. One or more properties must be included.\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildScreenView(event: ScreenViewEvent): PayloadBuilder {\n  const { name, id } = event;\n  return buildSelfDescribingEvent({\n    event: {\n      schema: 'iglu:com.snowplowanalytics.snowplow/screen_view/jsonschema/1-0-0',\n      data: removeEmptyProperties({ name, id }),\n    },\n  });\n}\n\n/**\n * A Link Click Event\n * Used when a user clicks on a link on a webpage, typically an anchor tag `<a>`\n */\nexport interface LinkClickEvent {\n  /** The target URL of the link */\n  targetUrl: string;\n  /** The ID of the element clicked if present */\n  elementId?: string;\n  /** An array of class names from the element clicked */\n  elementClasses?: Array<string>;\n  /** The target value of the element if present */\n  elementTarget?: string;\n  /** The content of the element if present and enabled */\n  elementContent?: string;\n}\n\n/**\n * Build a Link Click Event\n * Used when a user clicks on a link on a webpage, typically an anchor tag `<a>`\n *\n * @param event - Contains the properties for the Link Click event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildLinkClick(event: LinkClickEvent): PayloadBuilder {\n  const { targetUrl, elementId, elementClasses, elementTarget, elementContent } = event;\n  const eventJson = {\n    schema: 'iglu:com.snowplowanalytics.snowplow/link_click/jsonschema/1-0-1',\n    data: removeEmptyProperties({ targetUrl, elementId, elementClasses, elementTarget, elementContent }),\n  };\n\n  return buildSelfDescribingEvent({ event: eventJson });\n}\n\n/**\n * An Ad Impression Event\n * Used to track an advertisement impression\n *\n * @remarks\n * If you provide the cost field, you must also provide one of 'cpa', 'cpc', and 'cpm' for the costModel field.\n */\nexport interface AdImpressionEvent {\n  /** Identifier for the particular impression instance */\n  impressionId?: string;\n  /** The cost model for the campaign */\n  costModel?: 'cpa' | 'cpc' | 'cpm';\n  /** Advertisement cost */\n  cost?: number;\n  /** The destination URL of the advertisement */\n  targetUrl?: string;\n  /** Identifier for the ad banner being displayed */\n  bannerId?: string;\n  /** Identifier for the zone where the ad banner is located */\n  zoneId?: string;\n  /** Identifier for the advertiser which the campaign belongs to */\n  advertiserId?: string;\n  /** Identifier for the advertiser which the campaign belongs to */\n  campaignId?: string;\n}\n\n/**\n * Build a Ad Impression Event\n * Used to track an advertisement impression\n *\n * @remarks\n * If you provide the cost field, you must also provide one of 'cpa', 'cpc', and 'cpm' for the costModel field.\n *\n * @param event - Contains the properties for the Ad Impression event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildAdImpression(event: AdImpressionEvent): PayloadBuilder {\n  const { impressionId, costModel, cost, targetUrl, bannerId, zoneId, advertiserId, campaignId } = event;\n  const eventJson = {\n    schema: 'iglu:com.snowplowanalytics.snowplow/ad_impression/jsonschema/1-0-0',\n    data: removeEmptyProperties({\n      impressionId,\n      costModel,\n      cost,\n      targetUrl,\n      bannerId,\n      zoneId,\n      advertiserId,\n      campaignId,\n    }),\n  };\n\n  return buildSelfDescribingEvent({ event: eventJson });\n}\n\n/**\n * An Ad Click Event\n * Used to track an advertisement click\n *\n * @remarks\n * If you provide the cost field, you must also provide one of 'cpa', 'cpc', and 'cpm' for the costModel field.\n */\nexport interface AdClickEvent {\n  /** The destination URL of the advertisement */\n  targetUrl: string;\n  /**\tIdentifier for the particular click instance */\n  clickId?: string;\n  /** The cost model for the campaign */\n  costModel?: 'cpa' | 'cpc' | 'cpm';\n  /** Advertisement cost */\n  cost?: number;\n  /** Identifier for the ad banner being displayed */\n  bannerId?: string;\n  /** Identifier for the zone where the ad banner is located */\n  zoneId?: string;\n  /** Identifier for the particular impression instance */\n  impressionId?: string;\n  /** Identifier for the advertiser which the campaign belongs to */\n  advertiserId?: string;\n  /** Identifier for the advertiser which the campaign belongs to */\n  campaignId?: string;\n}\n\n/**\n * Build a Ad Click Event\n * Used to track an advertisement click\n *\n * @remarks\n * If you provide the cost field, you must also provide one of 'cpa', 'cpc', and 'cpm' for the costModel field.\n *\n * @param event - Contains the properties for the Ad Click event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildAdClick(event: AdClickEvent): PayloadBuilder {\n  const { targetUrl, clickId, costModel, cost, bannerId, zoneId, impressionId, advertiserId, campaignId } = event;\n  const eventJson = {\n    schema: 'iglu:com.snowplowanalytics.snowplow/ad_click/jsonschema/1-0-0',\n    data: removeEmptyProperties({\n      targetUrl,\n      clickId,\n      costModel,\n      cost,\n      bannerId,\n      zoneId,\n      impressionId,\n      advertiserId,\n      campaignId,\n    }),\n  };\n\n  return buildSelfDescribingEvent({ event: eventJson });\n}\n\n/**\n * An Ad Conversion Event\n * Used to track an advertisement click\n *\n * @remarks\n * If you provide the cost field, you must also provide one of 'cpa', 'cpc', and 'cpm' for the costModel field.\n */\nexport interface AdConversionEvent {\n  /** Identifier for the particular conversion instance */\n  conversionId?: string;\n  /** The cost model for the campaign */\n  costModel?: 'cpa' | 'cpc' | 'cpm';\n  /** Advertisement cost */\n  cost?: number;\n  /**\tConversion category */\n  category?: string;\n  /** The type of user interaction e.g. 'purchase' */\n  action?: string;\n  /** Describes the object of the conversion */\n  property?: string;\n  /** How much the conversion is initially worth */\n  initialValue?: number;\n  /** Identifier for the advertiser which the campaign belongs to */\n  advertiserId?: string;\n  /** Identifier for the advertiser which the campaign belongs to */\n  campaignId?: string;\n}\n\n/**\n * Build a Ad Conversion Event\n * Used to track an advertisement click\n *\n * @remarks\n * If you provide the cost field, you must also provide one of 'cpa', 'cpc', and 'cpm' for the costModel field.\n *\n * @param event - Contains the properties for the Ad Conversion event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildAdConversion(event: AdConversionEvent): PayloadBuilder {\n  const { conversionId, costModel, cost, category, action, property, initialValue, advertiserId, campaignId } = event;\n  const eventJson = {\n    schema: 'iglu:com.snowplowanalytics.snowplow/ad_conversion/jsonschema/1-0-0',\n    data: removeEmptyProperties({\n      conversionId,\n      costModel,\n      cost,\n      category,\n      action,\n      property,\n      initialValue,\n      advertiserId,\n      campaignId,\n    }),\n  };\n\n  return buildSelfDescribingEvent({ event: eventJson });\n}\n\n/**\n * A Social Interaction Event\n * Social tracking will be used to track the way users interact\n * with Facebook, Twitter and Google + widgets\n * e.g. to capture like this or tweet this events.\n */\nexport interface SocialInteractionEvent {\n  /** Social action performed */\n  action: string;\n  /** Social network */\n  network: string;\n  /** Object social action is performed on */\n  target?: string;\n}\n\n/**\n * Build a Social Interaction Event\n * Social tracking will be used to track the way users interact\n * with Facebook, Twitter and Google + widgets\n * e.g. to capture like this or tweet this events.\n *\n * @param event - Contains the properties for the Social Interaction event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildSocialInteraction(event: SocialInteractionEvent): PayloadBuilder {\n  const { action, network, target } = event;\n  const eventJson = {\n    schema: 'iglu:com.snowplowanalytics.snowplow/social_interaction/jsonschema/1-0-0',\n    data: removeEmptyProperties({ action, network, target }),\n  };\n\n  return buildSelfDescribingEvent({ event: eventJson });\n}\n\n/**\n * An Add To Cart Event\n * For tracking users adding items from a cart\n * on an ecommerce site.\n */\nexport interface AddToCartEvent {\n  /** A Product Stock Keeping Unit (SKU) */\n  sku: string;\n  /** The number added to the cart */\n  quantity: number;\n  /** The name of the product */\n  name?: string;\n  /** The category of the product */\n  category?: string;\n  /** The price of the product */\n  unitPrice?: number;\n  /** The currency of the product */\n  currency?: string;\n}\n\n/**\n * Build a Add To Cart Event\n * For tracking users adding items from a cart\n * on an ecommerce site.\n *\n * @param event - Contains the properties for the Add To Cart event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildAddToCart(event: AddToCartEvent): PayloadBuilder {\n  const { sku, quantity, name, category, unitPrice, currency } = event;\n  return buildSelfDescribingEvent({\n    event: {\n      schema: 'iglu:com.snowplowanalytics.snowplow/add_to_cart/jsonschema/1-0-0',\n      data: removeEmptyProperties({\n        sku,\n        quantity,\n        name,\n        category,\n        unitPrice,\n        currency,\n      }),\n    },\n  });\n}\n\n/**\n * An Remove To Cart Event\n * For tracking users removing items from a cart\n * on an ecommerce site.\n */\nexport interface RemoveFromCartEvent {\n  /** A Product Stock Keeping Unit (SKU) */\n  sku: string;\n  /** The number removed from the cart */\n  quantity: number;\n  /** The name of the product */\n  name?: string;\n  /** The category of the product */\n  category?: string;\n  /** The price of the product */\n  unitPrice?: number;\n  /** The currency of the product */\n  currency?: string;\n}\n\n/**\n * Build a Remove From Cart Event\n * For tracking users removing items from a cart\n * on an ecommerce site.\n *\n * @param event - Contains the properties for the Remove From Cart event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildRemoveFromCart(event: RemoveFromCartEvent): PayloadBuilder {\n  const { sku, quantity, name, category, unitPrice, currency } = event;\n  return buildSelfDescribingEvent({\n    event: {\n      schema: 'iglu:com.snowplowanalytics.snowplow/remove_from_cart/jsonschema/1-0-0',\n      data: removeEmptyProperties({\n        sku,\n        quantity,\n        name,\n        category,\n        unitPrice,\n        currency,\n      }),\n    },\n  });\n}\n\n/**\n * Represents either a Form Focus or Form Change event\n * When a user focuses on a form element or when a user makes a\n * change to a form element.\n */\nexport interface FormFocusOrChangeEvent {\n  /** The schema which will be used for the event */\n  schema: 'change_form' | 'focus_form';\n  /** The ID of the form which the element belongs to */\n  formId: string;\n  /** The element ID which the user is interacting with */\n  elementId: string;\n  /** The name of the node (\"INPUT\", \"TEXTAREA\", \"SELECT\") */\n  nodeName: string;\n  /** The value of the element at the time of the event firing */\n  value: string | null;\n  /** The type of element (e.g. \"datetime\", \"text\", \"radio\", etc.) */\n  type?: string | null;\n  /** The class names on the element */\n  elementClasses?: Array<string> | null;\n}\n\n/**\n * Build a Form Focus or Change Form Event based on schema property\n * When a user focuses on a form element or when a user makes a\n * change to a form element.\n *\n * @param event - Contains the properties for the Form Focus or Change Form event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildFormFocusOrChange(event: FormFocusOrChangeEvent): PayloadBuilder {\n  let event_schema = '';\n  const { schema, formId, elementId, nodeName, elementClasses, value, type } = event;\n  const event_data: Record<string, unknown> = { formId, elementId, nodeName, elementClasses, value };\n  if (schema === 'change_form') {\n    event_schema = 'iglu:com.snowplowanalytics.snowplow/change_form/jsonschema/1-0-0';\n    event_data.type = type;\n  } else if (schema === 'focus_form') {\n    event_schema = 'iglu:com.snowplowanalytics.snowplow/focus_form/jsonschema/1-0-0';\n    event_data.elementType = type;\n  }\n  return buildSelfDescribingEvent({\n    event: {\n      schema: event_schema,\n      data: removeEmptyProperties(event_data, { value: true }),\n    },\n  });\n}\n\n/**\n * A representation of an element within a form\n */\nexport type FormElement = {\n  /** The name of the element */\n  name: string;\n  /** The current value of the element */\n  value: string | null;\n  /** The name of the node (\"INPUT\", \"TEXTAREA\", \"SELECT\") */\n  nodeName: string;\n  /** The type of element (e.g. \"datetime\", \"text\", \"radio\", etc.) */\n  type?: string | null;\n};\n\n/**\n * A Form Submission Event\n * Used to track when a user submits a form\n */\nexport interface FormSubmissionEvent {\n  /** The ID of the form */\n  formId: string;\n  /** The class names on the form */\n  formClasses?: Array<string>;\n  /** The elements contained within the form */\n  elements?: Array<FormElement>;\n}\n\n/**\n * Build a Form Submission Event\n * Used to track when a user submits a form\n *\n * @param event - Contains the properties for the Form Submission event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildFormSubmission(event: FormSubmissionEvent): PayloadBuilder {\n  const { formId, formClasses, elements } = event;\n  return buildSelfDescribingEvent({\n    event: {\n      schema: 'iglu:com.snowplowanalytics.snowplow/submit_form/jsonschema/1-0-0',\n      data: removeEmptyProperties({ formId, formClasses, elements }),\n    },\n  });\n}\n\n/**\n * A Site Search Event\n * Used when a user performs a search action on a page\n */\nexport interface SiteSearchEvent {\n  /** The terms of the search */\n  terms: Array<string>;\n  /** Any filters which have been applied to the search */\n  filters?: Record<string, string | boolean>;\n  /** The total number of results for this search */\n  totalResults?: number;\n  /** The number of visible results on the page */\n  pageResults?: number;\n}\n\n/**\n * Build a Site Search Event\n * Used when a user performs a search action on a page\n *\n * @param event - Contains the properties for the Site Search event\n * @returns PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track}\n */\nexport function buildSiteSearch(event: SiteSearchEvent): PayloadBuilder {\n  const { terms, filters, totalResults, pageResults } = event;\n  return buildSelfDescribingEvent({\n    event: {\n      schema: 'iglu:com.snowplowanalytics.snowplow/site_search/jsonschema/1-0-0',\n      data: removeEmptyProperties({ terms, filters, totalResults, pageResults }),\n    },\n  });\n}\n\n/**\n * A Consent Withdrawn Event\n * Used for tracking when a user withdraws their consent\n */\nexport interface ConsentWithdrawnEvent {\n  /** Specifies whether all consent should be withdrawn */\n  all: boolean;\n  /** Identifier for the document withdrawing consent */\n  id?: string;\n  /** Version of the document withdrawing consent */\n  version?: string;\n  /** Name of the document withdrawing consent */\n  name?: string;\n  /** Description of the document withdrawing consent */\n  description?: string;\n}\n\n/**\n * Interface for returning a built event (PayloadBuilder) and context (Array of SelfDescribingJson).\n */\nexport interface EventPayloadAndContext {\n  /** Tracker payload for the event data */\n  event: PayloadBuilder;\n  /** List of context entities to track along with the event */\n  context: Array<SelfDescribingJson>;\n}\n\n/**\n * Build a Consent Withdrawn Event\n * Used for tracking when a user withdraws their consent\n *\n * @param event - Contains the properties for the Consent Withdrawn event\n * @returns An object containing the PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track} and a 'consent_document' context\n */\nexport function buildConsentWithdrawn(event: ConsentWithdrawnEvent): EventPayloadAndContext {\n  const { all, id, version, name, description } = event;\n  const documentJson = {\n    schema: 'iglu:com.snowplowanalytics.snowplow/consent_document/jsonschema/1-0-0',\n    data: removeEmptyProperties({ id, version, name, description }),\n  };\n\n  return {\n    event: buildSelfDescribingEvent({\n      event: {\n        schema: 'iglu:com.snowplowanalytics.snowplow/consent_withdrawn/jsonschema/1-0-0',\n        data: removeEmptyProperties({\n          all: all,\n        }),\n      },\n    }),\n    context: [documentJson],\n  };\n}\n\n/**\n * A Consent Granted Event\n * Used for tracking when a user grants their consent\n */\nexport interface ConsentGrantedEvent {\n  /** Identifier for the document granting consent */\n  id: string;\n  /** Version of the document granting consent */\n  version: string;\n  /** Name of the document granting consent */\n  name?: string;\n  /** Description of the document granting consent */\n  description?: string;\n  /** When the consent expires */\n  expiry?: string;\n}\n\n/**\n * Build a Consent Granted Event\n * Used for tracking when a user grants their consent\n *\n * @param event - Contains the properties for the Consent Granted event\n * @returns An object containing the PayloadBuilder to be sent to {@link @snowplow/tracker-core#TrackerCore.track} and a 'consent_document' context\n */\nexport function buildConsentGranted(event: ConsentGrantedEvent): EventPayloadAndContext {\n  const { expiry, id, version, name, description } = event;\n  const documentJson = {\n    schema: 'iglu:com.snowplowanalytics.snowplow/consent_document/jsonschema/1-0-0',\n    data: removeEmptyProperties({ id, version, name, description }),\n  };\n\n  return {\n    event: buildSelfDescribingEvent({\n      event: {\n        schema: 'iglu:com.snowplowanalytics.snowplow/consent_granted/jsonschema/1-0-0',\n        data: removeEmptyProperties({\n          expiry: expiry,\n        }),\n      },\n    }),\n    context: [documentJson],\n  };\n}\n\n/**\n * Returns a copy of a JSON with undefined and null properties removed\n *\n * @param event - JSON object to clean\n * @param exemptFields - Set of fields which should not be removed even if empty\n * @returns A cleaned copy of eventJson\n */\nexport function removeEmptyProperties(\n  event: Record<string, unknown>,\n  exemptFields: Record<string, boolean> = {}\n): Record<string, unknown> {\n  const ret: Record<string, unknown> = {};\n  for (const k in event) {\n    if (exemptFields[k] || (event[k] !== null && typeof event[k] !== 'undefined')) {\n      ret[k] = event[k];\n    }\n  }\n  return ret;\n}\n","import { EventStorePayload } from './event_store_payload';\nimport { Payload } from './payload';\n\n/**\n * Result of the next operation on an EventStoreIterator.\n */\nexport interface EventStoreIteratorNextResult {\n  /**\n   * The next event in the store, or undefined if there are no more events.\n   */\n  value: EventStorePayload | undefined;\n  /**\n   * True if there are no more events in the store.\n   */\n  done: boolean;\n}\n\n/**\n * EventStoreIterator allows iterating over all events in the store.\n */\nexport interface EventStoreIterator {\n  /**\n   * Retrieve the next event in the store\n   */\n  next: () => Promise<EventStoreIteratorNextResult>;\n}\n\n/**\n * EventStore allows storing and retrieving events before they are sent to the collector\n */\nexport interface EventStore {\n  /**\n   * Count all events in the store\n   */\n  count: () => Promise<number>;\n  /**\n   * Add an event to the store\n   * @returns the number of events in the store after adding\n   */\n  add: (payload: EventStorePayload) => Promise<number>;\n  /**\n   * Remove the first `count` events from the store\n   */\n  removeHead: (count: number) => Promise<void>;\n  /**\n   * Get an iterator over all events in the store\n   */\n  iterator: () => EventStoreIterator;\n  /**\n   * Retrieve all payloads including their meta configuration in the store\n   */\n  getAll: () => Promise<readonly EventStorePayload[]>;\n  /**\n   * Retrieve all pure payloads in the store\n   */\n  getAllPayloads: () => Promise<readonly Payload[]>;\n}\n\nexport interface EventStoreConfiguration {\n  /**\n   * The maximum amount of events that will be buffered in the event store\n   *\n   * This is useful to ensure the Tracker doesn't fill the 5MB or 10MB available to\n   * each website should the collector be unavailable due to lost connectivity.\n   * Will drop old events once the limit is hit\n   */\n  maxSize?: number;\n}\n\nexport interface InMemoryEventStoreConfiguration {\n  /**\n   * Initial events to add to the store\n   */\n  events?: EventStorePayload[];\n}\n\nexport function newInMemoryEventStore({\n  maxSize = 1000,\n  events = [],\n}: EventStoreConfiguration & InMemoryEventStoreConfiguration): EventStore {\n  let store: EventStorePayload[] = [...events];\n\n  const count = () => Promise.resolve(store.length);\n\n  return {\n    count,\n    add: (payload: EventStorePayload) => {\n      store.push(payload);\n      while (store.length > maxSize) {\n        store.shift();\n      }\n      return count();\n    },\n    removeHead: (count: number) => {\n      for (let i = 0; i < count; i++) {\n        store.shift();\n      }\n      return Promise.resolve();\n    },\n    iterator: () => {\n      let index = 0;\n      // copy the store to prevent mutation\n      let events = [...store];\n      return {\n        next: () => {\n          if (index < events.length) {\n            return Promise.resolve({ value: events[index++], done: false });\n          }\n          return Promise.resolve({ value: undefined, done: true });\n        },\n      };\n    },\n    getAll: () => Promise.resolve([...store]),\n    getAllPayloads: () => Promise.resolve(store.map((e) => e.payload)),\n  };\n}\n","export const PAYLOAD_DATA_SCHEMA = 'iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4';\n","import { PAYLOAD_DATA_SCHEMA } from '../schemata';\nimport { EmitterEvent } from \"./emitter_event\";\n\n/**\n * Wrapper around a request with events to the collector.\n * Provides helpers to manage the request and its events.\n * Prepare the request to be sent to the collector.\n */\nexport interface EmitterRequest {\n  /**\n   * Add an event to the request\n   * @returns true if the event was added, false if the server anonymization setting does not match the existing events\n   */\n  addEvent: (event: EmitterEvent) => boolean;\n  /**\n   * Get the events attached to the request\n   */\n  getEvents: () => EmitterEvent[];\n  /**\n   * Creates a fetch Request object from the events\n   */\n  toRequest: () => Request | undefined;\n  /**\n   * Whether the request is full or events can still be added\n   */\n  isFull: () => boolean;\n  /**\n   * Size of the request in bytes\n   */\n  countBytes: () => number;\n  /**\n   * The number of events attached to the request\n   */\n  countEvents: () => number;\n  /**\n   * Cancel timeout timer if it is still pending.\n   * If not successful, the request will be aborted.\n   * @param successful - Whether the request was successful\n   * @param reason - Reason for aborting the request\n   */\n  closeRequest: (successful: boolean, reason?: string) => void;\n}\n\nexport interface EmitterRequestConfiguration {\n  endpoint: string;\n  port?: number;\n  protocol?: 'http' | 'https';\n  eventMethod?: 'get' | 'post';\n  customHeaders?: Record<string, string>;\n  connectionTimeout?: number;\n  keepalive?: boolean;\n  postPath?: string;\n  useStm?: boolean;\n  maxPostBytes?: number,\n  credentials?: 'omit' | 'same-origin' | 'include';\n}\n\n/**\n * Enclose an array of events in a self-describing payload_data JSON string\n *\n * @param array - events Batch of events\n * @returns string payload_data self-describing JSON\n */\nexport function encloseInPayloadDataEnvelope(events: Array<Record<string, unknown>>) {\n  return JSON.stringify({\n    schema: PAYLOAD_DATA_SCHEMA,\n    data: events,\n  });\n}\n\n/**\n * Attaches the STM field to outbound POST events.\n *\n * @param events - the events to attach the STM to\n */\nexport function attachStmToEvent(events: Array<Record<string, unknown>>) {\n  const stm = new Date().getTime().toString();\n  for (let i = 0; i < events.length; i++) {\n    events[i]['stm'] = stm;\n  }\n  return events;\n}\n\nexport function newEmitterRequest({\n  endpoint,\n  protocol = 'https',\n  port,\n  eventMethod = 'post',\n  customHeaders,\n  connectionTimeout,\n  keepalive = false,\n  postPath = '/com.snowplowanalytics.snowplow/tp2',\n  useStm = true,\n  maxPostBytes = 40000,\n  credentials = 'include',\n}: EmitterRequestConfiguration): EmitterRequest {\n  let events: EmitterEvent[] = [];\n  let usePost = eventMethod.toLowerCase() === 'post';\n  let timer: ReturnType<typeof setTimeout> | undefined;\n  let abortController: AbortController | undefined;\n\n  function countBytes(): number {\n    let count = events.reduce(\n      (acc, event) => acc + (usePost ? event.getPOSTRequestBytesCount() : event.getGETRequestBytesCount()),\n      0\n    );\n    if (usePost) {\n      count += 88; // 88 bytes for the payload_data envelope\n    }\n    return count;\n  }\n\n  function countEvents(): number {\n    return events.length;\n  }\n\n  function getServerAnonymizationOfExistingEvents(): boolean | undefined {\n    return events.length > 0 ? events[0].getServerAnonymization() : undefined;\n  }\n\n  function addEvent(event: EmitterEvent) {\n    if (events.length > 0 && getServerAnonymizationOfExistingEvents() !== event.getServerAnonymization()) {\n      return false;\n    } else {\n      events.push(event);\n      return true;\n    }\n  }\n\n  function getEvents(): EmitterEvent[] {\n    return events;\n  }\n\n  function isFull(): boolean {\n    if (usePost) {\n      return countBytes() >= maxPostBytes;\n    } else {\n      return events.length >= 1;\n    }\n  }\n\n  function createHeaders(): Headers {\n    const headers = new Headers();\n    if (usePost) {\n      headers.append('Content-Type', 'application/json; charset=UTF-8');\n    }\n    if (customHeaders) {\n      Object.keys(customHeaders).forEach((key) => {\n        headers.append(key, customHeaders[key]);\n      });\n    }\n    if (getServerAnonymizationOfExistingEvents()) {\n      headers.append('SP-Anonymous', '*');\n    }\n    return headers;\n  }\n\n  function getFullCollectorUrl(): string {\n    let collectorUrl = endpoint;\n    if (!endpoint.includes('://')) {\n      collectorUrl = `${protocol}://${endpoint}`;\n    }\n    if (port) {\n      collectorUrl = `${collectorUrl}:${port}`;\n    }\n    \n    const path = usePost ? postPath : '/i';\n    return collectorUrl + path;\n  }\n\n  function makeRequest(url: string, options: RequestInit): Request {\n    closeRequest(false);\n\n    abortController = new AbortController();\n    timer = setTimeout(() => {\n      const reason = 'Request timed out';\n      console.error(reason);\n      timer = undefined;\n      closeRequest(false, reason);\n    }, connectionTimeout ?? 5000);\n\n    const requestOptions: RequestInit = {\n      headers: createHeaders(),\n      signal: abortController.signal,\n      keepalive,\n      credentials,\n      ...options,\n    };\n\n    const request = new Request(url, requestOptions);\n    return request;\n  }\n\n  function makePostRequest(): Request {\n    const batch = attachStmToEvent(events.map((event) => event.getPOSTRequestBody()));\n\n    return makeRequest(getFullCollectorUrl(), {\n      method: 'POST',\n      body: encloseInPayloadDataEnvelope(batch),\n    });\n  }\n\n  function makeGetRequest(): Request {\n    if (events.length !== 1) {\n      throw new Error('Only one event can be sent in a GET request');\n    }\n\n    const event = events[0];\n    const url = event.getGETRequestURL(getFullCollectorUrl(), useStm);\n\n    return makeRequest(url, {\n      method: 'GET',\n    });\n  }\n\n  function toRequest(): Request | undefined {\n    if (events.length === 0) {\n      return undefined;\n    }\n    if (usePost) {\n      return makePostRequest();\n    } else {\n      return makeGetRequest();\n    }\n  }\n\n  function closeRequest(successful: boolean, reason?: string) {\n    if (timer !== undefined) {\n      clearTimeout(timer);\n      timer = undefined;\n    }\n\n    if (abortController !== undefined) {\n      const controller = abortController;\n      abortController = undefined;\n      if (!successful) {\n        controller.abort(reason);\n      }\n    }\n  }\n\n  return {\n    addEvent,\n    getEvents,\n    toRequest,\n    countBytes,\n    countEvents,\n    isFull,\n    closeRequest,\n  };\n}\n","import { EventStorePayload } from \"../event_store_payload\";\nimport { Payload } from \"../payload\";\n\n/**\n * Wraps a payload and provides methods to get the payload ready for a GET or POST request\n */\nexport interface EmitterEvent {\n  /**\n   * Get the original payload\n   */\n  getPayload: () => Payload;\n  /**\n   * Get the server anonymization setting\n   * @returns true if the server should anonymize the IP address\n   */\n  getServerAnonymization: () => boolean;\n  /**\n   * Prepare the payload for a POST request\n   */\n  getPOSTRequestBody: () => Record<string, unknown>;\n  /**\n   * Calculate the byte size of the payload when POSTed\n   */\n  getPOSTRequestBytesCount: () => number;\n  /**\n   * Get the URL for a GET request\n   */\n  getGETRequestURL: (collectorUrl: string, useStm: boolean) => string;\n  /**\n   * Calculate the byte size of the payload when sent via GET\n   */\n  getGETRequestBytesCount: () => number;\n}\n\n/**\n * Count the number of bytes a string will occupy when UTF-8 encoded\n * Taken from http://stackoverflow.com/questions/2848462/count-bytes-in-textarea-using-javascript/\n *\n * @param s - The string\n * @returns number Length of s in bytes when UTF-8 encoded\n */\nfunction getUTF8Length(s: string) {\n  let len = 0;\n  for (let i = 0; i < s.length; i++) {\n    const code = s.charCodeAt(i);\n    if (code <= 0x7f) {\n      len += 1;\n    } else if (code <= 0x7ff) {\n      len += 2;\n    } else if (code >= 0xd800 && code <= 0xdfff) {\n      // Surrogate pair: These take 4 bytes in UTF-8 and 2 chars in UCS-2\n      // (Assume next char is the other [valid] half and just skip it)\n      len += 4;\n      i++;\n    } else if (code < 0xffff) {\n      len += 3;\n    } else {\n      len += 4;\n    }\n  }\n  return len;\n}\n\n/*\n  * Convert a dictionary to a querystring\n  * The context field is the last in the querystring\n  */\nfunction getQuerystring(request: Payload) {\n  let lowPriorityKeys: { [key: string]: boolean } = { co: true, cx: true };\n\n  let args: string[] = [];\n\n  for (const key in request) {\n    if (request.hasOwnProperty(key) && !lowPriorityKeys[key]) {\n      args.push(key + '=' + encodeURIComponent(request[key] as string | number | boolean));\n    }\n  }\n\n  for (const contextKey in lowPriorityKeys) {\n    if (request.hasOwnProperty(contextKey) && lowPriorityKeys[contextKey]) {\n      args.push(contextKey + '=' + encodeURIComponent(request[contextKey] as string | number | boolean));\n    }\n  }\n\n  return '?' + args.join('&');\n}\n\n/*\n  * Convert numeric fields to strings to match payload_data schema\n  */\nfunction preparePostBody(request: Payload): Record<string, unknown> {\n  const cleanedRequest = Object.keys(request)\n    .map<[string, unknown]>((k) => [k, request[k]])\n    .reduce((acc, [key, value]) => {\n      acc[key] = (value as Object).toString();\n      return acc;\n    }, {} as Record<string, unknown>);\n  return cleanedRequest;\n}\n\nexport function newEmitterEvent(eventStorePayload: EventStorePayload): EmitterEvent {\n  let querystring: string | null = null;\n  let postBody: Record<string, unknown> | null = null;\n  let byteCountGET: number | null = null;\n  let byteCountPOST: number | null = null;\n\n  function getPayload(): Payload {\n    return eventStorePayload.payload;\n  }\n\n  function getServerAnonymization(): boolean {\n    return eventStorePayload.svrAnon ?? false;\n  }\n\n  function getCachedQuerystring(payload: Payload): string {\n    if (querystring === null) {\n      querystring = getQuerystring(payload);\n    }\n    return querystring;\n  }\n\n  function getGETRequestURL(collectorUrl: string, useStm: boolean): string {\n    const querystring = getCachedQuerystring(getPayload());\n    if (useStm) {\n      return collectorUrl + querystring.replace('?', '?stm=' + new Date().getTime() + '&');\n    }\n\n    return collectorUrl + querystring;\n  }\n\n  function getGETRequestBytesCount(): number {\n    if (byteCountGET === null) {\n      const querystring = getCachedQuerystring(getPayload());\n      byteCountGET = getUTF8Length(querystring);\n    }\n    return byteCountGET;\n  }\n\n  function getPOSTRequestBody(): Record<string, unknown> {\n    if (postBody === null) {\n      postBody = preparePostBody(getPayload());\n    }\n    return postBody;\n  }\n\n  function getPOSTRequestBytesCount(): number {\n    if (byteCountPOST === null) {\n      byteCountPOST = getUTF8Length(JSON.stringify(getPOSTRequestBody()));\n    }\n    return byteCountPOST;\n  }\n  return {\n    getPayload,\n    getServerAnonymization,\n    getGETRequestURL,\n    getGETRequestBytesCount,\n    getPOSTRequestBody,\n    getPOSTRequestBytesCount,\n  };\n}\n","import { EventStore, newInMemoryEventStore } from '../event_store';\nimport { Payload } from '../payload';\nimport { EmitterRequest, newEmitterRequest } from './emitter_request';\nimport { EmitterEvent, newEmitterEvent } from './emitter_event';\nimport { newEventStorePayload } from '../event_store_payload';\nimport { LOG } from '../logger';\n\n/**\n * A collection of event payloads which are sent to the collector.\n */\nexport type EventBatch = Payload[];\n\n/**\n * The data that will be available to the `onRequestFailure` callback\n */\nexport type RequestFailure = {\n  /** The batch of events that failed to send */\n  events: EventBatch;\n  /** The status code of the failed request */\n  status?: number;\n  /** The error message of the failed request */\n  message?: string;\n  /** Whether the tracker will retry the request */\n  willRetry: boolean;\n};\n\n/* The supported methods which events can be sent with */\nexport type EventMethod = 'post' | 'get';\n\nexport interface EmitterConfigurationBase {\n  /**\n   * The preferred technique to use to send events\n   * @defaultValue post\n   */\n  eventMethod?: EventMethod;\n  /**\n   * The post path which events will be sent to.\n   * Ensure your collector is configured to accept events on this post path\n   * @defaultValue '/com.snowplowanalytics.snowplow/tp2'\n   */\n  postPath?: string;\n  /**\n   * The amount of events that should be buffered before sending\n   * Recommended to leave as 1 to reduce change of losing events\n   * @defaultValue 1 on Web, 10 on Node\n   */\n  bufferSize?: number;\n  /**\n   * The max size a POST request can be before the tracker will force send it\n   * Also dictates the max size of a POST request before a batch of events is split into multiple requests\n   * @defaultValue 40000\n   */\n  maxPostBytes?: number;\n  /**\n   * The max size a GET request (its complete URL) can be. Requests over this size will be tried as a POST request.\n   * @defaultValue unlimited\n   */\n  maxGetBytes?: number;\n  /**\n   * Should the Sent Timestamp be attached to events.\n   * Only applies for GET events.\n   * @defaultValue true\n   */\n  useStm?: boolean;\n  /**\n   * How long to wait before aborting requests to the collector\n   * @defaultValue 5000 (milliseconds)\n   */\n  connectionTimeout?: number;\n  /**\n   * An object of key value pairs which represent headers to\n   * attach when sending a POST request, only works for POST\n   * @defaultValue `{}`\n   */\n  customHeaders?: Record<string, string>;\n  /**\n   * Controls whether or not the browser sends credentials (defaults to 'include')\n   * @defaultValue 'include'\n   */\n  credentials?: 'omit' | 'same-origin' | 'include';\n  /**\n   * Whether to retry failed requests to the collector.\n   *\n   * Failed requests are requests that failed due to\n   * [timeouts](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/timeout_event),\n   * [network errors](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/error_event),\n   * and [abort events](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/abort_event).\n   *\n   * Takes precedent over `retryStatusCodes` and `dontRetryStatusCodes`.\n   *\n   * @defaultValue true\n   */\n  retryFailedRequests?: boolean;\n  /**\n   * List of HTTP response status codes for which events sent to Collector should be retried in future requests.\n   * Only non-success status codes are considered (greater or equal to 300).\n   * The retry codes are only considered for GET and POST requests.\n   * They take priority over the `dontRetryStatusCodes` option.\n   * By default, the tracker retries on all non-success status codes except for 400, 401, 403, 410, and 422.\n   */\n  retryStatusCodes?: number[];\n  /**\n   * List of HTTP response status codes for which events sent to Collector should not be retried in future request.\n   * Only non-success status codes are considered (greater or equal to 300).\n   * The don't retry codes are only considered for GET and POST requests.\n   * By default, the tracker retries on all non-success status codes except for 400, 401, 403, 410, and 422 (these don't retry codes will remain even if you set your own `dontRetryStatusCodes` but can be changed using the `retryStatusCodes`).\n   */\n  dontRetryStatusCodes?: number[];\n  /**\n   * Id service full URL. This URL will be added to the queue and will be called using a GET method.\n   * This option is there to allow the service URL to be called in order to set any required identifiers e.g. extra cookies.\n   *\n   * The request respects the `anonymousTracking` option, including the SP-Anonymous header if needed, and any additional custom headers from the customHeaders option.\n   */\n  idService?: string;\n  /**\n   * Indicates that the request should be allowed to outlive the webpage that initiated it.\n   * Enables collector requests to complete even if the page is closed or navigated away from.\n   * Note: Browsers put a limit on keepalive requests of 64KB. In case of multiple keepalive requests in parallel (may happen in case of multiple trackers), the limit is shared.\n   * @defaultValue false\n   */\n  keepalive?: boolean;\n  /**\n   * Enables overriding the default fetch function with a custom implementation.\n   * @param input - Instance of Request\n   * @param options - Additional options for the request\n   * @returns A Promise that resolves to the Response.\n   */\n  customFetch?: (input: Request, options?: RequestInit) => Promise<Response>;\n  /**\n   * A callback function to be executed whenever a request is successfully sent to the collector.\n   * In practice this means any request which returns a 2xx status code will trigger this callback.\n   *\n   * @param data - The event batch that was successfully sent\n   */\n  onRequestSuccess?: (data: EventBatch, response: Response) => void;\n  /**\n   * A callback function to be executed whenever a request fails to be sent to the collector.\n   * This is the inverse of the onRequestSuccess callback, so any non 2xx status code will trigger this callback.\n   *\n   * @param data - The data associated with the event(s) that failed to send\n   */\n  onRequestFailure?: (data: RequestFailure, response?: Response) => void;\n  /**\n   * Enables providing a custom EventStore implementation to store events before sending them to the collector.\n   */\n  eventStore?: EventStore;\n}\n\nexport interface EmitterConfiguration extends EmitterConfigurationBase {\n  /* The collector URL to which events will be sent */\n  endpoint: string;\n  /* http or https. Defaults to https */\n  protocol?: 'http' | 'https';\n  /* Collector port number */\n  port?: number;\n  /* If the request should undergo server anonymization. */\n  serverAnonymization?: boolean;\n}\n\n/**\n * Emitter is responsible for sending events to the collector.\n * It manages the event queue and sends events in batches depending on configuration.\n */\nexport interface Emitter {\n  /**\n   * Forces the emitter to send all events in the event store to the collector.\n   * @returns A Promise that resolves when all events have been sent to the collector.\n   */\n  flush: () => Promise<void>;\n  /**\n   * Adds a payload to the event store or sends it to the collector.\n   * @param payload - A payload to be sent to the collector\n   * @returns Promise that resolves when the payload has been added to the event store or sent to the collector\n   */\n  input: (payload: Payload) => Promise<void>;\n  /**\n   * Updates the collector URL to which events will be sent.\n   * @param url - New collector URL\n   */\n  setCollectorUrl: (url: string) => void;\n  /**\n   * Sets the server anonymization flag.\n   */\n  setAnonymousTracking: (anonymous: boolean) => void;\n  /**\n   * Updates the buffer size of the emitter.\n   */\n  setBufferSize: (bufferSize: number) => void;\n}\n\ninterface RequestResult {\n  success: boolean;\n  retry: boolean;\n  status?: number;\n}\n\nexport function newEmitter({\n  endpoint,\n  eventMethod = 'post',\n  protocol,\n  port,\n  maxPostBytes = 40000,\n  maxGetBytes,\n  bufferSize = 1,\n  customHeaders,\n  serverAnonymization,\n  connectionTimeout,\n  keepalive,\n  idService,\n  dontRetryStatusCodes = [],\n  retryStatusCodes = [],\n  retryFailedRequests = true,\n  onRequestFailure,\n  onRequestSuccess,\n  customFetch = fetch,\n  useStm,\n  eventStore = newInMemoryEventStore({}),\n  credentials,\n}: EmitterConfiguration): Emitter {\n  let idServiceCalled = false;\n  let flushInProgress = false;\n  const usePost = eventMethod.toLowerCase() === 'post';\n  dontRetryStatusCodes = dontRetryStatusCodes.concat([400, 401, 403, 410, 422]);\n\n  function shouldRetryForStatusCode(statusCode: number): boolean {\n    // success, don't retry\n    if (statusCode >= 200 && statusCode < 300) {\n      return false;\n    }\n\n    if (!retryFailedRequests) {\n      return false;\n    }\n\n    // retry if status code among custom user-supplied retry codes\n    if (retryStatusCodes.includes(statusCode)) {\n      return true;\n    }\n\n    // retry if status code *not* among the don't retry codes\n    return !dontRetryStatusCodes.includes(statusCode);\n  }\n\n  function callOnRequestSuccess(payloads: Payload[], response: Response) {\n    if (onRequestSuccess !== undefined) {\n      setTimeout(() => {\n        try {\n          onRequestSuccess?.(payloads, response);\n        } catch (e) {\n          LOG.error('Error in onRequestSuccess', e);\n        }\n      }, 0);\n    }\n  }\n\n  function callOnRequestFailure(failure: RequestFailure, response?: Response) {\n    if (onRequestFailure !== undefined) {\n      setTimeout(() => {\n        try {\n          onRequestFailure?.(failure, response);\n        } catch (e) {\n          LOG.error('Error in onRequestFailure', e);\n        }\n      }, 0);\n    }\n  }\n\n  async function executeRequest(request: EmitterRequest): Promise<RequestResult> {\n    const fetchRequest = request.toRequest();\n    if (fetchRequest === undefined) {\n      throw new Error('Empty batch');\n    }\n\n    const payloads = request.getEvents().map((event) => event.getPayload());\n    try {\n      const response = await customFetch(fetchRequest);\n      await response.text(); // wait for the response to be fully read\n\n      request.closeRequest(true);\n\n      if (response.ok) {\n        callOnRequestSuccess(payloads, response);\n        return { success: true, retry: false, status: response.status };\n      } else {\n        const willRetry = shouldRetryForStatusCode(response.status);\n        callOnRequestFailure(\n          {\n            events: payloads,\n            status: response.status,\n            message: response.statusText,\n            willRetry: willRetry,\n          },\n          response\n        );\n        return { success: false, retry: willRetry, status: response.status };\n      }\n    } catch (e) {\n      request.closeRequest(false);\n\n      const message = typeof e === 'string' ? e : e ? (e as Error).message : 'Unknown error';\n      callOnRequestFailure({\n        events: payloads,\n        message: message,\n        willRetry: true,\n      });\n      return { success: false, retry: true };\n    }\n  }\n\n  function newEmitterRequestWithConfig(): EmitterRequest {\n    return newEmitterRequest({\n      endpoint,\n      protocol,\n      port,\n      eventMethod,\n      customHeaders,\n      connectionTimeout,\n      keepalive,\n      maxPostBytes,\n      useStm,\n      credentials,\n    });\n  }\n\n  function shouldSkipEventStore(emitterEvent: EmitterEvent): boolean {\n    const eventTooBigWarning = (bytes: number, maxBytes: number) =>\n      LOG.warn('Event (' + bytes + 'B) too big, max is ' + maxBytes);\n\n    if (usePost) {\n      const bytes = emitterEvent.getPOSTRequestBytesCount() + 88; // 88 bytes for the payload_data envelope\n      const tooBig = bytes > maxPostBytes;\n      if (tooBig) {\n        eventTooBigWarning(bytes, maxPostBytes);\n      }\n      return tooBig;\n    } else {\n      if (maxGetBytes === undefined) {\n        return false;\n      }\n      const bytes = emitterEvent.getGETRequestBytesCount();\n      const tooBig = bytes > maxGetBytes;\n      if (tooBig) {\n        eventTooBigWarning(bytes, maxGetBytes);\n      }\n      return tooBig;\n    }\n  }\n\n  async function callIdService() {\n    if (idService && !idServiceCalled) {\n      idServiceCalled = true;\n      const request = new Request(idService, { method: 'GET' });\n      await customFetch(request);\n    }\n  }\n\n  async function flush() {\n    if (!flushInProgress) {\n      flushInProgress = true;\n\n      try {\n        await continueFlush();\n      } catch (e) {\n        LOG.error('Error sending events', e);\n      } finally {\n        flushInProgress = false;\n      }\n    }\n  }\n\n  async function continueFlush() {\n    await callIdService();\n\n    const request = newEmitterRequestWithConfig();\n    const eventStoreIterator = eventStore.iterator();\n\n    while (true) {\n      if (request.isFull()) {\n        break;\n      }\n\n      const { value, done } = await eventStoreIterator.next();\n      if (done || value === undefined) {\n        break;\n      }\n\n      const event = newEmitterEvent(value);\n      if (!request.addEvent(event)) {\n        break;\n      }\n    }\n\n    if (request.countEvents() === 0) {\n      return;\n    }\n\n    const { success, retry, status } = await executeRequest(request);\n\n    if (success || !retry) {\n      if (!success) {\n        LOG.error(`Status ${status}, will not retry.`);\n      }\n      await eventStore.removeHead(request.countEvents());\n    }\n\n    if (success) {\n      await continueFlush();\n    }\n  }\n\n  async function input(payload: Payload) {\n    const eventStorePayload = newEventStorePayload({ payload, svrAnon: serverAnonymization });\n    const event = newEmitterEvent(eventStorePayload);\n    if (shouldSkipEventStore(event)) {\n      const request = newEmitterRequestWithConfig();\n      request.addEvent(event);\n      await executeRequest(request);\n    } else {\n      const count = await eventStore.add(eventStorePayload);\n      if (count >= bufferSize) {\n        await flush();\n      }\n    }\n  }\n\n  function setCollectorUrl(url: string) {\n    endpoint = url;\n  }\n\n  function setAnonymousTracking(at: boolean) {\n    serverAnonymization = at;\n  }\n\n  function setBufferSize(bs: number) {\n    bufferSize = bs;\n  }\n\n  return {\n    flush,\n    input,\n    setCollectorUrl,\n    setAnonymousTracking,\n    setBufferSize,\n  };\n}\n","import { Payload } from \"./payload\";\n\nexport interface EventStorePayload {\n  /**\n   * The event payload to be stored\n   */\n  payload: Payload;\n\n  /**\n   * If the request should undergo server anonymization.\n   * @defaultValue false\n   */\n  svrAnon?: boolean;\n}\n\n/**\n * Create a new EventStorePayload\n */\nexport function newEventStorePayload({\n  payload,\n  svrAnon = false,\n}: EventStorePayload): EventStorePayload {\n  return {\n    payload,\n    svrAnon,\n  };\n}\n","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * A library of helpful methods for Snowplow JavaScript Trackers\n * Contains Context Generation, Event Payload Builders, and Core Plugins.\n *\n * @packageDocumentation\n */\n\nimport { version as v } from '../package.json';\nexport const version = v;\n\nexport * from './contexts';\nexport * from './plugins';\nexport * from './payload';\nexport * from './event_store_payload';\nexport * from './core';\nexport * from './logger';\nexport * from './emitter';\nexport * from './event_store';\n","var randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  var uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    offset = offset || 0;\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(rnds);\n}\nexport default v4;","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/**\n * Attempt to get a value from localStorage\n *\n * @param string - key\n * @returns string The value obtained from localStorage, or\n *                undefined if localStorage is inaccessible\n */\nexport function attemptGetLocalStorage(key: string) {\n  try {\n    const localStorageAlias = window.localStorage,\n      exp = localStorageAlias.getItem(key + '.expires');\n    if (exp === null || +exp > Date.now()) {\n      return localStorageAlias.getItem(key);\n    } else {\n      localStorageAlias.removeItem(key);\n      localStorageAlias.removeItem(key + '.expires');\n    }\n    return undefined;\n  } catch (e) {\n    return undefined;\n  }\n}\n\n/**\n * Attempt to write a value to localStorage\n *\n * @param string - key\n * @param string - value\n * @param number - ttl Time to live in seconds, defaults to 2 years from Date.now()\n * @returns boolean Whether the operation succeeded\n */\nexport function attemptWriteLocalStorage(key: string, value: string, ttl = 63072000) {\n  try {\n    const localStorageAlias = window.localStorage,\n      t = Date.now() + ttl * 1000;\n    localStorageAlias.setItem(`${key}.expires`, t.toString());\n    localStorageAlias.setItem(key, value);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Attempt to delete a value from localStorage\n *\n * @param string - key\n * @returns boolean Whether the operation succeeded\n */\nexport function attemptDeleteLocalStorage(key: string) {\n  try {\n    const localStorageAlias = window.localStorage;\n    localStorageAlias.removeItem(key);\n    localStorageAlias.removeItem(key + '.expires');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Attempt to get a value from sessionStorage\n *\n * @param string - key\n * @returns string The value obtained from sessionStorage, or\n *                undefined if sessionStorage is inaccessible\n */\nexport function attemptGetSessionStorage(key: string) {\n  try {\n    return window.sessionStorage.getItem(key);\n  } catch (e) {\n    return undefined;\n  }\n}\n\n/**\n * Attempt to write a value to sessionStorage\n *\n * @param string - key\n * @param string - value\n * @returns boolean Whether the operation succeeded\n */\nexport function attemptWriteSessionStorage(key: string, value: string) {\n  try {\n    window.sessionStorage.setItem(key, value);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n","import { ExtendedCrossDomainLinkerAttributes, Platform } from '../tracker/types';\n\nconst DEFAULT_CROSS_DOMAIN_LINKER_PARAMS: ExtendedCrossDomainLinkerAttributes = {\n  sessionId: true,\n  sourceId: true,\n  sourcePlatform: false,\n  userId: false,\n  reason: false,\n};\n\ninterface ExtendedCrossDomainLinkerValues {\n  domainUserId?: string;\n  /* Timestamp of the cross-domain link click. */\n  timestamp?: number;\n  /* Current user ID as set with setUserId(). */\n  userId?: string;\n  /* Visitor ID. */\n  sessionId?: string;\n  /* The app ID. */\n  sourceId?: string;\n  sourcePlatform?: Platform;\n  /* Link text of the cross-domain link. */\n  reason?: string;\n}\n\nexport function createCrossDomainParameterValue(\n  isExtendedFormat: boolean,\n  attributeConfiguration: ExtendedCrossDomainLinkerAttributes | undefined,\n  attributeValues: ExtendedCrossDomainLinkerValues & {\n    /* As `reason` might be a callback, we also need to pass the event to calculate the reason value. */\n    event: Event;\n  }\n): string {\n  let crossDomainParameterValue;\n  const timestamp = new Date().getTime();\n  const config = { ...DEFAULT_CROSS_DOMAIN_LINKER_PARAMS, ...attributeConfiguration };\n  const { domainUserId, userId, sessionId, sourceId, sourcePlatform, event } = attributeValues;\n\n  const eventTarget = event.currentTarget as HTMLAnchorElement | HTMLAreaElement | null;\n  const reason = typeof config.reason === 'function' ? config.reason(event) : eventTarget?.textContent?.trim();\n\n  if (isExtendedFormat) {\n    /* Index is used by Enrich, so it should not be changed. */\n    crossDomainParameterValue = [\n      domainUserId,\n      timestamp,\n      config.sessionId && sessionId,\n      config.userId && urlSafeBase64Encode(userId || ''),\n      config.sourceId && urlSafeBase64Encode(sourceId || ''),\n      config.sourcePlatform && sourcePlatform,\n      config.reason && urlSafeBase64Encode(reason || ''),\n    ]\n      .map((attribute) => attribute || '')\n      .join('.')\n      // Remove trailing dots\n      .replace(/([.]*$)/, '');\n  } else {\n    crossDomainParameterValue = attributeValues.domainUserId + '.' + timestamp;\n  }\n\n  return crossDomainParameterValue;\n}\n\n/**\n *\n * The url-safe variation emits - and _ instead of + and / characters. Also removes = sign padding.\n * @param {string} str The string to encode in a URL safe manner\n * @return {string}\n */\nexport function urlSafeBase64Encode(str: string) {\n  return btoa(str).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/\\=+$/, '');\n}\n","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nexport * from './storage';\nexport * from './cross_domain';\n\ndeclare global {\n  interface EventTarget {\n    attachEvent?: (type: string, fn: EventListenerOrEventListenerObject) => void;\n  }\n}\n\n/**\n * The criteria which will be used to filter results to specific classes or elements\n */\nexport interface FilterCriterion<T> {\n  /** A collection of class names to include */\n  allowlist?: string[];\n  /** A collector of class names to exclude */\n  denylist?: string[];\n  /** A callback which returns a boolean as to whether the element should be included */\n  filter?: (elt: T) => boolean;\n}\n\n/**\n * Checks if an object is a string\n * @param str - The object to check\n */\nexport function isString(str: Object): str is string {\n  if (str && typeof str.valueOf() === 'string') {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Checks if an object is an integer\n * @param int - The object to check\n */\nexport function isInteger(int: Object): int is number {\n  return (\n    (Number.isInteger && Number.isInteger(int)) || (typeof int === 'number' && isFinite(int) && Math.floor(int) === int)\n  );\n}\n\n/**\n * Checks if the input parameter is a function\n * @param func - The object to check\n */\nexport function isFunction(func: unknown) {\n  if (func && typeof func === 'function') {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Lightweight configured runtime timezone detection\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/resolvedOptions#getting_the_users_time_zone_and_locale_preferences\n * @returns IANA timezone name of current runtime preference\n */\nexport function getTimeZone(): string | void {\n  if (typeof Intl === 'object' && typeof Intl.DateTimeFormat === 'function') {\n    const systemPreferences = new Intl.DateTimeFormat().resolvedOptions();\n    return systemPreferences.timeZone;\n  }\n}\n\n/**\n * Cleans up the page title\n */\nexport function fixupTitle(title: string | { text: string }) {\n  if (!isString(title)) {\n    title = title.text || '';\n\n    var tmp = document.getElementsByTagName('title');\n    if (tmp && tmp[0] != null) {\n      title = tmp[0].text;\n    }\n  }\n  return title;\n}\n\n/**\n * Extract hostname from URL\n */\nexport function getHostName(url: string) {\n  // scheme : // [username [: password] @] hostname [: port] [/ [path] [? query] [# fragment]]\n  var e = new RegExp('^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)'),\n    matches = e.exec(url);\n\n  return matches ? matches[1] : url;\n}\n\n/**\n * Fix-up domain\n */\nexport function fixupDomain(domain: string) {\n  var dl = domain.length;\n\n  // remove trailing '.'\n  if (domain.charAt(--dl) === '.') {\n    domain = domain.slice(0, dl);\n  }\n  // remove leading '*'\n  if (domain.slice(0, 2) === '*.') {\n    domain = domain.slice(1);\n  }\n  return domain;\n}\n\n/**\n * Get page referrer. In the case of a single-page app,\n * if the URL changes without the page reloading, pass\n * in the old URL. It will be returned unless overriden\n * by a \"refer(r)er\" parameter in the querystring.\n *\n * @param string - oldLocation Optional.\n * @returns string The referrer\n */\nexport function getReferrer(oldLocation?: string) {\n  let windowAlias = window,\n    fromQs =\n      fromQuerystring('referrer', windowAlias.location.href) || fromQuerystring('referer', windowAlias.location.href);\n\n  // Short-circuit\n  if (fromQs) {\n    return fromQs;\n  }\n\n  // In the case of a single-page app, return the old URL\n  if (oldLocation) {\n    return oldLocation;\n  }\n\n  try {\n    if (windowAlias.top) {\n      return windowAlias.top.document.referrer;\n    } else if (windowAlias.parent) {\n      return windowAlias.parent.document.referrer;\n    }\n  } catch {}\n\n  return document.referrer;\n}\n\n/**\n * Cross-browser helper function to add event handler\n */\nexport function addEventListener(\n  element: HTMLElement | EventTarget,\n  eventType: string,\n  eventHandler: EventListenerOrEventListenerObject,\n  options?: boolean | AddEventListenerOptions\n) {\n  if (element.addEventListener) {\n    element.addEventListener(eventType, eventHandler, options);\n    return true;\n  }\n\n  // IE Support\n  if (element.attachEvent) {\n    return element.attachEvent('on' + eventType, eventHandler);\n  }\n  (element as any)['on' + eventType] = eventHandler;\n}\n\n/**\n * Return value from name-value pair in querystring\n */\nexport function fromQuerystring(field: string, url: string) {\n  var match = new RegExp('^[^#]*[?&]' + field + '=([^&#]*)').exec(url);\n  if (!match) {\n    return null;\n  }\n  return decodeURIComponent(match[1].replace(/\\+/g, ' '));\n}\n\n/**\n * Add a name-value pair to the querystring of a URL\n *\n * @param string - url URL to decorate\n * @param string - name Name of the querystring pair\n * @param string - value Value of the querystring pair\n */\nexport function decorateQuerystring(url: string, name: string, value: string) {\n  var initialQsParams = name + '=' + value;\n  var hashSplit = url.split('#');\n  var qsSplit = hashSplit[0].split('?');\n  var beforeQuerystring = qsSplit.shift();\n  // Necessary because a querystring may contain multiple question marks\n  var querystring = qsSplit.join('?');\n  if (!querystring) {\n    querystring = initialQsParams;\n  } else {\n    // Whether this is the first time the link has been decorated\n    var initialDecoration = true;\n    var qsFields = querystring.split('&');\n    for (var i = 0; i < qsFields.length; i++) {\n      if (qsFields[i].substr(0, name.length + 1) === name + '=') {\n        initialDecoration = false;\n        qsFields[i] = initialQsParams;\n        querystring = qsFields.join('&');\n        break;\n      }\n    }\n    if (initialDecoration) {\n      querystring = initialQsParams + '&' + querystring;\n    }\n  }\n  hashSplit[0] = beforeQuerystring + '?' + querystring;\n  return hashSplit.join('#');\n}\n\n/**\n * Finds the root domain\n */\nexport function findRootDomain(sameSite: string, secure: boolean) {\n  const windowLocationHostnameAlias = window.location.hostname,\n    cookiePrefix = '_sp_root_domain_test_',\n    cookieName = cookiePrefix + new Date().getTime(),\n    cookieValue = '_test_value_' + new Date().getTime();\n\n  const locationParts = windowLocationHostnameAlias.split('.');\n  for (let idx = locationParts.length - 2; idx >= 0; idx--) {\n    const currentDomain = locationParts.slice(idx).join('.');\n    cookie(cookieName, cookieValue, 0, '/', currentDomain, sameSite, secure);\n    if (cookie(cookieName) === cookieValue) {\n      // Clean up created cookie(s)\n      deleteCookie(cookieName, '/', currentDomain, sameSite, secure);\n      const cookieNames = getCookiesWithPrefix(cookiePrefix);\n      for (let i = 0; i < cookieNames.length; i++) {\n        deleteCookie(cookieNames[i], '/', currentDomain, sameSite, secure);\n      }\n\n      return currentDomain;\n    }\n  }\n\n  // Cookies cannot be read\n  return windowLocationHostnameAlias;\n}\n\n/**\n * Checks whether a value is present within an array\n *\n * @param val - The value to check for\n * @param array - The array to check within\n * @returns boolean Whether it exists\n */\nexport function isValueInArray<T>(val: T, array: T[]) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === val) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Deletes an arbitrary cookie by setting the expiration date to the past\n *\n * @param cookieName - The name of the cookie to delete\n * @param domainName - The domain the cookie is in\n */\nexport function deleteCookie(cookieName: string, path?: string, domainName?: string, sameSite?: string, secure?: boolean) {\n  cookie(cookieName, '', -1, path, domainName, sameSite, secure);\n}\n\n/**\n * Fetches the name of all cookies beginning with a certain prefix\n *\n * @param cookiePrefix - The prefix to check for\n * @returns array The cookies that begin with the prefix\n */\nexport function getCookiesWithPrefix(cookiePrefix: string) {\n  var cookies = document.cookie.split('; ');\n  var cookieNames = [];\n  for (var i = 0; i < cookies.length; i++) {\n    if (cookies[i].substring(0, cookiePrefix.length) === cookiePrefix) {\n      cookieNames.push(cookies[i]);\n    }\n  }\n  return cookieNames;\n}\n\n/**\n * Get and set the cookies associated with the current document in browser\n * This implementation always returns a string, returns the cookie value if only name is specified\n *\n * @param name - The cookie name (required)\n * @param value - The cookie value\n * @param ttl - The cookie Time To Live (seconds)\n * @param path - The cookies path\n * @param domain - The cookies domain\n * @param samesite - The cookies samesite attribute\n * @param secure - Boolean to specify if cookie should be secure\n * @returns string The cookies value\n */\nexport function cookie(\n  name: string,\n  value?: string,\n  ttl?: number,\n  path?: string,\n  domain?: string,\n  samesite?: string,\n  secure?: boolean\n) {\n  if (arguments.length > 1) {\n    return (document.cookie =\n      name +\n      '=' +\n      encodeURIComponent(value ?? '') +\n      (ttl ? '; Expires=' + new Date(+new Date() + ttl * 1000).toUTCString() : '') +\n      (path ? '; Path=' + path : '') +\n      (domain ? '; Domain=' + domain : '') +\n      (samesite ? '; SameSite=' + samesite : '') +\n      (secure ? '; Secure' : ''));\n  }\n\n  return decodeURIComponent((('; ' + document.cookie).split('; ' + name + '=')[1] || '').split(';')[0]);\n}\n\n/**\n * Parses an object and returns either the\n * integer or undefined.\n *\n * @param obj - The object to parse\n * @returns the result of the parse operation\n */\nexport function parseAndValidateInt(obj: unknown) {\n  var result = parseInt(obj as string);\n  return isNaN(result) ? undefined : result;\n}\n\n/**\n * Parses an object and returns either the\n * number or undefined.\n *\n * @param obj - The object to parse\n * @returns the result of the parse operation\n */\nexport function parseAndValidateFloat(obj: unknown) {\n  var result = parseFloat(obj as string);\n  return isNaN(result) ? undefined : result;\n}\n\n/**\n * Convert a criterion object to a filter function\n *\n * @param object - criterion Either {allowlist: [array of allowable strings]}\n *                             or {denylist: [array of allowable strings]}\n *                             or {filter: function (elt) {return whether to track the element}\n * @param boolean - byClass Whether to allowlist/denylist based on an element's classes (for forms)\n *                        or name attribute (for fields)\n */\nexport function getFilterByClass(criterion?: FilterCriterion<HTMLElement> | null): (elt: HTMLElement) => boolean {\n  // If the criterion argument is not an object, add listeners to all elements\n  if (criterion == null || typeof criterion !== 'object' || Array.isArray(criterion)) {\n    return function () {\n      return true;\n    };\n  }\n\n  const inclusive = Object.prototype.hasOwnProperty.call(criterion, 'allowlist');\n  const specifiedClassesSet = getSpecifiedClassesSet(criterion);\n\n  return getFilter(criterion, function (elt: HTMLElement) {\n    return checkClass(elt, specifiedClassesSet) === inclusive;\n  });\n}\n\n/**\n * Convert a criterion object to a filter function\n *\n * @param object - criterion Either {allowlist: [array of allowable strings]}\n *                             or {denylist: [array of allowable strings]}\n *                             or {filter: function (elt) {return whether to track the element}\n */\nexport function getFilterByName<T extends { name: string }>(criterion?: FilterCriterion<T>): (elt: T) => boolean {\n  // If the criterion argument is not an object, add listeners to all elements\n  if (criterion == null || typeof criterion !== 'object' || Array.isArray(criterion)) {\n    return function () {\n      return true;\n    };\n  }\n\n  const inclusive = criterion.hasOwnProperty('allowlist');\n  const specifiedClassesSet = getSpecifiedClassesSet(criterion);\n\n  return getFilter(criterion, function (elt: T) {\n    return elt.name in specifiedClassesSet === inclusive;\n  });\n}\n\n/**\n * List the classes of a DOM element without using elt.classList (for compatibility with IE 9)\n */\nexport function getCssClasses(elt: Element) {\n  return elt.className.match(/\\S+/g) || [];\n}\n\n/**\n * Check whether an element has at least one class from a given list\n */\nfunction checkClass(elt: Element, classList: Record<string, boolean>) {\n  var classes = getCssClasses(elt);\n\n  for (const className of classes) {\n    if (classList[className]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction getFilter<T>(criterion: FilterCriterion<T>, fallbackFilter: (elt: T) => boolean) {\n  if (criterion.hasOwnProperty('filter') && criterion.filter) {\n    return criterion.filter;\n  }\n\n  return fallbackFilter;\n}\n\nfunction getSpecifiedClassesSet<T>(criterion: FilterCriterion<T>) {\n  // Convert the array of classes to an object of the form {class1: true, class2: true, ...}\n  var specifiedClassesSet: Record<string, boolean> = {};\n  var specifiedClasses = criterion.allowlist || criterion.denylist;\n\n  if (specifiedClasses) {\n    if (!Array.isArray(specifiedClasses)) {\n      specifiedClasses = [specifiedClasses];\n    }\n\n    for (var i = 0; i < specifiedClasses.length; i++) {\n      specifiedClassesSet[specifiedClasses[i]] = true;\n    }\n  }\n\n  return specifiedClassesSet;\n}\n","import { newEmitter, EmitterConfiguration } from '@snowplow/tracker-core';\nimport {\n  newLocalStorageEventStore,\n  LocalStorageEventStoreConfiguration,\n  LocalStorageEventStore,\n} from './local_storage_event_store';\nimport { Payload } from '@snowplow/tracker-core';\nimport { SharedState } from '../state';\n\nexport interface OutQueue {\n  enqueueRequest: (request: Payload) => Promise<void>;\n  executeQueue: () => Promise<void>;\n  setUseLocalStorage: (localStorage: boolean) => void;\n  setAnonymousTracking: (anonymous: boolean) => void;\n  setCollectorUrl: (url: string) => void;\n  setBufferSize: (bufferSize: number) => void;\n}\n\nexport function newOutQueue(\n  configuration: EmitterConfiguration & LocalStorageEventStoreConfiguration,\n  sharedState: SharedState\n): OutQueue {\n  const eventStore = configuration.eventStore ?? newLocalStorageEventStore(configuration);\n  configuration.eventStore = eventStore;\n  const emitter = newEmitter(configuration);\n\n  sharedState.bufferFlushers.push(emitter.flush);\n\n  return {\n    enqueueRequest: emitter.input,\n    executeQueue: emitter.flush,\n    setAnonymousTracking: emitter.setAnonymousTracking,\n    setCollectorUrl: emitter.setCollectorUrl,\n    setBufferSize: emitter.setBufferSize,\n    setUseLocalStorage: (localStorage: boolean) => {\n      if (eventStore.hasOwnProperty('setUseLocalStorage')) {\n        const localStorageStore = eventStore as LocalStorageEventStore;\n        localStorageStore.setUseLocalStorage(localStorage);\n      }\n    },\n  };\n}\n","import { EventStore, newInMemoryEventStore, EventStorePayload } from '@snowplow/tracker-core';\nimport { LocalStorageEventStoreConfigurationBase } from './types';\n\nexport interface LocalStorageEventStoreConfiguration extends LocalStorageEventStoreConfigurationBase {\n  /**\n   * The unique identifier for the event store\n   */\n  trackerId: string;\n}\n\nexport interface LocalStorageEventStore extends EventStore {\n  setUseLocalStorage: (localStorage: boolean) => void;\n}\n\nexport function newLocalStorageEventStore({\n  trackerId,\n  maxLocalStorageQueueSize = 1000,\n  useLocalStorage = true,\n}: LocalStorageEventStoreConfiguration): LocalStorageEventStore {\n  const queueName = `snowplowOutQueue_${trackerId}`;\n\n  function newInMemoryEventStoreFromLocalStorage() {\n    if (useLocalStorage) {\n      const localStorageQueue = window.localStorage.getItem(queueName);\n      const events: EventStorePayload[] = localStorageQueue ? JSON.parse(localStorageQueue) : [];\n      return newInMemoryEventStore({ maxSize: maxLocalStorageQueueSize, events });\n    } else {\n      return newInMemoryEventStore({ maxSize: maxLocalStorageQueueSize });\n    }\n  }\n\n  const { getAll, getAllPayloads, add, count, iterator, removeHead } = newInMemoryEventStoreFromLocalStorage();\n\n  function sync(): Promise<void> {\n    if (useLocalStorage) {\n      return getAll().then((events) => {\n        window.localStorage.setItem(queueName, JSON.stringify(events));\n      });\n    } else {\n      return Promise.resolve();\n    }\n  }\n\n  return {\n    count,\n    add: (payload: EventStorePayload) => {\n      add(payload);\n      return sync().then(count);\n    },\n    removeHead: (count: number) => {\n      removeHead(count);\n      return sync();\n    },\n    iterator,\n    getAll,\n    getAllPayloads,\n    setUseLocalStorage: (use: boolean) => {\n      useLocalStorage = use;\n    },\n  };\n}\n","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport { fromQuerystring, getHostName } from './helpers';\n\n/*\n * Extract parameter from URL\n */\nfunction getParameter(url: string, name: string) {\n  // scheme : // [username [: password] @] hostname [: port] [/ [path] [? query] [# fragment]]\n  var e = new RegExp('^(?:https?|ftp)(?::/*(?:[^?]+))([?][^#]+)'),\n    matches = e.exec(url);\n\n  if (matches && matches?.length > 1) {\n    return fromQuerystring(name, matches[1]);\n  }\n  return null;\n}\n\n/*\n * Fix-up URL when page rendered from search engine cache or translated page.\n */\nexport function fixupUrl(hostName: string, href: string, referrer: string) {\n  if (hostName === 'translate.googleusercontent.com') {\n    // Google\n    if (referrer === '') {\n      referrer = href;\n    }\n    href = getParameter(href, 'u') ?? '';\n    hostName = getHostName(href);\n  } else if (\n    hostName === 'cc.bingj.com' || // Bing & Yahoo\n    hostName === 'webcache.googleusercontent.com' // Google\n  ) {\n    href = document.links[0].href;\n    hostName = getHostName(href);\n  }\n  return [hostName, href, referrer];\n}\n","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport { PayloadBuilder } from '@snowplow/tracker-core';\nimport { v4 as uuid } from 'uuid';\nimport { ClientSession, ParsedIdCookie } from './types';\n\n/**\n * Indices of cookie values\n */\nconst cookieDisabledIndex = 0,\n  domainUserIdIndex = 1,\n  createTsIndex = 2,\n  visitCountIndex = 3,\n  nowTsIndex = 4,\n  lastVisitTsIndex = 5,\n  sessionIdIndex = 6,\n  previousSessionIdIndex = 7,\n  firstEventIdIndex = 8,\n  firstEventTsInMsIndex = 9,\n  eventIndexIndex = 10;\n\nexport function emptyIdCookie() {\n  const idCookie: ParsedIdCookie = ['1', '', 0, 0, 0, undefined, '', '', '', undefined, 0];\n  return idCookie;\n}\n\n/**\n * Parses the cookie values from its string representation.\n *\n * @param id Cookie value as string\n * @param domainUserId Domain user ID to be used in case of empty cookie string\n * @returns Parsed ID cookie tuple\n */\nexport function parseIdCookie(\n  id: string | undefined,\n  domainUserId: string,\n  memorizedSessionId: string,\n  memorizedVisitCount: number\n) {\n  let now = new Date(),\n    nowTs = Math.round(now.getTime() / 1000),\n    tmpContainer;\n\n  if (id) {\n    tmpContainer = id.split('.');\n    // cookies enabled\n    tmpContainer.unshift('0');\n  } else {\n    tmpContainer = [\n      // cookies disabled\n      '1',\n      // Domain user ID\n      domainUserId,\n      // Creation timestamp - seconds since Unix epoch\n      nowTs,\n      // visitCount - 0 = no previous visit\n      memorizedVisitCount,\n      // Current visit timestamp\n      nowTs,\n      // Last visit timestamp - blank meaning no previous visit\n      '',\n      // Session ID\n      memorizedSessionId,\n    ];\n  }\n\n  if (!tmpContainer[sessionIdIndex] || tmpContainer[sessionIdIndex] === 'undefined') {\n    // session id\n    tmpContainer[sessionIdIndex] = uuid();\n  }\n  if (!tmpContainer[previousSessionIdIndex] || tmpContainer[previousSessionIdIndex] === 'undefined') {\n    // previous session id\n    tmpContainer[previousSessionIdIndex] = '';\n  }\n  if (!tmpContainer[firstEventIdIndex] || tmpContainer[firstEventIdIndex] === 'undefined') {\n    // firstEventId - blank meaning no previous event\n    tmpContainer[firstEventIdIndex] = '';\n  }\n  if (!tmpContainer[firstEventTsInMsIndex] || tmpContainer[firstEventTsInMsIndex] === 'undefined') {\n    // firstEventTs - blank meaning no previous event\n    tmpContainer[firstEventTsInMsIndex] = '';\n  }\n  if (!tmpContainer[eventIndexIndex] || tmpContainer[eventIndexIndex] === 'undefined') {\n    // eventIndex  0 = no previous event\n    tmpContainer[eventIndexIndex] = 0;\n  }\n\n  const parseIntOr = (value: any, defaultValue: any) => {\n    let parsed = parseInt(value as string);\n    return isNaN(parsed) ? defaultValue : parsed;\n  };\n  const parseIntOrUndefined = (value: any) => (value ? parseIntOr(value, undefined) : undefined);\n\n  const parsed: ParsedIdCookie = [\n    tmpContainer[cookieDisabledIndex] as string,\n    tmpContainer[domainUserIdIndex] as string,\n    parseIntOr(tmpContainer[createTsIndex], nowTs),\n    parseIntOr(tmpContainer[visitCountIndex], memorizedVisitCount),\n    parseIntOr(tmpContainer[nowTsIndex], nowTs),\n    parseIntOrUndefined(tmpContainer[lastVisitTsIndex]),\n    tmpContainer[sessionIdIndex] as string,\n    tmpContainer[previousSessionIdIndex] as string,\n    tmpContainer[firstEventIdIndex] as string,\n    parseIntOrUndefined(tmpContainer[firstEventTsInMsIndex]),\n    parseIntOr(tmpContainer[eventIndexIndex], 0),\n  ];\n  return parsed;\n}\n\n/**\n * Initializes the domain user ID if not already present in the cookie. Sets an empty string if anonymous tracking.\n *\n * @param idCookie Parsed cookie\n * @param configAnonymousTracking Whether anonymous tracking is enabled\n * @returns Domain user ID\n */\nexport function initializeDomainUserId(idCookie: ParsedIdCookie, configAnonymousTracking: boolean) {\n  let domainUserId;\n  if (idCookie[domainUserIdIndex]) {\n    domainUserId = idCookie[domainUserIdIndex];\n  } else if (!configAnonymousTracking) {\n    domainUserId = uuid();\n    idCookie[domainUserIdIndex] = domainUserId;\n  } else {\n    domainUserId = '';\n    idCookie[domainUserIdIndex] = domainUserId;\n  }\n  return domainUserId;\n}\n\ntype NewSessionOptions = {\n  memorizedVisitCount: number;\n};\n\n/**\n * Starts a new session with a new ID.\n * Sets the previous session, last visit timestamp, and increments visit count if cookies enabled.\n * First event references are reset and will be updated in `updateFirstEventInIdCookie`.\n *\n * @param idCookie Parsed cookie\n * @param options.configStateStorageStrategy Cookie storage strategy\n * @param options.configAnonymousTracking If anonymous tracking is enabled\n * @param options.memorizedVisitCount Visit count to be used if cookies not enabled\n * @param options.onSessionUpdateCallback Session callback triggered on every session update\n * @returns New session ID\n */\nexport function startNewIdCookieSession(\n  idCookie: ParsedIdCookie,\n  options: NewSessionOptions = { memorizedVisitCount: 1 }\n) {\n  const { memorizedVisitCount } = options;\n\n  // If cookies are enabled, base visit count and session ID on the cookies\n  if (cookiesEnabledInIdCookie(idCookie)) {\n    // Store the previous session ID\n    idCookie[previousSessionIdIndex] = idCookie[sessionIdIndex];\n    // Set lastVisitTs to currentVisitTs\n    idCookie[lastVisitTsIndex] = idCookie[nowTsIndex];\n    // Increment the session ID\n    idCookie[visitCountIndex]++;\n  } else {\n    idCookie[visitCountIndex] = memorizedVisitCount;\n  }\n\n  // Create a new sessionId\n  const sessionId = uuid();\n  idCookie[sessionIdIndex] = sessionId;\n\n  // Reset event index and first event references\n  idCookie[eventIndexIndex] = 0;\n  idCookie[firstEventIdIndex] = '';\n  idCookie[firstEventTsInMsIndex] = undefined;\n\n  return sessionId;\n}\n\n/**\n * Update now timestamp in cookie.\n *\n * @param idCookie Parsed cookie\n */\nexport function updateNowTsInIdCookie(idCookie: ParsedIdCookie) {\n  idCookie[nowTsIndex] = Math.round(new Date().getTime() / 1000);\n}\n\n/**\n * Updates the first event references according to the event payload if first event in session.\n *\n * @param idCookie - Parsed cookie\n * @param payloadBuilder - Event payload builder\n */\nexport function updateFirstEventInIdCookie(idCookie: ParsedIdCookie, payloadBuilder: PayloadBuilder) {\n  // Update first event references if new session or not present\n  if (idCookie[eventIndexIndex] === 0) {\n    const payload = payloadBuilder.build();\n    idCookie[firstEventIdIndex] = payload['eid'] as string;\n    const ts = (payload['dtm'] || payload['ttm']) as string;\n    idCookie[firstEventTsInMsIndex] = ts ? parseInt(ts) : undefined;\n  }\n}\n\n/**\n * Increments event index counter.\n *\n * @param idCookie Parsed cookie\n */\nexport function incrementEventIndexInIdCookie(idCookie: ParsedIdCookie) {\n  idCookie[eventIndexIndex] += 1;\n}\n\n/**\n * Serializes parsed cookie to string representation.\n *\n * @param idCookie Parsed cookie\n * @returns String cookie value\n */\nexport function serializeIdCookie(idCookie: ParsedIdCookie, configAnonymousTracking: boolean) {\n  const anonymizedIdCookie: (string | number | undefined)[] = [...idCookie];\n  if (configAnonymousTracking) {\n    anonymizedIdCookie[domainUserIdIndex] = '';\n    anonymizedIdCookie[previousSessionIdIndex] = '';\n  }\n  anonymizedIdCookie.shift();\n  return anonymizedIdCookie.join('.');\n}\n\n/**\n * Transforms the parsed cookie into a client session context entity.\n *\n * @param idCookie Parsed cookie\n * @param configStateStorageStrategy Cookie storage strategy\n * @param configAnonymousTracking If anonymous tracking is enabled\n * @returns Client session context entity\n */\nexport function clientSessionFromIdCookie(\n  idCookie: ParsedIdCookie,\n  configStateStorageStrategy: string,\n  configAnonymousTracking: boolean\n) {\n  const firstEventTsInMs = idCookie[firstEventTsInMsIndex];\n  const clientSession: ClientSession = {\n    userId: configAnonymousTracking\n      ? '00000000-0000-0000-0000-000000000000' // TODO: use uuid.NIL when we upgrade to uuid v8.3\n      : idCookie[domainUserIdIndex],\n    sessionId: idCookie[sessionIdIndex],\n    eventIndex: idCookie[eventIndexIndex],\n    sessionIndex: idCookie[visitCountIndex],\n    previousSessionId: configAnonymousTracking ? null : idCookie[previousSessionIdIndex] || null,\n    storageMechanism: configStateStorageStrategy == 'localStorage' ? 'LOCAL_STORAGE' : 'COOKIE_1',\n    firstEventId: idCookie[firstEventIdIndex] || null,\n    firstEventTimestamp: firstEventTsInMs ? new Date(firstEventTsInMs).toISOString() : null,\n  };\n\n  return clientSession;\n}\n\nexport function sessionIdFromIdCookie(idCookie: ParsedIdCookie) {\n  return idCookie[sessionIdIndex];\n}\n\nexport function domainUserIdFromIdCookie(idCookie: ParsedIdCookie) {\n  return idCookie[domainUserIdIndex];\n}\n\nexport function visitCountFromIdCookie(idCookie: ParsedIdCookie) {\n  return idCookie[visitCountIndex];\n}\n\nexport function cookiesEnabledInIdCookie(idCookie: ParsedIdCookie) {\n  return idCookie[cookieDisabledIndex] === '0';\n}\n\nexport function createTsFromIdCookie(idCookie: ParsedIdCookie) {\n  return idCookie[createTsIndex];\n}\n\nexport function nowTsFromIdCookie(idCookie: ParsedIdCookie) {\n  return idCookie[nowTsIndex];\n}\n\nexport function lastVisitTsFromIdCookie(idCookie: ParsedIdCookie) {\n  return idCookie[lastVisitTsIndex];\n}\n\nexport function previousSessionIdFromIdCookie(idCookie: ParsedIdCookie) {\n  return idCookie[previousSessionIdIndex];\n}\n\nexport function firstEventIdFromIdCookie(idCookie: ParsedIdCookie) {\n  return idCookie[firstEventIdIndex];\n}\n\nexport function firstEventTsInMsFromIdCookie(idCookie: ParsedIdCookie) {\n  return idCookie[firstEventTsInMsIndex];\n}\n\nexport function eventIndexFromIdCookie(idCookie: ParsedIdCookie) {\n  return idCookie[eventIndexIndex];\n}\n","export const WEB_PAGE_SCHEMA = 'iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0';\nexport const BROWSER_CONTEXT_SCHEMA = 'iglu:com.snowplowanalytics.snowplow/browser_context/jsonschema/2-0-0';\nexport const CLIENT_SESSION_SCHEMA = 'iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2';\n","interface BrowserProperties {\n  viewport?: string | null;\n  documentSize?: string | null;\n  resolution?: string | null;\n  colorDepth: number;\n  devicePixelRatio: number;\n  cookiesEnabled: boolean;\n  online: boolean;\n  browserLanguage: string;\n  documentLanguage: string;\n  webdriver: boolean;\n  deviceMemory?: number; // Optional because it's not supported in all browsers\n  hardwareConcurrency?: number;\n}\n\nfunction useResizeObserver(): boolean {\n  return 'ResizeObserver' in window;\n}\n\nlet resizeObserverInitialized = false;\nfunction initializeResizeObserver() {\n  if (resizeObserverInitialized) {\n    return;\n  }\n  if(!document || !document.body || !document.documentElement) {\n    return;\n  }\n  resizeObserverInitialized = true;\n\n  const resizeObserver = new ResizeObserver((entries) => {\n    for (let entry of entries) {\n      if (entry.target === document.body || entry.target === document.documentElement) {\n        cachedProperties = readBrowserProperties();\n      }\n    }\n  });\n  resizeObserver.observe(document.body);\n  resizeObserver.observe(document.documentElement);\n}\n\nlet cachedProperties: BrowserProperties;\n\n/* Separator used for dimension values e.g. widthxheight */\nconst DIMENSION_SEPARATOR = 'x';\n\n/**\n * Gets various browser properties (that are expensive to read!)\n * - Will use a \"ResizeObserver\" approach in modern browsers to update cached properties only on change\n * - Will fallback to a direct read approach without cache in old browsers\n *\n * @returns BrowserProperties\n */\nexport function getBrowserProperties() {\n  if (!useResizeObserver()) {\n    return readBrowserProperties();\n  }\n\n  if (!cachedProperties) {\n    cachedProperties = readBrowserProperties();\n  }\n  initializeResizeObserver();\n  return cachedProperties;\n}\n\n/**\n * Reads the browser properties - expensive call!\n *\n * @returns BrowserProperties\n */\nfunction readBrowserProperties(): BrowserProperties {\n  return {\n    viewport: floorDimensionFields(detectViewport()),\n    documentSize: floorDimensionFields(detectDocumentSize()),\n    resolution: floorDimensionFields(detectScreenResolution()),\n    colorDepth: screen.colorDepth,\n    devicePixelRatio: window.devicePixelRatio,\n    cookiesEnabled: window.navigator.cookieEnabled,\n    online: window.navigator.onLine,\n    browserLanguage: window.navigator.language || (window.navigator as any).userLanguage,\n    documentLanguage: document.documentElement.lang,\n    webdriver: window.navigator.webdriver,\n    deviceMemory: (window.navigator as any).deviceMemory,\n    hardwareConcurrency: (window.navigator as any).hardwareConcurrency,\n  };\n}\n\n/**\n * Gets the current viewport.\n *\n * Code based on:\n * - http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/\n * - http://responsejs.com/labs/dimensions/\n */\nfunction detectViewport() {\n  var width, height;\n\n  if ('innerWidth' in window) {\n    width = window['innerWidth'];\n    height = window['innerHeight'];\n  } else {\n    const e = document.documentElement || document.body;\n    width = e['clientWidth'];\n    height = e['clientHeight'];\n  }\n\n  return Math.max(0, width) + DIMENSION_SEPARATOR + Math.max(0, height);\n}\n\n/**\n * Gets the dimensions of the current\n * document.\n *\n * Code based on:\n * - http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/\n */\nfunction detectDocumentSize() {\n  var de = document.documentElement, // Alias\n    be = document.body,\n    // document.body may not have rendered, so check whether be.offsetHeight is null\n    bodyHeight = be ? Math.max(be.offsetHeight, be.scrollHeight) : 0;\n  var w = Math.max(de.clientWidth, de.offsetWidth, de.scrollWidth);\n  var h = Math.max(de.clientHeight, de.offsetHeight, de.scrollHeight, bodyHeight);\n  return isNaN(w) || isNaN(h) ? '' : w + DIMENSION_SEPARATOR + h;\n}\n\nfunction detectScreenResolution() {\n  return screen.width + DIMENSION_SEPARATOR + screen.height;\n}\n\nexport function floorDimensionFields(field?: string | null) {\n  return (\n    field &&\n    field\n      .split(DIMENSION_SEPARATOR)\n      .map((dimension) => Math.floor(Number(dimension)))\n      .join(DIMENSION_SEPARATOR)\n  );\n}\n","import { cookie, deleteCookie } from '../helpers';\n\n\n/**\n * Cookie storage interface for reading and writing cookies.\n */\nexport interface CookieStorage {\n  /**\n   * Get the value of a cookie\n   *\n   * @param name - The name of the cookie\n   * @returns The cookie value\n   */\n  getCookie(name: string): string;\n\n  /**\n   * Set a cookie\n   *\n   * @param name - The cookie name (required)\n   * @param value - The cookie value\n   * @param ttl - The cookie Time To Live (seconds)\n   * @param path - The cookies path\n   * @param domain - The cookies domain\n   * @param samesite - The cookies samesite attribute\n   * @param secure - Boolean to specify if cookie should be secure\n   * @returns true if the cookie was set, false otherwise\n   */\n  setCookie(\n    name: string,\n    value?: string,\n    ttl?: number,\n    path?: string,\n    domain?: string,\n    samesite?: string,\n    secure?: boolean\n  ): boolean;\n\n  /**\n   * Delete a cookie\n   *\n   * @param name - The cookie name\n   * @param domainName - The cookie domain name\n   * @param sameSite - The cookie same site attribute\n   * @param secure - Boolean to specify if cookie should be secure\n   */\n  deleteCookie(name: string, path?: string, domainName?: string, sameSite?: string, secure?: boolean): void;\n}\n\nexport interface AsyncCookieStorage extends CookieStorage {\n  /**\n   * Clear the cookie storage cache (does not delete any cookies)\n   */\n  clearCache(): void;\n\n  /**\n   * Write all pending cookies.\n   */\n  flush(): void;\n}\n\ninterface Cookie {\n  getValue: () => string;\n  setValue: (value?: string, ttl?: number, path?: string, domain?: string, samesite?: string, secure?: boolean) => boolean;\n  deleteValue: (path?: string, domainName?: string, sameSite?: string, secure?: boolean) => void;\n  flush: () => void;\n}\n\nfunction newCookie(name: string): Cookie {\n  let flushTimer: ReturnType<typeof setTimeout> | undefined;\n  let lastSetValueArgs: Parameters<typeof setValue> | undefined;\n  let cacheExpireAt: Date | undefined;\n  let flushed = true;\n  const flushTimeout = 10; // milliseconds\n  const maxCacheTtl = 0.05; // seconds\n\n  function getValue(): string {\n    // Note: we can't cache the cookie value as we don't know the expiration date\n    if (lastSetValueArgs && (!cacheExpireAt || cacheExpireAt > new Date())) {\n      return lastSetValueArgs[0] ?? cookie(name);\n    }\n    return cookie(name);\n  }\n\n  function setValue(value?: string, ttl?: number, path?: string, domain?: string, samesite?: string, secure?: boolean): boolean {\n    lastSetValueArgs = [value, ttl, path, domain, samesite, secure];\n    flushed = false;\n\n    // throttle setting the cookie\n    if (flushTimer === undefined) {\n      flushTimer = setTimeout(() => {\n        flushTimer = undefined;\n        flush();\n      }, flushTimeout);\n    }\n\n    cacheExpireAt = new Date(Date.now() + Math.min(maxCacheTtl, ttl ?? maxCacheTtl) * 1000);\n    return true;\n  }\n\n  function deleteValue(path?: string, domainName?: string, sameSite?: string, secure?: boolean): void {\n    lastSetValueArgs = undefined;\n    flushed = true;\n\n    // cancel setting the cookie\n    if (flushTimer !== undefined) {\n      clearTimeout(flushTimer);\n      flushTimer = undefined;\n    }\n\n    deleteCookie(name, path, domainName, sameSite, secure);\n  }\n\n  function flush(): void {\n    if (flushTimer !== undefined) {\n      clearTimeout(flushTimer);\n      flushTimer = undefined;\n    }\n\n    if (flushed) {\n      return;\n    }\n    flushed = true;\n\n    if (lastSetValueArgs !== undefined) {\n      const [value, ttl, path, domain, samesite, secure] = lastSetValueArgs;\n      cookie(name, value, ttl, path, domain, samesite, secure);\n    }\n  }\n\n  return {\n    getValue,\n    setValue,\n    deleteValue,\n    flush,\n  };\n}\n\n/**\n * Create a new async cookie storage\n *\n * @returns A new cookie storage\n */\nexport function newCookieStorage(): AsyncCookieStorage {\n  let cache: Record<string, Cookie> = {};\n\n  function getOrInitCookie(name: string): Cookie {\n    if (!cache[name]) {\n      cache[name] = newCookie(name);\n    }\n    return cache[name];\n  }\n\n  function getCookie(name: string): string {\n    return getOrInitCookie(name).getValue();\n  }\n\n  function setCookie(\n    name: string,\n    value?: string,\n    ttl?: number,\n    path?: string,\n    domain?: string,\n    samesite?: string,\n    secure?: boolean\n  ): boolean {\n    return getOrInitCookie(name).setValue(value, ttl, path, domain, samesite, secure);\n  }\n\n  function deleteCookie(name: string, path?: string, domainName?: string, sameSite?: string, secure?: boolean): void {\n    getOrInitCookie(name).deleteValue(path, domainName, sameSite, secure);\n  }\n\n  function clearCache(): void {\n    cache = {};\n  }\n\n  function flush(): void {\n    for (const cookie of Object.values(cache)) {\n      cookie.flush();\n    }\n  }\n\n  return {\n    getCookie,\n    setCookie,\n    deleteCookie,\n    clearCache,\n    flush,\n  };\n}\n\n/**\n * Cookie storage instance with asynchronous cookie writes\n */\nexport const asyncCookieStorage = newCookieStorage();\n\n/**\n * Cookie storage instance with synchronous cookie writes\n */\nexport const syncCookieStorage: CookieStorage = {\n  getCookie: cookie,\n  setCookie: (name, value, ttl, path, domain, samesite, secure) => {\n    cookie(name, value, ttl, path, domain, samesite, secure);\n    return document.cookie.indexOf(`${name}=`) !== -1;\n  },\n  deleteCookie\n};\n","import {\n  trackerCore,\n  buildPagePing,\n  buildPageView,\n  CommonEventProperties,\n  PayloadBuilder,\n  SelfDescribingJson,\n  LOG,\n} from '@snowplow/tracker-core';\nimport hash from 'sha1';\nimport { v4 as uuid } from 'uuid';\nimport {\n  decorateQuerystring,\n  findRootDomain,\n  fixupDomain,\n  getReferrer,\n  addEventListener,\n  getHostName,\n  attemptGetLocalStorage,\n  attemptWriteLocalStorage,\n  attemptDeleteLocalStorage,\n  fixupTitle,\n  fromQuerystring,\n  isInteger,\n  attemptGetSessionStorage,\n  attemptWriteSessionStorage,\n  createCrossDomainParameterValue,\n  getTimeZone,\n} from '../helpers';\nimport { BrowserPlugin } from '../plugins';\nimport { newOutQueue } from './out_queue';\nimport { fixupUrl } from '../proxies';\nimport { SharedState } from '../state';\nimport {\n  PageViewEvent,\n  ActivityCallback,\n  ActivityCallbackData,\n  TrackerConfiguration,\n  BrowserTracker,\n  ActivityTrackingConfiguration,\n  ActivityTrackingConfigurationCallback,\n  DisableAnonymousTrackingConfiguration,\n  EnableAnonymousTrackingConfiguration,\n  FlushBufferConfiguration,\n  BrowserPluginConfiguration,\n  ClearUserDataConfiguration,\n  ClientSession,\n  ExtendedCrossDomainLinkerOptions,\n  ParsedIdCookie,\n  PreservePageViewIdForUrl,\n} from './types';\nimport {\n  parseIdCookie,\n  initializeDomainUserId,\n  startNewIdCookieSession,\n  updateNowTsInIdCookie,\n  serializeIdCookie,\n  sessionIdFromIdCookie,\n  domainUserIdFromIdCookie,\n  updateFirstEventInIdCookie,\n  visitCountFromIdCookie,\n  cookiesEnabledInIdCookie,\n  clientSessionFromIdCookie,\n  incrementEventIndexInIdCookie,\n  emptyIdCookie,\n  eventIndexFromIdCookie,\n} from './id_cookie';\nimport { CLIENT_SESSION_SCHEMA, WEB_PAGE_SCHEMA, BROWSER_CONTEXT_SCHEMA } from './schemata';\nimport { getBrowserProperties } from '../helpers/browser_props';\nimport { asyncCookieStorage, syncCookieStorage } from './cookie_storage';\n\ndeclare global {\n  interface Navigator {\n    msDoNotTrack: boolean;\n  }\n  interface Window {\n    doNotTrack: boolean;\n  }\n}\n\n/** Represents an instance of an activity tracking configuration */\ntype ActivityConfig = {\n  /** The callback to fire based on heart beat */\n  callback: ActivityCallback;\n  /** The minimum time that must have elapsed before first heartbeat */\n  configMinimumVisitLength: number;\n  /** The interval at which the callback will be fired */\n  configHeartBeatTimer: number;\n  /** The setInterval identifier */\n  activityInterval?: number;\n};\n\n/** The configurations for the two types of Activity Tracking */\ntype ActivityConfigurations = {\n  /** The configuration for enableActivityTrackingCallback */\n  callback?: ActivityConfig;\n  /** The configuration for enableActivityTracking */\n  pagePing?: ActivityConfig;\n};\n\n/** The configuration for if either activity tracking system is enable */\ntype ActivityTrackingConfig = {\n  /** Tracks if activity tracking is enabled */\n  enabled: boolean;\n  /** Tracks if activity tracking hooks have been installed */\n  installed: boolean;\n  /** Stores the configuration for each type of activity tracking */\n  configurations: ActivityConfigurations;\n};\n\n/**\n * The Snowplow Tracker\n *\n * @param trackerId - The unique identifier of the tracker\n * @param namespace - The namespace of the tracker object\n * @param version - The current version of the JavaScript Tracker\n * @param endpoint - The collector endpoint to send events to, with or without protocol\n * @param sharedState - An object containing state which is shared across tracker instances\n * @param trackerConfiguration - Dictionary of configuration options\n */\nexport function Tracker(\n  trackerId: string,\n  namespace: string,\n  version: string,\n  endpoint: string,\n  sharedState: SharedState,\n  trackerConfiguration: TrackerConfiguration = {}\n): BrowserTracker {\n  const browserPlugins: Array<BrowserPlugin> = [];\n\n  const newTracker = (\n    trackerId: string,\n    namespace: string,\n    version: string,\n    endpoint: string,\n    state: SharedState,\n    trackerConfiguration: TrackerConfiguration\n  ) => {\n    /************************************************************\n     * Private members\n     ************************************************************/\n\n    //use POST if eventMethod isn't present on the newTrackerConfiguration\n    trackerConfiguration.eventMethod = trackerConfiguration.eventMethod ?? 'post';\n\n    const getStateStorageStrategy = (config: TrackerConfiguration) =>\n        config.stateStorageStrategy ?? 'cookieAndLocalStorage',\n      getAnonymousSessionTracking = (config: TrackerConfiguration) => {\n        if (typeof config.anonymousTracking === 'boolean') {\n          return false;\n        }\n        return config.anonymousTracking?.withSessionTracking === true ?? false;\n      },\n      getAnonymousServerTracking = (config: TrackerConfiguration) => {\n        if (typeof config.anonymousTracking === 'boolean') {\n          return false;\n        }\n        return config.anonymousTracking?.withServerAnonymisation === true ?? false;\n      },\n      getAnonymousTracking = (config: TrackerConfiguration) => !!config.anonymousTracking,\n      isBrowserContextAvailable = trackerConfiguration?.contexts?.browser ?? false,\n      isWebPageContextAvailable = trackerConfiguration?.contexts?.webPage ?? true,\n      getExtendedCrossDomainTrackingConfiguration = (crossDomainTrackingConfig: ExtendedCrossDomainLinkerOptions) => {\n        if (typeof crossDomainTrackingConfig === 'boolean') {\n          return { useExtendedCrossDomainLinker: crossDomainTrackingConfig };\n        }\n\n        return {\n          useExtendedCrossDomainLinker: true,\n          collectCrossDomainAttributes: crossDomainTrackingConfig,\n        };\n      };\n\n    // Create a new cookie storage instance with synchronous cookie write if configured\n    const cookieStorage = trackerConfiguration.synchronousCookieWrite ? syncCookieStorage : asyncCookieStorage;\n\n    // Get all injected plugins\n    browserPlugins.push(getBrowserDataPlugin());\n    /* When including the Web Page context, we add the relevant internal plugins */\n    if (isWebPageContextAvailable) {\n      browserPlugins.push(getWebPagePlugin());\n    }\n    if (isBrowserContextAvailable) {\n      browserPlugins.push(getBrowserContextPlugin());\n    }\n    browserPlugins.push(...(trackerConfiguration.plugins ?? []));\n\n    let // Tracker core\n      core = trackerCore({\n        base64: trackerConfiguration.encodeBase64 ?? trackerConfiguration.eventMethod !== 'post',\n        corePlugins: browserPlugins,\n        callback: sendRequest,\n      }),\n      // Aliases\n      documentCharset = document.characterSet || document.charset,\n      // Current URL and Referrer URL\n      locationArray = fixupUrl(window.location.hostname, window.location.href, getReferrer()),\n      domainAlias = fixupDomain(locationArray[0]),\n      locationHrefAlias = locationArray[1],\n      configReferrerUrl = locationArray[2],\n      customReferrer: string,\n      // Platform defaults to web for this tracker\n      configPlatform = trackerConfiguration.platform ?? 'web',\n      // Site ID\n      configTrackerSiteId = trackerConfiguration.appId ?? '',\n      // Document URL\n      configCustomUrl: string,\n      // Document title\n      lastDocumentTitle = document.title,\n      // Custom title\n      lastConfigTitle: string | null | undefined,\n      // Indicates that the lastConfigTitle was set from a trackPageView call\n      // Custom title configured this way has a shorter lifespan than when set using setDocumentTitle.\n      // It only lasts until the next trackPageView call.\n      lastConfigTitleFromTrackPageView: boolean = false,\n      // Controls whether activity tracking page ping event timers are reset on page view events\n      resetActivityTrackingOnPageView = trackerConfiguration.resetActivityTrackingOnPageView ?? true,\n      // Disallow hash tags in URL. TODO: Should this be set to true by default?\n      configDiscardHashTag: boolean,\n      // Disallow brace in URL.\n      configDiscardBrace: boolean,\n      // First-party cookie name prefix\n      configCookieNamePrefix = trackerConfiguration.cookieName ?? '_sp_',\n      // First-party cookie domain\n      // User agent defaults to origin hostname\n      configCookieDomain = trackerConfiguration.cookieDomain ?? undefined,\n      discoverRootDomain = trackerConfiguration.discoverRootDomain ?? configCookieDomain === undefined,\n      // First-party cookie path\n      // Default is user agent defined.\n      configCookiePath = '/',\n      // First-party cookie samesite attribute\n      configCookieSameSite = trackerConfiguration.cookieSameSite ?? 'Lax',\n      // First-party cookie secure attribute\n      configCookieSecure = trackerConfiguration.cookieSecure ?? true,\n      // Do Not Track browser feature\n      dnt = window.navigator.doNotTrack || window.navigator.msDoNotTrack || window.doNotTrack,\n      // Do Not Track\n      configDoNotTrack =\n        typeof trackerConfiguration.respectDoNotTrack !== 'undefined'\n          ? trackerConfiguration.respectDoNotTrack && (dnt === 'yes' || dnt === '1')\n          : false,\n      // Opt out of cookie tracking\n      configOptOutCookie: string | null | undefined,\n      // Life of the visitor cookie (in seconds)\n      configVisitorCookieTimeout = trackerConfiguration.cookieLifetime ?? 63072000, // 2 years\n      // Life of the session cookie (in seconds)\n      configSessionCookieTimeout = trackerConfiguration.sessionCookieTimeout ?? 1800, // 30 minutes\n      // Allows tracking user session (using cookies or local storage), can only be used with anonymousTracking\n      configAnonymousSessionTracking = getAnonymousSessionTracking(trackerConfiguration),\n      // Will send a header to server to prevent returning cookie and capturing IP\n      configAnonymousServerTracking = getAnonymousServerTracking(trackerConfiguration),\n      // Sets tracker to work in anonymous mode without accessing client storage\n      configAnonymousTracking = getAnonymousTracking(trackerConfiguration),\n      // Strategy defining how to store the state: cookie, localStorage, cookieAndLocalStorage or none\n      configStateStorageStrategy = getStateStorageStrategy(trackerConfiguration),\n      // Last activity timestamp\n      lastActivityTime: number,\n      // The last time an event was fired on the page - used to invalidate session if cookies are disabled\n      lastEventTime = new Date().getTime(),\n      // How are we scrolling?\n      minXOffset: number,\n      maxXOffset: number,\n      minYOffset: number,\n      maxYOffset: number,\n      // Domain hash value\n      domainHash: string,\n      // Domain unique user ID\n      domainUserId: string,\n      // ID for the current session\n      memorizedSessionId: string,\n      // Index for the current session - kept in memory in case cookies are disabled\n      memorizedVisitCount = 1,\n      // Business-defined unique user ID\n      businessUserId: string | null | undefined,\n      // Manager for local storage queue\n      outQueue = newOutQueue(\n        {\n          trackerId,\n          endpoint: asCollectorUrl(endpoint),\n          serverAnonymization: configAnonymousServerTracking,\n          useLocalStorage:\n            configStateStorageStrategy == 'localStorage' || configStateStorageStrategy == 'cookieAndLocalStorage',\n          ...trackerConfiguration,\n        },\n        state\n      ),\n      // Whether pageViewId should be regenerated after each trackPageView. Affect web_page context\n      preservePageViewId = false,\n      // Whether pageViewId should be kept the same until the page URL changes. Affects web_page context\n      preservePageViewIdForUrl = trackerConfiguration.preservePageViewIdForUrl ?? false,\n      // The pageViewId of the last page view event or undefined if no page view tracked yet. Used to determine if pageViewId should be regenerated for a new page view.\n      lastSentPageViewId: string | undefined = undefined,\n      // Activity tracking config for callback and page ping variants\n      activityTrackingConfig: ActivityTrackingConfig = {\n        enabled: false,\n        installed: false, // Guard against installing the activity tracker more than once per Tracker instance\n        configurations: {},\n      },\n      configSessionContext = trackerConfiguration.contexts?.session ?? false,\n      toOptoutByCookie: string | boolean,\n      onSessionUpdateCallback = trackerConfiguration.onSessionUpdateCallback,\n      manualSessionUpdateCalled = false,\n      { useExtendedCrossDomainLinker, collectCrossDomainAttributes } = getExtendedCrossDomainTrackingConfiguration(\n        trackerConfiguration.useExtendedCrossDomainLinker || false\n      );\n\n    if (discoverRootDomain && !configCookieDomain) {\n      configCookieDomain = findRootDomain(configCookieSameSite, configCookieSecure);\n    }\n\n    const { browserLanguage, resolution, colorDepth, cookiesEnabled } = getBrowserProperties();\n    const timeZone = getTimeZone();\n\n    // Set up unchanging name-value pairs\n    core.setTrackerVersion(version);\n    core.setTrackerNamespace(namespace);\n    core.setAppId(configTrackerSiteId);\n    core.setPlatform(configPlatform);\n    core.addPayloadPair('cookie', cookiesEnabled ? '1' : '0');\n    core.addPayloadPair('cs', documentCharset);\n    core.addPayloadPair('lang', browserLanguage);\n    core.addPayloadPair('res', resolution);\n    core.addPayloadPair('cd', colorDepth);\n    if (timeZone) core.addPayloadPair('tz', timeZone);\n\n    /*\n     * Initialize tracker\n     */\n    updateDomainHash();\n\n    initializeIdsAndCookies();\n\n    if (trackerConfiguration.crossDomainLinker) {\n      decorateLinks(trackerConfiguration.crossDomainLinker);\n    }\n\n    /**\n     * Recalculate the domain, URL, and referrer\n     */\n    function refreshUrl() {\n      locationArray = fixupUrl(window.location.hostname, window.location.href, getReferrer());\n\n      // If this is a single-page app and the page URL has changed, then:\n      //   - if the new URL's querystring contains a \"refer(r)er\" parameter, use it as the referrer\n      //   - otherwise use the old URL as the referer\n      if (locationArray[1] !== locationHrefAlias) {\n        configReferrerUrl = getReferrer(locationHrefAlias);\n      }\n\n      domainAlias = fixupDomain(locationArray[0]);\n      locationHrefAlias = locationArray[1];\n    }\n\n    /**\n     * Create link handler to decorate the querystring of a link (onClick/onMouseDown)\n     *\n     * @param event - e The event targeting the link\n     */\n    function addLinkDecorationHandler(extended: boolean): (evt: Event) => void {\n      const CROSS_DOMAIN_PARAMETER_NAME = '_sp';\n\n      return (evt) => {\n        const elt = evt.currentTarget as HTMLAnchorElement | HTMLAreaElement | null;\n\n        const crossDomainParameterValue = createCrossDomainParameterValue(extended, collectCrossDomainAttributes, {\n          domainUserId,\n          userId: businessUserId || undefined,\n          sessionId: memorizedSessionId,\n          sourceId: configTrackerSiteId,\n          sourcePlatform: configPlatform,\n          event: evt,\n        });\n\n        if (elt?.href) {\n          elt.href = decorateQuerystring(elt.href, CROSS_DOMAIN_PARAMETER_NAME, crossDomainParameterValue);\n        }\n      };\n    }\n\n    /**\n     * Enable querystring decoration for links passing a filter\n     * Whenever such a link is clicked on or navigated to via the keyboard,\n     * add \"_sp={{duid}}.{{timestamp}}\" to its querystring\n     *\n     * @param crossDomainLinker - Function used to determine which links to decorate\n     */\n    function decorateLinks(crossDomainLinker: (elt: HTMLAnchorElement | HTMLAreaElement) => boolean) {\n      const crossDomainLinkHandler = addLinkDecorationHandler(useExtendedCrossDomainLinker);\n      for (let i = 0; i < document.links.length; i++) {\n        const elt = document.links[i];\n        if (!(elt as any).spDecorationEnabled && crossDomainLinker(elt)) {\n          elt.addEventListener('click', crossDomainLinkHandler, true);\n          elt.addEventListener('mousedown', crossDomainLinkHandler, true);\n\n          // Don't add event listeners more than once\n          (elt as any).spDecorationEnabled = true;\n        }\n      }\n    }\n\n    /*\n     * Removes hash tag from the URL\n     *\n     * URLs are purified before being recorded in the cookie,\n     * or before being sent as GET parameters\n     */\n    function purify(url: string) {\n      let targetPattern;\n\n      if (configDiscardHashTag) {\n        targetPattern = new RegExp('#.*');\n        url = url.replace(targetPattern, '');\n      }\n\n      if (configDiscardBrace) {\n        targetPattern = new RegExp('[{}]', 'g');\n        url = url.replace(targetPattern, '');\n      }\n      return url;\n    }\n\n    /*\n     * Extract scheme/protocol from URL\n     */\n    function getProtocolScheme(url: string) {\n      const e = new RegExp('^([a-z]+):'),\n        matches = e.exec(url);\n\n      return matches ? matches[1] : null;\n    }\n\n    /*\n     * Resolve relative reference\n     *\n     * Note: not as described in rfc3986 section 5.2\n     */\n    function resolveRelativeReference(baseUrl: string, url: string) {\n      let protocol = getProtocolScheme(url),\n        i;\n\n      if (protocol) {\n        return url;\n      }\n\n      if (url.slice(0, 1) === '/') {\n        return getProtocolScheme(baseUrl) + '://' + getHostName(baseUrl) + url;\n      }\n\n      baseUrl = purify(baseUrl);\n      if ((i = baseUrl.indexOf('?')) >= 0) {\n        baseUrl = baseUrl.slice(0, i);\n      }\n      if ((i = baseUrl.lastIndexOf('/')) !== baseUrl.length - 1) {\n        baseUrl = baseUrl.slice(0, i + 1);\n      }\n\n      return baseUrl + url;\n    }\n\n    /*\n     * Send request\n     */\n    function sendRequest(request: PayloadBuilder) {\n      if (!(configDoNotTrack || toOptoutByCookie)) {\n        outQueue.enqueueRequest(request.build());\n      }\n    }\n\n    /*\n     * Get cookie name with prefix and domain hash\n     */\n    function getSnowplowCookieName(baseName: string) {\n      return configCookieNamePrefix + baseName + '.' + domainHash;\n    }\n\n    /*\n     * Cookie getter.\n     */\n    function getSnowplowCookieValue(cookieName: string) {\n      const fullName = getSnowplowCookieName(cookieName);\n      if (configStateStorageStrategy == 'localStorage') {\n        return attemptGetLocalStorage(fullName);\n      } else if (configStateStorageStrategy == 'cookie' || configStateStorageStrategy == 'cookieAndLocalStorage') {\n        return cookieStorage.getCookie(fullName);\n      }\n      return undefined;\n    }\n\n    /*\n     * Update domain hash\n     */\n    function updateDomainHash() {\n      refreshUrl();\n      domainHash = hash((configCookieDomain || domainAlias) + (configCookiePath || '/')).slice(0, 4); // 4 hexits = 16 bits\n    }\n\n    /*\n     * Process all \"activity\" events.\n     * For performance, this function must have low overhead.\n     */\n    function activityHandler() {\n      const now = new Date();\n      lastActivityTime = now.getTime();\n    }\n\n    /*\n     * Process all \"scroll\" events.\n     */\n    function scrollHandler() {\n      updateMaxScrolls();\n      activityHandler();\n    }\n\n    /*\n     * Returns [pageXOffset, pageYOffset]\n     */\n    function getPageOffsets() {\n      const documentElement = document.documentElement;\n      if (documentElement) {\n        return [documentElement.scrollLeft || window.pageXOffset, documentElement.scrollTop || window.pageYOffset];\n      }\n\n      return [0, 0];\n    }\n\n    /*\n     * Quick initialization/reset of max scroll levels\n     */\n    function resetMaxScrolls() {\n      const offsets = getPageOffsets();\n\n      const x = offsets[0];\n      minXOffset = x;\n      maxXOffset = x;\n\n      const y = offsets[1];\n      minYOffset = y;\n      maxYOffset = y;\n    }\n\n    /*\n     * Check the max scroll levels, updating as necessary\n     */\n    function updateMaxScrolls() {\n      const offsets = getPageOffsets();\n\n      const x = offsets[0];\n      if (x < minXOffset) {\n        minXOffset = x;\n      } else if (x > maxXOffset) {\n        maxXOffset = x;\n      }\n\n      const y = offsets[1];\n      if (y < minYOffset) {\n        minYOffset = y;\n      } else if (y > maxYOffset) {\n        maxYOffset = y;\n      }\n    }\n\n    /*\n     * Prevents offsets from being decimal or NaN\n     * See https://github.com/snowplow/snowplow-javascript-tracker/issues/324\n     */\n    function cleanOffset(offset: number) {\n      return Math.round(offset);\n    }\n\n    /**\n     * Sets or renews the session cookie.\n     * Responsible for calling the `onSessionUpdateCallback` callback.\n     * @returns {boolean} If the value persisted in cookies or LocalStorage\n     */\n    function setSessionCookie() {\n      const cookieName = getSnowplowCookieName('ses');\n      const cookieValue = '*';\n      return persistValue(cookieName, cookieValue, configSessionCookieTimeout);\n    }\n\n    /**\n     * @mutates idCookie\n     * @param {ParsedIdCookie} idCookie\n     * @returns {boolean} If the value persisted in cookies or LocalStorage\n     */\n    function setDomainUserIdCookie(idCookie: ParsedIdCookie) {\n      const cookieName = getSnowplowCookieName('id');\n      const cookieValue = serializeIdCookie(idCookie, configAnonymousTracking);\n      return persistValue(cookieName, cookieValue, configVisitorCookieTimeout);\n    }\n\n    /**\n     * no-op if anonymousTracking enabled, will still set cookies if anonymousSessionTracking is enabled\n     * Sets a cookie based on the storage strategy:\n     * - if 'localStorage': attempts to write to local storage\n     * - if 'cookie' or 'cookieAndLocalStorage': writes to cookies\n     * - otherwise: no-op\n     * @param {string} name Name/key of the value to persist\n     * @param {string} value\n     * @param {number} timeout Used as the expiration date for cookies or as a TTL to be checked on LocalStorage\n     * @returns {boolean} If the operation was successful or not\n     */\n    function persistValue(name: string, value: string, timeout: number): boolean {\n      if (configAnonymousTracking && !configAnonymousSessionTracking) {\n        return false;\n      }\n\n      if (configStateStorageStrategy == 'localStorage') {\n        return attemptWriteLocalStorage(name, value, timeout);\n      } else if (configStateStorageStrategy == 'cookie' || configStateStorageStrategy == 'cookieAndLocalStorage') {\n        return cookieStorage.setCookie(\n          name,\n          value,\n          timeout,\n          configCookiePath,\n          configCookieDomain,\n          configCookieSameSite,\n          configCookieSecure\n        );\n      }\n      return false;\n    }\n\n    /**\n     * Clears all cookie and local storage for id and ses values\n     */\n    function clearUserDataAndCookies(configuration?: ClearUserDataConfiguration) {\n      const idname = getSnowplowCookieName('id');\n      const sesname = getSnowplowCookieName('ses');\n      attemptDeleteLocalStorage(idname);\n      attemptDeleteLocalStorage(sesname);\n      cookieStorage.deleteCookie(\n        idname,\n        configCookiePath,\n        configCookieDomain,\n        configCookieSameSite,\n        configCookieSecure\n      );\n      cookieStorage.deleteCookie(\n        sesname,\n        configCookiePath,\n        configCookieDomain,\n        configCookieSameSite,\n        configCookieSecure\n      );\n      if (!configuration?.preserveSession) {\n        memorizedSessionId = uuid();\n        memorizedVisitCount = 1;\n      }\n      if (!configuration?.preserveUser) {\n        domainUserId = configAnonymousTracking ? '' : uuid();\n        businessUserId = null;\n      }\n    }\n\n    /**\n     * Toggle Anonymous Tracking\n     */\n    function toggleAnonymousTracking(\n      configuration?: EnableAnonymousTrackingConfiguration | DisableAnonymousTrackingConfiguration\n    ) {\n      if (configuration && configuration.stateStorageStrategy) {\n        trackerConfiguration.stateStorageStrategy = configuration.stateStorageStrategy;\n        configStateStorageStrategy = getStateStorageStrategy(trackerConfiguration);\n      }\n\n      configAnonymousTracking = getAnonymousTracking(trackerConfiguration);\n      configAnonymousSessionTracking = getAnonymousSessionTracking(trackerConfiguration);\n      configAnonymousServerTracking = getAnonymousServerTracking(trackerConfiguration);\n\n      outQueue.setUseLocalStorage(\n        configStateStorageStrategy == 'localStorage' || configStateStorageStrategy == 'cookieAndLocalStorage'\n      );\n      outQueue.setAnonymousTracking(configAnonymousServerTracking);\n    }\n\n    /*\n     * Load the domain user ID and the session ID\n     * Set the cookies (if cookies are enabled)\n     */\n    function initializeIdsAndCookies() {\n      if (configAnonymousTracking && !configAnonymousSessionTracking) {\n        return;\n      }\n\n      const sesCookieSet = configStateStorageStrategy != 'none' && !!getSnowplowCookieValue('ses');\n      const idCookie = loadDomainUserIdCookie();\n\n      domainUserId = initializeDomainUserId(idCookie, configAnonymousTracking);\n\n      if (!sesCookieSet) {\n        memorizedSessionId = startNewIdCookieSession(idCookie);\n      } else {\n        memorizedSessionId = sessionIdFromIdCookie(idCookie);\n      }\n\n      memorizedVisitCount = visitCountFromIdCookie(idCookie);\n\n      if (configStateStorageStrategy != 'none') {\n        setSessionCookie();\n        // Update currentVisitTs\n        updateNowTsInIdCookie(idCookie);\n        setDomainUserIdCookie(idCookie);\n      }\n    }\n\n    /*\n     * Load visitor ID cookie\n     */\n    function loadDomainUserIdCookie() {\n      if (configStateStorageStrategy == 'none') {\n        return emptyIdCookie();\n      }\n      const id = getSnowplowCookieValue('id') || undefined;\n      return parseIdCookie(id, domainUserId, memorizedSessionId, memorizedVisitCount);\n    }\n\n    /**\n     * Adds the protocol in front of our collector URL\n     *\n     * @param string - collectorUrl The collector URL with or without protocol\n     * @returns string collectorUrl The tracker URL with protocol\n     */\n    function asCollectorUrl(collectorUrl: string) {\n      if (collectorUrl.indexOf('http') === 0) {\n        return collectorUrl;\n      }\n\n      return ('https:' === document.location.protocol ? 'https' : 'http') + '://' + collectorUrl;\n    }\n\n    /**\n     * Initialize new `pageViewId` if it shouldn't be preserved.\n     * Should be called when `trackPageView` is invoked\n     */\n    function resetPageView() {\n      if (!preservePageViewId || state.pageViewId == null) {\n        state.pageViewId = uuid();\n        state.pageViewUrl = configCustomUrl || locationHrefAlias;\n      }\n    }\n\n    /**\n     * Safe function to get `pageViewId`.\n     * Generates it if it wasn't initialized by other tracker\n     */\n    function getPageViewId() {\n      if (shouldGenerateNewPageViewId()) {\n        state.pageViewId = uuid();\n        state.pageViewUrl = configCustomUrl || locationHrefAlias;\n      }\n      return state.pageViewId!;\n    }\n\n    function shouldGenerateNewPageViewId() {\n      // If pageViewId is not initialized, generate it\n      if (state.pageViewId == null) {\n        return true;\n      }\n      // If pageViewId should be preserved regardless of the URL, don't generate a new one\n      if (preservePageViewId || !preservePageViewIdForUrl) {\n        return false;\n      }\n      // If doesn't have previous URL in state, generate a new pageViewId\n      if (state.pageViewUrl === undefined) {\n        return true;\n      }\n      const current = configCustomUrl || locationHrefAlias;\n      // If full preserve is enabled, compare the full URL\n      if (preservePageViewIdForUrl === true || preservePageViewIdForUrl == 'full' || !('URL' in window)) {\n        return state.pageViewUrl != current;\n      }\n      const currentUrl = new URL(current);\n      const previousUrl = new URL(state.pageViewUrl);\n      // If pathname preserve is enabled, compare the pathname\n      if (preservePageViewIdForUrl == 'pathname') {\n        return currentUrl.pathname != previousUrl.pathname;\n      }\n      // If pathname and search preserve is enabled, compare the pathname and search\n      if (preservePageViewIdForUrl == 'pathnameAndSearch') {\n        return currentUrl.pathname != previousUrl.pathname || currentUrl.search != previousUrl.search;\n      }\n      return false;\n    }\n\n    /**\n     * Safe function to get `tabId`.\n     * Generates it if it is not yet initialized. Shared between trackers.\n     */\n    function getTabId() {\n      if (configStateStorageStrategy === 'none' || configAnonymousTracking || !isWebPageContextAvailable) {\n        return null;\n      }\n      const SESSION_STORAGE_TAB_ID = '_sp_tab_id';\n      let tabId = attemptGetSessionStorage(SESSION_STORAGE_TAB_ID);\n      if (!tabId) {\n        attemptWriteSessionStorage(SESSION_STORAGE_TAB_ID, uuid());\n        tabId = attemptGetSessionStorage(SESSION_STORAGE_TAB_ID);\n      }\n      return tabId || null;\n    }\n\n    /**\n     * Put together a web page context with a unique UUID for the page view\n     *\n     * @returns web_page context\n     */\n    function getWebPagePlugin() {\n      return {\n        contexts: () => {\n          return [\n            {\n              schema: WEB_PAGE_SCHEMA,\n              data: {\n                id: getPageViewId(),\n              },\n            },\n          ];\n        },\n      };\n    }\n\n    function getBrowserContextPlugin() {\n      return {\n        contexts: () => {\n          return [\n            {\n              schema: BROWSER_CONTEXT_SCHEMA,\n              data: {\n                ...getBrowserProperties(),\n                tabId: getTabId(),\n              },\n            },\n          ];\n        },\n      };\n    }\n\n    /*\n     * Attaches common web fields to every request (resolution, url, referrer, etc.)\n     * Also sets the required cookies.\n     */\n    function getBrowserDataPlugin() {\n      const anonymizeOr = (value?: string | number | null) => (configAnonymousTracking ? null : value);\n      const anonymizeSessionOr = (value?: string | number | null) =>\n        configAnonymousSessionTracking ? value : anonymizeOr(value);\n\n      return {\n        beforeTrack: (payloadBuilder: PayloadBuilder) => {\n          const existingSession = getSnowplowCookieValue('ses'),\n            idCookie = loadDomainUserIdCookie();\n\n          const isFirstEventInSession = eventIndexFromIdCookie(idCookie) === 0;\n\n          if (configOptOutCookie) {\n            toOptoutByCookie = !!cookieStorage.getCookie(configOptOutCookie);\n          } else {\n            toOptoutByCookie = false;\n          }\n\n          if (configDoNotTrack || toOptoutByCookie) {\n            clearUserDataAndCookies();\n            return;\n          }\n\n          // If cookies are enabled, base visit count and session ID on the cookies\n          if (cookiesEnabledInIdCookie(idCookie)) {\n            // New session?\n            if (!existingSession && configStateStorageStrategy != 'none') {\n              memorizedSessionId = startNewIdCookieSession(idCookie);\n            } else {\n              memorizedSessionId = sessionIdFromIdCookie(idCookie);\n            }\n\n            memorizedVisitCount = visitCountFromIdCookie(idCookie);\n          } else if (new Date().getTime() - lastEventTime > configSessionCookieTimeout * 1000) {\n            memorizedVisitCount++;\n            memorizedSessionId = startNewIdCookieSession(idCookie, {\n              memorizedVisitCount,\n            });\n          }\n\n          // Update cookie\n          updateNowTsInIdCookie(idCookie);\n          updateFirstEventInIdCookie(idCookie, payloadBuilder);\n          incrementEventIndexInIdCookie(idCookie);\n\n          const { viewport, documentSize } = getBrowserProperties();\n\n          payloadBuilder.add('vp', viewport);\n          payloadBuilder.add('ds', documentSize);\n          payloadBuilder.add('vid', anonymizeSessionOr(memorizedVisitCount));\n          payloadBuilder.add('sid', anonymizeSessionOr(memorizedSessionId));\n          payloadBuilder.add('duid', anonymizeOr(domainUserIdFromIdCookie(idCookie))); // Always load from cookie as this is better etiquette than in-memory values\n          payloadBuilder.add('uid', anonymizeOr(businessUserId));\n\n          refreshUrl();\n\n          payloadBuilder.add('refr', purify(customReferrer || configReferrerUrl));\n\n          // Add the page URL last as it may take us over the IE limit (and we don't always need it)\n          payloadBuilder.add('url', purify(configCustomUrl || locationHrefAlias));\n\n          const clientSession = clientSessionFromIdCookie(\n            idCookie,\n            configStateStorageStrategy,\n            configAnonymousTracking\n          );\n          if (configSessionContext && (!configAnonymousTracking || configAnonymousSessionTracking)) {\n            addSessionContextToPayload(payloadBuilder, clientSession);\n          }\n\n          // Update cookies\n          if (configStateStorageStrategy != 'none') {\n            setDomainUserIdCookie(idCookie);\n            const sessionIdentifierPersisted = setSessionCookie();\n            if (\n              (!existingSession || isFirstEventInSession) &&\n              sessionIdentifierPersisted &&\n              onSessionUpdateCallback &&\n              !manualSessionUpdateCalled\n            ) {\n              onSessionUpdateCallback(clientSession);\n              manualSessionUpdateCalled = false;\n            }\n          }\n\n          lastEventTime = new Date().getTime();\n        },\n      };\n    }\n\n    function addSessionContextToPayload(payloadBuilder: PayloadBuilder, clientSession: ClientSession) {\n      let sessionContext: SelfDescribingJson<ClientSession> = {\n        schema: CLIENT_SESSION_SCHEMA,\n        data: clientSession,\n      };\n      payloadBuilder.addContextEntity(sessionContext);\n    }\n\n    /**\n     * Expires current session and starts a new session.\n     */\n    function newSession() {\n      // If cookies are enabled, base visit count and session ID on the cookies\n      let idCookie = loadDomainUserIdCookie();\n\n      // When cookies are enabled\n      if (cookiesEnabledInIdCookie(idCookie)) {\n        // When cookie/local storage is enabled - make a new session\n        if (configStateStorageStrategy != 'none') {\n          memorizedSessionId = startNewIdCookieSession(idCookie);\n        } else {\n          memorizedSessionId = sessionIdFromIdCookie(idCookie);\n        }\n\n        memorizedVisitCount = visitCountFromIdCookie(idCookie);\n      } else {\n        memorizedVisitCount++;\n        memorizedSessionId = startNewIdCookieSession(idCookie, {\n          memorizedVisitCount,\n        });\n      }\n\n      updateNowTsInIdCookie(idCookie);\n\n      // Update cookies\n      if (configStateStorageStrategy != 'none') {\n        const clientSession = clientSessionFromIdCookie(idCookie, configStateStorageStrategy, configAnonymousTracking);\n        setDomainUserIdCookie(idCookie);\n        const sessionIdentifierPersisted = setSessionCookie();\n        if (sessionIdentifierPersisted && onSessionUpdateCallback) {\n          manualSessionUpdateCalled = true;\n          onSessionUpdateCallback(clientSession);\n        }\n      }\n\n      lastEventTime = new Date().getTime();\n    }\n\n    /**\n     * Combine an array of unchanging contexts with the result of a context-creating function\n     *\n     * @param staticContexts - Array of custom contexts\n     * @param contextCallback - Function returning an array of contexts\n     */\n    function finalizeContexts(\n      staticContexts?: Array<SelfDescribingJson> | null,\n      contextCallback?: (() => Array<SelfDescribingJson>) | null\n    ) {\n      return (staticContexts || []).concat(contextCallback ? contextCallback() : []);\n    }\n\n    function logPageView({ title, context, timestamp, contextCallback }: PageViewEvent & CommonEventProperties) {\n      refreshUrl();\n      if (lastSentPageViewId && lastSentPageViewId == getPageViewId()) {\n        // Do not reset pageViewId if a page view was not tracked yet or a different page view ID was used (in order to support multiple trackers with shared state)\n        resetPageView();\n      }\n      lastSentPageViewId = getPageViewId();\n\n      // So we know what document.title was at the time of trackPageView\n      lastDocumentTitle = document.title;\n      if (title) {\n        lastConfigTitle = title;\n        lastConfigTitleFromTrackPageView = true;\n      } else if (lastConfigTitleFromTrackPageView) {\n        lastConfigTitle = null;\n      }\n\n      // Fixup page title\n      const pageTitle = fixupTitle(lastConfigTitle || lastDocumentTitle);\n\n      // Log page view\n      core.track(\n        buildPageView({\n          pageUrl: purify(configCustomUrl || locationHrefAlias),\n          pageTitle,\n          referrer: purify(customReferrer || configReferrerUrl),\n        }),\n        finalizeContexts(context, contextCallback),\n        timestamp\n      );\n\n      // Send ping (to log that user has stayed on page)\n      const now = new Date();\n      let installingActivityTracking = false;\n\n      if (activityTrackingConfig.enabled && !activityTrackingConfig.installed) {\n        activityTrackingConfig.installed = true;\n        installingActivityTracking = true;\n\n        // Add mousewheel event handler, detect passive event listeners for performance\n        const detectPassiveEvents: { update: () => void; hasSupport?: boolean } = {\n          update: function update() {\n            if (typeof window !== 'undefined' && typeof window.addEventListener === 'function') {\n              let passive = false;\n              const options = Object.defineProperty({}, 'passive', {\n                get: function get() {\n                  passive = true;\n                },\n                set: function set() {},\n              });\n              // note: have to set and remove a no-op listener instead of null\n              // (which was used previously), because Edge v15 throws an error\n              // when providing a null callback.\n              // https://github.com/rafrex/detect-passive-events/pull/3\n              const noop = function noop() {};\n              window.addEventListener('testPassiveEventSupport', noop, options);\n              window.removeEventListener('testPassiveEventSupport', noop, options);\n              detectPassiveEvents.hasSupport = passive;\n            }\n          },\n        };\n        detectPassiveEvents.update();\n\n        // Detect available wheel event\n        const wheelEvent =\n          'onwheel' in document.createElement('div')\n            ? 'wheel' // Modern browsers support \"wheel\"\n            : (document as any).onmousewheel !== undefined\n            ? 'mousewheel' // Webkit and IE support at least \"mousewheel\"\n            : 'DOMMouseScroll'; // let's assume that remaining browsers are older Firefox\n\n        if (Object.prototype.hasOwnProperty.call(detectPassiveEvents, 'hasSupport')) {\n          addEventListener(document, wheelEvent, activityHandler, { passive: true });\n        } else {\n          addEventListener(document, wheelEvent, activityHandler);\n        }\n\n        // Capture our initial scroll points\n        resetMaxScrolls();\n\n        // Add event handlers; cross-browser compatibility here varies significantly\n        // @see http://quirksmode.org/dom/events\n        const documentHandlers = [\n          'click',\n          'mouseup',\n          'mousedown',\n          'mousemove',\n          'keypress',\n          'keydown',\n          'keyup',\n          'touchend',\n          'touchstart',\n        ];\n        const windowHandlers = ['resize', 'focus', 'blur'];\n        const listener =\n          (_: Document | Window, handler = activityHandler) =>\n          (ev: string) =>\n            addEventListener(document, ev, handler);\n\n        documentHandlers.forEach(listener(document));\n        windowHandlers.forEach(listener(window));\n        listener(window, scrollHandler)('scroll');\n      }\n\n      if (activityTrackingConfig.enabled && (resetActivityTrackingOnPageView || installingActivityTracking)) {\n        // Periodic check for activity.\n        lastActivityTime = now.getTime();\n\n        let key: keyof ActivityConfigurations;\n        for (key in activityTrackingConfig.configurations) {\n          const config = activityTrackingConfig.configurations[key];\n          if (config) {\n            //Clear page ping heartbeat on new page view\n            window.clearInterval(config.activityInterval);\n\n            scheduleActivityInterval(config, context, contextCallback);\n          }\n        }\n      }\n    }\n\n    function scheduleActivityInterval(\n      config: ActivityConfig,\n      context?: Array<SelfDescribingJson> | null,\n      contextCallback?: (() => Array<SelfDescribingJson>) | null\n    ) {\n      const executePagePing = (cb: ActivityCallback, context: Array<SelfDescribingJson>) => {\n        refreshUrl();\n        cb({ context, pageViewId: getPageViewId(), minXOffset, minYOffset, maxXOffset, maxYOffset });\n        resetMaxScrolls();\n      };\n\n      const timeout = () => {\n        const now = new Date();\n\n        // There was activity during the heart beat period;\n        // on average, this is going to overstate the visitDuration by configHeartBeatTimer/2\n        if (lastActivityTime + config.configMinimumVisitLength > now.getTime()) {\n          executePagePing(config.callback, finalizeContexts(context, contextCallback));\n        }\n\n        config.activityInterval = window.setInterval(heartbeat, config.configHeartBeatTimer);\n      };\n\n      const heartbeat = () => {\n        const now = new Date();\n\n        // There was activity during the heart beat period;\n        // on average, this is going to overstate the visitDuration by configHeartBeatTimer/2\n        if (lastActivityTime + config.configHeartBeatTimer > now.getTime()) {\n          executePagePing(config.callback, finalizeContexts(context, contextCallback));\n        }\n      };\n\n      if (config.configMinimumVisitLength === 0) {\n        config.activityInterval = window.setInterval(heartbeat, config.configHeartBeatTimer);\n      } else {\n        config.activityInterval = window.setTimeout(timeout, config.configMinimumVisitLength);\n      }\n    }\n\n    /**\n     * Configure the activity tracking and ensures integer values for min visit and heartbeat\n     */\n    function configureActivityTracking(\n      configuration: ActivityTrackingConfiguration & ActivityTrackingConfigurationCallback\n    ): ActivityConfig | undefined {\n      const { minimumVisitLength, heartbeatDelay, callback } = configuration;\n      if (isInteger(minimumVisitLength) && isInteger(heartbeatDelay)) {\n        return {\n          configMinimumVisitLength: minimumVisitLength * 1000,\n          configHeartBeatTimer: heartbeatDelay * 1000,\n          callback,\n        };\n      }\n\n      LOG.error('Activity tracking minimumVisitLength & heartbeatDelay must be integers');\n      return undefined;\n    }\n\n    /**\n     * Log that a user is still viewing a given page by sending a page ping.\n     * Not part of the public API - only called from logPageView() above.\n     */\n    function logPagePing({ context, minXOffset, minYOffset, maxXOffset, maxYOffset }: ActivityCallbackData) {\n      const newDocumentTitle = document.title;\n      if (newDocumentTitle !== lastDocumentTitle) {\n        lastDocumentTitle = newDocumentTitle;\n        lastConfigTitle = undefined;\n      }\n      core.track(\n        buildPagePing({\n          pageUrl: purify(configCustomUrl || locationHrefAlias),\n          pageTitle: fixupTitle(lastConfigTitle || lastDocumentTitle),\n          referrer: purify(customReferrer || configReferrerUrl),\n          minXOffset: cleanOffset(minXOffset),\n          maxXOffset: cleanOffset(maxXOffset),\n          minYOffset: cleanOffset(minYOffset),\n          maxYOffset: cleanOffset(maxYOffset),\n        }),\n        context\n      );\n    }\n\n    function disableActivityTrackingAction(actionKey: keyof ActivityConfigurations) {\n      const callbackConfiguration = activityTrackingConfig.configurations[actionKey];\n      if (callbackConfiguration?.configMinimumVisitLength === 0) {\n        window.clearTimeout(callbackConfiguration?.activityInterval);\n      } else {\n        window.clearInterval(callbackConfiguration?.activityInterval);\n      }\n\n      activityTrackingConfig.configurations[actionKey] = undefined;\n    }\n\n    const apiMethods = {\n      getDomainSessionIndex: function () {\n        return memorizedVisitCount;\n      },\n\n      getPageViewId,\n\n      getTabId,\n\n      newSession,\n\n      getCookieName: function (basename: string) {\n        return getSnowplowCookieName(basename);\n      },\n\n      getUserId: function () {\n        return businessUserId;\n      },\n\n      getDomainUserId: function () {\n        return loadDomainUserIdCookie()[1];\n      },\n\n      getDomainUserInfo: function () {\n        return loadDomainUserIdCookie();\n      },\n\n      setReferrerUrl: function (url: string) {\n        customReferrer = url;\n      },\n\n      setCustomUrl: function (url: string) {\n        refreshUrl();\n        configCustomUrl = resolveRelativeReference(locationHrefAlias, url);\n      },\n\n      setDocumentTitle: function (title: string) {\n        // So we know what document.title was at the time of trackPageView\n        lastDocumentTitle = document.title;\n        lastConfigTitle = title;\n        lastConfigTitleFromTrackPageView = false;\n      },\n\n      discardHashTag: function (enableFilter: boolean) {\n        configDiscardHashTag = enableFilter;\n      },\n\n      discardBrace: function (enableFilter: boolean) {\n        configDiscardBrace = enableFilter;\n      },\n\n      setCookiePath: function (path: string) {\n        configCookiePath = path;\n        updateDomainHash();\n      },\n\n      setVisitorCookieTimeout: function (timeout: number) {\n        configVisitorCookieTimeout = timeout;\n      },\n\n      crossDomainLinker: function (crossDomainLinkerCriterion: (elt: HTMLAnchorElement | HTMLAreaElement) => boolean) {\n        decorateLinks(crossDomainLinkerCriterion);\n      },\n\n      enableActivityTracking: function (configuration: ActivityTrackingConfiguration) {\n        if (!activityTrackingConfig.configurations.pagePing) {\n          activityTrackingConfig.enabled = true;\n          activityTrackingConfig.configurations.pagePing = configureActivityTracking({\n            ...configuration,\n            callback: logPagePing,\n          });\n        }\n      },\n\n      enableActivityTrackingCallback: function (\n        configuration: ActivityTrackingConfiguration & ActivityTrackingConfigurationCallback\n      ) {\n        if (!activityTrackingConfig.configurations.callback) {\n          activityTrackingConfig.enabled = true;\n          activityTrackingConfig.configurations.callback = configureActivityTracking(configuration);\n        }\n      },\n\n      disableActivityTracking: function () {\n        disableActivityTrackingAction('pagePing');\n      },\n\n      disableActivityTrackingCallback: function () {\n        disableActivityTrackingAction('callback');\n      },\n\n      updatePageActivity: function () {\n        activityHandler();\n      },\n\n      setOptOutCookie: function (name?: string | null) {\n        configOptOutCookie = name;\n      },\n\n      setUserId: function (userId?: string | null) {\n        businessUserId = userId;\n      },\n\n      setUserIdFromLocation: function (querystringField: string) {\n        refreshUrl();\n        businessUserId = fromQuerystring(querystringField, locationHrefAlias);\n      },\n\n      setUserIdFromReferrer: function (querystringField: string) {\n        refreshUrl();\n        businessUserId = fromQuerystring(querystringField, configReferrerUrl);\n      },\n\n      setUserIdFromCookie: function (cookieName: string) {\n        businessUserId = cookieStorage.getCookie(cookieName);\n      },\n\n      setCollectorUrl: function (collectorUrl: string) {\n        outQueue.setCollectorUrl(asCollectorUrl(collectorUrl));\n      },\n\n      setBufferSize: function (newBufferSize: number) {\n        outQueue.setBufferSize(newBufferSize);\n      },\n\n      flushBuffer: function (configuration: FlushBufferConfiguration = {}) {\n        outQueue.executeQueue();\n        if (configuration.newBufferSize) {\n          outQueue.setBufferSize(configuration.newBufferSize);\n        }\n      },\n\n      trackPageView: function (event: PageViewEvent & CommonEventProperties = {}) {\n        logPageView(event);\n      },\n\n      preservePageViewId: function () {\n        preservePageViewId = true;\n      },\n\n      preservePageViewIdForUrl: function (preserve: PreservePageViewIdForUrl) {\n        preservePageViewIdForUrl = preserve;\n      },\n\n      disableAnonymousTracking: function (configuration?: DisableAnonymousTrackingConfiguration) {\n        trackerConfiguration.anonymousTracking = false;\n\n        toggleAnonymousTracking(configuration);\n\n        initializeIdsAndCookies();\n\n        outQueue.executeQueue(); // There might be some events in the queue we've been unable to send in anonymous mode\n      },\n\n      enableAnonymousTracking: function (configuration?: EnableAnonymousTrackingConfiguration) {\n        trackerConfiguration.anonymousTracking = (configuration && configuration?.options) ?? true;\n\n        toggleAnonymousTracking(configuration);\n\n        // Reset the page view, if not tracking the session, so can't stitch user into new events on the page view id\n        if (!configAnonymousSessionTracking) {\n          resetPageView();\n        }\n      },\n\n      clearUserData: clearUserDataAndCookies,\n    };\n\n    return {\n      ...apiMethods,\n      id: trackerId,\n      namespace,\n      core: core,\n      sharedState: state,\n    };\n  };\n\n  // Initialise the tracker\n  const partialTracker = newTracker(trackerId, namespace, version, endpoint, sharedState, trackerConfiguration),\n    tracker = {\n      ...partialTracker,\n      addPlugin: (configuration: BrowserPluginConfiguration) => {\n        tracker.core.addPlugin(configuration);\n        configuration.plugin.activateBrowserPlugin?.(tracker);\n      },\n    };\n\n  // Initialise each plugin with the tracker\n  browserPlugins.forEach((p) => {\n    p.activateBrowserPlugin?.(tracker);\n  });\n\n  return tracker;\n}\n","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport { LOG } from '@snowplow/tracker-core';\nimport { SharedState } from './state';\nimport { Tracker } from './tracker';\nimport { BrowserTracker, TrackerConfiguration } from './tracker/types';\nimport { asyncCookieStorage } from './tracker/cookie_storage';\n\nconst namedTrackers: Record<string, BrowserTracker> = {};\n\n/**\n * Dispatch function to all specified trackers\n *\n * @param trackers - An optional list of trackers to send the event to, or will send to all trackers\n * @param fn - The function which will run against each tracker\n */\nexport function dispatchToTrackers(trackers: Array<string> | undefined, fn: (t: BrowserTracker) => void) {\n  try {\n    getTrackers(trackers ?? allTrackerNames()).forEach(fn);\n  } catch (ex) {\n    LOG.error('Function failed', ex);\n  }\n}\n\n/**\n * Dispatch function to all specified trackers from the supplied collection\n *\n * @param trackers - An optional list of trackers to send the event to, or will send to all trackers\n * @param trackerCollection - The collection which the trackers will be selected from\n * @param fn - The function which will run against each tracker\n */\nexport function dispatchToTrackersInCollection(\n  trackers: Array<string> | undefined,\n  trackerCollection: Record<string, BrowserTracker>,\n  fn: (t: BrowserTracker) => void\n) {\n  try {\n    getTrackersFromCollection(trackers ?? Object.keys(trackerCollection), trackerCollection).forEach(fn);\n  } catch (ex) {\n    LOG.error('Function failed', ex);\n  }\n}\n\n/**\n * Checks if a tracker has been created for a particular identifier\n * @param trackerId - The unique identifier of the tracker\n */\nexport function trackerExists(trackerId: string) {\n  return namedTrackers.hasOwnProperty(trackerId);\n}\n\n/**\n * Creates a Tracker and adds it to the internal collection\n * @param trackerId - The unique identifier of the tracker\n * @param namespace - The namespace of the tracker, tracked with each event as `tna`\n * @param version - The current version of the tracker library\n * @param endpoint - The endpoint to send events to\n * @param sharedState - The instance of shared state to use for this tracker\n * @param configuration - The configuration to use for this tracker instance\n */\nexport function addTracker(\n  trackerId: string,\n  namespace: string,\n  version: string,\n  endpoint: string,\n  sharedState: SharedState,\n  configuration?: TrackerConfiguration\n) {\n  if (!namedTrackers.hasOwnProperty(trackerId)) {\n    namedTrackers[trackerId] = Tracker(trackerId, namespace, version, endpoint, sharedState, configuration);\n    return namedTrackers[trackerId];\n  }\n  return null;\n}\n\n/**\n * Gets a single instance of the internal tracker object\n * @param trackerId - The unique identifier of the tracker\n * @returns The tracker instance, or null if not found\n */\nexport function getTracker(trackerId: string) {\n  if (namedTrackers.hasOwnProperty(trackerId)) {\n    return namedTrackers[trackerId];\n  }\n\n  LOG.warn(trackerId + ' not configured');\n  return null;\n}\n\n/**\n * Gets an array of tracker instances based on the list of identifiers\n * @param trackerIds - An array of unique identifiers of the trackers\n * @returns The tracker instances, or empty list if none found\n */\nexport function getTrackers(trackerIds: Array<string>): Array<BrowserTracker> {\n  return getTrackersFromCollection(trackerIds, namedTrackers);\n}\n\n/**\n * Gets all the trackers as a object, keyed by their unique identifiers\n */\nexport function allTrackers() {\n  return namedTrackers;\n}\n\n/**\n * Returns all the unique tracker identifiers\n */\nexport function allTrackerNames() {\n  return Object.keys(namedTrackers);\n}\n\nfunction getTrackersFromCollection(\n  trackerIds: Array<string>,\n  trackerCollection: Record<string, BrowserTracker>\n): Array<BrowserTracker> {\n  const trackers: Array<BrowserTracker> = [];\n  for (const id of trackerIds) {\n    if (trackerCollection.hasOwnProperty(id)) {\n      trackers.push(trackerCollection[id]);\n    } else {\n      LOG.warn(id + ' not configured');\n    }\n  }\n  return trackers;\n}\n\n/**\n * Write all pending cookies to the browser.\n * Useful if you track events just before the page is unloaded.\n * This call is not necessary if `synchronousCookieWrite` is set to `true`.\n */\nexport function flushPendingCookies() {\n  asyncCookieStorage.flush();\n}\n","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport { addEventListener } from './helpers';\n\ndeclare global {\n  interface Document {\n    attachEvent: (type: string, fn: EventListenerOrEventListenerObject) => void;\n    detachEvent: (type: string, fn: EventListenerOrEventListenerObject) => void;\n  }\n}\n\n/**\n * A set of variables which are shared among all initialised trackers\n */\nexport class SharedState {\n  bufferFlushers: Array<(sync: boolean) => void> = [];\n\n  /* DOM Ready */\n  hasLoaded: boolean = false;\n  registeredOnLoadHandlers: Array<() => void> = [];\n\n  /* pageViewId, which can changed by other trackers on page;\n   * initialized by tracker sent first event */\n  pageViewId?: string;\n  /* URL of the page view which the `pageViewId` was generated for */\n  pageViewUrl?: string;\n}\n\nexport function createSharedState(): SharedState {\n  const sharedState = new SharedState(),\n    documentAlias = document,\n    windowAlias = window;\n\n  /*\n   * Handle page visibility event\n   * Works everywhere except IE9\n   */\n  function visibilityChangeHandler() {\n    if (documentAlias.visibilityState == 'hidden') {\n      // Flush all POST queues\n      sharedState.bufferFlushers.forEach(function (flusher) {\n        flusher(false);\n      });\n    }\n  }\n\n  function flushBuffers() {\n    // Flush all POST queues\n    sharedState.bufferFlushers.forEach(function (flusher) {\n      flusher(false);\n    });\n  }\n\n  /*\n   * Handler for onload event\n   */\n  function loadHandler() {\n    var i;\n\n    if (!sharedState.hasLoaded) {\n      sharedState.hasLoaded = true;\n      for (i = 0; i < sharedState.registeredOnLoadHandlers.length; i++) {\n        sharedState.registeredOnLoadHandlers[i]();\n      }\n    }\n    return true;\n  }\n\n  /*\n   * Add onload or DOM ready handler\n   */\n  function addReadyListener() {\n    if (documentAlias.addEventListener) {\n      documentAlias.addEventListener('DOMContentLoaded', function ready() {\n        documentAlias.removeEventListener('DOMContentLoaded', ready, false);\n        loadHandler();\n      });\n    } else if (documentAlias.attachEvent) {\n      documentAlias.attachEvent('onreadystatechange', function ready() {\n        if (documentAlias.readyState === 'complete') {\n          documentAlias.detachEvent('onreadystatechange', ready);\n          loadHandler();\n        }\n      });\n    }\n\n    // fallback\n    addEventListener(windowAlias, 'load', loadHandler, false);\n  }\n\n  /************************************************************\n   * Constructor\n   ************************************************************/\n\n  // initialize the Snowplow singleton\n  if (documentAlias.visibilityState) {\n    // Flush for mobile and modern browsers\n    addEventListener(documentAlias, 'visibilitychange', visibilityChangeHandler, false);\n  }\n  // Last attempt at flushing in beforeunload\n  addEventListener(windowAlias, 'beforeunload', flushBuffers, false);\n\n  if (document.readyState === 'loading') {\n    addReadyListener();\n  } else {\n    loadHandler();\n  }\n\n  return sharedState;\n}\n","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport {\n  dispatchToTrackers,\n  ActivityTrackingConfiguration,\n  ActivityTrackingConfigurationCallback,\n  ActivityCallback,\n  ActivityCallbackData,\n  BrowserPlugin,\n  BrowserPluginConfiguration,\n  BuiltInContexts,\n  DisableAnonymousTrackingConfiguration,\n  EnableAnonymousTrackingConfiguration,\n  AnonymousTrackingOptions,\n  FlushBufferConfiguration,\n  PageViewEvent,\n  ClearUserDataConfiguration,\n  ExtendedCrossDomainLinkerOptions,\n  ExtendedCrossDomainLinkerAttributes,\n} from '@snowplow/browser-tracker-core';\nimport {\n  buildSelfDescribingEvent,\n  buildStructEvent,\n  CommonEventProperties,\n  ConditionalContextProvider,\n  ContextPrimitive,\n  ContextGenerator,\n  FilterProvider,\n  RuleSetProvider,\n  SelfDescribingEvent,\n  SelfDescribingJson,\n  StructuredEvent,\n  ContextEvent,\n  ContextFilter,\n  RuleSet,\n  EventPayloadAndContext,\n} from '@snowplow/tracker-core';\n\nexport {\n  ActivityTrackingConfiguration,\n  ActivityTrackingConfigurationCallback,\n  ActivityCallback,\n  ActivityCallbackData,\n  BrowserPlugin,\n  BrowserPluginConfiguration,\n  BuiltInContexts,\n  FlushBufferConfiguration,\n  PageViewEvent,\n  EnableAnonymousTrackingConfiguration,\n  DisableAnonymousTrackingConfiguration,\n  AnonymousTrackingOptions,\n  ClearUserDataConfiguration,\n  ConditionalContextProvider,\n  ContextPrimitive,\n  SelfDescribingEvent,\n  SelfDescribingJson,\n  CommonEventProperties,\n  StructuredEvent,\n  ContextGenerator,\n  FilterProvider,\n  RuleSetProvider,\n  ContextEvent,\n  ContextFilter,\n  RuleSet,\n  ExtendedCrossDomainLinkerOptions,\n  ExtendedCrossDomainLinkerAttributes,\n  EventPayloadAndContext,\n};\n\n/**\n * Expires current session and starts a new session.\n *\n * @param trackers - The tracker identifiers which will have their session refreshed\n */\nexport function newSession(trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.newSession();\n  });\n}\n\n/**\n * Override referrer\n *\n * @param url - Custom Referrer which will be used as override\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function setReferrerUrl(url: string, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.setReferrerUrl(url);\n  });\n}\n\n/**\n * Override url\n *\n * @param url - Custom URL which will be used as override\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function setCustomUrl(url: string, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.setCustomUrl(url);\n  });\n}\n\n/**\n * Override document.title\n *\n * @param title - Document title which will be used as override\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function setDocumentTitle(title: string, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.setDocumentTitle(title);\n  });\n}\n\n/**\n * Strip hash tag (or anchor) from URL\n *\n * @param enable - Whether to enable stripping of hash\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function discardHashTag(enable: boolean, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.discardHashTag(enable);\n  });\n}\n\n/**\n * Strip braces from URL\n *\n * @param enable - Whther to enable stripping of braces\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function discardBrace(enable: boolean, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.discardBrace(enable);\n  });\n}\n\n/**\n * Set first-party cookie path\n *\n * @param path - The path which will be used when setting cookies\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function setCookiePath(path: string, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.setCookiePath(path);\n  });\n}\n\n/**\n * Set visitor cookie timeout (in seconds)\n *\n * @param timeout - The timeout until cookies will expire\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function setVisitorCookieTimeout(timeout: number, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.setVisitorCookieTimeout(timeout);\n  });\n}\n\n/**\n * Enable querystring decoration for links passing a filter\n *\n * @param crossDomainLinker - Function used to determine which links to decorate\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function crossDomainLinker(\n  crossDomainLinkerCriterion: (elt: HTMLAnchorElement | HTMLAreaElement) => boolean,\n  trackers?: Array<string>\n) {\n  dispatchToTrackers(trackers, (t) => {\n    t.crossDomainLinker(crossDomainLinkerCriterion);\n  });\n}\n\n/**\n * Enables page activity tracking (sends page pings to the Collector regularly).\n *\n * @param configuration - The activity tracking configuration\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function enableActivityTracking(configuration: ActivityTrackingConfiguration, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.enableActivityTracking(configuration);\n  });\n}\n\n/**\n * Enables page activity tracking (replaces collector ping with callback).\n *\n * @param configuration - The activity tracking callback configuration\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function enableActivityTrackingCallback(\n  configuration: ActivityTrackingConfiguration & ActivityTrackingConfigurationCallback,\n  trackers?: Array<string>\n) {\n  dispatchToTrackers(trackers, (t) => {\n    t.enableActivityTrackingCallback(configuration);\n  });\n}\n\n/**\n * Disables page activity tracking.\n *\n * @param trackers - The tracker identifiers the activity tracking will be disabled.\n */\nexport function disableActivityTracking(trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.disableActivityTracking();\n  });\n}\n\n/**\n * Disables page activity tracking callback.\n *\n * @param trackers - The tracker identifiers the activity tracking callback will be disabled.\n */\nexport function disableActivityTrackingCallback(trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.disableActivityTrackingCallback();\n  });\n}\n\n/**\n * Triggers the activityHandler manually to allow external user defined activity. i.e. While watching a video\n *\n * @param trackers - The tracker identifiers which will be updated\n */\nexport function updatePageActivity(trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.updatePageActivity();\n  });\n}\n\n/**\n * Sets the opt out cookie.\n *\n * @param name - of the opt out cookie\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function setOptOutCookie(name?: string | null, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.setOptOutCookie(name);\n  });\n}\n\n/**\n * Set the business-defined user ID for this user.\n *\n * @param userId - The business-defined user ID\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function setUserId(userId?: string | null, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.setUserId(userId);\n  });\n}\n\n/**\n * Set the business-defined user ID for this user using the location querystring.\n *\n * @param querystringField - Name of a querystring name-value pair\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function setUserIdFromLocation(querystringField: string, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.setUserIdFromLocation(querystringField);\n  });\n}\n\n/**\n * Set the business-defined user ID for this user using the referrer querystring.\n *\n * @param querystringField - Name of a querystring name-value pair\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function setUserIdFromReferrer(querystringField: string, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.setUserIdFromReferrer(querystringField);\n  });\n}\n\n/**\n * Set the business-defined user ID for this user to the value of a cookie.\n *\n * @param cookieName - Name of the cookie whose value will be assigned to businessUserId\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function setUserIdFromCookie(cookieName: string, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.setUserIdFromCookie(cookieName);\n  });\n}\n\n/**\n * Specify the Snowplow collector URL. Specific http or https to force it\n * or leave it off to match the website protocol.\n *\n * @param collectorUrl - The collector URL, with or without protocol\n * @param trackers - The tracker identifiers which will be configured\n */\nexport function setCollectorUrl(collectorUrl: string, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.setCollectorUrl(collectorUrl);\n  });\n}\n\n/**\n * Set the buffer size\n * Can be useful if you want to stop batching requests to ensure events start\n * sending closer to event creation\n *\n * @param newBufferSize - The value with which to update the bufferSize to\n * @param trackers - The tracker identifiers which will be flushed\n */\nexport function setBufferSize(newBufferSize: number, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.setBufferSize(newBufferSize);\n  });\n}\n\n/**\n * Send all events in the outQueue\n * Only need to use this when sending events with a bufferSize of at least 2\n *\n * @param configuration - The configuration to use following flushing the buffer\n * @param trackers - The tracker identifiers which will be flushed\n */\nexport function flushBuffer(configuration?: FlushBufferConfiguration, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.flushBuffer(configuration);\n  });\n}\n\n/**\n * Track a visit to a web page\n *\n * @param event - The Page View Event properties\n * @param trackers - The tracker identifiers which the event will be sent to\n */\nexport function trackPageView(event?: PageViewEvent & CommonEventProperties, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.trackPageView(event);\n  });\n}\n\n/**\n * Track a structured event\n * A classic style of event tracking, allows for easier movement between analytics\n * systems. A loosely typed event, creating a Self Describing event is preferred, but\n * useful for interoperability.\n *\n * @param event - The Structured Event properties\n * @param trackers - The tracker identifiers which the event will be sent to\n */\nexport function trackStructEvent(event: StructuredEvent & CommonEventProperties, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.core.track(buildStructEvent(event), event.context, event.timestamp);\n  });\n}\n\n/**\n * Track a self-describing event happening on this page.\n * A custom event type, allowing for an event to be tracked using your own custom schema\n * and a data object which conforms to the supplied schema\n *\n * @param event - The event information\n * @param trackers - The tracker identifiers which the event will be sent to\n */\nexport function trackSelfDescribingEvent<T = Record<string, unknown>>(\n  event: SelfDescribingEvent<T> & CommonEventProperties,\n  trackers?: Array<string>\n) {\n  dispatchToTrackers(trackers, (t) => {\n    t.core.track(buildSelfDescribingEvent({ event: event.event }), event.context, event.timestamp);\n  });\n}\n\n/**\n * All provided contexts will be sent with every event\n *\n * @param contexts - An array of contexts or conditional contexts\n * @param trackers - The tracker identifiers which the global contexts will be added to\n */\nexport function addGlobalContexts(\n  contexts:\n    | Array<ConditionalContextProvider | ContextPrimitive>\n    | Record<string, ConditionalContextProvider | ContextPrimitive>,\n  trackers?: Array<string>\n) {\n  dispatchToTrackers(trackers, (t) => {\n    t.core.addGlobalContexts(contexts);\n  });\n}\n\n/**\n * All provided contexts will no longer be sent with every event\n *\n * @param contexts - An array of contexts or conditional contexts\n * @param trackers - The tracker identifiers which the global contexts will be remove from\n */\nexport function removeGlobalContexts(\n  contexts: Array<ConditionalContextProvider | ContextPrimitive | string>,\n  trackers?: Array<string>\n) {\n  dispatchToTrackers(trackers, (t) => {\n    t.core.removeGlobalContexts(contexts);\n  });\n}\n\n/**\n * Clear all global contexts that are sent with events\n *\n * @param trackers - The tracker identifiers which the global contexts will be cleared from\n */\nexport function clearGlobalContexts(trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.core.clearGlobalContexts();\n  });\n}\n\n/**\n * Stop regenerating `pageViewId` (available from `web_page` context)\n *\n * @param trackers - The tracker identifiers which the event will preserve their Page View Ids\n */\nexport function preservePageViewId(trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.preservePageViewId();\n  });\n}\n\n/**\n * Disables anonymous tracking if active (ie. tracker initialized with `anonymousTracking`)\n * For stateStorageStrategy override, uses supplied value first,\n * falls back to one defined in initial config, otherwise uses cookieAndLocalStorage.\n *\n * @param configuration - The configuration for disabling anonymous tracking\n * @param trackers - The tracker identifiers which the event will be sent to\n */\nexport function disableAnonymousTracking(\n  configuration?: DisableAnonymousTrackingConfiguration,\n  trackers?: Array<string>\n) {\n  dispatchToTrackers(trackers, (t) => {\n    t.disableAnonymousTracking(configuration);\n  });\n}\n\n/**\n * Enables anonymous tracking (ie. tracker initialized without `anonymousTracking`)\n *\n * @param configuration - The configuration for enabling anonymous tracking\n * @param trackers - The tracker identifiers which the event will be sent to\n */\nexport function enableAnonymousTracking(\n  configuration?: EnableAnonymousTrackingConfiguration,\n  trackers?: Array<string>\n) {\n  dispatchToTrackers(trackers, (t) => {\n    t.enableAnonymousTracking(configuration);\n  });\n}\n\n/**\n * Clears all cookies and local storage containing user and session identifiers\n *\n * @param trackers - The tracker identifiers which the event will be sent to\n */\nexport function clearUserData(configuration?: ClearUserDataConfiguration, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.clearUserData(configuration);\n  });\n}\n\n/**\n * Add a plugin into the plugin collection after trackers have already been initialised\n *\n * @param configuration - The plugin to add\n * @param trackers - The tracker identifiers which the plugin will be added to\n */\nexport function addPlugin(configuration: BrowserPluginConfiguration, trackers?: Array<string>) {\n  dispatchToTrackers(trackers, (t) => {\n    t.addPlugin(configuration);\n  });\n}\n","/*\n * Copyright (c) 2022 Snowplow Analytics Ltd, 2010 Anthon Pang\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its\n *    contributors may be used to endorse or promote products derived from\n *    this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport {\n  createSharedState,\n  SharedState,\n  addTracker,\n  TrackerConfiguration,\n  BrowserTracker,\n  CookieSameSite,\n  Platform,\n  EventMethod,\n  StateStorageStrategy,\n  ClientSession,\n  RequestFailure,\n  EventBatch,\n  ParsedIdCookie,\n  PreservePageViewIdForUrl,\n  EventStore,\n  EventStoreIterator,\n  EventStorePayload,\n  EventStoreConfiguration,\n  LocalStorageEventStoreConfigurationBase,\n} from '@snowplow/browser-tracker-core';\nimport {\n  version,\n  CorePlugin,\n  CorePluginConfiguration,\n  TrackerCore,\n  Timestamp,\n  Payload,\n  PayloadBuilder,\n  Logger,\n  EventJson,\n  JsonProcessor,\n  TrueTimestamp,\n  DeviceTimestamp,\n  EmitterConfigurationBase,\n} from '@snowplow/tracker-core';\n\nconst state = typeof window !== 'undefined' ? createSharedState() : undefined;\n\n/**\n * Initialise a new tracker\n *\n * @param trackerId - The tracker id - also known as tracker namespace\n * @param endpoint - Collector endpoint in the form collector.mysite.com\n * @param configuration - The initialisation options of the tracker\n */\nexport function newTracker(trackerId: string, endpoint: string, configuration?: TrackerConfiguration) {\n  if (state) {\n    return addTracker(trackerId, trackerId, `js-${version}`, endpoint, state, configuration);\n  } else {\n    return undefined;\n  }\n}\n\nexport {\n  BrowserTracker,\n  TrackerConfiguration,\n  CookieSameSite,\n  Platform,\n  EventMethod,\n  StateStorageStrategy,\n  ClientSession,\n  RequestFailure,\n  EventBatch,\n  ParsedIdCookie,\n  PreservePageViewIdForUrl,\n  EventStore,\n  EventStoreIterator,\n  EventStorePayload,\n  EmitterConfigurationBase,\n  LocalStorageEventStoreConfigurationBase,\n  CorePlugin,\n  CorePluginConfiguration,\n  TrackerCore,\n  SharedState,\n  Timestamp,\n  Payload,\n  PayloadBuilder,\n  Logger,\n  EventStoreConfiguration,\n  EventJson,\n  JsonProcessor,\n  TrueTimestamp,\n  DeviceTimestamp,\n};\nexport { version };\nexport * from './api';\n","import {\n  addEventListener,\n  flushPendingCookies,\n  getCssClasses,\n  getFilterByClass,\n  getFilterByName,\n  type BrowserTracker,\n  type FilterCriterion,\n} from '@snowplow/browser-tracker-core';\nimport {\n  buildFormFocusOrChange,\n  buildFormSubmission,\n  resolveDynamicContext,\n  type DynamicContext,\n} from '@snowplow/tracker-core';\n\n/** The form tracking configuration */\nexport interface FormTrackingConfiguration {\n  /** The options which can be configured for the form tracking events */\n  options?: FormTrackingOptions;\n  /** The dyanmic context which will be evaluated for each form event */\n  context?: DynamicContext | null;\n}\n\n/** Events to capture in form tracking */\nenum FormTrackingEvent {\n  /** Form field changed event */\n  CHANGE_FORM = 'change_form',\n  /** Form field focused event */\n  FOCUS_FORM = 'focus_form',\n  /** Form submitted event */\n  SUBMIT_FORM = 'submit_form',\n}\n\nconst defaultFormTrackingEvents = [\n  FormTrackingEvent.CHANGE_FORM,\n  FormTrackingEvent.FOCUS_FORM,\n  FormTrackingEvent.SUBMIT_FORM,\n];\n\n/** Form tracking plugin options to determine which events to fire and the elements to listen for */\ninterface FormTrackingOptions {\n  /** List of `form` elements that are allowed to generate events, or criteria for deciding that when the event listener handles the event */\n  forms?:\n    | FilterCriterion<HTMLElement>\n    | HTMLCollectionOf<HTMLFormElement>\n    | NodeListOf<HTMLFormElement>\n    | HTMLFormElement[];\n  /** Criteria for fields within forms that should generate focus or change events; you may also include a transformation function for fields that may include personal data */\n  fields?: FilterCriterion<TrackedHTMLElement> & { transform?: transformFn };\n  /** Allow list of events to enable tracking for; can be any combination of focus_form, change_form, or submit_form */\n  events?: `${FormTrackingEvent}`[];\n  /** A list of targets to add event listeners to. If not provided, defaults to the current `document` */\n  targets?: EventTarget[];\n}\n\ntype TrackedHTMLElementTagNameMap = Pick<HTMLElementTagNameMap, 'textarea' | 'input' | 'select'>;\n\ntype TrackedHTMLElement = TrackedHTMLElementTagNameMap[keyof TrackedHTMLElementTagNameMap];\n\ninterface ElementData extends Record<string, string | null | undefined> {\n  name: string;\n  value: string | null;\n  nodeName: string;\n  type?: string;\n}\n\ntype transformFn = (\n  elementValue: string | null,\n  elementInfo: ElementData | TrackedHTMLElement,\n  elt: TrackedHTMLElement\n) => string | null;\n\ntype ElementDataWrapper = { elementData: ElementData; originalElement: TrackedHTMLElement };\n\nconst defaultTransformFn: transformFn = (x) => x;\n\ninterface FormConfiguration {\n  formFilter: (_: HTMLFormElement) => boolean;\n  fieldFilter: (_: TrackedHTMLElement) => boolean;\n  fieldTransform: transformFn;\n  forms: HTMLCollectionOf<HTMLFormElement> | NodeListOf<HTMLFormElement> | HTMLFormElement[] | null;\n}\n\nconst _focusListeners: Record<string, EventListener> = {};\nconst _changeListeners: Record<string, EventListener> = {};\nconst _submitListeners: Record<string, EventListener> = {};\nconst _targets: Record<string, EventTarget[]> = {};\n\n/**\n * Add submission/focus/change event listeners to page for forms and elements according to `configuration`\n *\n * @param tracker The tracker instance the listener belongs to that will be used to track events\n * @param configuration Plugin configuration controlling the events to track and forms/fields to target or transform\n */\nexport function addFormListeners(tracker: BrowserTracker, configuration: FormTrackingConfiguration) {\n  const { options, context } = configuration,\n    config = getConfigurationForOptions(options);\n\n  const events = options?.events ?? defaultFormTrackingEvents;\n\n  const targets = (_targets[tracker.id] = getTargetList(options?.targets, config.forms));\n\n  if (events.indexOf(FormTrackingEvent.FOCUS_FORM) !== -1) {\n    _focusListeners[tracker.id] = getFormChangeListener(tracker, config, FormTrackingEvent.FOCUS_FORM, context);\n    targets.forEach((target) => addEventListener(target, 'focus', _focusListeners[tracker.id], true));\n  }\n  if (events.indexOf(FormTrackingEvent.CHANGE_FORM) !== -1) {\n    _changeListeners[tracker.id] = getFormChangeListener(tracker, config, FormTrackingEvent.CHANGE_FORM, context);\n    targets.forEach((target) => addEventListener(target, 'change', _changeListeners[tracker.id], true));\n  }\n  if (events.indexOf(FormTrackingEvent.SUBMIT_FORM) !== -1) {\n    _submitListeners[tracker.id] = getFormSubmissionListener(tracker, config, context);\n    targets.forEach((target) => addEventListener(target, 'submit', _submitListeners[tracker.id], true));\n  }\n}\n\n/**\n * Builds a list of targets for the plugin event listeners\n *\n * The list can include any specifically provided targets, and will be extended to include the root nodes of any explicit HTMLFormElements provided\n * With neither provided, defaults to the current page's `document` element\n *\n * @param configTargets Explicitly configured list of event target listeners, if any\n * @param forms Explicitly configured list of form elements to track, if any\n * @returns List of EventTargets to add the listener to\n */\nfunction getTargetList(configTargets: EventTarget[] | undefined, forms: FormConfiguration['forms']) {\n  // we attach to document rather than window because the window focus event occurs more often than we require\n  const targets = configTargets ?? [document];\n\n  if (forms) {\n    Array.prototype.forEach.call(forms, (form: HTMLFormElement) => {\n      targets.push(form.ownerDocument.documentElement);\n    });\n  }\n\n  return targets;\n}\n\n/**\n * Remove all submission/focus/change event listeners from page that have been added via a call to `addFormListeners`\n *\n * @param tracker The tracker instance the listener belongs to that will be used to track events\n */\nexport function removeFormListeners(tracker: BrowserTracker) {\n  const targets = _targets[tracker.id] ?? [document];\n  targets.forEach((target) => {\n    if (_focusListeners[tracker.id]) target.removeEventListener('focus', _focusListeners[tracker.id], true);\n    if (_changeListeners[tracker.id]) target.removeEventListener('change', _changeListeners[tracker.id], true);\n    if (_submitListeners[tracker.id]) target.removeEventListener('submit', _submitListeners[tracker.id], true);\n  });\n}\n\n/**\n * Check if forms array is a collection of HTML form elements or a filter or undefined\n */\nfunction isCollectionOfHTMLFormElements(\n  forms?:\n    | FilterCriterion<HTMLFormElement>\n    | HTMLCollectionOf<HTMLFormElement>\n    | NodeListOf<HTMLFormElement>\n    | HTMLFormElement[]\n): forms is HTMLCollectionOf<HTMLFormElement> | NodeListOf<HTMLFormElement> | HTMLFormElement[] {\n  return forms != null && Array.prototype.slice.call(forms).length > 0;\n}\n\n/**\n * Typeguard for `element` to see if it appears to be the HTMLElement with tagName `type`\n *\n * instanceof checks don't work for cross-document nodes, which this plugin supports\n *\n * @param elem Object to check element type\n * @param type Element type we're checking for\n * @returns If `element` is an element with tagName `type`\n */\nfunction isElement<E extends Uppercase<keyof HTMLElementTagNameMap>>(\n  elem: unknown,\n  type: E\n): elem is HTMLElementTagNameMap[Lowercase<E>] {\n  if (typeof elem === 'object' && elem) {\n    if ('tagName' in elem && typeof (elem as Element)['tagName'] === 'string') {\n      return (elem as Element).tagName.toUpperCase() === type;\n    }\n  }\n\n  return false;\n}\n\n/**\n * Determine if given object is a `TrackedHTMLElement` or not\n *\n * @param element Value to determine\n * @returns If `element` is `TrackedHTMLElement`\n */\nfunction isTrackableElement(element: EventTarget | null): element is TrackedHTMLElement {\n  return isElement(element, 'INPUT') || isElement(element, 'SELECT') || isElement(element, 'TEXTAREA');\n}\n\n/**\n * Configures form tracking: which forms and fields will be tracked, and the context to attach\n *\n * @param options User-supplied configuration\n * @returns Final configuration incorporating defaults\n */\nfunction getConfigurationForOptions(options?: FormTrackingOptions): FormConfiguration {\n  if (options) {\n    let formFilter = (_: HTMLElement) => true;\n    let forms: HTMLCollectionOf<HTMLFormElement> | NodeListOf<HTMLFormElement> | HTMLFormElement[] | null = null;\n    if (isCollectionOfHTMLFormElements(options.forms)) {\n      // options.forms is an explicity allowlist of HTML form elements\n      forms = options.forms;\n    } else {\n      // options.forms is null or a filter\n      formFilter = getFilterByClass(options.forms);\n    }\n    return {\n      forms,\n      formFilter,\n      fieldFilter: getFilterByName<TrackedHTMLElement>(options.fields),\n      fieldTransform: getTransform(options.fields),\n    };\n  } else {\n    return {\n      forms: null,\n      formFilter: () => true,\n      fieldFilter: () => true,\n      fieldTransform: defaultTransformFn,\n    };\n  }\n}\n\n/**\n * Check if the found target element is included in the explicit form allowlist, if provided.\n *\n * @param target A `form` element to check if we're allowed to track.\n * @param allowed An optional list of form elements we want to track against.\n * @returns True if there is no allowlist or the `target` is in the allowlist, false otherwise.\n */\nfunction explicitlyAllowedForm(target: HTMLFormElement, allowed: FormConfiguration['forms']) {\n  if (!allowed) return true;\n\n  for (let i = 0; i < allowed.length; i++) {\n    if (allowed[i].isSameNode(target)) return true;\n  }\n\n  return false;\n}\n\n/**\n * Convert a criterion object to a transform function\n *\n * @param criterion\n * @returns Transformation function if provided in `criterion`, or a default identity function\n */\nfunction getTransform(criterion?: { transform?: transformFn }): transformFn {\n  if (criterion && typeof criterion.transform === 'function') {\n    return criterion.transform;\n  }\n\n  return defaultTransformFn;\n}\n\n/**\n * Get an identifier for a form or `TrackedHTMLElement`\n *\n * @param elt Element to identify\n * @returns Identifier for `elt`\n */\nfunction getElementIdentifier(elt: Record<string, any>) {\n  const properties = ['name', 'id', 'type', 'nodeName'] as const;\n  for (const propName of properties) {\n    if (elt[propName] && typeof elt[propName] === 'string') {\n      return elt[propName];\n    }\n  }\n\n  return null;\n}\n\n/**\n * Discovers the parent form in which an element is contained\n *\n * @param elt Child control to identify the owning form for\n * @returns The form element this control belongs to or null if not found\n */\nfunction getParentForm(elt: TrackedHTMLElement | null) {\n  if (elt && elt.form) return elt.form;\n\n  let parent: ParentNode | null = elt;\n\n  while (parent) {\n    if (isElement(parent, 'FORM')) {\n      return parent;\n    }\n    parent = parent.parentNode;\n  }\n\n  return parent;\n}\n\n/**\n * Returns a list of the `TrackedHTMLElement`s inside a form along with their values\n *\n * @param elt Form element to get the control elements for\n * @returns Array of wrapped control elements belonging to the form\n */\nfunction getInnerFormElements(elt: HTMLFormElement) {\n  const innerElements: Array<ElementDataWrapper> = [];\n\n  Array.prototype.forEach.call(elt.elements, function (child: Element) {\n    if (!isTrackableElement(child)) return;\n\n    const inputType = (child.type || 'text').toLowerCase();\n\n    // submit and image are roughly equivalent\n    if (inputType === 'submit' || inputType === 'image') {\n      return;\n    }\n\n    const elementJson: ElementDataWrapper = {\n      elementData: {\n        name: getElementIdentifier(child)!,\n        value: child.value,\n        nodeName: child.nodeName,\n      },\n      originalElement: child,\n    };\n\n    if (isElement(child, 'INPUT')) {\n      elementJson.elementData.type = inputType;\n\n      if (inputType === 'password' || ((inputType === 'checkbox' || inputType === 'radio') && !child.checked)) {\n        elementJson.elementData.value = null;\n      }\n    }\n\n    innerElements.push(elementJson);\n  });\n\n  return innerElements;\n}\n\n/**\n * Create closure function to handle form field change/focus event\n *\n * @param tracker The tracker instance to generate the event with\n * @param config Plugin configuration\n * @param event_type Type of event to generate\n * @param context List of entities or context generators to evaluate with the event\n * @returns A form change/focus handler\n */\nfunction getFormChangeListener(\n  tracker: BrowserTracker,\n  config: FormConfiguration,\n  event_type: Exclude<FormTrackingEvent, FormTrackingEvent.SUBMIT_FORM>,\n  context?: DynamicContext | null\n) {\n  return function (e: Event) {\n    const target = e.composed ? e.composedPath()[0] : e.target;\n\n    // `change` and `submit` are not composed and are thus invisible to us\n    // bind late to the forms/field directly on field focus in this case\n    if (target !== e.target && e.composed && isTrackableElement(target)) {\n      if (target.form) {\n        if (_changeListeners[tracker.id]) addEventListener(target.form, 'change', _changeListeners[tracker.id], true);\n        if (_submitListeners[tracker.id]) addEventListener(target.form, 'submit', _submitListeners[tracker.id], true);\n      } else {\n        if (_changeListeners[tracker.id]) addEventListener(target, 'change', _changeListeners[tracker.id], true);\n      }\n    }\n\n    if (isTrackableElement(target) && config.fieldFilter(target)) {\n      let value: string | null = null;\n      let type: string | null = null;\n\n      if (isElement(target, 'INPUT')) {\n        type = (target.type || 'text').toLowerCase();\n        value =\n          (type === 'checkbox' && !target.checked) || type === 'password'\n            ? null\n            : config.fieldTransform(target.value, target, target);\n      } else {\n        value = config.fieldTransform(target.value, target, target);\n      }\n\n      const form = getParentForm(target);\n      if (!(form && config.formFilter(form) && explicitlyAllowedForm(form, config.forms))) return;\n\n      if (event_type === 'change_form' || (type !== 'checkbox' && type !== 'radio')) {\n        tracker.core.track(\n          buildFormFocusOrChange({\n            schema: event_type,\n            formId: getElementIdentifier(form ?? {}) ?? '',\n            elementId: getElementIdentifier(target) ?? '',\n            nodeName: target.nodeName,\n            type,\n            elementClasses: getCssClasses(target),\n            value: value ?? null,\n          }),\n          resolveDynamicContext(context, target, type, value)\n        );\n      }\n    }\n  };\n}\n\n/**\n * Create closure function to handle form submission event\n *\n * @param tracker The tracker instance to generate the event with\n * @param config Plugin configuration\n * @param context List of entities or context generators to evaluate with the event\n * @returns A form submit handler\n */\nfunction getFormSubmissionListener(\n  tracker: BrowserTracker,\n  config: FormConfiguration,\n  context?: DynamicContext | null\n) {\n  return function ({ target }: Event) {\n    if (isElement(target, 'FORM') && config.formFilter(target) && explicitlyAllowedForm(target, config.forms)) {\n      const elementsData: ElementData[] = [];\n\n      getInnerFormElements(target).forEach(function ({ elementData, originalElement }) {\n        if (config.fieldFilter(originalElement) && originalElement.type.toLowerCase() !== 'password') {\n          elementData.value = config.fieldTransform(elementData.value, elementData, originalElement);\n          elementsData.push(elementData);\n        }\n      });\n\n      tracker.core.track(\n        buildFormSubmission({\n          formId: getElementIdentifier(target) ?? '',\n          formClasses: getCssClasses(target),\n          elements: elementsData,\n        }),\n        resolveDynamicContext(context, target, elementsData)\n      );\n      flushPendingCookies();\n    }\n  };\n}\n","import type { BrowserPlugin, BrowserTracker } from '@snowplow/browser-tracker-core';\nimport { addFormListeners, removeFormListeners, type FormTrackingConfiguration } from './helpers';\n\nexport { type FormTrackingConfiguration } from './helpers';\n\nconst _trackers: Record<string, BrowserTracker> = {};\n\n/**\n * A plugin which enables automatic form focus, change, and submit tracking\n */\nexport function FormTrackingPlugin(): BrowserPlugin {\n  return {\n    activateBrowserPlugin: (tracker: BrowserTracker) => {\n      _trackers[tracker.id] = tracker;\n    },\n  };\n}\n\n/**\n * Enables automatic form tracking.\n *\n * An event will be fired when a form field is changed or a form submitted.\n * This can be called multiple times: previous listeners will be removed and replaced with any updated configuration.\n *\n * @param configuration - The form tracking configuration\n * @param trackers - The tracker identifiers which the events will be sent to\n */\nexport function enableFormTracking(\n  configuration: FormTrackingConfiguration = {},\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  trackers.forEach((t) => {\n    if (_trackers[t]) {\n      removeFormListeners(_trackers[t]);\n      addFormListeners(_trackers[t], configuration);\n    }\n  });\n}\n\n/**\n * Disables automatic form tracking.\n *\n * All page-level listeners for the given trackers will be removed.\n *\n * @param trackers - The tracker identifiers which the events will be sent to\n */\nexport function disableFormTracking(trackers: Array<string> = Object.keys(_trackers)) {\n  trackers.forEach((t) => {\n    if (_trackers[t]) {\n      removeFormListeners(_trackers[t]);\n    }\n  });\n}\n","import { CommonEventProperties, DynamicContext, SelfDescribingJson } from '@snowplow/tracker-core';\n\n/** Type of media player event */\nexport enum MediaEventType {\n  // Controlling the playback\n\n  /** Media player event fired when the media tracking is successfully attached to the player and can track events. */\n  Ready = 'ready',\n  /** Media player event sent when the player changes state to playing from previously being paused. */\n  Play = 'play',\n  /** Media player event sent when the user pauses the playback. */\n  Pause = 'pause',\n  /** Media player event sent when playback stops when end of the media is reached or because no further data is available. */\n  End = 'end',\n  /** Media player event sent when a seek operation begins. */\n  SeekStart = 'seek_start',\n  /** Media player event sent when a seek operation completes. */\n  SeekEnd = 'seek_end',\n\n  // Changes in playback settings\n\n  /** Media player event sent when the playback rate has changed. */\n  PlaybackRateChange = 'playback_rate_change',\n  /** Media player event sent when the volume has changed. */\n  VolumeChange = 'volume_change',\n  /** Media player event fired immediately after the browser switches into or out of full-screen mode. */\n  FullscreenChange = 'fullscreen_change',\n  /** Media player event fired immediately after the browser switches into or out of picture-in-picture mode. */\n  PictureInPictureChange = 'picture_in_picture_change',\n\n  // Tracking playback progress\n\n  /** Media player event fired periodically during main content playback, regardless of other API events that have been sent. */\n  Ping = 'ping',\n  /** Media player event fired when a percentage boundary set inoptions.boundariesis reached */\n  PercentProgress = 'percent_progress',\n\n  // Ad events\n\n  /** Media player event that signals the start of an ad break. */\n  AdBreakStart = 'ad_break_start',\n  /** Media player event that signals the end of an ad break. */\n  AdBreakEnd = 'ad_break_end',\n  /** Media player event that signals the start of an ad. */\n  AdStart = 'ad_start',\n  /** Media player event fired when a quartile of ad is reached after continuous ad playback at normal speed. */\n  AdFirstQuartile = 'ad_first_quartile',\n  /** Media player event fired when a midpoint of ad is reached after continuous ad playback at normal speed. */\n  AdMidpoint = 'ad_midpoint',\n  /** Media player event fired when a quartile of ad is reached after continuous ad playback at normal speed. */\n  AdThirdQuartile = 'ad_third_quartile',\n  /** Media player event that signals the ad creative was played to the end at normal speed. */\n  AdComplete = 'ad_complete',\n  /** Media player event fired when the user activated a skip control to skip the ad creative. */\n  AdSkip = 'ad_skip',\n  /** Media player event fired when the user clicked on the ad. */\n  AdClick = 'ad_click',\n  /** Media player event fired when the user clicked the pause control and stopped the ad creative. */\n  AdPause = 'ad_pause',\n  /** Media player event fired when the user resumed playing the ad creative after it had been stopped or paused. */\n  AdResume = 'ad_resume',\n\n  // Data quality events\n\n  /** Media player event fired when the player goes into the buffering state and begins to buffer content. */\n  BufferStart = 'buffer_start',\n  /** Media player event fired when the the player finishes buffering content and resumes playback. */\n  BufferEnd = 'buffer_end',\n  /** Media player event tracked when the video playback quality changes automatically. */\n  QualityChange = 'quality_change',\n  /** Media player event tracked when the resource could not be loaded due to an error.  */\n  Error = 'error',\n}\n\n/**\n * Configuration for filtering out repeated events of the same type tracked after each other.\n * By default, the seek start, seek end and volume change events are filtered out.\n */\nexport type FilterOutRepeatedEvents =\n  | {\n      /**\n       * Whether to filter out seek start and end events tracked after each other.\n       */\n      seekEvents?: boolean;\n      /**\n       * Whether to filter out volume change events tracked after each other.\n       */\n      volumeChangeEvents?: boolean;\n      /**\n       * Timeout in milliseconds after which to send the events that are queued for filtering.\n       * Defaults to 5000 ms.\n       */\n      flushTimeoutMs?: number;\n    }\n  | boolean;\n\nexport type MediaTrackingConfiguration = {\n  /** Unique ID of the media tracking. The same ID will be used for media player session if enabled. */\n  id: string;\n  /** Attributes for the media player context entity */\n  player?: MediaPlayerUpdate;\n  /** Attributes for the media player session context entity or false to disable it. Enabled by default. */\n  session?:\n    | {\n        /** Local date-time timestamp of when the session started. Automatically set to current time if not given. */\n        startedAt?: Date;\n      }\n    | false;\n  /** Configuration for sending ping events. Enabled by default.  */\n  pings?:\n    | {\n        /** Interval in seconds for sending ping events. Defaults to 30s. */\n        pingInterval?: number;\n        /** Maximum number of consecutive ping events to send when playback is paused. Defaults to 1. */\n        maxPausedPings?: number;\n      }\n    | boolean;\n  /** Update page activity in order to keep sending page ping events while playing. Enabled by default. */\n  updatePageActivityWhilePlaying?: boolean;\n  /** Percentage boundaries when to send percent progress events. Disabled by default. */\n  boundaries?: number[];\n  /**\n   * List of event types to allow tracking.\n   * If not specified, all tracked events will be allowed and tracked.\n   * Otherwise, tracked event types not present in the list will be discarded.\n   */\n  captureEvents?: MediaEventType[];\n  /**\n   * Whether to filter out repeated events of the same type tracked after each other.\n   * Useful to filter out repeated seek and volume change events tracked when the user holds down the seek or volume control.\n   * Only applies to seek and volume change events.\n   * Defaults to true.\n   */\n  filterOutRepeatedEvents?: FilterOutRepeatedEvents;\n};\n\nexport type MediaTrackPlaybackRateChangeArguments = {\n  /** Playback rate before the change (1 is normal) */\n  previousRate?: number;\n  /** Playback rate after the change (1 is normal) */\n  newRate: number;\n};\n\nexport type MediaTrackVolumeChangeArguments = {\n  /** Volume percentage before the change. */\n  previousVolume?: number;\n  /** Volume percentage after the change. */\n  newVolume: number;\n};\n\nexport type MediaTrackFullscreenChangeArguments = {\n  /** Whether the video element is fullscreen after the change. */\n  fullscreen: boolean;\n};\n\nexport type MediaTrackPictureInPictureChangeArguments = {\n  /** Whether the video element is showing picture-in-picture after the change. */\n  pictureInPicture: boolean;\n};\n\nexport type MediaTrackAdPercentProgressArguments = {\n  /** The percent of the way through the ad. */\n  percentProgress?: number;\n};\n\nexport type MediaTrackQualityChangeArguments = {\n  /** Quality level before the change (e.g., 1080p). */\n  previousQuality?: string;\n  /** Quality level after the change (e.g., 1080p). */\n  newQuality?: string;\n  /** The current bitrate in bits per second. */\n  bitrate?: number;\n  /** The current number of frames per second. */\n  framesPerSecond?: number;\n  /** Whether the change was automatic or triggered by the user. */\n  automatic?: boolean;\n};\n\nexport type MediaTrackErrorArguments = {\n  /** Error-identifying code for the playback issue. E.g. E522 */\n  errorCode?: string;\n  /** Name for the type of error that occurred in the playback. E.g. forbidden */\n  errorName?: string;\n  /** Longer description for the error occurred in the playback. */\n  errorDescription?: string;\n};\n\nexport type MediaTrackArguments = {\n  /** ID of the media tracking */\n  id: string;\n  /** Attributes for the media player context entity */\n  player?: MediaPlayerUpdate;\n};\n\nexport type MediaTrackAdArguments = {\n  /** Attributes for the media player ad context entity */\n  ad?: MediaAdUpdate;\n};\n\nexport type MediaTrackAdBreakArguments = {\n  /** Attributes for the media player ad break context entity */\n  adBreak?: MediaPlayerAdBreakUpdate;\n};\n\nexport type MediaTrackSelfDescribingEventArguments = {\n  /** Self-describing event */\n  event: SelfDescribingJson;\n};\n\n/** Type for all media player events */\nexport interface MediaEvent {\n  /** The event fired by the media player */\n  type: MediaEventType;\n  /** The custom media identifier given by the user */\n  eventBody?: Record<string, unknown>;\n}\n\n/** Type of media content. */\nexport enum MediaType {\n  /** Audio content. */\n  Audio = 'audio',\n  /** Video content. */\n  Video = 'video',\n}\n\n/** Type/Schema for a context entity for media player events with information about the current state of the media player */\nexport interface MediaPlayer extends Record<string, unknown> {\n  /** The current playback time position within the media in seconds */\n  currentTime: number;\n  /** A double-precision floating-point value indicating the duration of the media in seconds */\n  duration?: number | null;\n  /** If playback of the media has ended */\n  ended: boolean;\n  /** Whether the video element is fullscreen */\n  fullscreen?: boolean;\n  /** Whether the media is a live stream */\n  livestream?: boolean;\n  /** Human readable name given to tracked media content. */\n  label?: string;\n  /** If the video should restart after ending */\n  loop?: boolean;\n  /** Type of media content. */\n  mediaType?: MediaType;\n  /** If the media element is muted */\n  muted?: boolean;\n  /** If the media element is paused */\n  paused: boolean;\n  /** Whether the video element is showing picture-in-picture */\n  pictureInPicture?: boolean;\n  /** Type of the media player (e.g., com.youtube-youtube, com.vimeo-vimeo, org.whatwg-media_element) */\n  playerType?: string;\n  /** Playback rate (1 is normal) */\n  playbackRate?: number;\n  /** Quality level of the playback (e.g., 1080p). */\n  quality?: string;\n  /** Volume level */\n  volume?: number;\n}\n\n/** Partial type/schema for a context entity for media player events with information about the current state of the media player */\nexport interface MediaPlayerUpdate {\n  /** The current playback time position within the media in seconds */\n  currentTime?: number;\n  /** A double-precision floating-point value indicating the duration of the media in seconds */\n  duration?: number | null;\n  /** If playback of the media has ended */\n  ended?: boolean;\n  /** Whether the video element is fullscreen */\n  fullscreen?: boolean;\n  /** Whether the media is a live stream */\n  livestream?: boolean;\n  /** Human readable name given to tracked media content. */\n  label?: string;\n  /** If the video should restart after ending */\n  loop?: boolean;\n  /** Type of media content. */\n  mediaType?: MediaType;\n  /** If the media element is muted */\n  muted?: boolean;\n  /** If the media element is paused */\n  paused?: boolean;\n  /** Whether the video element is showing picture-in-picture */\n  pictureInPicture?: boolean;\n  /** Type of the media player (e.g., com.youtube-youtube, com.vimeo-vimeo, org.whatwg-media_element) */\n  playerType?: string;\n  /** Playback rate (1 is normal) */\n  playbackRate?: number;\n  /** Quality level of the playback (e.g., 1080p). */\n  quality?: string;\n  /** Volume level */\n  volume?: number;\n}\n\n/** Partial type/schema for a context entity for media player events that tracks a session of a single media player usage */\nexport interface MediaSession extends Record<string, unknown> {\n  /** An identifier for the media session that is kept while the media content is played in the media player. Does not reset automatically. */\n  mediaSessionId: string;\n  /** Date-time timestamp of when the session started */\n  startedAt?: Date;\n  /** Interval (seconds) in which the ping events will be sent */\n  pingInterval?: number;\n}\n\n/** Partial type/schema for a context entity for media player events that tracks a session of a single media player usage */\nexport interface MediaSessionStats {\n  /** Total seconds user spent with paused content (excluding linear ads) */\n  timePaused?: number;\n  /** Total seconds user spent playing content (excluding linear ads) */\n  timePlayed?: number;\n  /** Total seconds user spent playing content on mute (excluding linear ads) */\n  timePlayedMuted?: number;\n  /** Total seconds of the content played. Each part of the content played is counted once (i.e., counts rewinding or rewatching the same content only once). Playback rate does not affect this value. */\n  contentWatched?: number;\n  /** Total seconds that ads played during the session */\n  timeSpentAds?: number;\n  /** Total seconds that playback was buffering during the session */\n  timeBuffering?: number;\n  /** Number of ads played */\n  ads?: number;\n  /** Number of ads that the user clicked on */\n  adsClicked?: number;\n  /** Number of ads that the user skipped */\n  adsSkipped?: number;\n  /** Number of ad breaks played */\n  adBreaks?: number;\n  /** Average playback rate (1 is normal speed) */\n  avgPlaybackRate?: number;\n}\n\n/** Partial type/schema for a context entity with information about the currently played ad */\nexport interface MediaAdUpdate {\n  /** Friendly name of the ad */\n  name?: string;\n  /** Unique identifier for the ad */\n  adId: string;\n  /** The ID of the ad creative */\n  creativeId?: string;\n  /** The position of the ad within the ad break, starting with 1 */\n  podPosition?: number;\n  /** Length of the video ad in seconds */\n  duration?: number;\n  /** Indicating whether skip controls are made available to the end user */\n  skippable?: boolean;\n}\n\n/** Type/Schema for a context entity with information about the currently played ad */\nexport interface MediaAd extends Record<string, unknown> {\n  /** Friendly name of the ad */\n  name?: string;\n  /** Unique identifier for the ad */\n  adId: string;\n  /** The ID of the ad creative */\n  creativeId?: string;\n  /** The position of the ad within the ad break, starting with 1 */\n  podPosition?: number;\n  /** Length of the video ad in seconds */\n  duration?: number;\n  /** Indicating whether skip controls are made available to the end user */\n  skippable?: boolean;\n}\n\n/** Type of ads within the break */\nexport enum MediaAdBreakType {\n  /** Take full control of the video for a period of time. */\n  Linear = 'linear',\n  /** Run concurrently to the video. */\n  NonLinear = 'nonlinear',\n  /** Accompany the video but placed outside the player. */\n  Companion = 'companion',\n}\n\n/** Type/Schema for a context entity, shared with all media_player_ad events belonging to the ad break */\nexport interface MediaAdBreak extends Record<string, unknown> {\n  /** Ad break name (e.g., pre-roll, mid-roll, and post-roll) */\n  name?: string;\n  /** An identifier for the ad break */\n  breakId: string;\n  /** Playback time in seconds at the start of the ad break. */\n  startTime: number;\n  /**\n   * Type of ads within the break:\n   * - linear (take full control of the video for a period of time),\n   * - nonlinear (run concurrently to the video),\n   * - companion (accompany the video but placed outside the player)\n   */\n  breakType?: MediaAdBreakType;\n  /** The number of ads to be played within the ad break */\n  podSize?: number;\n}\n\n/** Partial type/schema for a context entity, shared with all media_player_ad events belonging to the ad break */\nexport interface MediaPlayerAdBreakUpdate {\n  /** Ad break name (e.g., pre-roll, mid-roll, and post-roll) */\n  name?: string;\n  /** An identifier for the ad break */\n  breakId: string;\n  /** Playback time in seconds at the start of the ad break. */\n  startTime?: number;\n  /**\n   * Type of ads within the break:\n   * - linear (take full control of the video for a period of time),\n   * - nonlinear (run concurrently to the video),\n   * - companion (accompany the video but placed outside the player)\n   */\n  breakType?: MediaAdBreakType;\n  /** The number of ads to be played within the ad break */\n  podSize?: number;\n}\n\nexport interface CommonMediaEventProperties extends Omit<CommonEventProperties, 'context'> {\n  /** Add context entities to an event by setting an Array of Self Describing JSON */\n  context?: DynamicContext;\n}\n\nexport interface EventWithContext extends CommonEventProperties {\n  event: SelfDescribingJson;\n}\n","import { MediaEventType } from './types';\n\nconst MEDIA_SCHEMA_PREFIX = 'iglu:com.snowplowanalytics.snowplow.media/';\nconst MEDIA_SCHEMA_SUFFIX = '/jsonschema/1-0-0';\n// NOTE: The player schema has a different vendor than the other media schemas because it builds on an older version of the same schema. Versions 3.12 to 3.13.1 of the media plugin used a conflicting schema URI which has since been removed from Iglu Central.\nexport const MEDIA_PLAYER_SCHEMA = 'iglu:com.snowplowanalytics.snowplow/media_player/jsonschema/2-0-0';\nexport const MEDIA_SESSION_SCHEMA = MEDIA_SCHEMA_PREFIX + 'session' + MEDIA_SCHEMA_SUFFIX;\nexport const MEDIA_AD_SCHEMA = MEDIA_SCHEMA_PREFIX + 'ad' + MEDIA_SCHEMA_SUFFIX;\nexport const MEDIA_AD_BREAK_SCHEMA = MEDIA_SCHEMA_PREFIX + 'ad_break' + MEDIA_SCHEMA_SUFFIX;\n\nfunction eventNameForEventType(eventType: MediaEventType): string {\n  /// ad first quartile, midpoint, and third quartile events share the same schema\n  switch (eventType) {\n    case MediaEventType.AdFirstQuartile:\n      return 'ad_quartile';\n    case MediaEventType.AdMidpoint:\n      return 'ad_quartile';\n    case MediaEventType.AdThirdQuartile:\n      return 'ad_quartile';\n  }\n\n  return eventType;\n}\n\nexport function getMediaEventSchema(eventType: MediaEventType): string {\n  const eventName = eventNameForEventType(eventType);\n  return MEDIA_SCHEMA_PREFIX + eventName + '_event' + MEDIA_SCHEMA_SUFFIX;\n}\n","import { SelfDescribingJson } from '@snowplow/tracker-core';\nimport {\n  getMediaEventSchema,\n  MEDIA_AD_BREAK_SCHEMA,\n  MEDIA_AD_SCHEMA,\n  MEDIA_PLAYER_SCHEMA,\n  MEDIA_SESSION_SCHEMA,\n} from './schemata';\nimport { MediaPlayer, MediaAd, MediaAdBreak, MediaSession, MediaEvent } from './types';\n\nexport function buildMediaPlayerEvent(event: MediaEvent): SelfDescribingJson {\n  return {\n    schema: getMediaEventSchema(event.type),\n    data: removeEmptyProperties(event.eventBody ?? {}),\n  };\n}\n\nexport function buildMediaPlayerEntity(mediaPlayer: MediaPlayer): SelfDescribingJson {\n  return {\n    schema: MEDIA_PLAYER_SCHEMA,\n    data: removeEmptyProperties(mediaPlayer),\n  };\n}\n\nexport function buildMediaSessionEntity(session: MediaSession): SelfDescribingJson {\n  return {\n    schema: MEDIA_SESSION_SCHEMA,\n    data: removeEmptyProperties(session),\n  };\n}\n\nexport function buildMediaAdEntity(ad: MediaAd): SelfDescribingJson {\n  return {\n    schema: MEDIA_AD_SCHEMA,\n    data: removeEmptyProperties(ad),\n  };\n}\n\nexport function buildMediaAdBreakEntity(adBreak: MediaAdBreak): SelfDescribingJson {\n  return {\n    schema: MEDIA_AD_BREAK_SCHEMA,\n    data: removeEmptyProperties(adBreak),\n  };\n}\n\n/**\n * Returns a copy of a JSON with undefined and null properties removed\n *\n * @param event - Object to clean\n * @returns A cleaned copy of eventJson\n */\nfunction removeEmptyProperties(event: Record<string, unknown>): Record<string, unknown> {\n  const ret: Record<string, unknown> = {};\n  for (const k in event) {\n    if (event[k] != null) {\n      ret[k] = event[k];\n    }\n  }\n  return ret;\n}\n","import { SelfDescribingJson } from '@snowplow/tracker-core';\nimport { buildMediaAdBreakEntity, buildMediaAdEntity } from './core';\nimport { MediaPlayer, MediaAd, MediaAdUpdate, MediaAdBreak, MediaPlayerAdBreakUpdate, MediaEventType } from './types';\n\n/** Keeps track of the ad and ad break entities and updates them according to tracked events. */\nexport class MediaAdTracking {\n  ad?: MediaAd;\n  adBreak?: MediaAdBreak;\n  podPosition = 0;\n\n  updateForThisEvent(\n    eventType: MediaEventType,\n    player: MediaPlayer,\n    ad?: MediaAdUpdate,\n    adBreak?: MediaPlayerAdBreakUpdate\n  ) {\n    if (eventType == MediaEventType.AdStart) {\n      this.ad = undefined;\n      this.podPosition++;\n    } else if (eventType == MediaEventType.AdBreakStart) {\n      this.adBreak = undefined;\n      this.podPosition = 0;\n    }\n\n    if (ad !== undefined) {\n      let position = { podPosition: this.podPosition > 0 ? this.podPosition : undefined };\n      if (this.ad !== undefined) {\n        this.ad = { ...this.ad, ...position, ...ad };\n      } else {\n        this.ad = { ...position, ...ad };\n      }\n    }\n\n    if (adBreak !== undefined) {\n      let startTime = { startTime: player.currentTime };\n      if (this.adBreak !== undefined) {\n        this.adBreak = { ...startTime, ...this.adBreak, ...adBreak };\n      } else {\n        this.adBreak = { ...startTime, ...adBreak };\n      }\n    }\n  }\n\n  updateForNextEvent(eventType: MediaEventType) {\n    if (eventType == MediaEventType.AdBreakEnd) {\n      this.adBreak = undefined;\n      this.podPosition = 0;\n    }\n\n    if (eventType == MediaEventType.AdComplete || eventType == MediaEventType.AdSkip) {\n      this.ad = undefined;\n    }\n  }\n\n  getContext(): SelfDescribingJson[] {\n    let context = [];\n    if (this.ad !== undefined) {\n      context.push(buildMediaAdEntity(this.ad));\n    }\n    if (this.adBreak !== undefined) {\n      context.push(buildMediaAdBreakEntity(this.adBreak));\n    }\n    return context;\n  }\n}\n","import { getMediaEventSchema } from './schemata';\nimport { FilterOutRepeatedEvents, MediaEventType, EventWithContext } from './types';\n\n/**\n * This class filters out repeated events that are sent by the media player.\n * This applies to seek and volume change events.\n */\nexport class RepeatedEventFilter {\n  private aggregateEventsWithOrder: { [schema: string]: boolean } = {};\n  private eventsToAggregate: { [schema: string]: (() => void)[] } = {};\n  private flushTimeout?: number;\n  private flushTimeoutMs: number;\n\n  constructor(configuration?: FilterOutRepeatedEvents) {\n    let allFiltersEnabled = configuration === undefined || configuration === true;\n    if (allFiltersEnabled || (typeof configuration === 'object' && configuration.seekEvents !== false)) {\n      this.aggregateEventsWithOrder[getMediaEventSchema(MediaEventType.SeekStart)] = true;\n      this.aggregateEventsWithOrder[getMediaEventSchema(MediaEventType.SeekEnd)] = false;\n    }\n    if (allFiltersEnabled || (typeof configuration === 'object' && configuration.volumeChangeEvents !== false)) {\n      this.aggregateEventsWithOrder[getMediaEventSchema(MediaEventType.VolumeChange)] = false;\n    }\n\n    this.flushTimeoutMs = (typeof configuration === 'object' ? configuration.flushTimeoutMs : undefined) ?? 5000;\n\n    Object.keys(this.aggregateEventsWithOrder).forEach((schema) => {\n      this.eventsToAggregate[schema] = [];\n    });\n  }\n\n  trackFilteredEvents(events: EventWithContext[], trackEvent: (event: EventWithContext) => void) {\n    let startFlushTimeout = false;\n\n    events.forEach(({ event, context }) => {\n      if (this.eventsToAggregate[event.schema] !== undefined) {\n        startFlushTimeout = true;\n        this.eventsToAggregate[event.schema].push(() => trackEvent({ event, context }));\n      } else {\n        startFlushTimeout = false;\n        // flush any events waiting\n        this.flush();\n\n        trackEvent({ event, context });\n      }\n    });\n\n    if (startFlushTimeout && this.flushTimeout === undefined) {\n      this.setFlushTimeout();\n    }\n  }\n\n  flush() {\n    this.clearFlushTimeout();\n\n    Object.keys(this.eventsToAggregate).forEach((schema) => {\n      let eventsToAggregate = this.eventsToAggregate[schema];\n      if (eventsToAggregate.length > 0) {\n        if (this.aggregateEventsWithOrder[schema]) {\n          eventsToAggregate[0]();\n        } else {\n          eventsToAggregate[eventsToAggregate.length - 1]();\n        }\n        this.eventsToAggregate[schema] = [];\n      }\n    });\n  }\n\n  private clearFlushTimeout() {\n    if (this.flushTimeout !== undefined) {\n      clearTimeout(this.flushTimeout);\n      this.flushTimeout = undefined;\n    }\n  }\n\n  private setFlushTimeout() {\n    this.clearFlushTimeout();\n    this.flushTimeout = window.setTimeout(() => this.flush(), this.flushTimeoutMs);\n  }\n}\n","import { resolveDynamicContext, DynamicContext, LOG, SelfDescribingJson } from '@snowplow/tracker-core';\nimport { MediaAdTracking } from './adTracking';\nimport { buildMediaPlayerEntity, buildMediaPlayerEvent } from './core';\nimport { MediaPingInterval } from './pingInterval';\nimport { MediaSessionTracking } from './sessionTracking';\nimport {\n  MediaPlayer,\n  MediaAdUpdate,\n  MediaPlayerAdBreakUpdate,\n  MediaPlayerUpdate,\n  MediaEventType,\n  MediaEvent,\n  EventWithContext,\n  FilterOutRepeatedEvents,\n} from './types';\nimport { RepeatedEventFilter } from './repeatedEventFilter';\n\n/**\n * Manages the state and built-in entities for a media tracking that starts when a user\n * call `startMediaTracking` and ends with `endMediaTracking`.\n *\n * It updates the internal state for each tracked event and returns context entities with\n * properties updated based on the internal state.\n */\nexport class MediaTracking {\n  /// ID of the media tracking that is used to refer to it by the user.\n  id: string;\n  /// Percentage boundaries when to track percent progress events.\n  private boundaries?: number[];\n  /// List of boundaries for which percent progress events were already sent to avoid sending again.\n  private sentBoundaries: number[] = [];\n  /// State for the media player context entity that is updated as new events are tracked.\n  player: MediaPlayer = {\n    currentTime: 0,\n    paused: true,\n    ended: false,\n  };\n\n  /// Used to add media player session entity.\n  private session?: MediaSessionTracking;\n  /// Tracks ping events independently but stored here to stop when media tracking stops.\n  private pingInterval?: MediaPingInterval;\n  /// Manages ad entities.\n  private adTracking = new MediaAdTracking();\n  /// Context entities to attach to all events\n  private customContext?: DynamicContext;\n  /// Optional list of event types to allow tracking and discard others.\n  private captureEvents?: MediaEventType[];\n  // Whether to update page activity when playing media. Enabled by default.\n  private updatePageActivityWhilePlaying?: boolean;\n  /// Filters out repeated events based on the configuration.\n  private repeatedEventFilter: RepeatedEventFilter;\n\n  constructor(\n    id: string,\n    player?: MediaPlayerUpdate,\n    session?: MediaSessionTracking,\n    pingInterval?: MediaPingInterval,\n    boundaries?: number[],\n    captureEvents?: MediaEventType[],\n    updatePageActivityWhilePlaying?: boolean,\n    filterRepeatedEvents?: FilterOutRepeatedEvents,\n    context?: DynamicContext\n  ) {\n    this.id = id;\n    this.updatePlayer(player);\n    this.session = session;\n    this.pingInterval = pingInterval;\n    this.boundaries = boundaries;\n    this.captureEvents = captureEvents;\n    this.updatePageActivityWhilePlaying = updatePageActivityWhilePlaying;\n    this.customContext = context;\n    this.repeatedEventFilter = new RepeatedEventFilter(filterRepeatedEvents);\n\n    // validate event names in the captureEvents list\n    captureEvents?.forEach((eventType) => {\n      if (!Object.values(MediaEventType).includes(eventType)) {\n        LOG.warn('Unknown media event ' + eventType);\n      }\n    });\n  }\n\n  /**\n   * Called when user calls `endMediaTracking()`.\n   */\n  flushAndStop() {\n    this.pingInterval?.clear();\n    this.repeatedEventFilter.flush();\n  }\n\n  /**\n   * Updates the internal state given the new event or new media player info and returns events to track.\n   * @param eventType Type of the event tracked or undefined when only updating player properties.\n   * @param player Updates to the media player stored entity.\n   * @param ad Updates to the ad entity.\n   * @param adBreak Updates to the ad break entity.\n   * @returns List of events with entities to track.\n   */\n  update(\n    trackEvent: (event: EventWithContext) => void,\n    mediaEvent?: MediaEvent,\n    customEvent?: SelfDescribingJson,\n    player?: MediaPlayerUpdate,\n    ad?: MediaAdUpdate,\n    adBreak?: MediaPlayerAdBreakUpdate\n  ) {\n    // update state\n    this.updatePlayer(player);\n    if (mediaEvent !== undefined) {\n      this.adTracking.updateForThisEvent(mediaEvent.type, this.player, ad, adBreak);\n    }\n    this.session?.update(mediaEvent?.type, this.player, this.adTracking.adBreak);\n    this.pingInterval?.update(this.player);\n\n    // build context entities\n    let context = [buildMediaPlayerEntity(this.player)];\n    if (this.session !== undefined) {\n      context.push(this.session.getContext());\n    }\n    if (this.customContext) {\n      context = context.concat(resolveDynamicContext(this.customContext, mediaEvent ?? customEvent));\n    }\n    context = context.concat(this.adTracking.getContext());\n\n    // build event types to track\n    const mediaEventsToTrack: MediaEvent[] = [];\n    if (mediaEvent !== undefined && this.shouldTrackEvent(mediaEvent.type)) {\n      mediaEventsToTrack.push(mediaEvent);\n    }\n    if (this.shouldSendPercentProgress()) {\n      mediaEventsToTrack.push({\n        type: MediaEventType.PercentProgress,\n        eventBody: { percentProgress: this.getPercentProgress() },\n      });\n    }\n\n    // update state for events after this one\n    if (mediaEvent !== undefined) {\n      this.adTracking.updateForNextEvent(mediaEvent.type);\n    }\n\n    const eventsToTrack = mediaEventsToTrack.map((event) => {\n      return { event: buildMediaPlayerEvent(event), context: context };\n    });\n    if (customEvent !== undefined) {\n      eventsToTrack.push({ event: customEvent, context: context });\n    }\n\n    this.repeatedEventFilter.trackFilteredEvents(eventsToTrack, trackEvent);\n  }\n\n  shouldUpdatePageActivity(): boolean {\n    return (this.updatePageActivityWhilePlaying ?? true) && !this.player.paused;\n  }\n\n  private updatePlayer(player?: MediaPlayerUpdate) {\n    if (player !== undefined) {\n      this.player = {\n        ...this.player,\n        ...player,\n      };\n    }\n  }\n\n  private shouldSendPercentProgress(): boolean {\n    const percentProgress = this.getPercentProgress();\n    if (this.boundaries === undefined || percentProgress === undefined || this.player.paused) {\n      return false;\n    }\n\n    let boundaries = this.boundaries.filter((b) => b <= (percentProgress ?? 0));\n    if (boundaries.length == 0) {\n      return false;\n    }\n    let boundary = Math.max(...boundaries);\n    if (!this.sentBoundaries.includes(boundary)) {\n      this.sentBoundaries.push(boundary);\n      return true;\n    }\n    return false;\n  }\n\n  private shouldTrackEvent(eventType: MediaEventType): boolean {\n    return this.captureEvents === undefined || this.captureEvents.includes(eventType);\n  }\n\n  private getPercentProgress(): number | undefined {\n    if (this.player.duration === null || this.player.duration === undefined || this.player.duration == 0) {\n      return undefined;\n    }\n    return Math.floor(((this.player.currentTime ?? 0) / this.player.duration) * 100);\n  }\n}\n","import { MediaPlayer } from './types';\n\n/**\n * Default ping interval in seconds.\n * Changing the setting is a breaking change for downstream models that work with this setting.\n * If a custom interval is used, it is present in the session context entity.\n **/\nconst DEFAULT_PING_INTERVAL = 30;\n\n/** Manages the timer for firing the media ping events. */\nexport class MediaPingInterval {\n  private interval?: ReturnType<typeof setInterval>;\n  private paused?: boolean;\n  private numPausedPings = 0;\n  private maxPausedPings = 1;\n\n  constructor(pingIntervalSeconds: number | undefined, maxPausedPings: number | undefined, trackPing: () => void) {\n    if (maxPausedPings !== undefined) {\n      this.maxPausedPings = maxPausedPings;\n    }\n\n    this.interval = setInterval(() => {\n      if (!this.isPaused() || this.numPausedPings < this.maxPausedPings) {\n        if (this.isPaused()) {\n          this.numPausedPings++;\n        }\n        trackPing();\n      }\n    }, (pingIntervalSeconds ?? DEFAULT_PING_INTERVAL) * 1000);\n  }\n\n  update(player: MediaPlayer) {\n    this.paused = player.paused;\n    if (!this.paused) {\n      this.numPausedPings = 0;\n    }\n  }\n\n  clear() {\n    if (this.interval !== undefined) {\n      clearInterval(this.interval);\n      this.interval = undefined;\n    }\n  }\n\n  private isPaused() {\n    return this.paused === true;\n  }\n}\n","import {\n  MediaAdBreakType,\n  MediaPlayer,\n  MediaAdBreak,\n  MediaEventType,\n  MediaSessionStats,\n} from './types';\n\n/** Internal type for representing the session updates */\ntype Log = {\n  eventType: MediaEventType | undefined;\n  time: number;\n  contentTime: number;\n  playbackRate?: number;\n  paused: boolean;\n  muted?: boolean;\n  linearAd: boolean;\n};\n\nconst adStartTypes = [MediaEventType.AdStart, MediaEventType.AdResume];\nconst adProgressTypes = [\n  MediaEventType.AdClick,\n  MediaEventType.AdFirstQuartile,\n  MediaEventType.AdMidpoint,\n  MediaEventType.AdThirdQuartile,\n];\nconst adEndTypes = [MediaEventType.AdComplete, MediaEventType.AdSkip, MediaEventType.AdPause];\nconst bufferingEndTypes = [MediaEventType.BufferEnd, MediaEventType.Play];\n\n/** Calculates the average playback rate based on measurements of the rate over partial durations */\nclass AveragePlaybackRateCalculator {\n  private durationWithPlaybackRate = 0;\n  private duration = 0;\n\n  add(rate: number, duration: number) {\n    this.durationWithPlaybackRate += rate * duration;\n    this.duration += duration;\n  }\n\n  get(): number | undefined {\n    return this.duration > 0 ? this.durationWithPlaybackRate / this.duration : undefined;\n  }\n}\n\n/**\n * Calculates statistics in the media player session as events are tracked.\n */\nexport class MediaSessionTrackingStats {\n  /// time for which ads were playing\n  private adPlaybackDuration = 0;\n  /// time for which the content was playing\n  private playbackDuration = 0;\n  /// time for which the content was playing on mute\n  private playbackDurationMuted = 0;\n  /// average playback rate calculator\n  private avgPlaybackRate = new AveragePlaybackRateCalculator();\n  /// time for which the playback was paused\n  private pausedDuration = 0;\n  /// number of ads\n  private ads = 0;\n  /// number of ad breaks\n  private adBreaks = 0;\n  /// number of ad skip events\n  private adsSkipped = 0;\n  /// number of ad click events\n  private adsClicked = 0;\n  /// sum of time durations between the buffer start event and end of buffering\n  private bufferingDuration = 0;\n  /// set of seconds in content time that were played used to calculate the content watched duration\n  private playedSeconds = new Set();\n\n  private lastAdUpdateAt: number | undefined;\n  private bufferingStartedAt: number | undefined;\n  private bufferingStartTime: number | undefined;\n  private lastLog: Log | undefined;\n\n  /// Update stats given a new event.\n  update(eventType: MediaEventType | undefined, player: MediaPlayer, adBreak?: MediaAdBreak) {\n    let log: Log = {\n      time: new Date().getTime() / 1000,\n      contentTime: player.currentTime,\n      eventType: eventType,\n      playbackRate: player.playbackRate,\n      paused: player.paused,\n      muted: player.muted,\n      linearAd: (adBreak?.breakType ?? MediaAdBreakType.Linear) == MediaAdBreakType.Linear,\n    };\n\n    this.updateDurationStats(log);\n    this.updateAdStats(log);\n    this.updateBufferingStats(log);\n\n    this.lastLog = log;\n  }\n\n  /// Produce part of the media session entity with the stats.\n  toSessionContextEntity(): MediaSessionStats {\n    return {\n      timePaused: this.pausedDuration > 0 ? this.round(this.pausedDuration) : undefined,\n      timePlayed: this.playbackDuration > 0 ? this.round(this.playbackDuration) : undefined,\n      timePlayedMuted: this.playbackDurationMuted > 0 ? this.round(this.playbackDurationMuted) : undefined,\n      timeSpentAds: this.adPlaybackDuration > 0 ? this.round(this.adPlaybackDuration) : undefined,\n      timeBuffering: this.bufferingDuration > 0 ? this.round(this.bufferingDuration) : undefined,\n      ads: this.ads > 0 ? this.ads : undefined,\n      adBreaks: this.adBreaks > 0 ? this.adBreaks : undefined,\n      adsSkipped: this.adsSkipped > 0 ? this.adsSkipped : undefined,\n      adsClicked: this.adsClicked > 0 ? this.adsClicked : undefined,\n      avgPlaybackRate: this.round(this.avgPlaybackRate.get()),\n      contentWatched: this.playedSeconds.size > 0 ? this.playedSeconds.size : undefined,\n    };\n  }\n\n  private updateDurationStats(log: Log) {\n    // if ad was playing until now and it was a linear ad, don't add the duration stats\n    let wasPlayingAd = this.lastAdUpdateAt !== undefined;\n    const shouldCountStats = (!wasPlayingAd || !log.linearAd) ?? true;\n    if (!shouldCountStats) {\n      return;\n    }\n\n    if (this.lastLog !== undefined) {\n      // add the time diff since last event to duration stats\n      let duration = log.time - this.lastLog.time;\n      if (this.lastLog.paused) {\n        this.pausedDuration += duration;\n      } else {\n        this.playbackDuration += duration;\n        if (this.lastLog.playbackRate !== undefined) {\n          this.avgPlaybackRate.add(this.lastLog.playbackRate, duration);\n        }\n\n        if (this.lastLog.muted) {\n          this.playbackDurationMuted += duration;\n        }\n\n        if (!log.paused) {\n          for (let i = Math.floor(this.lastLog.contentTime); i < log.contentTime; i++) {\n            this.playedSeconds.add(i);\n          }\n        }\n      }\n    }\n    if (!log.paused) {\n      this.playedSeconds.add(Math.floor(log.contentTime));\n    }\n  }\n\n  private updateAdStats(log: Log) {\n    // only works with ad event types\n    if (log.eventType === undefined) {\n      return;\n    }\n\n    // count ad actions\n    if (log.eventType == MediaEventType.AdBreakStart) {\n      this.adBreaks++;\n    } else if (log.eventType == MediaEventType.AdStart) {\n      this.ads++;\n    } else if (log.eventType == MediaEventType.AdSkip) {\n      this.adsSkipped++;\n    } else if (log.eventType == MediaEventType.AdClick) {\n      this.adsClicked++;\n    }\n\n    // update ad playback duration\n    if (this.lastAdUpdateAt === undefined) {\n      if (adStartTypes.includes(log.eventType)) {\n        this.lastAdUpdateAt = log.time;\n      }\n    } else if (adProgressTypes.includes(log.eventType)) {\n      this.adPlaybackDuration += log.time - this.lastAdUpdateAt;\n      this.lastAdUpdateAt = log.time;\n    } else if (adEndTypes.includes(log.eventType)) {\n      this.adPlaybackDuration += log.time - this.lastAdUpdateAt;\n      this.lastAdUpdateAt = undefined;\n    }\n  }\n\n  private updateBufferingStats(log: Log) {\n    if (log.eventType == MediaEventType.BufferStart) {\n      this.bufferingStartedAt = log.time;\n      this.bufferingStartTime = log.contentTime;\n    } else if (this.bufferingStartedAt !== undefined) {\n      // Either the playback moved or BufferEnd or Play events were tracked\n      if (\n        (log.contentTime != this.bufferingStartTime && !log.paused) ||\n        (log.eventType !== undefined && bufferingEndTypes.includes(log.eventType))\n      ) {\n        this.bufferingDuration += log.time - this.bufferingStartedAt;\n        this.bufferingStartedAt = undefined;\n        this.bufferingStartTime = undefined;\n      } else {\n        this.bufferingDuration += log.time - this.bufferingStartedAt;\n        this.bufferingStartedAt = log.time;\n      }\n    }\n  }\n\n  private round(n: number | undefined): number | undefined {\n    if (n === undefined) { return undefined; }\n    return Math.round(n * 1000) / 1000;\n  }\n}\n","import { SelfDescribingJson } from '@snowplow/tracker-core';\nimport { buildMediaSessionEntity } from './core';\nimport { MediaSessionTrackingStats } from './sessionStats';\nimport { MediaAdBreak, MediaPlayer, MediaEventType } from './types';\n\n/**\n * Manages the media player session that is optionally added as a context entity\n * in media tracking.\n */\nexport class MediaSessionTracking {\n  /// Same as the ID of the media tracking.\n  private id: string;\n  private startedAt: Date;\n  private pingInterval?: number;\n  private stats = new MediaSessionTrackingStats();\n\n  constructor(id: string, startedAt?: Date, pingInterval?: number) {\n    this.id = id;\n    this.pingInterval = pingInterval;\n    this.startedAt = startedAt ?? new Date();\n  }\n\n  update(eventType: MediaEventType | undefined, player: MediaPlayer, adBreak?: MediaAdBreak) {\n    this.stats.update(eventType, player, adBreak);\n  }\n\n  getContext(): SelfDescribingJson {\n    return buildMediaSessionEntity({\n      mediaSessionId: this.id,\n      startedAt: this.startedAt,\n      pingInterval: this.pingInterval,\n      ...this.stats.toSessionContextEntity(),\n    });\n  }\n}\n","import { BrowserPlugin, BrowserTracker, dispatchToTrackersInCollection } from '@snowplow/browser-tracker-core';\nimport { buildSelfDescribingEvent, resolveDynamicContext, LOG, SelfDescribingJson } from '@snowplow/tracker-core';\nimport { MediaTracking } from './mediaTracking';\nimport { MediaPingInterval } from './pingInterval';\nimport { MediaSessionTracking } from './sessionTracking';\nimport {\n  CommonMediaEventProperties,\n  MediaEventType,\n  MediaAdBreakType,\n  MediaTrackArguments,\n  MediaTrackAdBreakArguments,\n  MediaTrackAdArguments,\n  MediaTrackingConfiguration,\n  MediaTrackPlaybackRateChangeArguments,\n  MediaEvent,\n  MediaTrackVolumeChangeArguments,\n  MediaTrackFullscreenChangeArguments,\n  MediaTrackPictureInPictureChangeArguments,\n  MediaTrackAdPercentProgressArguments,\n  MediaTrackQualityChangeArguments,\n  MediaTrackErrorArguments,\n  MediaTrackSelfDescribingEventArguments,\n  EventWithContext,\n} from './types';\n\nexport { MediaAdBreakType as MediaPlayerAdBreakType, MediaEventType };\n\nconst _trackers: Record<string, BrowserTracker> = {};\nconst _context: Record<string, SelfDescribingJson[]> = {};\n\n/**\n * Adds media tracking\n */\nexport function SnowplowMediaPlugin(): BrowserPlugin {\n  let trackerId: string;\n  return {\n    activateBrowserPlugin: (tracker) => {\n      trackerId = tracker.id;\n      _trackers[trackerId] = tracker;\n      _context[trackerId] = [];\n    },\n    contexts: () => {\n      return _context[trackerId] || [];\n    },\n  };\n}\n\nconst activeMedias: { [key: string]: MediaTracking } = {};\n\n/**\n * Starts media tracking for a single media content tracked in a media player.\n * The tracking instance is uniquely identified by a given ID.\n * All subsequent media track calls will be processed within this media tracking if given the same ID.\n *\n * @param config Configuration for setting up media tracking\n * @param trackers The tracker identifiers which ping events will be sent to\n */\nexport function startMediaTracking(\n  config: MediaTrackingConfiguration & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  const pingInterval = typeof config.pings === 'boolean' ? undefined : config.pings?.pingInterval;\n  const maxPausedPings = typeof config.pings === 'boolean' ? undefined : config.pings?.maxPausedPings;\n  const pings =\n    config.pings === false || config.pings === undefined\n      ? undefined\n      : new MediaPingInterval(pingInterval, maxPausedPings, () => {\n          track({ mediaEvent: { type: MediaEventType.Ping } }, { id: config.id }, trackers);\n        });\n\n  const sessionTracking: MediaSessionTracking | undefined =\n    config.session === false ? undefined : new MediaSessionTracking(config.id, config.session?.startedAt, pingInterval);\n\n  const mediaTracking = new MediaTracking(\n    config.id,\n    config.player,\n    sessionTracking,\n    pings,\n    config.boundaries,\n    config.captureEvents,\n    config.updatePageActivityWhilePlaying,\n    config.filterOutRepeatedEvents,\n    config.context\n  );\n  activeMedias[mediaTracking.id] = mediaTracking;\n}\n\n/**\n * Ends media tracking with the given ID if previously started.\n * Clears local state for the media tracking and sends any events waiting to be sent.\n *\n * @param configuration Configuration with the media tracking ID\n */\nexport function endMediaTracking(configuration: { id: string }) {\n  if (activeMedias[configuration.id]) {\n    activeMedias[configuration.id].flushAndStop();\n    delete activeMedias[configuration.id];\n  }\n}\n\n/**\n * Updates stored attributes of the media tracking such as the current playback.\n * Use this function to continually update the player attributes so that they\n * can be sent in the background ping events.\n *\n * @param args The attributes for the media entities\n * @param trackers The tracker identifiers which any resulting event will be sent to\n */\nexport function updateMediaTracking(\n  args: MediaTrackArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track({}, args, trackers);\n}\n\n/**\n * Tracks a media player ready event that is fired when the media tracking is successfully\n * attached to the player and can track events.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaReady(\n  args: MediaTrackArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track({ mediaEvent: { type: MediaEventType.Ready } }, args, trackers);\n}\n\n/**\n * Tracks a media player play event sent when the player changes state to playing from\n * previously being paused.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaPlay(\n  args: MediaTrackArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track(\n    { mediaEvent: { type: MediaEventType.Play } },\n    {\n      ...args,\n      player: {\n        ...args.player,\n        paused: false,\n      },\n    },\n    trackers\n  );\n}\n\n/**\n * Tracks a media player pause event sent when the user pauses the playback.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaPause(\n  args: MediaTrackArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track(\n    { mediaEvent: { type: MediaEventType.Pause } },\n    {\n      ...args,\n      player: {\n        ...args.player,\n        paused: true,\n      },\n    },\n    trackers\n  );\n}\n\n/**\n * Tracks a media player end event sent when playback stops when end of the media\n * is reached or because no further data is available.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaEnd(\n  args: MediaTrackArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track(\n    { mediaEvent: { type: MediaEventType.End } },\n    {\n      ...args,\n      player: {\n        ...args.player,\n        ended: true,\n        paused: true,\n      },\n    },\n    trackers\n  );\n}\n\n/**\n * Tracks a media player seek start event sent when a seek operation begins.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaSeekStart(\n  args: MediaTrackArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track({ mediaEvent: { type: MediaEventType.SeekStart } }, args, trackers);\n}\n\n/**\n * Tracks a media player seek end event sent when a seek operation completes.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaSeekEnd(\n  args: MediaTrackArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track({ mediaEvent: { type: MediaEventType.SeekEnd } }, args, trackers);\n}\n\n/**\n * Tracks a media player playback rate change event sent when the playback rate has changed.\n *\n * If not passed here, the previous rate is taken from the last setting in media player.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaPlaybackRateChange(\n  args: MediaTrackArguments & MediaTrackPlaybackRateChangeArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  const { previousRate, newRate } = args;\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.PlaybackRateChange,\n        eventBody: {\n          previousRate: previousRate ?? getMedia(args.id)?.player.playbackRate,\n          newRate,\n        },\n      },\n    },\n    {\n      ...args,\n      player: { ...args.player, playbackRate: newRate },\n    },\n    trackers\n  );\n}\n\n/**\n * Tracks a media player volume change event sent when the volume has changed.\n *\n * If not passed here, the previous volume is taken from the last setting in media player.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaVolumeChange(\n  args: MediaTrackArguments & MediaTrackVolumeChangeArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  const { previousVolume, newVolume } = args;\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.VolumeChange,\n        eventBody: {\n          previousVolume: previousVolume ?? getMedia(args.id)?.player.volume,\n          newVolume,\n        },\n      },\n    },\n    {\n      ...args,\n      player: { ...args.player, volume: newVolume },\n    },\n    trackers\n  );\n}\n\n/**\n * Tracks a media player fullscreen change event fired immediately after\n * the browser switches into or out of full-screen mode.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaFullscreenChange(\n  args: MediaTrackArguments & MediaTrackFullscreenChangeArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  const { fullscreen } = args;\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.FullscreenChange,\n        eventBody: { fullscreen },\n      },\n    },\n    {\n      ...args,\n      player: { ...args.player, fullscreen },\n    },\n    trackers\n  );\n}\n\n/**\n * Tracks a media player picture-in-picture change event fired immediately\n * after the browser switches into or out of picture-in-picture mode.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaPictureInPictureChange(\n  args: MediaTrackArguments & MediaTrackPictureInPictureChangeArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  const { pictureInPicture } = args;\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.PictureInPictureChange,\n        eventBody: { pictureInPicture },\n      },\n    },\n    {\n      ...args,\n      player: { ...args.player, pictureInPicture },\n    },\n    trackers\n  );\n}\n\n/**\n * Tracks a media player ad break start event that signals the start of an ad break.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaAdBreakStart(\n  args: MediaTrackArguments & MediaTrackAdBreakArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track({ mediaEvent: { type: MediaEventType.AdBreakStart } }, args, trackers);\n}\n\n/**\n * Tracks a media player ad break end event that signals the end of an ad break.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaAdBreakEnd(\n  args: MediaTrackArguments & MediaTrackAdBreakArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track({ mediaEvent: { type: MediaEventType.AdBreakEnd } }, args, trackers);\n}\n\n/**\n * Tracks a media player ad start event that signals the start of an ad.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaAdStart(\n  args: MediaTrackArguments & MediaTrackAdBreakArguments & MediaTrackAdArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track({ mediaEvent: { type: MediaEventType.AdStart } }, args, trackers);\n}\n\n/**\n * Tracks a media player ad skip event fired when the user activated\n * a skip control to skip the ad creative.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaAdSkip(\n  args: MediaTrackArguments &\n    MediaTrackAdPercentProgressArguments &\n    MediaTrackAdBreakArguments &\n    MediaTrackAdArguments &\n    CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  let { percentProgress } = args;\n  if (percentProgress !== undefined) {\n    percentProgress = Math.floor(percentProgress);\n  }\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.AdSkip,\n        eventBody: { percentProgress },\n      },\n    },\n    args,\n    trackers\n  );\n}\n\n/**\n * Tracks a media player ad first quartile played event fired when\n * a quartile of ad is reached after continuous ad playback at normal speed.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaAdFirstQuartile(\n  args: MediaTrackArguments & MediaTrackAdBreakArguments & MediaTrackAdArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.AdFirstQuartile,\n        eventBody: { percentProgress: 25 },\n      },\n    },\n    args,\n    trackers\n  );\n}\n\n/**\n * Tracks a media player ad midpoint played event fired when a midpoint of ad is\n * reached after continuous ad playback at normal speed.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaAdMidpoint(\n  args: MediaTrackArguments & MediaTrackAdBreakArguments & MediaTrackAdArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.AdMidpoint,\n        eventBody: { percentProgress: 50 },\n      },\n    },\n    args,\n    trackers\n  );\n}\n\n/**\n * Tracks media player ad third quartile played event fired when a quartile\n * of ad is reached after continuous ad playback at normal speed.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaAdThirdQuartile(\n  args: MediaTrackArguments & MediaTrackAdBreakArguments & MediaTrackAdArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.AdThirdQuartile,\n        eventBody: { percentProgress: 75 },\n      },\n    },\n    args,\n    trackers\n  );\n}\n\n/**\n * Tracks a media player ad complete event that signals the ad creative\n * was played to the end at normal speed.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaAdComplete(\n  args: MediaTrackArguments & MediaTrackAdBreakArguments & MediaTrackAdArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track({ mediaEvent: { type: MediaEventType.AdComplete } }, args, trackers);\n}\n\n/**\n * Tracks a media player ad click event fired when the user clicked on the ad.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaAdClick(\n  args: MediaTrackArguments &\n    MediaTrackAdPercentProgressArguments &\n    MediaTrackAdBreakArguments &\n    CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  let { percentProgress } = args;\n  if (percentProgress !== undefined) {\n    percentProgress = Math.floor(percentProgress);\n  }\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.AdClick,\n        eventBody: { percentProgress },\n      },\n    },\n    args,\n    trackers\n  );\n}\n\n/**\n * Tracks a media player ad pause event fired when the user clicked the pause\n * control and stopped the ad creative.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaAdPause(\n  args: MediaTrackArguments &\n    MediaTrackAdPercentProgressArguments &\n    MediaTrackAdBreakArguments &\n    CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  let { percentProgress } = args;\n  if (percentProgress !== undefined) {\n    percentProgress = Math.floor(percentProgress);\n  }\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.AdPause,\n        eventBody: { percentProgress },\n      },\n    },\n    args,\n    trackers\n  );\n}\n\n/**\n * Tracks a media player ad resume event fired when the user resumed playing the\n * ad creative after it had been stopped or paused.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaAdResume(\n  args: MediaTrackArguments &\n    MediaTrackAdPercentProgressArguments &\n    MediaTrackAdBreakArguments &\n    MediaTrackAdArguments &\n    CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  let { percentProgress } = args;\n  if (percentProgress !== undefined) {\n    percentProgress = Math.floor(percentProgress);\n  }\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.AdResume,\n        eventBody: { percentProgress: percentProgress },\n      },\n    },\n    args,\n    trackers\n  );\n}\n\n/**\n * Tracks a media player buffering start event fired when the player goes\n * into the buffering state and begins to buffer content.\n *\n * End of buffering can be tracked using `trackMediaBufferEnd` or `trackMediaPlay` or\n * by updating the `currentTime` property.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaBufferStart(\n  args: MediaTrackArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track({ mediaEvent: { type: MediaEventType.BufferStart } }, args, trackers);\n}\n\n/**\n * Tracks a media player buffering end event fired when the the player\n * finishes buffering content and resumes playback.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaBufferEnd(\n  args: MediaTrackArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  track({ mediaEvent: { type: MediaEventType.BufferEnd } }, args, trackers);\n}\n\n/**\n * Tracks a media player quality change event tracked when the video\n * playback quality changes automatically.\n *\n * If not passed here, the previous quality is taken from the last setting in media player.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaQualityChange(\n  args: MediaTrackArguments & MediaTrackQualityChangeArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  const { previousQuality, newQuality, bitrate, framesPerSecond, automatic, id } = args;\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.QualityChange,\n        eventBody: {\n          previousQuality: previousQuality ?? getMedia(id)?.player.quality,\n          newQuality,\n          bitrate,\n          framesPerSecond,\n          automatic,\n        },\n      },\n    },\n    {\n      ...args,\n      player: { ...args.player, quality: newQuality },\n    },\n    trackers\n  );\n}\n\n/**\n * Tracks a media player error event tracked when the resource could not be loaded due to an error.\n *\n * @param args The attributes for the media player event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaError(\n  args: MediaTrackArguments & MediaTrackErrorArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  const { errorCode, errorName, errorDescription } = args;\n  track(\n    {\n      mediaEvent: {\n        type: MediaEventType.Error,\n        eventBody: { errorCode, errorName, errorDescription },\n      },\n    },\n    args,\n    trackers\n  );\n}\n\n/**\n * Tracks a custom self-describing event within the context of the media tracking.\n * It will attach the context entities managed by the media tracking to the event (e.g. player, session, ad).\n *\n * @param args The attributes for the event and entities\n * @param trackers The tracker identifiers which the event will be sent to\n */\nexport function trackMediaSelfDescribingEvent(\n  args: MediaTrackSelfDescribingEventArguments &\n    MediaTrackArguments &\n    MediaTrackAdArguments &\n    MediaTrackAdBreakArguments &\n    CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  const { event } = args;\n  track({ customEvent: event }, args, trackers);\n}\n\nfunction getMedia(id: string): MediaTracking | undefined {\n  if (activeMedias[id] === undefined) {\n    LOG.error(`Media tracking ${id} not started.`);\n    return undefined;\n  }\n\n  return activeMedias[id];\n}\n\nfunction track(\n  event: { mediaEvent?: MediaEvent; customEvent?: SelfDescribingJson },\n  args: MediaTrackArguments & MediaTrackAdArguments & MediaTrackAdBreakArguments & CommonMediaEventProperties,\n  trackers: Array<string> = Object.keys(_trackers)\n) {\n  const { context = [], timestamp, player, ad, adBreak, id } = args;\n  const { mediaEvent, customEvent } = event;\n\n  const mediaTracking = getMedia(id);\n  if (mediaTracking === undefined) {\n    return;\n  }\n\n  const trackEvent = (event: EventWithContext) => {\n    dispatchToTrackersInCollection(trackers, _trackers, (t) => {\n      t.core.track(\n        buildSelfDescribingEvent(event),\n        (event.context ?? []).concat(resolveDynamicContext(context)),\n        timestamp\n      );\n    });\n  };\n\n  mediaTracking.update(trackEvent, mediaEvent, customEvent, player, ad, adBreak);\n\n  // Update page activity in order to keep sending page pings if needed\n  if (mediaTracking.shouldUpdatePageActivity()) {\n    dispatchToTrackersInCollection(trackers, _trackers, (t) => {\n      t.updatePageActivity();\n    });\n  }\n}\n","var randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  var uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    offset = offset || 0;\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(rnds);\n}\nexport default v4;","import type { updateMediaTracking } from '@snowplow/browser-plugin-media';\nimport type { SelfDescribingJson } from '@snowplow/tracker-core';\nimport { MediaType } from '@snowplow/browser-plugin-media/src/types';\n\nimport { TrackingOptions, YouTubeEntity } from './types';\n\ntype PlayerStatus = NonNullable<Parameters<typeof updateMediaTracking>[0]['player']>;\n\nconst PLAYER_TYPE = 'com.youtube-youtube';\n\nexport function buildPlayerEntity(conf: TrackingOptions): PlayerStatus | undefined {\n  const player = conf.player;\n  if (!player) return;\n\n  return {\n    currentTime: player.getCurrentTime(),\n    duration: player.getDuration(),\n    ended: player.getPlayerState() === YT.PlayerState.ENDED,\n    fullscreen: undefined,\n    label: conf.config.label,\n    livestream: undefined,\n    loop: undefined,\n    mediaType: MediaType.Video,\n    muted: player.isMuted(),\n    paused: player.getPlayerState() !== YT.PlayerState.PLAYING,\n    pictureInPicture: undefined,\n    playbackRate: player.getPlaybackRate(),\n    playerType: PLAYER_TYPE,\n    quality: player.getPlaybackQuality(),\n    volume: player.getVolume(),\n  };\n}\n\nexport function buildYouTubeEntity(conf: TrackingOptions): SelfDescribingJson<YouTubeEntity> | null {\n  const { player, urlParameters = {} } = conf;\n\n  if (!player) return null;\n\n  const state = player.getPlayerState();\n\n  let data: YouTubeEntity = {\n    autoPlay: urlParameters.autoplay === '1',\n    avaliablePlaybackRates: player.getAvailablePlaybackRates(),\n    avaliableQualityLevels: player.getAvailableQualityLevels(),\n    buffering: state === YT.PlayerState.BUFFERING,\n    controls: urlParameters.controls !== '0',\n    cued: state === YT.PlayerState.CUED,\n    loaded: parseInt(String(player.getVideoLoadedFraction() * 100)),\n    playbackQuality: player.getPlaybackQuality(),\n    playerId: player.getIframe().id,\n    unstarted: state === YT.PlayerState.UNSTARTED,\n    url: player.getVideoUrl(),\n  };\n\n  const spherical: YT.SphericalProperties = player.getSphericalProperties();\n  if (spherical) data = { ...data, ...spherical };\n\n  const playlistIndex = player.getPlaylistIndex();\n  if (playlistIndex !== -1) data.playlistIndex = playlistIndex;\n\n  const playlist = player.getPlaylist();\n  if (playlist) {\n    data.playlist = playlist.map((item: string) => parseInt(item, 10));\n  }\n\n  return {\n    schema: 'iglu:com.youtube/youtube/jsonschema/1-0-0',\n    data,\n  };\n}\n","export function isElementFullScreen(mediaId: string): boolean {\n  if (document.fullscreenElement) {\n    return document.fullscreenElement.id === mediaId;\n  }\n  return false;\n}\n\n// URLSearchParams is not supported in IE\n// https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams\n\nexport function addUrlParam(url: string, key: string, value: string) {\n  const urlParams = parseUrlParams(url);\n  urlParams[key] = value;\n\n  return `${url.split('?').shift()!}?${urlParamsToString(urlParams)}`;\n}\n\nexport function parseUrlParams(url: string): Record<string, string> {\n  const params: Record<string, string> = {};\n  const urlParams = url.split('?').slice(1).join('?');\n  if (!urlParams) return params;\n  urlParams.split('&').forEach((p) => {\n    const param = p.split('=');\n    const key = decodeURIComponent(param.shift()!);\n    params[key] = decodeURIComponent(param.join('='));\n  });\n  return params;\n}\n\nfunction urlParamsToString(urlParams: Record<string, string>) {\n  // convert an object of url parameters to a string\n  return Object.keys(urlParams)\n    .map((p) => `${encodeURIComponent(p)}=${encodeURIComponent(urlParams[p])}`)\n    .join('&');\n}\n","import { type Logger } from '@snowplow/tracker-core';\nimport { MediaEventType } from '@snowplow/browser-plugin-media';\n\nimport { TrackingOptions, YouTubeMediaTrackingConfiguration } from './types';\n\nconst DEFAULT_BOUNDARIES = [10, 25, 50, 75];\nconst DEFAULT_UPDATE_RATE_MS = 500;\n\nenum YTState {\n  UNSTARTED = 'unstarted',\n  ENDED = 'ended',\n  PLAYING = 'playing',\n  PAUSED = 'paused',\n  BUFFERING = 'buffering',\n  CUED = 'cued',\n}\n\nexport const AllEvents: MediaEventType[] = (Object.keys(MediaEventType) as (keyof typeof MediaEventType)[]).map(\n  (k) => MediaEventType[k]\n);\nexport const DefaultEvents: MediaEventType[] = [\n  MediaEventType.Ready,\n  MediaEventType.Pause,\n  MediaEventType.Play,\n  MediaEventType.Ping,\n  MediaEventType.End,\n  MediaEventType.SeekStart,\n  MediaEventType.SeekEnd,\n  MediaEventType.VolumeChange,\n  MediaEventType.QualityChange,\n  MediaEventType.PlaybackRateChange,\n  MediaEventType.PercentProgress,\n];\n\nexport const LEGACY_EVENTS = {\n  play: MediaEventType.Play,\n  pause: MediaEventType.Pause,\n  seek: MediaEventType.SeekEnd,\n  volumechange: MediaEventType.VolumeChange,\n  ended: MediaEventType.End,\n  error: MediaEventType.Error,\n  percentprogress: MediaEventType.PercentProgress,\n  playbackratechange: MediaEventType.PlaybackRateChange,\n  playbackqualitychange: MediaEventType.QualityChange,\n} as const;\n\nconst CaptureEventToYouTubeEvent: Partial<Record<MediaEventType | YTState, keyof YT.Events>> = {\n  [MediaEventType.PlaybackRateChange]: 'onPlaybackRateChange',\n  [MediaEventType.QualityChange]: 'onPlaybackQualityChange',\n  [MediaEventType.Error]: 'onError',\n  [YTState.UNSTARTED]: 'onStateChange',\n  [MediaEventType.End]: 'onStateChange',\n  [YTState.ENDED]: 'onStateChange',\n  [YTState.PLAYING]: 'onStateChange',\n  [MediaEventType.Play]: 'onStateChange',\n  [YTState.PAUSED]: 'onStateChange',\n  [MediaEventType.Pause]: 'onStateChange',\n  [YTState.BUFFERING]: 'onStateChange',\n  [YTState.CUED]: 'onStateChange',\n};\n\nexport function trackingOptionsParser(\n  { video, ...options }: YouTubeMediaTrackingConfiguration,\n  LOG?: Logger\n): TrackingOptions {\n  if (!video) throw Error('Property `id` is undefined');\n\n  const { captureEvents = ['DefaultEvents'], boundaries, ...config } = options;\n\n  let parsedEvents: TrackingOptions['captureEvents'] = [];\n  for (const ev of captureEvents) {\n    // If an event is an EventGroup, get the events from that group\n    if (ev === 'AllEvents') {\n      parsedEvents = AllEvents;\n      break;\n    } else if (ev === 'DefaultEvents') {\n      parsedEvents.push(...DefaultEvents);\n    } else if (ev in LEGACY_EVENTS) {\n      parsedEvents.push(LEGACY_EVENTS[ev as keyof typeof LEGACY_EVENTS]);\n    } else if (AllEvents.indexOf(ev as MediaEventType) !== -1) {\n      parsedEvents.push(ev as MediaEventType);\n    } else {\n      LOG?.error(`'${ev}' is not a supported event`);\n    }\n  }\n\n  // Check if any events in `conf.captureEvents` require a listener on a `YTPlayerEvent`\n  // for them to fire\n  const youtubeEvents: (keyof YT.Events)[] = [];\n  for (const ev of parsedEvents) {\n    if (CaptureEventToYouTubeEvent.hasOwnProperty(ev) && CaptureEventToYouTubeEvent[ev]) {\n      youtubeEvents.push(CaptureEventToYouTubeEvent[ev]!);\n    }\n  }\n\n  let progress: TrackingOptions['boundaries'] = undefined;\n  // If \"percentprogress\" is in `captureEvents`, add the `progress` object\n  // to the tracking options with the user-defined boundaries, or the default\n  if (parsedEvents.indexOf(MediaEventType.PercentProgress) !== -1) {\n    progress = boundaries || DEFAULT_BOUNDARIES;\n    // We need to monitor state changes for 'percent_progress' events\n    // as `progressHandler` uses these to set/reset timeouts\n    if (youtubeEvents.indexOf('onStateChange') === -1) {\n      youtubeEvents.push('onStateChange');\n    }\n  }\n\n  return {\n    sessionId: config.id,\n    config,\n    video,\n    captureEvents: parsedEvents.filter((e, i, a) => a.indexOf(e) === i),\n    youtubeEvents: youtubeEvents.filter((e, i, a) => a.indexOf(e) === i),\n    boundaries: progress,\n    updateRate: DEFAULT_UPDATE_RATE_MS,\n  };\n}\n","import { type BrowserPlugin } from '@snowplow/browser-tracker-core';\nimport {\n  MediaEventType,\n  SnowplowMediaPlugin,\n  endMediaTracking,\n  startMediaTracking,\n  trackMediaBufferEnd,\n  trackMediaBufferStart,\n  trackMediaEnd,\n  trackMediaError,\n  trackMediaPause,\n  trackMediaPlay,\n  trackMediaPlaybackRateChange,\n  trackMediaQualityChange,\n  trackMediaReady,\n  trackMediaSeekEnd,\n  trackMediaSeekStart,\n  trackMediaSelfDescribingEvent,\n  trackMediaVolumeChange,\n  updateMediaTracking,\n} from '@snowplow/browser-plugin-media';\nimport type { Logger } from '@snowplow/tracker-core';\nimport { v4 as uuid } from 'uuid';\n\nimport { buildPlayerEntity, buildYouTubeEntity } from './entities';\nimport { addUrlParam, parseUrlParams } from './helperFunctions';\nimport { trackingOptionsParser } from './options';\nimport type {\n  LegacyYouTubeMediaTrackingConfiguration,\n  TrackedPlayer,\n  TrackingOptions,\n  YouTubeMediaTrackingConfiguration,\n} from './types';\n\nconst YouTubeIFrameAPIURL = 'https://www.youtube.com/iframe_api';\n\nconst trackedPlayers: Record<string, TrackedPlayer> = {};\nconst trackingQueue: Array<TrackingOptions> = [];\nconst legacyApiSessions: string[] = [];\n\nlet LOG: Logger | undefined = undefined;\n\n/**\n * Create a YouTubeTrackingPlugin instance.\n * @returns The created YouTubeTrackingPlugin instance\n */\nexport function YouTubeTrackingPlugin(): BrowserPlugin {\n  return {\n    ...SnowplowMediaPlugin(),\n    logger: (logger: Logger) => {\n      LOG = logger;\n    },\n  };\n}\n\n/**\n * Start media tracking for the given player and configuration.\n * @param args Tracking configuration\n * @returns The media session ID for the player\n * @since 4.0.0\n */\nexport function startYouTubeTracking(args: YouTubeMediaTrackingConfiguration): string | void {\n  try {\n    const conf = trackingOptionsParser(args);\n    addPlayer(conf);\n    startMediaTracking({\n      ...conf.config,\n      id: conf.sessionId,\n      captureEvents: conf.captureEvents,\n      boundaries: conf.boundaries,\n      pings: conf.config.pings ?? conf.captureEvents.indexOf(MediaEventType.Ping) !== -1,\n      context: (args.context ?? []).concat([() => buildYouTubeEntity(conf)]),\n      timestamp: args.timestamp,\n    });\n    return conf.sessionId;\n  } catch (e) {\n    if (e instanceof Error) {\n      LOG?.error(e.message);\n    }\n  }\n}\n\n/**\n * Disable tracking for a previously enabled player's media session.\n * @param id The media session ID to disable tracking for\n * @since 4.0.0\n */\nexport function endYouTubeTracking(id: string): void {\n  endMediaTracking({ id });\n  const intervalId = trackedPlayers[id].pollTracking.interval;\n  if (intervalId !== null) clearInterval(intervalId);\n  delete trackedPlayers[id];\n}\n\n/**\n * Start media tracking for the given player and configuration.\n * This is a legacy v3 API that wraps the newer `startYouTubeTracking` API.\n * @param args Tracking configuration\n * @returns The media session ID for the player\n * @deprecated since v4.0.0; use {@link startYouTubeTracking}\n */\nexport function enableYouTubeTracking(args: LegacyYouTubeMediaTrackingConfiguration): string | void {\n  const { id, options, ...rest } = args;\n\n  const migrated: YouTubeMediaTrackingConfiguration = {\n    id: uuid(),\n    ...rest,\n    ...options,\n    video: id,\n  };\n\n  const sessionId = startYouTubeTracking(migrated);\n\n  if (sessionId) {\n    legacyApiSessions.push(sessionId);\n    return sessionId;\n  }\n}\n\n/**\n * Disable tracking for a previously enabled player's media session.\n * This is a legacy v3 API that wraps the newer `endYouTubeTracking` API.\n * @param id The media session ID to disable tracking for, or the oldest known session ID if not provided\n * @since 4.0.0\n * @deprecated since v4.0.0; use {@link endYouTubeTracking}\n */\nexport function disableYouTubeTracking(id?: string): void {\n  if (id && legacyApiSessions.indexOf(id) !== -1) {\n    // id provided, remove from active list\n    legacyApiSessions.splice(legacyApiSessions.indexOf(id), 1);\n  } else {\n    // id was not provided; presume we're ending the earliest session we know of\n    id = id ?? legacyApiSessions.shift();\n  }\n\n  if (id) {\n    endYouTubeTracking(id);\n  }\n}\n\n/**\n * Track a custom Self Describing Event with the Media plugin's entities included, like the events generated by the plugin directly.\n * @param event The tracking options, including the custom Self Describing Event to track and optional media configuration such as `ad` data.\n */\nexport function trackYouTubeSelfDescribingEvent(\n  event: Omit<Parameters<typeof trackMediaSelfDescribingEvent>[0], 'player'>\n) {\n  const config = trackedPlayers[event.id];\n\n  if (config) {\n    const yt = buildYouTubeEntity(config.conf);\n    trackMediaSelfDescribingEvent({\n      ...event,\n      player: buildPlayerEntity(config.conf),\n      context: (event.context ?? []).concat(yt ?? []),\n    });\n  }\n}\n\nfunction addPlayer(conf: TrackingOptions): void {\n  const player = conf.video;\n  if (typeof player === 'string') {\n    // First check if the API is already active and a player exists with this name\n    // Creating an additional player will overwrite the existing one and fail\n    if (typeof YT !== 'undefined' && 'get' in YT) {\n      const existing: YT.Player | undefined = (YT as any).get(player);\n      if (existing) {\n        conf.video = existing;\n        return addPlayer(conf);\n      }\n    }\n\n    // May have meant a DOM ID?\n    const el = document.getElementById(player) as HTMLIFrameElement | null;\n    if (!el || el.tagName.toUpperCase() !== 'IFRAME') {\n      // Technically the IFrame API will replace non-iframe elements with an iframe\n      // In that case we expect the iframe/player to be passed directly instead\n      throw Error('Cannot find YouTube iframe or player');\n    }\n\n    conf.video = el;\n    return addPlayer(conf);\n  } else if ('tagName' in player) {\n    if (player.tagName.toUpperCase() !== 'IFRAME') throw Error('Only existing YouTube iframe elements are supported');\n    conf.urlParameters = parseUrlParams(ensureYouTubeIframeAPI(player));\n\n    // put them into a queue that will have listeners added once the API is ready\n    // and start trying to load the iframe API\n    trackingQueue.push(conf);\n    installYouTubeIframeAPI();\n  } else {\n    conf.urlParameters = parseUrlParams(player.getIframe().src);\n    conf.player = player;\n    initializePlayer(conf);\n  }\n}\n\nfunction ensureYouTubeIframeAPI(el: HTMLIFrameElement) {\n  // The 'enablejsapi' parameter is required to be '1' for the API to be able to communicate with the player\n  // It can be a URL parameter or an attribute of the iframe\n  // We only enable it if it hasn't been explicitly disabled/set\n  if (el.src.indexOf('enablejsapi') === -1 && el.getAttribute('enablejsapi') == null) {\n    let apiEnabled = addUrlParam(el.src, 'enablejsapi', '1');\n\n    // `origin` is recommended when using `enablejsapi`\n    if (apiEnabled.indexOf('origin=') === -1 && location.origin) {\n      apiEnabled = addUrlParam(apiEnabled, 'origin', location.origin);\n    }\n\n    el.src = apiEnabled;\n  }\n\n  return el.src;\n}\n\nfunction installYouTubeIframeAPI(iframeAPIRetryWaitMs: number = 100) {\n  // Once the API is ready to use, 'YT.Player' will be defined\n  // 'YT.Player' is not available immediately after 'YT' is defined,\n  // so we need to wait until 'YT' is defined to then check 'YT.Player'\n  if (typeof YT === 'undefined' || typeof YT.Player === 'undefined') {\n    // First we check if the script tag exists in the DOM, and enable the API if not\n    const scriptTags = Array.prototype.slice.call(document.getElementsByTagName('script'));\n    if (!scriptTags.some((s) => s.src === YouTubeIFrameAPIURL)) {\n      // Load the Iframe API\n      // https://developers.google.com/youtube/iframe_api_reference\n      const tag: HTMLScriptElement = document.createElement('script');\n      tag.src = YouTubeIFrameAPIURL;\n      const firstScriptTag = document.getElementsByTagName('script')[0];\n      firstScriptTag.parentNode!.insertBefore(tag, firstScriptTag);\n    }\n\n    // The iframe API usually loads a second script, so `onload` is not reliable\n    // We prefer not to pollute global scope so won't use onYouTubeIframeAPIReady either\n    // Poll the API to see when it exists\n    if (iframeAPIRetryWaitMs <= 6400) {\n      setTimeout(installYouTubeIframeAPI, iframeAPIRetryWaitMs, iframeAPIRetryWaitMs * 2);\n    } else {\n      LOG?.error('YouTube iframe API failed to load');\n    }\n  } else {\n    // Once the API is available, listeners are attached to anything sitting in the queue\n    while (trackingQueue.length) {\n      initializePlayer(trackingQueue.pop()!);\n    }\n  }\n}\n\n/**\n * Adds a player to the list of tracked players, and sets up the `onReady` callback to attach listeners once the player is ready\n *\n * @param conf - The configuration for the player\n */\nfunction initializePlayer(conf: TrackingOptions) {\n  const attach: YT.PlayerEventHandler<YT.PlayerEvent> = ({ target }) => {\n    conf.player = target;\n    trackedPlayers[conf.sessionId] = {\n      player: target,\n      conf,\n      // initial state for polling listeners\n      pollTracking: {\n        interval: null,\n        prevTime: target.getCurrentTime() || 0,\n        prevVolume: target.getVolume() || 0,\n      },\n    };\n\n    attachListeners(conf);\n  };\n\n  if (!conf.player) {\n    // Player API not yet initialized\n    if (typeof conf.video !== 'string' && 'tagName' in conf.video) {\n      conf.player = new YT.Player(conf.video, {\n        events: {\n          onReady: attach,\n        },\n      });\n    } else throw Error('Could not access YouTube Player API');\n  } else if (typeof conf.player.getCurrentTime === 'function') {\n    // Player API initialized and already \"ready\"\n    attach({ target: conf.player });\n  } else {\n    // Player API initialized but not yet \"ready\"\n    conf.player.addEventListener('onReady', attach);\n  }\n}\n\nfunction attachListeners(conf: TrackingOptions) {\n  const id = conf.sessionId,\n    player = conf.player!;\n  let buffering = false;\n\n  // object lookup should be faster than captureEvents.indexOf every time\n  const flags = conf.captureEvents.reduce((a: Partial<Record<MediaEventType, true>>, e) => ((a[e] = true), a), {});\n\n  const builtInEvents: Record<\n    keyof YT.Events,\n    | YT.PlayerEventHandler<YT.PlayerEvent>\n    | YT.PlayerEventHandler<YT.OnStateChangeEvent>\n    | YT.PlayerEventHandler<YT.OnErrorEvent>\n    | YT.PlayerEventHandler<YT.OnPlaybackQualityChangeEvent>\n  > = {\n    onStateChange: (e: YT.OnStateChangeEvent) => {\n      if (buffering && e.data !== YT.PlayerState.BUFFERING && flags[MediaEventType.BufferEnd]) {\n        trackMediaBufferEnd({ id });\n        buffering = false;\n      }\n\n      switch (e.data) {\n        case YT.PlayerState.CUED:\n          return;\n        case YT.PlayerState.UNSTARTED:\n          return flags[MediaEventType.Ready] && trackMediaReady({ id });\n        case YT.PlayerState.BUFFERING:\n          buffering = true;\n          return flags[MediaEventType.BufferEnd] && trackMediaBufferStart({ id }); // not a typo\n        case YT.PlayerState.PLAYING:\n          return flags[MediaEventType.Play] && trackMediaPlay({ id });\n        case YT.PlayerState.PAUSED:\n          return flags[MediaEventType.Pause] && trackMediaPause({ id });\n        case YT.PlayerState.ENDED:\n          return flags[MediaEventType.End] && trackMediaEnd({ id });\n      }\n    },\n    onPlaybackQualityChange: (e: YT.OnPlaybackQualityChangeEvent) =>\n      flags[MediaEventType.QualityChange] && trackMediaQualityChange({ id, newQuality: e.data }),\n    onApiChange: () => {},\n    onError: (e: YT.OnErrorEvent) =>\n      flags[MediaEventType.Error] &&\n      trackMediaError({ id, errorCode: String(e.data), errorName: YT.PlayerError[e.data] }),\n    onPlaybackRateChange: () =>\n      flags[MediaEventType.PlaybackRateChange] &&\n      trackMediaPlaybackRateChange({ id, newRate: player.getPlaybackRate() }),\n    onReady: () => {},\n  };\n\n  // The 'ready' event is required for modelling purposes, the Out-The-Box YouTube modelling won't work without it\n  // Ensure you have 'ready' in your 'captureEvents' array if you are using the Out-The-Box YouTube modelling\n  if (flags[MediaEventType.Ready]) {\n    // We need to manually trigger the 'ready' event, as it is already in that state and won't call the event listener\n    // do it in a new task because we probably haven't called startMediaTracking yet\n    setTimeout(() => trackMediaReady({ id: conf.sessionId, player: buildPlayerEntity(conf) }), 0);\n  }\n\n  conf.youtubeEvents.forEach((youtubeEventName) => {\n    player.addEventListener(youtubeEventName, (e) => {\n      updateMediaTracking({ id, player: buildPlayerEntity(conf) });\n      builtInEvents[youtubeEventName](e as any);\n    });\n  });\n\n  // there are actually `onVideoProgress` and `onVolumeChange` events but they\n  // are not documented so we will poll\n  installPollingListeners(conf, flags);\n}\n\nfunction installPollingListeners(conf: TrackingOptions, flags: Partial<Record<MediaEventType, true>>) {\n  const pollState = trackedPlayers[conf.sessionId].pollTracking;\n  const player = conf.player;\n  const id = conf.sessionId;\n\n  const enableSeek = flags[MediaEventType.SeekStart] || flags[MediaEventType.SeekEnd];\n  const enableVolume = flags[MediaEventType.VolumeChange];\n\n  if (!pollState.interval && player) {\n    pollState.interval = setInterval(() => {\n      updateMediaTracking({ id, player: buildPlayerEntity(conf) });\n\n      // Seek Tracking\n      if (enableSeek) {\n        const playerTime = player.getCurrentTime();\n        if (Math.abs(playerTime - (pollState.prevTime + conf.updateRate / 1000)) > 1) {\n          trackMediaSeekStart({ id, player: { currentTime: pollState.prevTime } });\n          trackMediaSeekEnd({ id, player: { currentTime: playerTime } });\n        }\n        pollState.prevTime = playerTime;\n      }\n\n      // Volume Tracking\n      if (enableVolume) {\n        const playerVolume = player.getVolume();\n        if (playerVolume !== pollState.prevVolume) {\n          trackMediaVolumeChange({ id, previousVolume: pollState.prevVolume, newVolume: playerVolume });\n        }\n        pollState.prevVolume = playerVolume;\n      }\n    }, conf.updateRate);\n  }\n}\n","/*! @vimeo/player v2.16.4 | (c) 2022 Vimeo | MIT License | https://github.com/vimeo/player.js */\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\n/**\n * @module lib/functions\n */\n\n/**\n * Check to see this is a node environment.\n * @type {Boolean}\n */\n\n/* global global */\nvar isNode = typeof global !== 'undefined' && {}.toString.call(global) === '[object global]';\n/**\n * Get the name of the method for a given getter or setter.\n *\n * @param {string} prop The name of the property.\n * @param {string} type Either get or set.\n * @return {string}\n */\n\nfunction getMethodName(prop, type) {\n  if (prop.indexOf(type.toLowerCase()) === 0) {\n    return prop;\n  }\n\n  return \"\".concat(type.toLowerCase()).concat(prop.substr(0, 1).toUpperCase()).concat(prop.substr(1));\n}\n/**\n * Check to see if the object is a DOM Element.\n *\n * @param {*} element The object to check.\n * @return {boolean}\n */\n\nfunction isDomElement(element) {\n  return Boolean(element && element.nodeType === 1 && 'nodeName' in element && element.ownerDocument && element.ownerDocument.defaultView);\n}\n/**\n * Check to see whether the value is a number.\n *\n * @see http://dl.dropboxusercontent.com/u/35146/js/tests/isNumber.html\n * @param {*} value The value to check.\n * @param {boolean} integer Check if the value is an integer.\n * @return {boolean}\n */\n\nfunction isInteger(value) {\n  // eslint-disable-next-line eqeqeq\n  return !isNaN(parseFloat(value)) && isFinite(value) && Math.floor(value) == value;\n}\n/**\n * Check to see if the URL is a Vimeo url.\n *\n * @param {string} url The url string.\n * @return {boolean}\n */\n\nfunction isVimeoUrl(url) {\n  return /^(https?:)?\\/\\/((player|www)\\.)?vimeo\\.com(?=$|\\/)/.test(url);\n}\n/**\n * Get the Vimeo URL from an element.\n * The element must have either a data-vimeo-id or data-vimeo-url attribute.\n *\n * @param {object} oEmbedParameters The oEmbed parameters.\n * @return {string}\n */\n\nfunction getVimeoUrl() {\n  var oEmbedParameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var id = oEmbedParameters.id;\n  var url = oEmbedParameters.url;\n  var idOrUrl = id || url;\n\n  if (!idOrUrl) {\n    throw new Error('An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.');\n  }\n\n  if (isInteger(idOrUrl)) {\n    return \"https://vimeo.com/\".concat(idOrUrl);\n  }\n\n  if (isVimeoUrl(idOrUrl)) {\n    return idOrUrl.replace('http:', 'https:');\n  }\n\n  if (id) {\n    throw new TypeError(\"\\u201C\".concat(id, \"\\u201D is not a valid video id.\"));\n  }\n\n  throw new TypeError(\"\\u201C\".concat(idOrUrl, \"\\u201D is not a vimeo.com url.\"));\n}\n\nvar arrayIndexOfSupport = typeof Array.prototype.indexOf !== 'undefined';\nvar postMessageSupport = typeof window !== 'undefined' && typeof window.postMessage !== 'undefined';\n\nif (!isNode && (!arrayIndexOfSupport || !postMessageSupport)) {\n  throw new Error('Sorry, the Vimeo Player API is not available in this browser.');\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n/*!\n * weakmap-polyfill v2.0.1 - ECMAScript6 WeakMap polyfill\n * https://github.com/polygonplanet/weakmap-polyfill\n * Copyright (c) 2015-2020 Polygon Planet <polygon.planet.aqua@gmail.com>\n * @license MIT\n */\n(function (self) {\n\n  if (self.WeakMap) {\n    return;\n  }\n\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  var defineProperty = function (object, name, value) {\n    if (Object.defineProperty) {\n      Object.defineProperty(object, name, {\n        configurable: true,\n        writable: true,\n        value: value\n      });\n    } else {\n      object[name] = value;\n    }\n  };\n\n  self.WeakMap = function () {\n    // ECMA-262 23.3 WeakMap Objects\n    function WeakMap() {\n      if (this === void 0) {\n        throw new TypeError(\"Constructor WeakMap requires 'new'\");\n      }\n\n      defineProperty(this, '_id', genId('_WeakMap')); // ECMA-262 23.3.1.1 WeakMap([iterable])\n\n      if (arguments.length > 0) {\n        // Currently, WeakMap `iterable` argument is not supported\n        throw new TypeError('WeakMap iterable is not supported');\n      }\n    } // ECMA-262 23.3.3.2 WeakMap.prototype.delete(key)\n\n\n    defineProperty(WeakMap.prototype, 'delete', function (key) {\n      checkInstance(this, 'delete');\n\n      if (!isObject(key)) {\n        return false;\n      }\n\n      var entry = key[this._id];\n\n      if (entry && entry[0] === key) {\n        delete key[this._id];\n        return true;\n      }\n\n      return false;\n    }); // ECMA-262 23.3.3.3 WeakMap.prototype.get(key)\n\n    defineProperty(WeakMap.prototype, 'get', function (key) {\n      checkInstance(this, 'get');\n\n      if (!isObject(key)) {\n        return void 0;\n      }\n\n      var entry = key[this._id];\n\n      if (entry && entry[0] === key) {\n        return entry[1];\n      }\n\n      return void 0;\n    }); // ECMA-262 23.3.3.4 WeakMap.prototype.has(key)\n\n    defineProperty(WeakMap.prototype, 'has', function (key) {\n      checkInstance(this, 'has');\n\n      if (!isObject(key)) {\n        return false;\n      }\n\n      var entry = key[this._id];\n\n      if (entry && entry[0] === key) {\n        return true;\n      }\n\n      return false;\n    }); // ECMA-262 23.3.3.5 WeakMap.prototype.set(key, value)\n\n    defineProperty(WeakMap.prototype, 'set', function (key, value) {\n      checkInstance(this, 'set');\n\n      if (!isObject(key)) {\n        throw new TypeError('Invalid value used as weak map key');\n      }\n\n      var entry = key[this._id];\n\n      if (entry && entry[0] === key) {\n        entry[1] = value;\n        return this;\n      }\n\n      defineProperty(key, this._id, [key, value]);\n      return this;\n    });\n\n    function checkInstance(x, methodName) {\n      if (!isObject(x) || !hasOwnProperty.call(x, '_id')) {\n        throw new TypeError(methodName + ' method called on incompatible receiver ' + typeof x);\n      }\n    }\n\n    function genId(prefix) {\n      return prefix + '_' + rand() + '.' + rand();\n    }\n\n    function rand() {\n      return Math.random().toString().substring(2);\n    }\n\n    defineProperty(WeakMap, '_polyfill', true);\n    return WeakMap;\n  }();\n\n  function isObject(x) {\n    return Object(x) === x;\n  }\n})(typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : typeof commonjsGlobal !== 'undefined' ? commonjsGlobal : commonjsGlobal);\n\nvar npo_src = createCommonjsModule(function (module) {\n/*! Native Promise Only\n    v0.8.1 (c) Kyle Simpson\n    MIT License: http://getify.mit-license.org\n*/\n(function UMD(name, context, definition) {\n  // special form of UMD for polyfilling across evironments\n  context[name] = context[name] || definition();\n\n  if (module.exports) {\n    module.exports = context[name];\n  }\n})(\"Promise\", typeof commonjsGlobal != \"undefined\" ? commonjsGlobal : commonjsGlobal, function DEF() {\n\n  var builtInProp,\n      cycle,\n      scheduling_queue,\n      ToString = Object.prototype.toString,\n      timer = typeof setImmediate != \"undefined\" ? function timer(fn) {\n    return setImmediate(fn);\n  } : setTimeout; // dammit, IE8.\n\n  try {\n    Object.defineProperty({}, \"x\", {});\n\n    builtInProp = function builtInProp(obj, name, val, config) {\n      return Object.defineProperty(obj, name, {\n        value: val,\n        writable: true,\n        configurable: config !== false\n      });\n    };\n  } catch (err) {\n    builtInProp = function builtInProp(obj, name, val) {\n      obj[name] = val;\n      return obj;\n    };\n  } // Note: using a queue instead of array for efficiency\n\n\n  scheduling_queue = function Queue() {\n    var first, last, item;\n\n    function Item(fn, self) {\n      this.fn = fn;\n      this.self = self;\n      this.next = void 0;\n    }\n\n    return {\n      add: function add(fn, self) {\n        item = new Item(fn, self);\n\n        if (last) {\n          last.next = item;\n        } else {\n          first = item;\n        }\n\n        last = item;\n        item = void 0;\n      },\n      drain: function drain() {\n        var f = first;\n        first = last = cycle = void 0;\n\n        while (f) {\n          f.fn.call(f.self);\n          f = f.next;\n        }\n      }\n    };\n  }();\n\n  function schedule(fn, self) {\n    scheduling_queue.add(fn, self);\n\n    if (!cycle) {\n      cycle = timer(scheduling_queue.drain);\n    }\n  } // promise duck typing\n\n\n  function isThenable(o) {\n    var _then,\n        o_type = typeof o;\n\n    if (o != null && (o_type == \"object\" || o_type == \"function\")) {\n      _then = o.then;\n    }\n\n    return typeof _then == \"function\" ? _then : false;\n  }\n\n  function notify() {\n    for (var i = 0; i < this.chain.length; i++) {\n      notifyIsolated(this, this.state === 1 ? this.chain[i].success : this.chain[i].failure, this.chain[i]);\n    }\n\n    this.chain.length = 0;\n  } // NOTE: This is a separate function to isolate\n  // the `try..catch` so that other code can be\n  // optimized better\n\n\n  function notifyIsolated(self, cb, chain) {\n    var ret, _then;\n\n    try {\n      if (cb === false) {\n        chain.reject(self.msg);\n      } else {\n        if (cb === true) {\n          ret = self.msg;\n        } else {\n          ret = cb.call(void 0, self.msg);\n        }\n\n        if (ret === chain.promise) {\n          chain.reject(TypeError(\"Promise-chain cycle\"));\n        } else if (_then = isThenable(ret)) {\n          _then.call(ret, chain.resolve, chain.reject);\n        } else {\n          chain.resolve(ret);\n        }\n      }\n    } catch (err) {\n      chain.reject(err);\n    }\n  }\n\n  function resolve(msg) {\n    var _then,\n        self = this; // already triggered?\n\n\n    if (self.triggered) {\n      return;\n    }\n\n    self.triggered = true; // unwrap\n\n    if (self.def) {\n      self = self.def;\n    }\n\n    try {\n      if (_then = isThenable(msg)) {\n        schedule(function () {\n          var def_wrapper = new MakeDefWrapper(self);\n\n          try {\n            _then.call(msg, function $resolve$() {\n              resolve.apply(def_wrapper, arguments);\n            }, function $reject$() {\n              reject.apply(def_wrapper, arguments);\n            });\n          } catch (err) {\n            reject.call(def_wrapper, err);\n          }\n        });\n      } else {\n        self.msg = msg;\n        self.state = 1;\n\n        if (self.chain.length > 0) {\n          schedule(notify, self);\n        }\n      }\n    } catch (err) {\n      reject.call(new MakeDefWrapper(self), err);\n    }\n  }\n\n  function reject(msg) {\n    var self = this; // already triggered?\n\n    if (self.triggered) {\n      return;\n    }\n\n    self.triggered = true; // unwrap\n\n    if (self.def) {\n      self = self.def;\n    }\n\n    self.msg = msg;\n    self.state = 2;\n\n    if (self.chain.length > 0) {\n      schedule(notify, self);\n    }\n  }\n\n  function iteratePromises(Constructor, arr, resolver, rejecter) {\n    for (var idx = 0; idx < arr.length; idx++) {\n      (function IIFE(idx) {\n        Constructor.resolve(arr[idx]).then(function $resolver$(msg) {\n          resolver(idx, msg);\n        }, rejecter);\n      })(idx);\n    }\n  }\n\n  function MakeDefWrapper(self) {\n    this.def = self;\n    this.triggered = false;\n  }\n\n  function MakeDef(self) {\n    this.promise = self;\n    this.state = 0;\n    this.triggered = false;\n    this.chain = [];\n    this.msg = void 0;\n  }\n\n  function Promise(executor) {\n    if (typeof executor != \"function\") {\n      throw TypeError(\"Not a function\");\n    }\n\n    if (this.__NPO__ !== 0) {\n      throw TypeError(\"Not a promise\");\n    } // instance shadowing the inherited \"brand\"\n    // to signal an already \"initialized\" promise\n\n\n    this.__NPO__ = 1;\n    var def = new MakeDef(this);\n\n    this[\"then\"] = function then(success, failure) {\n      var o = {\n        success: typeof success == \"function\" ? success : true,\n        failure: typeof failure == \"function\" ? failure : false\n      }; // Note: `then(..)` itself can be borrowed to be used against\n      // a different promise constructor for making the chained promise,\n      // by substituting a different `this` binding.\n\n      o.promise = new this.constructor(function extractChain(resolve, reject) {\n        if (typeof resolve != \"function\" || typeof reject != \"function\") {\n          throw TypeError(\"Not a function\");\n        }\n\n        o.resolve = resolve;\n        o.reject = reject;\n      });\n      def.chain.push(o);\n\n      if (def.state !== 0) {\n        schedule(notify, def);\n      }\n\n      return o.promise;\n    };\n\n    this[\"catch\"] = function $catch$(failure) {\n      return this.then(void 0, failure);\n    };\n\n    try {\n      executor.call(void 0, function publicResolve(msg) {\n        resolve.call(def, msg);\n      }, function publicReject(msg) {\n        reject.call(def, msg);\n      });\n    } catch (err) {\n      reject.call(def, err);\n    }\n  }\n\n  var PromisePrototype = builtInProp({}, \"constructor\", Promise,\n  /*configurable=*/\n  false); // Note: Android 4 cannot use `Object.defineProperty(..)` here\n\n  Promise.prototype = PromisePrototype; // built-in \"brand\" to signal an \"uninitialized\" promise\n\n  builtInProp(PromisePrototype, \"__NPO__\", 0,\n  /*configurable=*/\n  false);\n  builtInProp(Promise, \"resolve\", function Promise$resolve(msg) {\n    var Constructor = this; // spec mandated checks\n    // note: best \"isPromise\" check that's practical for now\n\n    if (msg && typeof msg == \"object\" && msg.__NPO__ === 1) {\n      return msg;\n    }\n\n    return new Constructor(function executor(resolve, reject) {\n      if (typeof resolve != \"function\" || typeof reject != \"function\") {\n        throw TypeError(\"Not a function\");\n      }\n\n      resolve(msg);\n    });\n  });\n  builtInProp(Promise, \"reject\", function Promise$reject(msg) {\n    return new this(function executor(resolve, reject) {\n      if (typeof resolve != \"function\" || typeof reject != \"function\") {\n        throw TypeError(\"Not a function\");\n      }\n\n      reject(msg);\n    });\n  });\n  builtInProp(Promise, \"all\", function Promise$all(arr) {\n    var Constructor = this; // spec mandated checks\n\n    if (ToString.call(arr) != \"[object Array]\") {\n      return Constructor.reject(TypeError(\"Not an array\"));\n    }\n\n    if (arr.length === 0) {\n      return Constructor.resolve([]);\n    }\n\n    return new Constructor(function executor(resolve, reject) {\n      if (typeof resolve != \"function\" || typeof reject != \"function\") {\n        throw TypeError(\"Not a function\");\n      }\n\n      var len = arr.length,\n          msgs = Array(len),\n          count = 0;\n      iteratePromises(Constructor, arr, function resolver(idx, msg) {\n        msgs[idx] = msg;\n\n        if (++count === len) {\n          resolve(msgs);\n        }\n      }, reject);\n    });\n  });\n  builtInProp(Promise, \"race\", function Promise$race(arr) {\n    var Constructor = this; // spec mandated checks\n\n    if (ToString.call(arr) != \"[object Array]\") {\n      return Constructor.reject(TypeError(\"Not an array\"));\n    }\n\n    return new Constructor(function executor(resolve, reject) {\n      if (typeof resolve != \"function\" || typeof reject != \"function\") {\n        throw TypeError(\"Not a function\");\n      }\n\n      iteratePromises(Constructor, arr, function resolver(idx, msg) {\n        resolve(msg);\n      }, reject);\n    });\n  });\n  return Promise;\n});\n});\n\n/**\n * @module lib/callbacks\n */\nvar callbackMap = new WeakMap();\n/**\n * Store a callback for a method or event for a player.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name.\n * @param {(function(this:Player, *): void|{resolve: function, reject: function})} callback\n *        The callback to call or an object with resolve and reject functions for a promise.\n * @return {void}\n */\n\nfunction storeCallback(player, name, callback) {\n  var playerCallbacks = callbackMap.get(player.element) || {};\n\n  if (!(name in playerCallbacks)) {\n    playerCallbacks[name] = [];\n  }\n\n  playerCallbacks[name].push(callback);\n  callbackMap.set(player.element, playerCallbacks);\n}\n/**\n * Get the callbacks for a player and event or method.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name\n * @return {function[]}\n */\n\nfunction getCallbacks(player, name) {\n  var playerCallbacks = callbackMap.get(player.element) || {};\n  return playerCallbacks[name] || [];\n}\n/**\n * Remove a stored callback for a method or event for a player.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name\n * @param {function} [callback] The specific callback to remove.\n * @return {boolean} Was this the last callback?\n */\n\nfunction removeCallback(player, name, callback) {\n  var playerCallbacks = callbackMap.get(player.element) || {};\n\n  if (!playerCallbacks[name]) {\n    return true;\n  } // If no callback is passed, remove all callbacks for the event\n\n\n  if (!callback) {\n    playerCallbacks[name] = [];\n    callbackMap.set(player.element, playerCallbacks);\n    return true;\n  }\n\n  var index = playerCallbacks[name].indexOf(callback);\n\n  if (index !== -1) {\n    playerCallbacks[name].splice(index, 1);\n  }\n\n  callbackMap.set(player.element, playerCallbacks);\n  return playerCallbacks[name] && playerCallbacks[name].length === 0;\n}\n/**\n * Return the first stored callback for a player and event or method.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name.\n * @return {function} The callback, or false if there were none\n */\n\nfunction shiftCallbacks(player, name) {\n  var playerCallbacks = getCallbacks(player, name);\n\n  if (playerCallbacks.length < 1) {\n    return false;\n  }\n\n  var callback = playerCallbacks.shift();\n  removeCallback(player, name, callback);\n  return callback;\n}\n/**\n * Move callbacks associated with an element to another element.\n *\n * @param {HTMLElement} oldElement The old element.\n * @param {HTMLElement} newElement The new element.\n * @return {void}\n */\n\nfunction swapCallbacks(oldElement, newElement) {\n  var playerCallbacks = callbackMap.get(oldElement);\n  callbackMap.set(newElement, playerCallbacks);\n  callbackMap.delete(oldElement);\n}\n\n/**\n * @module lib/embed\n */\nvar oEmbedParameters = ['autopause', 'autoplay', 'background', 'byline', 'color', 'controls', 'dnt', 'height', 'id', 'interactive_params', 'keyboard', 'loop', 'maxheight', 'maxwidth', 'muted', 'playsinline', 'portrait', 'responsive', 'speed', 'texttrack', 'title', 'transparent', 'url', 'width'];\n/**\n * Get the 'data-vimeo'-prefixed attributes from an element as an object.\n *\n * @param {HTMLElement} element The element.\n * @param {Object} [defaults={}] The default values to use.\n * @return {Object<string, string>}\n */\n\nfunction getOEmbedParameters(element) {\n  var defaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return oEmbedParameters.reduce(function (params, param) {\n    var value = element.getAttribute(\"data-vimeo-\".concat(param));\n\n    if (value || value === '') {\n      params[param] = value === '' ? 1 : value;\n    }\n\n    return params;\n  }, defaults);\n}\n/**\n * Create an embed from oEmbed data inside an element.\n *\n * @param {object} data The oEmbed data.\n * @param {HTMLElement} element The element to put the iframe in.\n * @return {HTMLIFrameElement} The iframe embed.\n */\n\nfunction createEmbed(_ref, element) {\n  var html = _ref.html;\n\n  if (!element) {\n    throw new TypeError('An element must be provided');\n  }\n\n  if (element.getAttribute('data-vimeo-initialized') !== null) {\n    return element.querySelector('iframe');\n  }\n\n  var div = document.createElement('div');\n  div.innerHTML = html;\n  element.appendChild(div.firstChild);\n  element.setAttribute('data-vimeo-initialized', 'true');\n  return element.querySelector('iframe');\n}\n/**\n * Make an oEmbed call for the specified URL.\n *\n * @param {string} videoUrl The vimeo.com url for the video.\n * @param {Object} [params] Parameters to pass to oEmbed.\n * @param {HTMLElement} element The element.\n * @return {Promise}\n */\n\nfunction getOEmbedData(videoUrl) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var element = arguments.length > 2 ? arguments[2] : undefined;\n  return new Promise(function (resolve, reject) {\n    if (!isVimeoUrl(videoUrl)) {\n      throw new TypeError(\"\\u201C\".concat(videoUrl, \"\\u201D is not a vimeo.com url.\"));\n    }\n\n    var url = \"https://vimeo.com/api/oembed.json?url=\".concat(encodeURIComponent(videoUrl));\n\n    for (var param in params) {\n      if (params.hasOwnProperty(param)) {\n        url += \"&\".concat(param, \"=\").concat(encodeURIComponent(params[param]));\n      }\n    }\n\n    var xhr = 'XDomainRequest' in window ? new XDomainRequest() : new XMLHttpRequest();\n    xhr.open('GET', url, true);\n\n    xhr.onload = function () {\n      if (xhr.status === 404) {\n        reject(new Error(\"\\u201C\".concat(videoUrl, \"\\u201D was not found.\")));\n        return;\n      }\n\n      if (xhr.status === 403) {\n        reject(new Error(\"\\u201C\".concat(videoUrl, \"\\u201D is not embeddable.\")));\n        return;\n      }\n\n      try {\n        var json = JSON.parse(xhr.responseText); // Check api response for 403 on oembed\n\n        if (json.domain_status_code === 403) {\n          // We still want to create the embed to give users visual feedback\n          createEmbed(json, element);\n          reject(new Error(\"\\u201C\".concat(videoUrl, \"\\u201D is not embeddable.\")));\n          return;\n        }\n\n        resolve(json);\n      } catch (error) {\n        reject(error);\n      }\n    };\n\n    xhr.onerror = function () {\n      var status = xhr.status ? \" (\".concat(xhr.status, \")\") : '';\n      reject(new Error(\"There was an error fetching the embed code from Vimeo\".concat(status, \".\")));\n    };\n\n    xhr.send();\n  });\n}\n/**\n * Initialize all embeds within a specific element\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\n\nfunction initializeEmbeds() {\n  var parent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n  var elements = [].slice.call(parent.querySelectorAll('[data-vimeo-id], [data-vimeo-url]'));\n\n  var handleError = function handleError(error) {\n    if ('console' in window && console.error) {\n      console.error(\"There was an error creating an embed: \".concat(error));\n    }\n  };\n\n  elements.forEach(function (element) {\n    try {\n      // Skip any that have data-vimeo-defer\n      if (element.getAttribute('data-vimeo-defer') !== null) {\n        return;\n      }\n\n      var params = getOEmbedParameters(element);\n      var url = getVimeoUrl(params);\n      getOEmbedData(url, params, element).then(function (data) {\n        return createEmbed(data, element);\n      }).catch(handleError);\n    } catch (error) {\n      handleError(error);\n    }\n  });\n}\n/**\n * Resize embeds when messaged by the player.\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\n\nfunction resizeEmbeds() {\n  var parent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n\n  // Prevent execution if users include the player.js script multiple times.\n  if (window.VimeoPlayerResizeEmbeds_) {\n    return;\n  }\n\n  window.VimeoPlayerResizeEmbeds_ = true;\n\n  var onMessage = function onMessage(event) {\n    if (!isVimeoUrl(event.origin)) {\n      return;\n    } // 'spacechange' is fired only on embeds with cards\n\n\n    if (!event.data || event.data.event !== 'spacechange') {\n      return;\n    }\n\n    var iframes = parent.querySelectorAll('iframe');\n\n    for (var i = 0; i < iframes.length; i++) {\n      if (iframes[i].contentWindow !== event.source) {\n        continue;\n      } // Change padding-bottom of the enclosing div to accommodate\n      // card carousel without distorting aspect ratio\n\n\n      var space = iframes[i].parentElement;\n      space.style.paddingBottom = \"\".concat(event.data.data[0].bottom, \"px\");\n      break;\n    }\n  };\n\n  window.addEventListener('message', onMessage);\n}\n\n/**\n * @module lib/postmessage\n */\n/**\n * Parse a message received from postMessage.\n *\n * @param {*} data The data received from postMessage.\n * @return {object}\n */\n\nfunction parseMessageData(data) {\n  if (typeof data === 'string') {\n    try {\n      data = JSON.parse(data);\n    } catch (error) {\n      // If the message cannot be parsed, throw the error as a warning\n      console.warn(error);\n      return {};\n    }\n  }\n\n  return data;\n}\n/**\n * Post a message to the specified target.\n *\n * @param {Player} player The player object to use.\n * @param {string} method The API method to call.\n * @param {object} params The parameters to send to the player.\n * @return {void}\n */\n\nfunction postMessage(player, method, params) {\n  if (!player.element.contentWindow || !player.element.contentWindow.postMessage) {\n    return;\n  }\n\n  var message = {\n    method: method\n  };\n\n  if (params !== undefined) {\n    message.value = params;\n  } // IE 8 and 9 do not support passing messages, so stringify them\n\n\n  var ieVersion = parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\\d+).*$/, '$1'));\n\n  if (ieVersion >= 8 && ieVersion < 10) {\n    message = JSON.stringify(message);\n  }\n\n  player.element.contentWindow.postMessage(message, player.origin);\n}\n/**\n * Parse the data received from a message event.\n *\n * @param {Player} player The player that received the message.\n * @param {(Object|string)} data The message data. Strings will be parsed into JSON.\n * @return {void}\n */\n\nfunction processData(player, data) {\n  data = parseMessageData(data);\n  var callbacks = [];\n  var param;\n\n  if (data.event) {\n    if (data.event === 'error') {\n      var promises = getCallbacks(player, data.data.method);\n      promises.forEach(function (promise) {\n        var error = new Error(data.data.message);\n        error.name = data.data.name;\n        promise.reject(error);\n        removeCallback(player, data.data.method, promise);\n      });\n    }\n\n    callbacks = getCallbacks(player, \"event:\".concat(data.event));\n    param = data.data;\n  } else if (data.method) {\n    var callback = shiftCallbacks(player, data.method);\n\n    if (callback) {\n      callbacks.push(callback);\n      param = data.value;\n    }\n  }\n\n  callbacks.forEach(function (callback) {\n    try {\n      if (typeof callback === 'function') {\n        callback.call(player, param);\n        return;\n      }\n\n      callback.resolve(param);\n    } catch (e) {// empty\n    }\n  });\n}\n\n/* MIT License\n\nCopyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\nTerms */\nfunction initializeScreenfull() {\n  var fn = function () {\n    var val;\n    var fnMap = [['requestFullscreen', 'exitFullscreen', 'fullscreenElement', 'fullscreenEnabled', 'fullscreenchange', 'fullscreenerror'], // New WebKit\n    ['webkitRequestFullscreen', 'webkitExitFullscreen', 'webkitFullscreenElement', 'webkitFullscreenEnabled', 'webkitfullscreenchange', 'webkitfullscreenerror'], // Old WebKit\n    ['webkitRequestFullScreen', 'webkitCancelFullScreen', 'webkitCurrentFullScreenElement', 'webkitCancelFullScreen', 'webkitfullscreenchange', 'webkitfullscreenerror'], ['mozRequestFullScreen', 'mozCancelFullScreen', 'mozFullScreenElement', 'mozFullScreenEnabled', 'mozfullscreenchange', 'mozfullscreenerror'], ['msRequestFullscreen', 'msExitFullscreen', 'msFullscreenElement', 'msFullscreenEnabled', 'MSFullscreenChange', 'MSFullscreenError']];\n    var i = 0;\n    var l = fnMap.length;\n    var ret = {};\n\n    for (; i < l; i++) {\n      val = fnMap[i];\n\n      if (val && val[1] in document) {\n        for (i = 0; i < val.length; i++) {\n          ret[fnMap[0][i]] = val[i];\n        }\n\n        return ret;\n      }\n    }\n\n    return false;\n  }();\n\n  var eventNameMap = {\n    fullscreenchange: fn.fullscreenchange,\n    fullscreenerror: fn.fullscreenerror\n  };\n  var screenfull = {\n    request: function request(element) {\n      return new Promise(function (resolve, reject) {\n        var onFullScreenEntered = function onFullScreenEntered() {\n          screenfull.off('fullscreenchange', onFullScreenEntered);\n          resolve();\n        };\n\n        screenfull.on('fullscreenchange', onFullScreenEntered);\n        element = element || document.documentElement;\n        var returnPromise = element[fn.requestFullscreen]();\n\n        if (returnPromise instanceof Promise) {\n          returnPromise.then(onFullScreenEntered).catch(reject);\n        }\n      });\n    },\n    exit: function exit() {\n      return new Promise(function (resolve, reject) {\n        if (!screenfull.isFullscreen) {\n          resolve();\n          return;\n        }\n\n        var onFullScreenExit = function onFullScreenExit() {\n          screenfull.off('fullscreenchange', onFullScreenExit);\n          resolve();\n        };\n\n        screenfull.on('fullscreenchange', onFullScreenExit);\n        var returnPromise = document[fn.exitFullscreen]();\n\n        if (returnPromise instanceof Promise) {\n          returnPromise.then(onFullScreenExit).catch(reject);\n        }\n      });\n    },\n    on: function on(event, callback) {\n      var eventName = eventNameMap[event];\n\n      if (eventName) {\n        document.addEventListener(eventName, callback);\n      }\n    },\n    off: function off(event, callback) {\n      var eventName = eventNameMap[event];\n\n      if (eventName) {\n        document.removeEventListener(eventName, callback);\n      }\n    }\n  };\n  Object.defineProperties(screenfull, {\n    isFullscreen: {\n      get: function get() {\n        return Boolean(document[fn.fullscreenElement]);\n      }\n    },\n    element: {\n      enumerable: true,\n      get: function get() {\n        return document[fn.fullscreenElement];\n      }\n    },\n    isEnabled: {\n      enumerable: true,\n      get: function get() {\n        // Coerce to boolean in case of old WebKit\n        return Boolean(document[fn.fullscreenEnabled]);\n      }\n    }\n  });\n  return screenfull;\n}\n\nvar playerMap = new WeakMap();\nvar readyMap = new WeakMap();\nvar screenfull = {};\n\nvar Player = /*#__PURE__*/function () {\n  /**\n   * Create a Player.\n   *\n   * @param {(HTMLIFrameElement|HTMLElement|string|jQuery)} element A reference to the Vimeo\n   *        player iframe, and id, or a jQuery object.\n   * @param {object} [options] oEmbed parameters to use when creating an embed in the element.\n   * @return {Player}\n   */\n  function Player(element) {\n    var _this = this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Player);\n\n    /* global jQuery */\n    if (window.jQuery && element instanceof jQuery) {\n      if (element.length > 1 && window.console && console.warn) {\n        console.warn('A jQuery object with multiple elements was passed, using the first element.');\n      }\n\n      element = element[0];\n    } // Find an element by ID\n\n\n    if (typeof document !== 'undefined' && typeof element === 'string') {\n      element = document.getElementById(element);\n    } // Not an element!\n\n\n    if (!isDomElement(element)) {\n      throw new TypeError('You must pass either a valid element or a valid id.');\n    } // Already initialized an embed in this div, so grab the iframe\n\n\n    if (element.nodeName !== 'IFRAME') {\n      var iframe = element.querySelector('iframe');\n\n      if (iframe) {\n        element = iframe;\n      }\n    } // iframe url is not a Vimeo url\n\n\n    if (element.nodeName === 'IFRAME' && !isVimeoUrl(element.getAttribute('src') || '')) {\n      throw new Error('The player element passed isnt a Vimeo embed.');\n    } // If there is already a player object in the map, return that\n\n\n    if (playerMap.has(element)) {\n      return playerMap.get(element);\n    }\n\n    this._window = element.ownerDocument.defaultView;\n    this.element = element;\n    this.origin = '*';\n    var readyPromise = new npo_src(function (resolve, reject) {\n      _this._onMessage = function (event) {\n        if (!isVimeoUrl(event.origin) || _this.element.contentWindow !== event.source) {\n          return;\n        }\n\n        if (_this.origin === '*') {\n          _this.origin = event.origin;\n        }\n\n        var data = parseMessageData(event.data);\n        var isError = data && data.event === 'error';\n        var isReadyError = isError && data.data && data.data.method === 'ready';\n\n        if (isReadyError) {\n          var error = new Error(data.data.message);\n          error.name = data.data.name;\n          reject(error);\n          return;\n        }\n\n        var isReadyEvent = data && data.event === 'ready';\n        var isPingResponse = data && data.method === 'ping';\n\n        if (isReadyEvent || isPingResponse) {\n          _this.element.setAttribute('data-ready', 'true');\n\n          resolve();\n          return;\n        }\n\n        processData(_this, data);\n      };\n\n      _this._window.addEventListener('message', _this._onMessage);\n\n      if (_this.element.nodeName !== 'IFRAME') {\n        var params = getOEmbedParameters(element, options);\n        var url = getVimeoUrl(params);\n        getOEmbedData(url, params, element).then(function (data) {\n          var iframe = createEmbed(data, element); // Overwrite element with the new iframe,\n          // but store reference to the original element\n\n          _this.element = iframe;\n          _this._originalElement = element;\n          swapCallbacks(element, iframe);\n          playerMap.set(_this.element, _this);\n          return data;\n        }).catch(reject);\n      }\n    }); // Store a copy of this Player in the map\n\n    readyMap.set(this, readyPromise);\n    playerMap.set(this.element, this); // Send a ping to the iframe so the ready promise will be resolved if\n    // the player is already ready.\n\n    if (this.element.nodeName === 'IFRAME') {\n      postMessage(this, 'ping');\n    }\n\n    if (screenfull.isEnabled) {\n      var exitFullscreen = function exitFullscreen() {\n        return screenfull.exit();\n      };\n\n      this.fullscreenchangeHandler = function () {\n        if (screenfull.isFullscreen) {\n          storeCallback(_this, 'event:exitFullscreen', exitFullscreen);\n        } else {\n          removeCallback(_this, 'event:exitFullscreen', exitFullscreen);\n        } // eslint-disable-next-line\n\n\n        _this.ready().then(function () {\n          postMessage(_this, 'fullscreenchange', screenfull.isFullscreen);\n        });\n      };\n\n      screenfull.on('fullscreenchange', this.fullscreenchangeHandler);\n    }\n\n    return this;\n  }\n  /**\n   * Get a promise for a method.\n   *\n   * @param {string} name The API method to call.\n   * @param {Object} [args={}] Arguments to send via postMessage.\n   * @return {Promise}\n   */\n\n\n  _createClass(Player, [{\n    key: \"callMethod\",\n    value: function callMethod(name) {\n      var _this2 = this;\n\n      var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return new npo_src(function (resolve, reject) {\n        // We are storing the resolve/reject handlers to call later, so we\n        // cant return here.\n        // eslint-disable-next-line promise/always-return\n        return _this2.ready().then(function () {\n          storeCallback(_this2, name, {\n            resolve: resolve,\n            reject: reject\n          });\n          postMessage(_this2, name, args);\n        }).catch(reject);\n      });\n    }\n    /**\n     * Get a promise for the value of a player property.\n     *\n     * @param {string} name The property name\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      var _this3 = this;\n\n      return new npo_src(function (resolve, reject) {\n        name = getMethodName(name, 'get'); // We are storing the resolve/reject handlers to call later, so we\n        // cant return here.\n        // eslint-disable-next-line promise/always-return\n\n        return _this3.ready().then(function () {\n          storeCallback(_this3, name, {\n            resolve: resolve,\n            reject: reject\n          });\n          postMessage(_this3, name);\n        }).catch(reject);\n      });\n    }\n    /**\n     * Get a promise for setting the value of a player property.\n     *\n     * @param {string} name The API method to call.\n     * @param {mixed} value The value to set.\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      var _this4 = this;\n\n      return new npo_src(function (resolve, reject) {\n        name = getMethodName(name, 'set');\n\n        if (value === undefined || value === null) {\n          throw new TypeError('There must be a value to set.');\n        } // We are storing the resolve/reject handlers to call later, so we\n        // cant return here.\n        // eslint-disable-next-line promise/always-return\n\n\n        return _this4.ready().then(function () {\n          storeCallback(_this4, name, {\n            resolve: resolve,\n            reject: reject\n          });\n          postMessage(_this4, name, value);\n        }).catch(reject);\n      });\n    }\n    /**\n     * Add an event listener for the specified event. Will call the\n     * callback with a single parameter, `data`, that contains the data for\n     * that event.\n     *\n     * @param {string} eventName The name of the event.\n     * @param {function(*)} callback The function to call when the event fires.\n     * @return {void}\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(eventName, callback) {\n      if (!eventName) {\n        throw new TypeError('You must pass an event name.');\n      }\n\n      if (!callback) {\n        throw new TypeError('You must pass a callback function.');\n      }\n\n      if (typeof callback !== 'function') {\n        throw new TypeError('The callback must be a function.');\n      }\n\n      var callbacks = getCallbacks(this, \"event:\".concat(eventName));\n\n      if (callbacks.length === 0) {\n        this.callMethod('addEventListener', eventName).catch(function () {// Ignore the error. There will be an error event fired that\n          // will trigger the error callback if they are listening.\n        });\n      }\n\n      storeCallback(this, \"event:\".concat(eventName), callback);\n    }\n    /**\n     * Remove an event listener for the specified event. Will remove all\n     * listeners for that event if a `callback` isnt passed, or only that\n     * specific callback if it is passed.\n     *\n     * @param {string} eventName The name of the event.\n     * @param {function} [callback] The specific callback to remove.\n     * @return {void}\n     */\n\n  }, {\n    key: \"off\",\n    value: function off(eventName, callback) {\n      if (!eventName) {\n        throw new TypeError('You must pass an event name.');\n      }\n\n      if (callback && typeof callback !== 'function') {\n        throw new TypeError('The callback must be a function.');\n      }\n\n      var lastCallback = removeCallback(this, \"event:\".concat(eventName), callback); // If there are no callbacks left, remove the listener\n\n      if (lastCallback) {\n        this.callMethod('removeEventListener', eventName).catch(function (e) {// Ignore the error. There will be an error event fired that\n          // will trigger the error callback if they are listening.\n        });\n      }\n    }\n    /**\n     * A promise to load a new video.\n     *\n     * @promise LoadVideoPromise\n     * @fulfill {number} The video with this id or url successfully loaded.\n     * @reject {TypeError} The id was not a number.\n     */\n\n    /**\n     * Load a new video into this embed. The promise will be resolved if\n     * the video is successfully loaded, or it will be rejected if it could\n     * not be loaded.\n     *\n     * @param {number|string|object} options The id of the video, the url of the video, or an object with embed options.\n     * @return {LoadVideoPromise}\n     */\n\n  }, {\n    key: \"loadVideo\",\n    value: function loadVideo(options) {\n      return this.callMethod('loadVideo', options);\n    }\n    /**\n     * A promise to perform an action when the Player is ready.\n     *\n     * @todo document errors\n     * @promise LoadVideoPromise\n     * @fulfill {void}\n     */\n\n    /**\n     * Trigger a function when the player iframe has initialized. You do not\n     * need to wait for `ready` to trigger to begin adding event listeners\n     * or calling other methods.\n     *\n     * @return {ReadyPromise}\n     */\n\n  }, {\n    key: \"ready\",\n    value: function ready() {\n      var readyPromise = readyMap.get(this) || new npo_src(function (resolve, reject) {\n        reject(new Error('Unknown player. Probably unloaded.'));\n      });\n      return npo_src.resolve(readyPromise);\n    }\n    /**\n     * A promise to add a cue point to the player.\n     *\n     * @promise AddCuePointPromise\n     * @fulfill {string} The id of the cue point to use for removeCuePoint.\n     * @reject {RangeError} the time was less than 0 or greater than the\n     *         videos duration.\n     * @reject {UnsupportedError} Cue points are not supported with the current\n     *         player or browser.\n     */\n\n    /**\n     * Add a cue point to the player.\n     *\n     * @param {number} time The time for the cue point.\n     * @param {object} [data] Arbitrary data to be returned with the cue point.\n     * @return {AddCuePointPromise}\n     */\n\n  }, {\n    key: \"addCuePoint\",\n    value: function addCuePoint(time) {\n      var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return this.callMethod('addCuePoint', {\n        time: time,\n        data: data\n      });\n    }\n    /**\n     * A promise to remove a cue point from the player.\n     *\n     * @promise AddCuePointPromise\n     * @fulfill {string} The id of the cue point that was removed.\n     * @reject {InvalidCuePoint} The cue point with the specified id was not\n     *         found.\n     * @reject {UnsupportedError} Cue points are not supported with the current\n     *         player or browser.\n     */\n\n    /**\n     * Remove a cue point from the video.\n     *\n     * @param {string} id The id of the cue point to remove.\n     * @return {RemoveCuePointPromise}\n     */\n\n  }, {\n    key: \"removeCuePoint\",\n    value: function removeCuePoint(id) {\n      return this.callMethod('removeCuePoint', id);\n    }\n    /**\n     * A representation of a text track on a video.\n     *\n     * @typedef {Object} VimeoTextTrack\n     * @property {string} language The ISO language code.\n     * @property {string} kind The kind of track it is (captions or subtitles).\n     * @property {string} label The humanreadable label for the track.\n     */\n\n    /**\n     * A promise to enable a text track.\n     *\n     * @promise EnableTextTrackPromise\n     * @fulfill {VimeoTextTrack} The text track that was enabled.\n     * @reject {InvalidTrackLanguageError} No track was available with the\n     *         specified language.\n     * @reject {InvalidTrackError} No track was available with the specified\n     *         language and kind.\n     */\n\n    /**\n     * Enable the text track with the specified language, and optionally the\n     * specified kind (captions or subtitles).\n     *\n     * When set via the API, the track language will not change the viewers\n     * stored preference.\n     *\n     * @param {string} language The twoletter language code.\n     * @param {string} [kind] The kind of track to enable (captions or subtitles).\n     * @return {EnableTextTrackPromise}\n     */\n\n  }, {\n    key: \"enableTextTrack\",\n    value: function enableTextTrack(language, kind) {\n      if (!language) {\n        throw new TypeError('You must pass a language.');\n      }\n\n      return this.callMethod('enableTextTrack', {\n        language: language,\n        kind: kind\n      });\n    }\n    /**\n     * A promise to disable the active text track.\n     *\n     * @promise DisableTextTrackPromise\n     * @fulfill {void} The track was disabled.\n     */\n\n    /**\n     * Disable the currently-active text track.\n     *\n     * @return {DisableTextTrackPromise}\n     */\n\n  }, {\n    key: \"disableTextTrack\",\n    value: function disableTextTrack() {\n      return this.callMethod('disableTextTrack');\n    }\n    /**\n     * A promise to pause the video.\n     *\n     * @promise PausePromise\n     * @fulfill {void} The video was paused.\n     */\n\n    /**\n     * Pause the video if its playing.\n     *\n     * @return {PausePromise}\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      return this.callMethod('pause');\n    }\n    /**\n     * A promise to play the video.\n     *\n     * @promise PlayPromise\n     * @fulfill {void} The video was played.\n     */\n\n    /**\n     * Play the video if its paused. **Note:** on iOS and some other\n     * mobile devices, you cannot programmatically trigger play. Once the\n     * viewer has tapped on the play button in the player, however, you\n     * will be able to use this function.\n     *\n     * @return {PlayPromise}\n     */\n\n  }, {\n    key: \"play\",\n    value: function play() {\n      return this.callMethod('play');\n    }\n    /**\n     * Request that the player enters fullscreen.\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"requestFullscreen\",\n    value: function requestFullscreen() {\n      if (screenfull.isEnabled) {\n        return screenfull.request(this.element);\n      }\n\n      return this.callMethod('requestFullscreen');\n    }\n    /**\n     * Request that the player exits fullscreen.\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"exitFullscreen\",\n    value: function exitFullscreen() {\n      if (screenfull.isEnabled) {\n        return screenfull.exit();\n      }\n\n      return this.callMethod('exitFullscreen');\n    }\n    /**\n     * Returns true if the player is currently fullscreen.\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"getFullscreen\",\n    value: function getFullscreen() {\n      if (screenfull.isEnabled) {\n        return npo_src.resolve(screenfull.isFullscreen);\n      }\n\n      return this.get('fullscreen');\n    }\n    /**\n     * Request that the player enters picture-in-picture.\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"requestPictureInPicture\",\n    value: function requestPictureInPicture() {\n      return this.callMethod('requestPictureInPicture');\n    }\n    /**\n     * Request that the player exits picture-in-picture.\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"exitPictureInPicture\",\n    value: function exitPictureInPicture() {\n      return this.callMethod('exitPictureInPicture');\n    }\n    /**\n     * Returns true if the player is currently picture-in-picture.\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"getPictureInPicture\",\n    value: function getPictureInPicture() {\n      return this.get('pictureInPicture');\n    }\n    /**\n     * A promise to unload the video.\n     *\n     * @promise UnloadPromise\n     * @fulfill {void} The video was unloaded.\n     */\n\n    /**\n     * Return the player to its initial state.\n     *\n     * @return {UnloadPromise}\n     */\n\n  }, {\n    key: \"unload\",\n    value: function unload() {\n      return this.callMethod('unload');\n    }\n    /**\n     * Cleanup the player and remove it from the DOM\n     *\n     * It won't be usable and a new one should be constructed\n     *  in order to do any operations.\n     *\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this5 = this;\n\n      return new npo_src(function (resolve) {\n        readyMap.delete(_this5);\n        playerMap.delete(_this5.element);\n\n        if (_this5._originalElement) {\n          playerMap.delete(_this5._originalElement);\n\n          _this5._originalElement.removeAttribute('data-vimeo-initialized');\n        }\n\n        if (_this5.element && _this5.element.nodeName === 'IFRAME' && _this5.element.parentNode) {\n          // If we've added an additional wrapper div, remove that from the DOM.\n          // If not, just remove the iframe element.\n          if (_this5.element.parentNode.parentNode && _this5._originalElement && _this5._originalElement !== _this5.element.parentNode) {\n            _this5.element.parentNode.parentNode.removeChild(_this5.element.parentNode);\n          } else {\n            _this5.element.parentNode.removeChild(_this5.element);\n          }\n        } // If the clip is private there is a case where the element stays the\n        // div element. Destroy should reset the div and remove the iframe child.\n\n\n        if (_this5.element && _this5.element.nodeName === 'DIV' && _this5.element.parentNode) {\n          _this5.element.removeAttribute('data-vimeo-initialized');\n\n          var iframe = _this5.element.querySelector('iframe');\n\n          if (iframe && iframe.parentNode) {\n            // If we've added an additional wrapper div, remove that from the DOM.\n            // If not, just remove the iframe element.\n            if (iframe.parentNode.parentNode && _this5._originalElement && _this5._originalElement !== iframe.parentNode) {\n              iframe.parentNode.parentNode.removeChild(iframe.parentNode);\n            } else {\n              iframe.parentNode.removeChild(iframe);\n            }\n          }\n        }\n\n        _this5._window.removeEventListener('message', _this5._onMessage);\n\n        if (screenfull.isEnabled) {\n          screenfull.off('fullscreenchange', _this5.fullscreenchangeHandler);\n        }\n\n        resolve();\n      });\n    }\n    /**\n     * A promise to get the autopause behavior of the video.\n     *\n     * @promise GetAutopausePromise\n     * @fulfill {boolean} Whether autopause is turned on or off.\n     * @reject {UnsupportedError} Autopause is not supported with the current\n     *         player or browser.\n     */\n\n    /**\n     * Get the autopause behavior for this player.\n     *\n     * @return {GetAutopausePromise}\n     */\n\n  }, {\n    key: \"getAutopause\",\n    value: function getAutopause() {\n      return this.get('autopause');\n    }\n    /**\n     * A promise to set the autopause behavior of the video.\n     *\n     * @promise SetAutopausePromise\n     * @fulfill {boolean} Whether autopause is turned on or off.\n     * @reject {UnsupportedError} Autopause is not supported with the current\n     *         player or browser.\n     */\n\n    /**\n     * Enable or disable the autopause behavior of this player.\n     *\n     * By default, when another video is played in the same browser, this\n     * player will automatically pause. Unless you have a specific reason\n     * for doing so, we recommend that you leave autopause set to the\n     * default (`true`).\n     *\n     * @param {boolean} autopause\n     * @return {SetAutopausePromise}\n     */\n\n  }, {\n    key: \"setAutopause\",\n    value: function setAutopause(autopause) {\n      return this.set('autopause', autopause);\n    }\n    /**\n     * A promise to get the buffered property of the video.\n     *\n     * @promise GetBufferedPromise\n     * @fulfill {Array} Buffered Timeranges converted to an Array.\n     */\n\n    /**\n     * Get the buffered property of the video.\n     *\n     * @return {GetBufferedPromise}\n     */\n\n  }, {\n    key: \"getBuffered\",\n    value: function getBuffered() {\n      return this.get('buffered');\n    }\n    /**\n     * @typedef {Object} CameraProperties\n     * @prop {number} props.yaw - Number between 0 and 360.\n     * @prop {number} props.pitch - Number between -90 and 90.\n     * @prop {number} props.roll - Number between -180 and 180.\n     * @prop {number} props.fov - The field of view in degrees.\n     */\n\n    /**\n     * A promise to get the camera properties of the player.\n     *\n     * @promise GetCameraPromise\n     * @fulfill {CameraProperties} The camera properties.\n     */\n\n    /**\n     * For 360 videos get the camera properties for this player.\n     *\n     * @return {GetCameraPromise}\n     */\n\n  }, {\n    key: \"getCameraProps\",\n    value: function getCameraProps() {\n      return this.get('cameraProps');\n    }\n    /**\n     * A promise to set the camera properties of the player.\n     *\n     * @promise SetCameraPromise\n     * @fulfill {Object} The camera was successfully set.\n     * @reject {RangeError} The range was out of bounds.\n     */\n\n    /**\n     * For 360 videos set the camera properties for this player.\n     *\n     * @param {CameraProperties} camera The camera properties\n     * @return {SetCameraPromise}\n     */\n\n  }, {\n    key: \"setCameraProps\",\n    value: function setCameraProps(camera) {\n      return this.set('cameraProps', camera);\n    }\n    /**\n     * A representation of a chapter.\n     *\n     * @typedef {Object} VimeoChapter\n     * @property {number} startTime The start time of the chapter.\n     * @property {object} title The title of the chapter.\n     * @property {number} index The place in the order of Chapters. Starts at 1.\n     */\n\n    /**\n     * A promise to get chapters for the video.\n     *\n     * @promise GetChaptersPromise\n     * @fulfill {VimeoChapter[]} The chapters for the video.\n     */\n\n    /**\n     * Get an array of all the chapters for the video.\n     *\n     * @return {GetChaptersPromise}\n     */\n\n  }, {\n    key: \"getChapters\",\n    value: function getChapters() {\n      return this.get('chapters');\n    }\n    /**\n     * A promise to get the currently active chapter.\n     *\n     * @promise GetCurrentChaptersPromise\n     * @fulfill {VimeoChapter|undefined} The current chapter for the video.\n     */\n\n    /**\n     * Get the currently active chapter for the video.\n     *\n     * @return {GetCurrentChaptersPromise}\n     */\n\n  }, {\n    key: \"getCurrentChapter\",\n    value: function getCurrentChapter() {\n      return this.get('currentChapter');\n    }\n    /**\n     * A promise to get the color of the player.\n     *\n     * @promise GetColorPromise\n     * @fulfill {string} The hex color of the player.\n     */\n\n    /**\n     * Get the color for this player.\n     *\n     * @return {GetColorPromise}\n     */\n\n  }, {\n    key: \"getColor\",\n    value: function getColor() {\n      return this.get('color');\n    }\n    /**\n     * A promise to set the color of the player.\n     *\n     * @promise SetColorPromise\n     * @fulfill {string} The color was successfully set.\n     * @reject {TypeError} The string was not a valid hex or rgb color.\n     * @reject {ContrastError} The color was set, but the contrast is\n     *         outside of the acceptable range.\n     * @reject {EmbedSettingsError} The owner of the player has chosen to\n     *         use a specific color.\n     */\n\n    /**\n     * Set the color of this player to a hex or rgb string. Setting the\n     * color may fail if the owner of the video has set their embed\n     * preferences to force a specific color.\n     *\n     * @param {string} color The hex or rgb color string to set.\n     * @return {SetColorPromise}\n     */\n\n  }, {\n    key: \"setColor\",\n    value: function setColor(color) {\n      return this.set('color', color);\n    }\n    /**\n     * A representation of a cue point.\n     *\n     * @typedef {Object} VimeoCuePoint\n     * @property {number} time The time of the cue point.\n     * @property {object} data The data passed when adding the cue point.\n     * @property {string} id The unique id for use with removeCuePoint.\n     */\n\n    /**\n     * A promise to get the cue points of a video.\n     *\n     * @promise GetCuePointsPromise\n     * @fulfill {VimeoCuePoint[]} The cue points added to the video.\n     * @reject {UnsupportedError} Cue points are not supported with the current\n     *         player or browser.\n     */\n\n    /**\n     * Get an array of the cue points added to the video.\n     *\n     * @return {GetCuePointsPromise}\n     */\n\n  }, {\n    key: \"getCuePoints\",\n    value: function getCuePoints() {\n      return this.get('cuePoints');\n    }\n    /**\n     * A promise to get the current time of the video.\n     *\n     * @promise GetCurrentTimePromise\n     * @fulfill {number} The current time in seconds.\n     */\n\n    /**\n     * Get the current playback position in seconds.\n     *\n     * @return {GetCurrentTimePromise}\n     */\n\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      return this.get('currentTime');\n    }\n    /**\n     * A promise to set the current time of the video.\n     *\n     * @promise SetCurrentTimePromise\n     * @fulfill {number} The actual current time that was set.\n     * @reject {RangeError} the time was less than 0 or greater than the\n     *         videos duration.\n     */\n\n    /**\n     * Set the current playback position in seconds. If the player was\n     * paused, it will remain paused. Likewise, if the player was playing,\n     * it will resume playing once the video has buffered.\n     *\n     * You can provide an accurate time and the player will attempt to seek\n     * to as close to that time as possible. The exact time will be the\n     * fulfilled value of the promise.\n     *\n     * @param {number} currentTime\n     * @return {SetCurrentTimePromise}\n     */\n\n  }, {\n    key: \"setCurrentTime\",\n    value: function setCurrentTime(currentTime) {\n      return this.set('currentTime', currentTime);\n    }\n    /**\n     * A promise to get the duration of the video.\n     *\n     * @promise GetDurationPromise\n     * @fulfill {number} The duration in seconds.\n     */\n\n    /**\n     * Get the duration of the video in seconds. It will be rounded to the\n     * nearest second before playback begins, and to the nearest thousandth\n     * of a second after playback begins.\n     *\n     * @return {GetDurationPromise}\n     */\n\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      return this.get('duration');\n    }\n    /**\n     * A promise to get the ended state of the video.\n     *\n     * @promise GetEndedPromise\n     * @fulfill {boolean} Whether or not the video has ended.\n     */\n\n    /**\n     * Get the ended state of the video. The video has ended if\n     * `currentTime === duration`.\n     *\n     * @return {GetEndedPromise}\n     */\n\n  }, {\n    key: \"getEnded\",\n    value: function getEnded() {\n      return this.get('ended');\n    }\n    /**\n     * A promise to get the loop state of the player.\n     *\n     * @promise GetLoopPromise\n     * @fulfill {boolean} Whether or not the player is set to loop.\n     */\n\n    /**\n     * Get the loop state of the player.\n     *\n     * @return {GetLoopPromise}\n     */\n\n  }, {\n    key: \"getLoop\",\n    value: function getLoop() {\n      return this.get('loop');\n    }\n    /**\n     * A promise to set the loop state of the player.\n     *\n     * @promise SetLoopPromise\n     * @fulfill {boolean} The loop state that was set.\n     */\n\n    /**\n     * Set the loop state of the player. When set to `true`, the player\n     * will start over immediately once playback ends.\n     *\n     * @param {boolean} loop\n     * @return {SetLoopPromise}\n     */\n\n  }, {\n    key: \"setLoop\",\n    value: function setLoop(loop) {\n      return this.set('loop', loop);\n    }\n    /**\n     * A promise to set the muted state of the player.\n     *\n     * @promise SetMutedPromise\n     * @fulfill {boolean} The muted state that was set.\n     */\n\n    /**\n     * Set the muted state of the player. When set to `true`, the player\n     * volume will be muted.\n     *\n     * @param {boolean} muted\n     * @return {SetMutedPromise}\n     */\n\n  }, {\n    key: \"setMuted\",\n    value: function setMuted(muted) {\n      return this.set('muted', muted);\n    }\n    /**\n     * A promise to get the muted state of the player.\n     *\n     * @promise GetMutedPromise\n     * @fulfill {boolean} Whether or not the player is muted.\n     */\n\n    /**\n     * Get the muted state of the player.\n     *\n     * @return {GetMutedPromise}\n     */\n\n  }, {\n    key: \"getMuted\",\n    value: function getMuted() {\n      return this.get('muted');\n    }\n    /**\n     * A promise to get the paused state of the player.\n     *\n     * @promise GetLoopPromise\n     * @fulfill {boolean} Whether or not the video is paused.\n     */\n\n    /**\n     * Get the paused state of the player.\n     *\n     * @return {GetLoopPromise}\n     */\n\n  }, {\n    key: \"getPaused\",\n    value: function getPaused() {\n      return this.get('paused');\n    }\n    /**\n     * A promise to get the playback rate of the player.\n     *\n     * @promise GetPlaybackRatePromise\n     * @fulfill {number} The playback rate of the player on a scale from 0.5 to 2.\n     */\n\n    /**\n     * Get the playback rate of the player on a scale from `0.5` to `2`.\n     *\n     * @return {GetPlaybackRatePromise}\n     */\n\n  }, {\n    key: \"getPlaybackRate\",\n    value: function getPlaybackRate() {\n      return this.get('playbackRate');\n    }\n    /**\n     * A promise to set the playbackrate of the player.\n     *\n     * @promise SetPlaybackRatePromise\n     * @fulfill {number} The playback rate was set.\n     * @reject {RangeError} The playback rate was less than 0.5 or greater than 2.\n     */\n\n    /**\n     * Set the playback rate of the player on a scale from `0.5` to `2`. When set\n     * via the API, the playback rate will not be synchronized to other\n     * players or stored as the viewer's preference.\n     *\n     * @param {number} playbackRate\n     * @return {SetPlaybackRatePromise}\n     */\n\n  }, {\n    key: \"setPlaybackRate\",\n    value: function setPlaybackRate(playbackRate) {\n      return this.set('playbackRate', playbackRate);\n    }\n    /**\n     * A promise to get the played property of the video.\n     *\n     * @promise GetPlayedPromise\n     * @fulfill {Array} Played Timeranges converted to an Array.\n     */\n\n    /**\n     * Get the played property of the video.\n     *\n     * @return {GetPlayedPromise}\n     */\n\n  }, {\n    key: \"getPlayed\",\n    value: function getPlayed() {\n      return this.get('played');\n    }\n    /**\n     * A promise to get the qualities available of the current video.\n     *\n     * @promise GetQualitiesPromise\n     * @fulfill {Array} The qualities of the video.\n     */\n\n    /**\n     * Get the qualities of the current video.\n     *\n     * @return {GetQualitiesPromise}\n     */\n\n  }, {\n    key: \"getQualities\",\n    value: function getQualities() {\n      return this.get('qualities');\n    }\n    /**\n     * A promise to get the current set quality of the video.\n     *\n     * @promise GetQualityPromise\n     * @fulfill {string} The current set quality.\n     */\n\n    /**\n     * Get the current set quality of the video.\n     *\n     * @return {GetQualityPromise}\n     */\n\n  }, {\n    key: \"getQuality\",\n    value: function getQuality() {\n      return this.get('quality');\n    }\n    /**\n     * A promise to set the video quality.\n     *\n     * @promise SetQualityPromise\n     * @fulfill {number} The quality was set.\n     * @reject {RangeError} The quality is not available.\n     */\n\n    /**\n     * Set a video quality.\n     *\n     * @param {string} quality\n     * @return {SetQualityPromise}\n     */\n\n  }, {\n    key: \"setQuality\",\n    value: function setQuality(quality) {\n      return this.set('quality', quality);\n    }\n    /**\n     * A promise to get the seekable property of the video.\n     *\n     * @promise GetSeekablePromise\n     * @fulfill {Array} Seekable Timeranges converted to an Array.\n     */\n\n    /**\n     * Get the seekable property of the video.\n     *\n     * @return {GetSeekablePromise}\n     */\n\n  }, {\n    key: \"getSeekable\",\n    value: function getSeekable() {\n      return this.get('seekable');\n    }\n    /**\n     * A promise to get the seeking property of the player.\n     *\n     * @promise GetSeekingPromise\n     * @fulfill {boolean} Whether or not the player is currently seeking.\n     */\n\n    /**\n     * Get if the player is currently seeking.\n     *\n     * @return {GetSeekingPromise}\n     */\n\n  }, {\n    key: \"getSeeking\",\n    value: function getSeeking() {\n      return this.get('seeking');\n    }\n    /**\n     * A promise to get the text tracks of a video.\n     *\n     * @promise GetTextTracksPromise\n     * @fulfill {VimeoTextTrack[]} The text tracks associated with the video.\n     */\n\n    /**\n     * Get an array of the text tracks that exist for the video.\n     *\n     * @return {GetTextTracksPromise}\n     */\n\n  }, {\n    key: \"getTextTracks\",\n    value: function getTextTracks() {\n      return this.get('textTracks');\n    }\n    /**\n     * A promise to get the embed code for the video.\n     *\n     * @promise GetVideoEmbedCodePromise\n     * @fulfill {string} The `<iframe>` embed code for the video.\n     */\n\n    /**\n     * Get the `<iframe>` embed code for the video.\n     *\n     * @return {GetVideoEmbedCodePromise}\n     */\n\n  }, {\n    key: \"getVideoEmbedCode\",\n    value: function getVideoEmbedCode() {\n      return this.get('videoEmbedCode');\n    }\n    /**\n     * A promise to get the id of the video.\n     *\n     * @promise GetVideoIdPromise\n     * @fulfill {number} The id of the video.\n     */\n\n    /**\n     * Get the id of the video.\n     *\n     * @return {GetVideoIdPromise}\n     */\n\n  }, {\n    key: \"getVideoId\",\n    value: function getVideoId() {\n      return this.get('videoId');\n    }\n    /**\n     * A promise to get the title of the video.\n     *\n     * @promise GetVideoTitlePromise\n     * @fulfill {number} The title of the video.\n     */\n\n    /**\n     * Get the title of the video.\n     *\n     * @return {GetVideoTitlePromise}\n     */\n\n  }, {\n    key: \"getVideoTitle\",\n    value: function getVideoTitle() {\n      return this.get('videoTitle');\n    }\n    /**\n     * A promise to get the native width of the video.\n     *\n     * @promise GetVideoWidthPromise\n     * @fulfill {number} The native width of the video.\n     */\n\n    /**\n     * Get the native width of the currentlyplaying video. The width of\n     * the highestresolution available will be used before playback begins.\n     *\n     * @return {GetVideoWidthPromise}\n     */\n\n  }, {\n    key: \"getVideoWidth\",\n    value: function getVideoWidth() {\n      return this.get('videoWidth');\n    }\n    /**\n     * A promise to get the native height of the video.\n     *\n     * @promise GetVideoHeightPromise\n     * @fulfill {number} The native height of the video.\n     */\n\n    /**\n     * Get the native height of the currentlyplaying video. The height of\n     * the highestresolution available will be used before playback begins.\n     *\n     * @return {GetVideoHeightPromise}\n     */\n\n  }, {\n    key: \"getVideoHeight\",\n    value: function getVideoHeight() {\n      return this.get('videoHeight');\n    }\n    /**\n     * A promise to get the vimeo.com url for the video.\n     *\n     * @promise GetVideoUrlPromise\n     * @fulfill {number} The vimeo.com url for the video.\n     * @reject {PrivacyError} The url isnt available because of the videos privacy setting.\n     */\n\n    /**\n     * Get the vimeo.com url for the video.\n     *\n     * @return {GetVideoUrlPromise}\n     */\n\n  }, {\n    key: \"getVideoUrl\",\n    value: function getVideoUrl() {\n      return this.get('videoUrl');\n    }\n    /**\n     * A promise to get the volume level of the player.\n     *\n     * @promise GetVolumePromise\n     * @fulfill {number} The volume level of the player on a scale from 0 to 1.\n     */\n\n    /**\n     * Get the current volume level of the player on a scale from `0` to `1`.\n     *\n     * Most mobile devices do not support an independent volume from the\n     * system volume. In those cases, this method will always return `1`.\n     *\n     * @return {GetVolumePromise}\n     */\n\n  }, {\n    key: \"getVolume\",\n    value: function getVolume() {\n      return this.get('volume');\n    }\n    /**\n     * A promise to set the volume level of the player.\n     *\n     * @promise SetVolumePromise\n     * @fulfill {number} The volume was set.\n     * @reject {RangeError} The volume was less than 0 or greater than 1.\n     */\n\n    /**\n     * Set the volume of the player on a scale from `0` to `1`. When set\n     * via the API, the volume level will not be synchronized to other\n     * players or stored as the viewers preference.\n     *\n     * Most mobile devices do not support setting the volume. An error will\n     * *not* be triggered in that situation.\n     *\n     * @param {number} volume\n     * @return {SetVolumePromise}\n     */\n\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(volume) {\n      return this.set('volume', volume);\n    }\n  }]);\n\n  return Player;\n}(); // Setup embed only if this is not a node environment\n\n\nif (!isNode) {\n  screenfull = initializeScreenfull();\n  initializeEmbeds();\n  resizeEmbeds();\n}\n\nexport default Player;\n","import { MediaEventType } from '@snowplow/browser-plugin-media/src/types';\n\n/** Events that can be passed into Vimeo's `on` method */\nexport enum InternalVimeoEvent {\n  // Events with direct Media plugin event-sending functions\n  LOADED = 'loaded',\n  PLAY = 'play',\n  PAUSE = 'pause',\n  ENDED = 'ended',\n  SEEKING = 'seeking',\n  SEEKED = 'seeked',\n  ERROR = 'error',\n  BUFFERSTART = 'bufferstart',\n  BUFFEREND = 'bufferend',\n  VOLUMECHANGE = 'volumechange',\n  QUALITYCHANGE = 'qualitychange',\n  FULLSCREENCHANGE = 'fullscreenchange',\n  PLAYBACKRATECHANGE = 'playbackratechange',\n  ENTERPICTUREINPICTURE = 'enterpictureinpicture',\n  LEAVEPICTUREINPICTURE = 'leavepictureinpicture',\n\n  // Events that cause state updates in the Media plugin\n  TIMEUPDATE = 'timeupdate',\n  PROGRESS = 'progress',\n\n  // Events that send `trackMediaSelfDescribingEvent`\n  CUEPOINT = 'cuepoint',\n  CHAPTERCHANGE = 'chapterchange',\n  TEXTTRACKCHANGE = 'texttrackchange',\n  INTERACTIVEHOTSPOTCLICKED = 'interactivehotspotclicked',\n  INTERACTIVEOVERLAYPANELCLICKED = 'interactiveoverlaypanelclicked',\n}\n\n/** Vimeo-specific events not present in {@link MediaEventType}\n *\n * These are the values a user would place in `captureEvents`, to match the\n * style of the existing events from the Media plugin\n */\nexport enum VimeoEventType {\n  CuePoint = 'cue_point',\n  ChapterChange = 'chapter_change',\n  TextTrackChange = 'text_track_change',\n  InteractiveHotSpotClicked = 'interactive_hot_spot_clicked',\n  InteractiveOverlayPanelClicked = 'interactive_overlay_panel_clicked',\n}\n\n// Events from InternalVimeoEvent that can be captured by the user\n// This allows us to only attached listeners to the InternalVimeoEvents that the user wants to capture\nexport const CapturableInternalVimeoEvents: InternalVimeoEvent[] = [\n  InternalVimeoEvent.CUEPOINT,\n  InternalVimeoEvent.CHAPTERCHANGE,\n  InternalVimeoEvent.TEXTTRACKCHANGE,\n  InternalVimeoEvent.INTERACTIVEHOTSPOTCLICKED,\n  InternalVimeoEvent.INTERACTIVEOVERLAYPANELCLICKED,\n];\n\n// Internal Vimeo events that can't be disabled by the user\nexport const AlwaysOnInternalVimeoEvents = [\n  InternalVimeoEvent.TIMEUPDATE, // Used to run `updateMediaTracking` at regular intervals (every ~250ms)\n  InternalVimeoEvent.PROGRESS, // Used to run `updateMediaTracking` when the video is buffering\n];\n\n// Events from the Media plugin that are automatically tracked with this plugin\nexport type AvailableMediaEventType =\n  | MediaEventType.Ready\n  | MediaEventType.Play\n  | MediaEventType.Pause\n  | MediaEventType.End\n  | MediaEventType.SeekStart\n  | MediaEventType.SeekEnd\n  | MediaEventType.PlaybackRateChange\n  | MediaEventType.VolumeChange\n  | MediaEventType.FullscreenChange\n  | MediaEventType.PictureInPictureChange\n  | MediaEventType.Ping\n  | MediaEventType.PercentProgress\n  | MediaEventType.BufferStart\n  | MediaEventType.BufferEnd\n  | MediaEventType.QualityChange\n  | MediaEventType.Error;\n\n// Events from the Media plugin that are automatically tracked with this plugin\nexport const AvailableMediaEventType = {\n  Ready: MediaEventType.Ready as VimeoEvent,\n  Play: MediaEventType.Play as VimeoEvent,\n  Pause: MediaEventType.Pause as VimeoEvent,\n  End: MediaEventType.End as VimeoEvent,\n  SeekStart: MediaEventType.SeekStart as VimeoEvent,\n  SeekEnd: MediaEventType.SeekEnd as VimeoEvent,\n  PlaybackRateChange: MediaEventType.PlaybackRateChange as VimeoEvent,\n  VolumeChange: MediaEventType.VolumeChange as VimeoEvent,\n  FullscreenChange: MediaEventType.FullscreenChange as VimeoEvent,\n  PictureInPictureChange: MediaEventType.PictureInPictureChange as VimeoEvent,\n  Ping: MediaEventType.Ping as VimeoEvent,\n  PercentProgress: MediaEventType.PercentProgress as VimeoEvent,\n  BufferStart: MediaEventType.BufferStart as VimeoEvent,\n  BufferEnd: MediaEventType.BufferEnd as VimeoEvent,\n  QualityChange: MediaEventType.QualityChange as VimeoEvent,\n  Error: MediaEventType.Error as VimeoEvent,\n};\n\n/** Events accepted by `VimeoTrackingConfiguration.captureEvents` */\nexport type VimeoEvent = AvailableMediaEventType | VimeoEventType;\nexport const VimeoEvent = { ...AvailableMediaEventType, ...VimeoEventType };\n\nexport const AllEvents: VimeoEvent[] = [...Object.values(AvailableMediaEventType), ...Object.values(VimeoEventType)];\n","const iglu = 'iglu:com.vimeo/';\nconst jsonschema = '/jsonschema/1-0-0';\nexport const VimeoSchema = {\n  // iglu:com.vimeo/meta/jsonschema/1-0-0\n  META: iglu + 'meta' + jsonschema,\n\n  // iglu:com.vimeo/cue_point_event/jsonschema/1-0-0\n  CUEPOINT: iglu + 'cue_point_event' + jsonschema,\n\n  // iglu:com.vimeo/chapter_change_event/jsonschema/1-0-0\n  CHAPTER_CHANGE: iglu + 'chapter_change_event' + jsonschema,\n\n  // iglu:com.vimeo/text_track_change_event/jsonschema/1-0-0\n  TEXT_TRACK_CHANGE: iglu + 'text_track_change_event' + jsonschema,\n\n  // iglu:com.vimeo/interactive_hotspot_click_event/jsonschema/1-0-0\n  HOTSPOT_CLICK: iglu + 'interactive_hotspot_click_event' + jsonschema,\n\n  // iglu:com.vimeo/interactive_overlay_click_event/jsonschema/1-0-0\n  OVERLAY_CLICK: iglu + 'interactive_overlay_panel_click_event' + jsonschema,\n\n  // iglu:com.vimeo/interaction/jsonschema/1-0-0\n  // context schema for HOTSPOT_CLICK and OVERLAY_CLICK\n  INTERACTION: iglu + 'interaction' + jsonschema,\n};\n","import { Error as VimeoError, VimeoPromise } from '@vimeo/player';\n\nimport { LOG, SelfDescribingJson } from '@snowplow/tracker-core';\nimport { trackMediaError } from '@snowplow/browser-plugin-media';\nimport { MediaPlayer } from '@snowplow/browser-plugin-media/src/types';\n\nimport {\n  InternalVimeoEvent,\n  VimeoEventType,\n  AllEvents,\n  AvailableMediaEventType,\n  AlwaysOnInternalVimeoEvents,\n} from './events';\nimport {\n  InternalVimeoTrackingConfiguration,\n  TrackedPlayer,\n  VimeoPlayerMetadata,\n  VimeoTrackingConfiguration,\n} from './types';\nimport { VimeoSchema } from './schema';\n\n/**\n * Split the `captureEvents` array into two arrays:\n * - `captureEvents` - events that are passed onto the Media plugins `captureEvents` property\n * - `vimeoCaptureEvents` - events that can be passed into the `on` method of the Vimeo player\n */\nexport function filterVimeoEvents(configuration: VimeoTrackingConfiguration): InternalVimeoTrackingConfiguration {\n  configuration.captureEvents = configuration.captureEvents ?? AllEvents;\n  // Extract any events that are in the MediaEventType enum\n  const mediaEventTypes = Object.values(AvailableMediaEventType);\n  const captureEvents = configuration.captureEvents.filter((event) =>\n    mediaEventTypes.includes(event as AvailableMediaEventType)\n  ) as AvailableMediaEventType[];\n\n  // Extract any events that aren't in the MediaEventType enum\n  // Check if they are in the VimeoEventType enum\n  // If so, remove any underscores and add them to the vimeoCaptureEvents array\n  const vimeoEventTypes = Object.values(VimeoEventType);\n  let vimeoCaptureEvents = configuration.captureEvents\n    .filter((event) => vimeoEventTypes.includes(event as string as VimeoEventType))\n    .map((e) => e.replace(/_/g, '') as InternalVimeoEvent) as InternalVimeoEvent[];\n\n  // Add any always-on events that aren't already in the vimeoCaptureEvents array\n  for (const event of AlwaysOnInternalVimeoEvents) {\n    if (!vimeoCaptureEvents.includes(event)) {\n      vimeoCaptureEvents.push(event);\n    }\n  }\n\n  return {\n    ...configuration,\n    captureEvents,\n    vimeoCaptureEvents,\n  };\n}\n\n/**\n * Attempt to get the value of a Vimeo promise, or return undefined\n * if the method fails\n *\n * The Vimeo player will throw an error if the getter methods' promise is rejected\n * So to minimise event loss, we ignore any returned error value and return undefined instead,\n * so the property isn't serialized\n *\n * @param promise The promise returned by the Vimeo getter method\n * @returns The value returned from the promise, or undefined if the promise is rejected\n */\nfunction tryVimeoPromise<T>(promise: VimeoPromise<T, VimeoError>): T | undefined {\n  let ret: T | undefined;\n  promise\n    .then((v) => (ret = v))\n    .catch((e) => {\n      LOG.warn(e);\n    });\n  return ret;\n}\n\nexport async function getVimeoMetadata(trackedPlayer: TrackedPlayer): Promise<SelfDescribingJson> {\n  const { player } = trackedPlayer;\n\n  const data: VimeoPlayerMetadata = {\n    videoId: await player.getVideoId(),\n    videoTitle: await player.getVideoTitle(),\n    videoWidth: await player.getVideoWidth(),\n    videoHeight: await player.getVideoHeight(),\n    // 'getVideoUrl' can fail due to privacy settings\n    videoUrl: tryVimeoPromise(player.getVideoUrl()),\n  };\n\n  return {\n    schema: VimeoSchema.META,\n    data,\n  };\n}\n\n/** Get all attributes that can be passed into `updateMediaTracking` */\nexport async function getVimeoMediaAttributes(trackedPlayer: TrackedPlayer): Promise<MediaPlayer> {\n  const { player } = trackedPlayer;\n  return {\n    currentTime: await player.getCurrentTime(),\n    duration: await player.getDuration(),\n    ended: await player.getEnded(),\n    loop: await player.getLoop(),\n    muted: await player.getMuted(),\n    paused: await player.getPaused(),\n    playbackRate: await player.getPlaybackRate(),\n    volume: Math.round((await player.getVolume()) * 100),\n    pictureInPicture: await player.getPictureInPicture(),\n  };\n}\n\n/** A callback function for the current player, to use in the `.catch()` callback of the Vimeo Player getter methods */\nexport function getErrorCallback(trackedPlayer: TrackedPlayer) {\n  return (error: VimeoError): void => {\n    trackMediaError({\n      id: trackedPlayer.config.id,\n      errorName: error.name,\n      errorDescription: `${error.method} - ${error.message}`,\n    });\n  };\n}\n","import Player, { Error as VimeoError, QualityChangeEvent, TrackKind, VimeoCuePoint } from '@vimeo/player';\nimport { InternalVimeoEvent, VimeoEvent } from './events';\nimport { MediaEventType, MediaTrackingConfiguration } from '@snowplow/browser-plugin-media/src/types';\n\n/** The configuration object for the Vimeo tracking plugin */\nexport interface VimeoTrackingConfiguration extends Omit<MediaTrackingConfiguration, 'captureEvents'> {\n  video: HTMLIFrameElement | Player;\n  captureEvents?: VimeoEvent[];\n}\n\n// An internal configuration type to avoid exposing `vimeoCaptureEvents` to the user\nexport interface InternalVimeoTrackingConfiguration extends VimeoTrackingConfiguration {\n  /** Events filtered from `captureEvents` that are passed into the Vimeo player's `on` method */\n  vimeoCaptureEvents?: InternalVimeoEvent[];\n}\n\n/** A {@link Player} and its associated {@link VimeoTrackingConfiguration | configuration} */\nexport type TrackedPlayer = {\n  player: Player;\n  eventListeners: Partial<Record<InternalVimeoEvent, (eventData: EventData | unknown) => void>>;\n  config: InternalVimeoTrackingConfiguration;\n};\n\n/** Associated type for the Vimeo \"meta\" schema */\nexport type VimeoPlayerMetadata = {\n  videoId: number;\n  videoTitle: string;\n  videoUrl?: string;\n  videoWidth: number;\n  videoHeight: number;\n};\n\n/** Event types that trigger a Media Plugin function */\nexport type EventType = InternalVimeoEvent | MediaEventType.Ready;\n\n/** Sum type of all event data types */\nexport type EventData =\n  | VimeoError\n  | QualityChangeEvent\n  | TimeUpdateData\n  | ChapterData\n  | TextTrackData\n  | VimeoPlayerCuePointData\n  | VimeoInteractiveHotspotClickedData\n  | VimeoInteractiveOverlayPanelClickedData;\n\n/** 'time' can be a reserved word in some warehouses, so we extend the Vimeo type to rename the field to 'cuePointData' */\nexport interface VimeoPlayerCuePointData extends Omit<VimeoCuePoint, 'time'> {\n  cuePointTime: number;\n  [key: string]: unknown;\n}\n\nexport function asVimeoPlayerCuePointData(eventData: EventData | unknown): VimeoPlayerCuePointData {\n  const data = eventData as VimeoCuePoint;\n  return {\n    cuePointTime: data.time,\n    data: data.data,\n    id: data.id,\n  };\n}\n\n/**\n * The event data associated with a `timeupdate` event\n * https://developer.vimeo.com/player/sdk/reference#timeupdate\n */\nexport type TimeUpdateData = {\n  duration: number;\n  percent: number;\n  seconds: number;\n};\n\nexport function asTimeUpdateData(eventData: EventData | unknown): TimeUpdateData {\n  const data = eventData as TimeUpdateData;\n  return {\n    duration: data.duration,\n    percent: data.percent,\n    seconds: data.seconds,\n  };\n}\n\n/**\n * The event data associated with a `texttrackchange` event\n * https://developer.vimeo.com/player/sdk/reference#texttrackchange\n */\nexport type TextTrackData = {\n  language: string;\n  kind: TrackKind;\n  label: string;\n};\n\nexport function asTextTrackData(eventData: EventData | unknown): TextTrackData {\n  const data = eventData as TextTrackData;\n  return {\n    language: data.language,\n    kind: data.kind,\n    label: data.label,\n  };\n}\n\n/**\n * The event data associated with a `chapterchange` event\n * https://developer.vimeo.com/player/sdk/reference#chapterchange\n */\nexport type ChapterData = {\n  index: number;\n  startTime: number;\n  title: string;\n};\n\n/**\n * The event data for an `interactivehotspotclicked` event\n * https://developer.vimeo.com/player/sdk/reference#events-for-interactive-videos\n */\nexport type VimeoInteractiveHotspotClickedData = {\n  action: string;\n  actionPreference: {\n    pauseOnAction: boolean;\n    overlayId: number;\n    seekTo?: number;\n    url?: string;\n  };\n  currentTime: number;\n  customPayloadData?: Object;\n  hotspotId: number;\n};\n\nexport function asVimeoInteractiveHotspotClickedData(\n  eventData: EventData | unknown\n): VimeoInteractiveHotspotClickedData {\n  const data = eventData as VimeoInteractiveHotspotClickedData;\n  return {\n    action: data.action,\n    actionPreference: {\n      pauseOnAction: data.actionPreference.pauseOnAction,\n      overlayId: data.actionPreference.overlayId,\n      seekTo: data.actionPreference?.seekTo,\n      url: data.actionPreference?.url,\n    },\n    currentTime: data.currentTime,\n    customPayloadData: data.customPayloadData,\n    hotspotId: data.hotspotId,\n  } as VimeoInteractiveHotspotClickedData;\n}\n\n/**\n * The event data for an `interactiveoverlaypanelclicked` event\n * https://developer.vimeo.com/player/sdk/reference#events-for-interactive-videos\n */\nexport type VimeoInteractiveOverlayPanelClickedData = {\n  action: string;\n  actionPreference: {\n    pauseOnAction: boolean;\n    seekTo?: number;\n    url?: string;\n  };\n  currentTime: number;\n  customPayloadData?: Object;\n  hotspotId: number;\n  panelId: number;\n};\n\nexport function asVimeoInteractiveOverlayPanelClickedData(\n  eventData: EventData | unknown\n): VimeoInteractiveOverlayPanelClickedData {\n  const data = eventData as VimeoInteractiveOverlayPanelClickedData;\n  return {\n    action: data.action,\n    actionPreference: {\n      pauseOnAction: data.actionPreference.pauseOnAction,\n      seekTo: data.actionPreference?.seekTo,\n      url: data.actionPreference?.url,\n    },\n    currentTime: data.currentTime,\n    customPayloadData: data.customPayloadData,\n    hotspotId: data.hotspotId,\n    panelId: data.panelId,\n  };\n}\n\n// Conversion functions for types from the Vimeo SDK\n\nexport function asChapterData(eventData: EventData | unknown): ChapterData {\n  const data = eventData as ChapterData;\n  return {\n    index: data.index,\n    startTime: data.startTime,\n    title: data.title,\n  };\n}\n\nexport function asQualityChangeEvent(eventData: EventData | unknown): QualityChangeEvent {\n  const data = eventData as QualityChangeEvent;\n  return {\n    quality: data.quality,\n  };\n}\n","import { Error as VimeoError } from '@vimeo/player';\n\nimport {\n  trackMediaBufferEnd,\n  trackMediaBufferStart,\n  trackMediaEnd,\n  trackMediaFullscreenChange,\n  trackMediaPause,\n  trackMediaPictureInPictureChange,\n  trackMediaPlay,\n  trackMediaPlaybackRateChange,\n  trackMediaQualityChange,\n  trackMediaReady,\n  trackMediaSeekEnd,\n  trackMediaSeekStart,\n  trackMediaSelfDescribingEvent,\n  trackMediaVolumeChange,\n  updateMediaTracking,\n} from '@snowplow/browser-plugin-media';\nimport { MediaEventType, MediaPlayer } from '@snowplow/browser-plugin-media/src/types';\n\nimport { getVimeoMetadata, getVimeoMediaAttributes } from './utils';\nimport { VimeoSchema } from './schema';\nimport { InternalVimeoEvent } from './events';\nimport {\n  TrackedPlayer,\n  EventData,\n  EventType,\n  asVimeoInteractiveHotspotClickedData,\n  asVimeoInteractiveOverlayPanelClickedData,\n  asTextTrackData,\n  asTimeUpdateData,\n  asQualityChangeEvent,\n  asVimeoPlayerCuePointData,\n  asChapterData,\n} from './types';\n\nexport function trackEvent(\n  trackedPlayer: TrackedPlayer,\n  eventType: EventType,\n  eventData: EventData | unknown = {},\n  trackError: (error: VimeoError) => void\n): void {\n  getVimeoMediaAttributes(trackedPlayer)\n    .then((mediaPlayer) => {\n      runMediaPluginFunction(mediaPlayer, trackedPlayer, eventType, eventData, trackError);\n    })\n    .catch(trackError);\n}\n\n/** Run the relevant Media plugin function for the event type */\nexport function runMediaPluginFunction(\n  player: MediaPlayer,\n  trackedPlayer: TrackedPlayer,\n  eventType: EventType,\n  eventData: EventData | unknown = {},\n  trackError: (error: VimeoError) => void\n): void {\n  const id = trackedPlayer.config.id;\n\n  switch (eventType) {\n    case InternalVimeoEvent.PLAY:\n      trackMediaPlay({ id, player });\n      break;\n\n    case InternalVimeoEvent.PAUSE:\n      trackMediaPause({ id, player });\n      break;\n\n    case InternalVimeoEvent.ENDED:\n      trackMediaEnd({ id, player });\n      break;\n\n    case InternalVimeoEvent.SEEKING:\n      trackMediaSeekStart({ id, player });\n      break;\n\n    case InternalVimeoEvent.SEEKED:\n      trackMediaSeekEnd({ id, player });\n      break;\n\n    case InternalVimeoEvent.ERROR:\n      trackError(eventData as VimeoError);\n      break;\n\n    case InternalVimeoEvent.TIMEUPDATE:\n      updateMediaTracking({ id, player: { ...player, currentTime: asTimeUpdateData(eventData).seconds } });\n      break;\n\n    case InternalVimeoEvent.BUFFERSTART:\n      trackMediaBufferStart({ id, player });\n      break;\n\n    case InternalVimeoEvent.BUFFEREND:\n      trackMediaBufferEnd({ id, player });\n      break;\n\n    case InternalVimeoEvent.VOLUMECHANGE:\n      trackedPlayer.player\n        .getVolume()\n        .then((newVolume) => trackMediaVolumeChange({ id, player, newVolume: Math.round(newVolume * 100) }))\n        .catch(trackError);\n      break;\n\n    case InternalVimeoEvent.FULLSCREENCHANGE:\n      trackedPlayer.player\n        .getFullscreen()\n        .then((fullscreen) => trackMediaFullscreenChange({ id, player, fullscreen }))\n        .catch(trackError);\n      break;\n\n    case InternalVimeoEvent.PLAYBACKRATECHANGE:\n      trackedPlayer.player\n        .getPlaybackRate()\n        .then((newRate) => trackMediaPlaybackRateChange({ id, player, newRate }))\n        .catch(trackError);\n      break;\n\n    case InternalVimeoEvent.ENTERPICTUREINPICTURE:\n      trackMediaPictureInPictureChange({ id, player, pictureInPicture: true });\n      break;\n\n    case InternalVimeoEvent.LEAVEPICTUREINPICTURE:\n      trackMediaPictureInPictureChange({ id, player, pictureInPicture: false });\n      break;\n\n    case InternalVimeoEvent.QUALITYCHANGE:\n      trackMediaQualityChange({ id, player, newQuality: asQualityChangeEvent(eventData).quality });\n      break;\n\n    case InternalVimeoEvent.CUEPOINT:\n      trackMediaSelfDescribingEvent({\n        id,\n        player,\n        event: {\n          schema: VimeoSchema.CUEPOINT,\n          data: asVimeoPlayerCuePointData(eventData),\n        },\n      });\n      break;\n\n    case InternalVimeoEvent.TEXTTRACKCHANGE:\n      trackMediaSelfDescribingEvent({\n        id,\n        player,\n        event: {\n          schema: VimeoSchema.TEXT_TRACK_CHANGE,\n          data: asTextTrackData(eventData),\n        },\n      });\n      break;\n\n    case InternalVimeoEvent.INTERACTIVEHOTSPOTCLICKED:\n      trackMediaSelfDescribingEvent({\n        id,\n        player,\n        event: {\n          schema: VimeoSchema.HOTSPOT_CLICK,\n          data: {},\n        },\n        context: [{ schema: VimeoSchema.INTERACTION, data: asVimeoInteractiveHotspotClickedData(eventData) }],\n      });\n      break;\n\n    case InternalVimeoEvent.INTERACTIVEOVERLAYPANELCLICKED:\n      trackMediaSelfDescribingEvent({\n        id,\n        player,\n        event: {\n          schema: VimeoSchema.OVERLAY_CLICK,\n          data: {},\n        },\n        context: [{ schema: VimeoSchema.INTERACTION, data: asVimeoInteractiveOverlayPanelClickedData(eventData) }],\n      });\n      break;\n\n    case InternalVimeoEvent.CHAPTERCHANGE:\n      trackMediaSelfDescribingEvent({\n        id,\n        player,\n        event: {\n          schema: VimeoSchema.CHAPTER_CHANGE,\n          data: asChapterData(eventData),\n        },\n      });\n      break;\n\n    case InternalVimeoEvent.LOADED:\n      updateMediaTracking({ id, player });\n      break;\n\n    case InternalVimeoEvent.PROGRESS:\n      updateMediaTracking({ id, player });\n      break;\n\n    case MediaEventType.Ready:\n      getVimeoMetadata(trackedPlayer)\n        .then((entities) => trackMediaReady({ id, player, context: [entities] }))\n        .catch(trackError);\n      break;\n  }\n}\n","import Player, { EventMap } from '@vimeo/player';\n\nimport { LOG } from '@snowplow/tracker-core';\nimport { BrowserPlugin } from '@snowplow/browser-tracker-core';\nimport { MediaEventType, MediaTrackingConfiguration, MediaType } from '@snowplow/browser-plugin-media/src/types';\nimport { SnowplowMediaPlugin, endMediaTracking, startMediaTracking } from '@snowplow/browser-plugin-media';\n\nimport { trackEvent } from './mediaPluginBinding';\nimport { CapturableInternalVimeoEvents, InternalVimeoEvent } from './events';\nimport { EventData, TrackedPlayer, VimeoTrackingConfiguration } from './types';\nimport { filterVimeoEvents, getErrorCallback, getVimeoMediaAttributes } from './utils';\n\nexport function VimeoTrackingPlugin(): BrowserPlugin {\n  return SnowplowMediaPlugin();\n}\n\nconst trackedPlayers: Record<string, TrackedPlayer> = {};\n\n/** Start tracking a Vimeo Iframe element or existing Vimeo {@link Player} */\nexport function startVimeoTracking(args: VimeoTrackingConfiguration): void {\n  const { video, ...config } = args;\n  if (video === undefined) {\n    LOG.error(\"Property 'video' is undefined\");\n  } else if (video instanceof HTMLIFrameElement && video.nodeName !== 'IFRAME') {\n    LOG.error(\"Property 'video' is not an Iframe\");\n  } else {\n    const internalConfig = filterVimeoEvents(config as VimeoTrackingConfiguration);\n\n    if ((video as HTMLIFrameElement).nodeName === 'IFRAME') {\n      startVimeoTrackingOnIframe(video as HTMLIFrameElement, internalConfig);\n    } else {\n      startVimeoTrackingOnPlayer(video as Player, internalConfig);\n    }\n  }\n}\n\n/**\n * Ends media tracking with the given ID if previously started. Clears local state for the media tracking.\n * Clears all listeners set by the plugin on the Vimeo player.\n */\nexport function endVimeoTracking(id: string): void {\n  const playerToEnd = trackedPlayers[id];\n  if (playerToEnd === undefined) {\n    LOG.error(`No Vimeo player found with ID ${id}`);\n  } else {\n    Object.entries(playerToEnd.eventListeners).forEach(([eventType, callback]) =>\n      playerToEnd.player.off(eventType as keyof EventMap, callback)\n    );\n    endMediaTracking({ id: playerToEnd.config.id });\n  }\n}\n\n/** Enables the tracking of Vimeo events on an Iframe */\nfunction startVimeoTrackingOnIframe(iframe: HTMLIFrameElement, config: VimeoTrackingConfiguration): void {\n  setInitialPlayerAttributes({\n    player: new Player(iframe),\n    config,\n    eventListeners: {},\n  });\n}\n\n/** Enables the tracking of Vimeo events on an existing Vimeo player */\nfunction startVimeoTrackingOnPlayer(player: Player, config: VimeoTrackingConfiguration): void {\n  setInitialPlayerAttributes({\n    player,\n    config,\n    eventListeners: {},\n  });\n}\n\n/** Set the initial Media plugin player configuration before tracking begins */\nasync function setInitialPlayerAttributes(trackedPlayer: TrackedPlayer): Promise<void> {\n  trackedPlayer.config.player = {\n    ...(await getVimeoMediaAttributes(trackedPlayer)),\n    ...trackedPlayer.config.player,\n    ...{ mediaType: MediaType.Video, playerType: 'com.vimeo' },\n  };\n\n  trackedPlayers[trackedPlayer.config.id] = trackedPlayer;\n  startTracking(trackedPlayer);\n}\n\n/** Attaches listeners to the Vimeo player for each event in {@link VimeoTrackingConfiguration.vimeoCaptureEvents | vimeoCaptureEvents} */\nasync function startTracking(trackedPlayer: TrackedPlayer): Promise<void> {\n  const errorCallback = getErrorCallback(trackedPlayer);\n\n  startMediaTracking(trackedPlayer.config as MediaTrackingConfiguration);\n\n  trackEvent(trackedPlayer, MediaEventType.Ready, {}, errorCallback);\n\n  // Track every event, event filtering is done by the Media Plugin\n  Object.keys(InternalVimeoEvent).forEach((eventName) => {\n    const eventType = InternalVimeoEvent[eventName as keyof typeof InternalVimeoEvent];\n    // Don't attach listeners for Vimeo events that haven't been passed in with the Media Plugin config\n    if (\n      CapturableInternalVimeoEvents.includes(eventType) &&\n      !trackedPlayer.config.vimeoCaptureEvents?.includes(eventType)\n    ) {\n      return;\n    }\n\n    // Create a named function to allow us to remove the listener later\n    const callback = (eventData: EventData | unknown) => trackEvent(trackedPlayer, eventType, eventData, errorCallback);\n    trackedPlayer.eventListeners[eventType] = callback;\n\n    trackedPlayer.player.on(eventType, callback);\n  });\n}\n","import {\n  newTracker,\n  trackPageView,\n  enableActivityTracking,\n} from \"@snowplow/browser-tracker\";\nimport React from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { FormTrackingPlugin } from \"@snowplow/browser-plugin-form-tracking\";\nimport { YouTubeTrackingPlugin } from \"@snowplow/browser-plugin-youtube-tracking\";\nimport { VimeoTrackingPlugin } from \"@snowplow/browser-plugin-vimeo-tracking\";\nimport { SnowplowMediaPlugin } from \"@snowplow/browser-plugin-media\";\nimport CaptureTrackedEventsPlugin from \"./plugins/captureTrackedEventsPlugin\";\n\nvar tracker;\n\nconst initializeTracker = (endpoint) => {\n  tracker = newTracker(\"ns1\", endpoint, {\n    plugins: [\n      FormTrackingPlugin(),\n      YouTubeTrackingPlugin(),\n      VimeoTrackingPlugin(),\n      SnowplowMediaPlugin(),\n      CaptureTrackedEventsPlugin(),\n    ],\n  });\n\n  enableActivityTracking({\n    minimumVisitLength: 5,\n    heartbeatDelay: 5,\n  });\n};\n\nconst useLocationChange = () => {\n  const location = useLocation();\n  React.useEffect(() => {\n    trackPageView();\n  }, [location]);\n};\n\nconst isTrackerInitialized = () => tracker !== undefined;\n\nexport { tracker, initializeTracker, useLocationChange, isTrackerInitialized };\n","function afterTrack(payload) {\n  console.log(payload);\n  if (payload.ue_pr && payload.co) {\n    let event = JSON.parse(payload.ue_pr);\n    let context = JSON.parse(payload.co);\n\n    window.dispatchEvent(\n      new CustomEvent(\"spEvent\", {\n        detail: { id: payload.eid, event: event, context: context },\n      })\n    );\n  }\n}\n\n/**\n * A tracker plugin that captures tracked events and dispatches them to the window.\n * This is used internally in the app to display the tracked events in the UI.\n * @returns {object} Plugin object.\n */\nexport default function CaptureTrackedEventsPlugin() {\n  return {\n    afterTrack,\n  };\n}\n","import './App.css';\nimport { initializeTracker, isTrackerInitialized } from './tracker';\nimport { useState } from \"react\";\n\nfunction submitForm(event) {\n  event.preventDefault();\n  const form = event.target;\n  const formData = new FormData(form);\n  const formValues = Object.fromEntries(formData.entries());\n\n  const endpoint = formValues.endpoint;\n  if (!endpoint) {\n    alert(\"Please enter a collector endpoint URI\");\n    return false;\n  }\n\n  initializeTracker(endpoint);\n  localStorage.setItem(\"endpoint\", endpoint);\n\n  return true;\n}\n\nfunction CreateTrackerWrapper({ children }) {\n  const [initialized, setInitialized] = useState(isTrackerInitialized());\n\n  if (initialized) {\n    return children;\n  }\n\n  return (\n    <div className=\"App\">\n      <h1>Snowplow JavaScript Tracker Demo</h1>\n\n      <p>This is a demo of the browser tracker in a React app.</p>\n\n      <p>Use the form below to configure the tracker.</p>\n\n      <hr />\n\n      <form\n        onSubmit={(event) => {\n          if (submitForm(event)) {\n            setInitialized(true);\n          }\n        }}\n      >\n        <p>\n          <label htmlFor=\"endpoint\">\n            <strong>Collector endpoint URI</strong> (you may use{\" \"}\n            <a href=\"https://docs.snowplow.io/docs/getting-started-with-micro/what-is-micro/\">\n              Snowplow Micro\n            </a>{\" \"}\n            over <a href=\"https://ngrok.com/\">ngrok</a>):\n          </label>\n          <input\n            type=\"text\"\n            id=\"endpoint\"\n            name=\"endpoint\"\n            size=\"50\"\n            placeholder=\"https://xxxx.ngrok-free.app\"\n            defaultValue={localStorage.getItem(\"endpoint\")}\n          />\n        </p>\n\n        <p>\n          <input className=\"button\" type=\"submit\" value=\"Create tracker\" />\n          &nbsp;\n          <button\n            className=\"button\"\n            onClick={() => {\n              initializeTracker(\"http://localhost:9090\");\n              setInitialized(true);\n            }}\n          >\n            Skip\n          </button>\n        </p>\n      </form>\n    </div>\n  );\n}\n\nexport default CreateTrackerWrapper;\n","export function getPath(path) {\n    const prefix = window.location.pathname.startsWith(\n      \"/snowplow-javascript-tracker-examples\"\n    )\n      ? \"/snowplow-javascript-tracker-examples/\"\n      : \"/\";\n    return prefix + path;\n}\n","import './App.css';\nimport { Link } from \"react-router-dom\";\nimport { useLocationChange } from './tracker';\nimport { enableAnonymousTracking, disableAnonymousTracking, trackStructEvent } from '@snowplow/browser-tracker';\nimport CreateTrackerWrapper from \"./createTrackerWrapper\";\nimport { getPath } from './helpers';\n\nfunction handleEnableAnonymousTracking() {\n  enableAnonymousTracking({\n    options: { withServerAnonymisation: true },\n  });\n}\n\nfunction handleEnableAnonymousTrackingWithSessionTracking() {\n  enableAnonymousTracking({\n    options: { withSessionTracking: true },\n  });\n}\n\nfunction handleDisableAnonymousTracking() {\n  disableAnonymousTracking();\n}\n\nfunction handleTrackStructuredEvent() {\n  trackStructEvent({\n    category: \"category\",\n    action: \"action\",\n  });\n}\n\nfunction App() {\n  useLocationChange();\n\n  return (\n    <div className=\"App\">\n      <h1>Welcome!</h1>\n      <dl>\n        <dt><Link to={getPath(\"snowplow\")}>About Snowplow</Link></dt>\n        <dt><Link to={getPath(\"form\")}>Form tracking demo</Link></dt>\n        <dt><Link to={getPath(\"iframe_form\")}>Form tracking demo in iframe</Link></dt>\n        <dt><Link to={getPath(\"youtube\")}>Youtube video tracking from Iframe</Link></dt>\n        <dt><Link to={getPath(\"youtube_player\")}>Youtube video tracking with YouTube Iframe API Player</Link></dt>\n        <dt><Link to={getPath(\"vimeo_iframe\")}>Vimeo tracking from Iframe</Link></dt>\n        <dt><Link to={getPath(\"vimeo_player\")}>Vimeo tracking with Vimeo Player</Link></dt>\n        <dt><Link to={getPath(\"media\")}>Custom media tracking demo</Link></dt>\n      </dl>\n\n      <p>\n        <button onClick={handleEnableAnonymousTracking}>Enable anonymous tracking</button>\n        &nbsp;\n        <button onClick={handleEnableAnonymousTrackingWithSessionTracking}>Enable anonymous tracking with session tracking</button>\n        &nbsp;\n        <button onClick={handleDisableAnonymousTracking}>Disable anonymous tracking</button>\n      </p>\n\n      <p>\n        <button onClick={handleTrackStructuredEvent}>Track a structured event</button>\n      </p>\n    </div>\n  );\n}\n\nfunction Wrapped() {\n  return (\n    <CreateTrackerWrapper>\n      <App />\n    </CreateTrackerWrapper>\n  );\n}\n\nexport default Wrapped;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { useLocationChange } from '../tracker';\nimport { Link } from \"react-router-dom\";\nimport CreateTrackerWrapper from \"../createTrackerWrapper\";\n\nfunction Snowplow() {\n  useLocationChange();\n  return (\n    <div className=\"App\">\n      <h1>Snowplow</h1>\n      <p>\n        Snowplow is a scalable open-source platform for rich, high quality, low-latency data collection. It is designed to collect high quality, complete behavioral data for enterprise business.\n      </p>\n      <p>\n        <Link to=\"/\">Go back</Link>\n      </p>\n    </div>\n  );\n}\n\nfunction Wrapped() {\n  return (\n    <CreateTrackerWrapper>\n      <Snowplow />\n    </CreateTrackerWrapper>\n  );\n}\n\nexport default Wrapped;\n","import { useLocationChange } from '../tracker';\nimport { Link } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport { enableFormTracking } from '@snowplow/browser-plugin-form-tracking';\nimport CreateTrackerWrapper from \"../createTrackerWrapper\";\nimport { getPath } from '../helpers';\n\nfunction Form() {\n    useLocationChange();\n    useEffect(() => {\n        enableFormTracking({\n            options: {\n                forms: { allowlist: ['formy-mcformface'] },\n                events: ['submit_form', 'change_form', 'focus_form']\n            },\n        });\n    });\n\n    return (\n        <div className=\"App\">\n            <h1>Form tracking demo</h1>\n\n            <p>\n                <Link to={getPath(\"\")}>Go back</Link>\n            </p>\n\n            <form id=\"myForm\" className=\"formy-mcformface\" onSubmit={() => alert('Submitted')}>\n                <fieldset id=\"fields\">\n                    <legend>Personal Info:</legend>\n                    <label htmlFor=\"fname\">First name:</label><br />\n                    <input type=\"text\" id=\"fname\" name=\"fname\" placeholder=\"John\" className=\"test\" /><br />\n                    <label htmlFor=\"lname\">Last name:</label><br />\n                    <input type=\"text\" id=\"lname\" name=\"lname\" placeholder=\"Doe\" /><br /><br />\n                    <input type=\"radio\" id=\"bike\" name=\"vehicle\" placeholder=\"Bike\" />\n                    <label htmlFor=\"bike\"> I have a bike</label><br />\n                </fieldset>\n                <label htmlFor=\"cars\">Choose a car:</label>\n                <select id=\"cars\" name=\"cars\">\n                    <option id=\"volvo\" value=\"volvo\">Volvo</option>\n                    <option id=\"saab\" value=\"saab\">Saab</option>\n                </select>\n                <br />\n                <label htmlFor=\"message\">Enter a message:</label><br />\n                <textarea id=\"message\" name=\"message\" rows=\"10\" cols=\"30\" defaultValue={'This is a message'}></textarea><br />\n                <input type=\"checkbox\" id=\"terms\" name=\"terms\" value=\"agree\" />\n                <label htmlFor=\"terms\"> Agree to terms</label><br />\n                <input type=\"submit\" value=\"Submit\" id=\"submit\" />\n            </form>\n\n            <h3>Untracked form</h3>\n\n            <form id=\"otherForm\" className=\"forman\" onSubmit={() => alert('Submitted')}>\n                <fieldset id=\"fields\">\n                    <legend>Personal Info:</legend>\n                    <label htmlFor=\"fname\">First name:</label><br />\n                    <input type=\"text\" id=\"fname\" name=\"fname\" placeholder=\"John\" className=\"test\" /><br />\n                </fieldset>\n                <input type=\"submit\" value=\"Submit\" id=\"submit\" />\n            </form>\n        </div>\n    );\n}\n\nfunction Wrapped() {\n  return (\n    <CreateTrackerWrapper>\n      <Form />\n    </CreateTrackerWrapper>\n  );\n}\n\nexport default Wrapped;\n","import { useLocationChange } from '../tracker';\nimport { Link } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport { enableFormTracking } from '@snowplow/browser-plugin-form-tracking';\nimport CreateTrackerWrapper from \"../createTrackerWrapper\";\nimport { getPath } from '../helpers';\n\nfunction IframeForm() {\n    useLocationChange();\n\n    useEffect(() => {\n        const formHtml = '<form><input type=\"text\" name=\"first_name\"><br><input type=\"submit\" value=\"Submit\"></form>';\n\n        let iframe = document.getElementById('form_iframe');\n        let iframeDocument = iframe.contentWindow.document.open();\n        iframeDocument.open();\n        iframeDocument.write(formHtml);\n        iframeDocument.close();\n\n        let forms = iframe.contentWindow.document.getElementsByTagName('form');\n        enableFormTracking({\n            options: {\n                forms: forms\n            },\n        });\n    });\n\n    return (\n        <div className=\"App\">\n            <h1>Form tracking demo</h1>\n\n            <p>\n                <Link to={getPath(\"\")}>Go back</Link>\n            </p>\n\n            <iframe id=\"form_iframe\" title=\"form_iframe\" style={{width: 500, height: 500}}></iframe>\n        </div>\n    );\n}\n\nfunction Wrapped() {\n  return (\n    <CreateTrackerWrapper>\n      <IframeForm />\n    </CreateTrackerWrapper>\n  );\n}\n\nexport default Wrapped;\n","import { startYouTubeTracking } from \"@snowplow/browser-plugin-youtube-tracking\";\nimport React, { useEffect } from \"react\";\nimport CreateTrackerWrapper from \"../createTrackerWrapper\";\n\nfunction YoutubeTrack() {\n  const videoId = \"youtube\";\n\n  useEffect(() => {\n    startYouTubeTracking({\n      id: \"youtube\",\n      captureEvents: [\"DefaultEvents\", \"error\", \"ping\"],\n      video: videoId,\n      pings: {\n        pingInterval: 5,\n      },\n    });\n  }, []);\n\n  return (\n    <iframe\n      id={videoId}\n      width=\"560\"\n      height=\"315\"\n      src=\"https://www.youtube.com/embed/zSM4ZyVe8xs\"\n      title=\"YouTube video player\"\n      frameBorder=\"0\"\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n      allowFullScreen\n    ></iframe>\n  );\n}\n\nfunction Wrapped() {\n  return (\n    <CreateTrackerWrapper>\n      <YoutubeTrack />\n    </CreateTrackerWrapper>\n  );\n}\n\nexport default Wrapped;\n","import { enableYouTubeTracking } from \"@snowplow/browser-plugin-youtube-tracking\";\nimport React, { useEffect } from \"react\";\nimport CreateTrackerWrapper from \"../createTrackerWrapper\";\n\nfunction loadVideoAndTrack(elemId, videoId) {\n  new window.YT.Player(elemId, {\n    videoId,\n    events: {\n      onReady: (e) =>\n        enableYouTubeTracking({\n          // `e.target` is the instance of `YT.Player` created\n          id: e.target,\n          options: { captureEvents: [\"DefaultEvents\", \"error\"] },\n        }),\n    },\n  });\n}\n\nfunction loadYouTubeIframeAPI(elemId, videoId) {\n  const tag = document.createElement(\"script\");\n  tag.src = \"https://www.youtube.com/iframe_api\";\n\n  // onYouTubeIframeAPIReady loads the video after the script is loaded\n  window.onYouTubeIframeAPIReady = () => loadVideoAndTrack(elemId, videoId);\n\n  const firstScriptTag = document.getElementsByTagName(\"script\")[0];\n  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n}\n\nfunction YoutubeTrack() {\n  const elemId = \"youtube\";\n  const videoId = \"zSM4ZyVe8xs\";\n\n  useEffect(() => {\n    if (!window.YT) {\n      loadYouTubeIframeAPI(elemId, videoId);\n    } else {\n      loadVideoAndTrack(elemId, videoId);\n    }\n  }, []);\n\n  return <div id={elemId}></div>;\n}\n\nfunction Wrapped() {\n  return (\n    <CreateTrackerWrapper>\n      <YoutubeTrack />\n    </CreateTrackerWrapper>\n  );\n}\n\nexport default Wrapped;\n","import * as plugin from \"@snowplow/browser-plugin-media\";\n\nlet lastAdPlayedAt = new Date().getTime() - 30 * 1000;\nlet adProgress = 0;\n\nexport function refreshAds(id, getPlayingAdStage, setPlayingAdStage) {\n  const video = document.getElementById(\"movie\");\n  const currentTime = new Date().getTime();\n  const timeDiff = currentTime - lastAdPlayedAt;\n\n  if (getPlayingAdStage === undefined || setPlayingAdStage === undefined) {\n    return;\n  }\n  const playingAdStage = getPlayingAdStage();\n\n  // not playing ad yet\n  if (playingAdStage === 0) {\n    // is playing video and 30 seconds since last ad? then play ad\n    if (!video.paused && timeDiff > 30 * 1000) {\n      video.pause();\n\n      plugin.trackMediaAdBreakStart({\n        id,\n        adBreak: {\n          name: \"break\",\n          breakId: `${new Date().getTime() % 1000}`,\n          breakType: plugin.MediaPlayerAdBreakType.Linear,\n        },\n      });\n      plugin.trackMediaAdStart({\n        id,\n        ad: {\n          adId: `${new Date().getTime() % 1000}`,\n          name: \"Ad 1\",\n          creativeId: \"ad-1\",\n          duration: 4,\n          skippable: true,\n        },\n      });\n\n      lastAdPlayedAt = currentTime;\n      setPlayingAdStage(1);\n    }\n  }\n  // playing ads\n  else if (playingAdStage === 1 || playingAdStage === 2) {\n    // end of ad\n    if (adProgress === 4) {\n      plugin.trackMediaAdComplete({ id });\n      lastAdPlayedAt = currentTime;\n\n      if (playingAdStage === 1) {\n        plugin.trackMediaAdStart({\n          id,\n          ad: {\n            adId: `${new Date().getTime() % 1000}`,\n            name: \"Ad 2\",\n            creativeId: \"ad-2\",\n            duration: 4,\n            skippable: true,\n          },\n        });\n\n        setPlayingAdStage(2);\n      } else {\n        plugin.trackMediaAdBreakEnd({ id });\n\n        setPlayingAdStage(0);\n        video.play();\n      }\n    }\n    // 3/4 playback\n    else if (adProgress === 3) {\n      plugin.trackMediaAdThirdQuartile({ id });\n    }\n    // 2/4 playback\n    else if (adProgress === 2) {\n      plugin.trackMediaAdMidpoint({ id });\n    }\n    // 1/4 playback\n    else if (adProgress === 1) {\n      plugin.trackMediaAdFirstQuartile({ id });\n    }\n  }\n\n  adProgress = (adProgress + 1) % 5;\n}\n\nexport function skipAd(id, getPlayingAdStage, setPlayingAdStage) {\n  if (getPlayingAdStage === undefined) {\n    return;\n  }\n  let playingAdStage = getPlayingAdStage();\n\n  plugin.trackMediaAdSkip({ id });\n\n  if (playingAdStage === 1) {\n    plugin.trackMediaAdStart({\n      id,\n      ad: {\n        adId: `${new Date().getTime() % 1000}`,\n        name: \"Ad 2\",\n        creativeId: \"ad-2\",\n        duration: 4,\n        skippable: true,\n      },\n    });\n\n    adProgress = 1;\n    lastAdPlayedAt = new Date().getTime();\n    setPlayingAdStage(2);\n  } else if (playingAdStage === 2) {\n    plugin.trackMediaAdBreakEnd({ id });\n\n    lastAdPlayedAt = new Date().getTime();\n    adProgress = 0;\n    setPlayingAdStage(0);\n\n    const video = document.getElementById(\"movie\");\n    video.play();\n  }\n}\n","import React, { useEffect, useState } from \"react\";\nimport * as plugin from \"@snowplow/browser-plugin-media\";\nimport \"./video.css\";\nimport { refreshAds, skipAd } from \"./adHelpers\";\nimport { v4 as uuid } from 'uuid';\n\nlet id; // unique for each video playback (each startMediaTracking call)\n\nfunction Video() {\n  let getPlayingAdStage;\n  let setPlayingAdStage;\n\n  useEffect(() => {\n    console.log(\"start media tracking\");\n    id = uuid();\n    plugin.startMediaTracking({\n      id,\n      player: getPlayer(),\n      pings: true,\n      boundaries: [25, 50, 75]\n    });\n\n    const adInterval = setInterval(() => {\n      refreshAds(id, getPlayingAdStage, setPlayingAdStage);\n    }, 1000);\n\n    return function cleanup() {\n      console.log(\"end media tracking\");\n      clearInterval(adInterval);\n      plugin.endMediaTracking({ id });\n    };\n  });\n\n  return (\n    <div className=\"outer-container\">\n      <div className=\"inner-container\">\n        <video\n          id=\"movie\"\n          width=\"600\"\n          controls\n          onPlay={function () {\n            plugin.trackMediaPlay({ id, player: getPlayer(this) });\n          }}\n          onPlaying={function () {\n            plugin.updateMediaTracking({ id, player: getPlayer(this) });\n          }}\n          onPause={function () {\n            plugin.trackMediaPause({ id, player: getPlayer(this) });\n          }}\n          onEnded={function () {\n            plugin.trackMediaEnd({ id, player: getPlayer(this) });\n          }}\n          onTimeUpdate={function () {\n            plugin.updateMediaTracking({ id, player: getPlayer(this) });\n          }}\n          onAbort={() => {}}\n          onCanPlay={() => {}}\n          onCanPlayThrough={() => {}}\n          onDurationChange={() => {}}\n          onEmptied={() => {}}\n          onError={function () {\n            plugin.trackMediaError({\n              id,\n              errorDescription: \"Error loading video\",\n              player: getPlayer(this),\n            });\n          }}\n          onLoadedData={() => {}}\n          onLoadedMetadata={() => {}}\n          onLoadStart={() => {}}\n          onProgress={() => {}} // Fired periodically as the browser loads a resource\n          onRateChange={function () {\n            let player = getPlayer(this);\n            plugin.trackMediaPlaybackRateChange({\n              id,\n              newRate: player.playbackRate,\n              player: player,\n            });\n          }}\n          onSeeked={function () {\n            plugin.trackMediaSeekEnd({ id, player: getPlayer(this) });\n          }}\n          // Note: not tracking the the `seeking` event as seek start because it is fired after seeking starts when the current time of the video is already changed.\n          // onSeeking={function () {\n          //   plugin.trackMediaSeekStart({ id, player: getPlayer(this) });\n          // }}\n          onStalled={() => {}}\n          onSuspend={() => {}}\n          onVolumeChange={function () {\n            let player = getPlayer(this);\n            plugin.trackMediaVolumeChange({\n              id,\n              newVolume: player.volume,\n              player: player,\n            });\n          }}\n          onWaiting={function () {\n            plugin.trackMediaBufferStart({ id, player: getPlayer(this) });\n          }}\n        >\n          <source\n            src=\"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\"\n            type=\"video/mp4\"\n          />\n        </video>\n\n        <Ad\n          callback={(update) => {\n            getPlayingAdStage = update.getPlayingAdStage;\n            setPlayingAdStage = update.setPlayingAdStage;\n          }}\n          skipAd={() => skipAd(id, getPlayingAdStage, setPlayingAdStage)}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction Ad({ callback, skipAd }) {\n  const [playingAdStage, setPlayingAdStage] = useState(0);\n\n  callback({\n    setPlayingAdStage: (playingAdStage) => {\n      setPlayingAdStage(playingAdStage);\n    },\n    getPlayingAdStage: () => playingAdStage,\n  });\n\n  if (playingAdStage > 0) {\n    return (\n      <div className=\"video-overlay\">\n        <h1>Playing ad #{playingAdStage}</h1>\n\n        <button onClick={skipAd}>Skip ad</button>\n        <br />\n        <button\n          onClick={() => plugin.trackMediaAdClick({ id, player: getPlayer() })}\n        >\n          Click ad\n        </button>\n      </div>\n    );\n  } else {\n    return null;\n  }\n}\n\nfunction getPlayer(el) {\n  let video = el ?? document.getElementById(\"movie\");\n\n  let a = {\n    label: 'Bugs Bunny',\n    mediaType: 'video',\n    playerType: 'html5',\n    currentTime: video?.currentTime ?? 0,\n    duration: video?.duration,\n    muted: video?.muted,\n    loop: video?.loop,\n    paused: video?.paused,\n    ended: video?.ended,\n    playbackRate: video?.playbackRate,\n    volume: (video?.muted ?? false) ? 0 : video?.volume * 100,\n  };\n  return a;\n}\n\nexport default Video;\n","export const mediaSchemas = [\"iglu:com.snowplowanalytics.snowplow.media/\"];\nexport const vimeoSchemas = [...mediaSchemas, \"iglu:com.vimeo/\"];\n","import { useState, useEffect } from \"react\";\nimport \"./table.css\";\nimport { mediaSchemas } from \"../constants\";\n\nlet allEvents = [];\n\nconst createEventHandler = (schemas) => {\n  return (e) => {\n    const { id, event, context } = e.detail;\n\n    if (schemas.some((s) => event.data.schema.includes(s))) {\n      allEvents.push({\n        id: id,\n        event: event.data,\n        context: context.data,\n      });\n    }\n  };\n};\n\nfunction MediaEvents({ schemas = mediaSchemas }) {\n  const [eventList, setEventList] = useState([]);\n\n  useEffect(() => {\n    window.addEventListener(\"spEvent\", createEventHandler(schemas));\n  }, [schemas]);\n\n  useEffect(() => {\n    let interval = setInterval(() => setEventList([...allEvents]), 1000);\n\n    return function cleanup() {\n      clearInterval(interval);\n    };\n  });\n\n  return (\n    <table>\n      <thead>\n        <tr>\n          <th colSpan={2}>Event</th>\n          <th colSpan={12}>Player entity</th>\n          <th colSpan={12}>Session entity</th>\n          <th colSpan={3}>Ad break entity</th>\n          <th colSpan={7}>Ad entity</th>\n        </tr>\n        <tr>\n          <th>Schema</th>\n          <th>Data</th>\n\n          <th>Label</th>\n          <th>Media type</th>\n          <th>Player type</th>\n          <th>Current time</th>\n          <th>Duration</th>\n          <th>Ended</th>\n          <th>Loop</th>\n          <th>Muted</th>\n          <th>Paused</th>\n          <th>Playback rate</th>\n          <th>Volume</th>\n\n          <th>Session ID</th>\n          <th>Content watched (s)</th>\n          <th>Time played (s)</th>\n          <th>Time played muted (s)</th>\n          <th>Time paused (s)</th>\n          <th>Time spent ads (s)</th>\n          <th>Time buffering (s)</th>\n          <th>Average playback rate</th>\n          <th>Ads</th>\n          <th>Ads skipped</th>\n          <th>Ads clicked</th>\n          <th>Ad breaks</th>\n\n          <th>Name</th>\n          <th>ID</th>\n          <th>Type</th>\n\n          <th>Name</th>\n          <th>ID</th>\n          <th>Creative ID</th>\n          <th>Pod position</th>\n          <th>Duration</th>\n          <th>Skippable</th>\n        </tr>\n      </thead>\n      <tbody>\n        {eventList\n          .slice(0)\n          .reverse()\n          .map((e) => (\n            <EventRow key={e.id} event={e.event} context={e.context} />\n          ))}\n      </tbody>\n    </table>\n  );\n}\n\nfunction EventRow({ event, context }) {\n  let mediaPlayer = context.find((e) => e.schema.includes(\"/media_player/\"));\n  let session = context.find((e) => e.schema.includes(\"/session/\"));\n  let adBreak = context.find((e) => e.schema.includes(\"/ad_break/\"));\n  let ad = context.find((e) => e.schema.includes(\"/ad/\"));\n\n  return (\n    <tr>\n      <th>{event.schema.split(\"/\")[1]}</th>\n      <td>\n        {Object.keys(event.data).map((key) => (\n          <>\n            {key}: {JSON.stringify(event.data[key])}\n            <br />\n          </>\n        ))}\n      </td>\n\n      <td>{mediaPlayer.data.label}</td>\n      <td>{mediaPlayer.data.mediaType}</td>\n      <td>{mediaPlayer.data.playerType}</td>\n      <td>{mediaPlayer.data.currentTime}</td>\n      <td>{mediaPlayer.data.duration}</td>\n      <td>{mediaPlayer.data.ended ? \"T\" : \"F\"}</td>\n      <td>{mediaPlayer.data.loop ? \"T\" : \"F\"}</td>\n      <td>{mediaPlayer.data.muted ? \"T\" : \"F\"}</td>\n      <td>{mediaPlayer.data.paused ? \"T\" : \"F\"}</td>\n      <td>{mediaPlayer.data.playbackRate}</td>\n      <td>{mediaPlayer.data.volume}</td>\n\n      <td>{session.data.mediaSessionId}</td>\n      <td>{session.data.contentWatched}</td>\n      <td>{session.data.timePlayed}</td>\n      <td>{session.data.timePlayedMuted}</td>\n      <td>{session.data.timePaused}</td>\n      <td>{session.data.timeSpentAds}</td>\n      <td>{session.data.timeBuffering}</td>\n      <td>{session.data.avgPlaybackRate}</td>\n      <td>{session.data.ads}</td>\n      <td>{session.data.adsSkipped}</td>\n      <td>{session.data.adsClicked}</td>\n      <td>{session.data.adBreaks}</td>\n\n      <td>{adBreak?.data.name}</td>\n      <td>{adBreak?.data.breakId}</td>\n      <td>{adBreak?.data.breakType}</td>\n\n      <td>{ad?.data.name}</td>\n      <td>{ad?.data.adId}</td>\n      <td>{ad?.data.creativeId}</td>\n      <td>{ad?.data.podPosition}</td>\n      <td>{ad?.data.duration}</td>\n      <td>{ad === undefined ? null : ad.data.skippable ? \"T\" : \"F\"}</td>\n    </tr>\n  );\n}\n\nexport default MediaEvents;\n","import { useLocationChange } from '../tracker';\nimport Video from '../components/video';\nimport MediaEvents from '../components/mediaEvents';\nimport CreateTrackerWrapper from \"../createTrackerWrapper\";\n\nfunction Media() {\n  useLocationChange();\n  return (\n    <div className=\"App\">\n      <Video />\n\n      <MediaEvents />\n    </div>\n  );\n}\n\nfunction Wrapped() {\n  return (\n    <CreateTrackerWrapper>\n      <Media />\n    </CreateTrackerWrapper>\n  );\n}\n\nexport default Wrapped;\n","import React, { useEffect, useRef } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport { startVimeoTracking } from \"@snowplow/browser-plugin-vimeo-tracking\";\nimport CreateTrackerWrapper from \"../createTrackerWrapper\";\nimport MediaEvents from \"../components/mediaEvents\";\nimport { vimeoSchemas } from \"../constants\";\n\nfunction VimeoIframe() {\n  const id = uuidv4();\n  const iframeRef = useRef(null);\n\n  useEffect(() => {\n    startVimeoTracking({\n      video: iframeRef.current,\n      id,\n      boundaries: [50],\n    });\n  }, [id]);\n\n  return (\n    <>\n      <iframe\n        ref={iframeRef}\n        id=\"vimeo\"\n        width={640}\n        height={360}\n        src=\"https://player.vimeo.com/video/808787686?h=3044aad004\"\n        title=\"Vimeo Example\"\n        allowFullScreen\n      ></iframe>\n      <MediaEvents schemas={vimeoSchemas} />\n    </>\n  );\n}\n\nfunction Wrapped() {\n  return (\n    <CreateTrackerWrapper>\n      <VimeoIframe />\n    </CreateTrackerWrapper>\n  );\n}\n\nexport default Wrapped;\n","/*! @vimeo/player v2.23.0 | (c) 2024 Vimeo | MIT License | https://github.com/vimeo/player.js */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _regeneratorRuntime() {\n  _regeneratorRuntime = function () {\n    return exports;\n  };\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function (obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function (method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function (skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function () {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function (exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function (type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function (record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function (finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    catch: function (tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function (iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !_isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\n/**\n * @module lib/functions\n */\n\n/**\n * Check to see this is a node environment.\n * @type {Boolean}\n */\n/* global global */\nvar isNode = typeof global !== 'undefined' && {}.toString.call(global) === '[object global]';\n\n/**\n * Get the name of the method for a given getter or setter.\n *\n * @param {string} prop The name of the property.\n * @param {string} type Either get or set.\n * @return {string}\n */\nfunction getMethodName(prop, type) {\n  if (prop.indexOf(type.toLowerCase()) === 0) {\n    return prop;\n  }\n  return \"\".concat(type.toLowerCase()).concat(prop.substr(0, 1).toUpperCase()).concat(prop.substr(1));\n}\n\n/**\n * Check to see if the object is a DOM Element.\n *\n * @param {*} element The object to check.\n * @return {boolean}\n */\nfunction isDomElement(element) {\n  return Boolean(element && element.nodeType === 1 && 'nodeName' in element && element.ownerDocument && element.ownerDocument.defaultView);\n}\n\n/**\n * Check to see whether the value is a number.\n *\n * @see http://dl.dropboxusercontent.com/u/35146/js/tests/isNumber.html\n * @param {*} value The value to check.\n * @param {boolean} integer Check if the value is an integer.\n * @return {boolean}\n */\nfunction isInteger(value) {\n  // eslint-disable-next-line eqeqeq\n  return !isNaN(parseFloat(value)) && isFinite(value) && Math.floor(value) == value;\n}\n\n/**\n * Check to see if the URL is a Vimeo url.\n *\n * @param {string} url The url string.\n * @return {boolean}\n */\nfunction isVimeoUrl(url) {\n  return /^(https?:)?\\/\\/((((player|www)\\.)?vimeo\\.com)|((player\\.)?[a-zA-Z0-9-]+\\.videoji\\.hk))(?=$|\\/)/.test(url);\n}\n\n/**\n * Check to see if the URL is for a Vimeo embed.\n *\n * @param {string} url The url string.\n * @return {boolean}\n */\nfunction isVimeoEmbed(url) {\n  var expr = /^https:\\/\\/player\\.((vimeo\\.com)|([a-zA-Z0-9-]+\\.videoji\\.hk))\\/video\\/\\d+/;\n  return expr.test(url);\n}\nfunction getOembedDomain(url) {\n  var match = (url || '').match(/^(?:https?:)?(?:\\/\\/)?([^/?]+)/);\n  var domain = (match && match[1] || '').replace('player.', '');\n  if (domain.endsWith('.videoji.hk')) {\n    return domain;\n  }\n  return 'vimeo.com';\n}\n\n/**\n * Get the Vimeo URL from an element.\n * The element must have either a data-vimeo-id or data-vimeo-url attribute.\n *\n * @param {object} oEmbedParameters The oEmbed parameters.\n * @return {string}\n */\nfunction getVimeoUrl() {\n  var oEmbedParameters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var id = oEmbedParameters.id;\n  var url = oEmbedParameters.url;\n  var idOrUrl = id || url;\n  if (!idOrUrl) {\n    throw new Error('An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.');\n  }\n  if (isInteger(idOrUrl)) {\n    return \"https://vimeo.com/\".concat(idOrUrl);\n  }\n  if (isVimeoUrl(idOrUrl)) {\n    return idOrUrl.replace('http:', 'https:');\n  }\n  if (id) {\n    throw new TypeError(\"\\u201C\".concat(id, \"\\u201D is not a valid video id.\"));\n  }\n  throw new TypeError(\"\\u201C\".concat(idOrUrl, \"\\u201D is not a vimeo.com url.\"));\n}\n\n/* eslint-disable max-params */\n/**\n * A utility method for attaching and detaching event handlers\n *\n * @param {EventTarget} target\n * @param {string | string[]} eventName\n * @param {function} callback\n * @param {'addEventListener' | 'on'} onName\n * @param {'removeEventListener' | 'off'} offName\n * @return {{cancel: (function(): void)}}\n */\nvar subscribe = function subscribe(target, eventName, callback) {\n  var onName = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'addEventListener';\n  var offName = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'removeEventListener';\n  var eventNames = typeof eventName === 'string' ? [eventName] : eventName;\n  eventNames.forEach(function (evName) {\n    target[onName](evName, callback);\n  });\n  return {\n    cancel: function cancel() {\n      return eventNames.forEach(function (evName) {\n        return target[offName](evName, callback);\n      });\n    }\n  };\n};\n\nvar arrayIndexOfSupport = typeof Array.prototype.indexOf !== 'undefined';\nvar postMessageSupport = typeof window !== 'undefined' && typeof window.postMessage !== 'undefined';\nif (!isNode && (!arrayIndexOfSupport || !postMessageSupport)) {\n  throw new Error('Sorry, the Vimeo Player API is not available in this browser.');\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n/*!\n * weakmap-polyfill v2.0.4 - ECMAScript6 WeakMap polyfill\n * https://github.com/polygonplanet/weakmap-polyfill\n * Copyright (c) 2015-2021 polygonplanet <polygon.planet.aqua@gmail.com>\n * @license MIT\n */\n\n(function (self) {\n\n  if (self.WeakMap) {\n    return;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  var hasDefine = Object.defineProperty && function () {\n    try {\n      // Avoid IE8's broken Object.defineProperty\n      return Object.defineProperty({}, 'x', {\n        value: 1\n      }).x === 1;\n    } catch (e) {}\n  }();\n  var defineProperty = function (object, name, value) {\n    if (hasDefine) {\n      Object.defineProperty(object, name, {\n        configurable: true,\n        writable: true,\n        value: value\n      });\n    } else {\n      object[name] = value;\n    }\n  };\n  self.WeakMap = function () {\n    // ECMA-262 23.3 WeakMap Objects\n    function WeakMap() {\n      if (this === void 0) {\n        throw new TypeError(\"Constructor WeakMap requires 'new'\");\n      }\n      defineProperty(this, '_id', genId('_WeakMap'));\n\n      // ECMA-262 23.3.1.1 WeakMap([iterable])\n      if (arguments.length > 0) {\n        // Currently, WeakMap `iterable` argument is not supported\n        throw new TypeError('WeakMap iterable is not supported');\n      }\n    }\n\n    // ECMA-262 23.3.3.2 WeakMap.prototype.delete(key)\n    defineProperty(WeakMap.prototype, 'delete', function (key) {\n      checkInstance(this, 'delete');\n      if (!isObject(key)) {\n        return false;\n      }\n      var entry = key[this._id];\n      if (entry && entry[0] === key) {\n        delete key[this._id];\n        return true;\n      }\n      return false;\n    });\n\n    // ECMA-262 23.3.3.3 WeakMap.prototype.get(key)\n    defineProperty(WeakMap.prototype, 'get', function (key) {\n      checkInstance(this, 'get');\n      if (!isObject(key)) {\n        return void 0;\n      }\n      var entry = key[this._id];\n      if (entry && entry[0] === key) {\n        return entry[1];\n      }\n      return void 0;\n    });\n\n    // ECMA-262 23.3.3.4 WeakMap.prototype.has(key)\n    defineProperty(WeakMap.prototype, 'has', function (key) {\n      checkInstance(this, 'has');\n      if (!isObject(key)) {\n        return false;\n      }\n      var entry = key[this._id];\n      if (entry && entry[0] === key) {\n        return true;\n      }\n      return false;\n    });\n\n    // ECMA-262 23.3.3.5 WeakMap.prototype.set(key, value)\n    defineProperty(WeakMap.prototype, 'set', function (key, value) {\n      checkInstance(this, 'set');\n      if (!isObject(key)) {\n        throw new TypeError('Invalid value used as weak map key');\n      }\n      var entry = key[this._id];\n      if (entry && entry[0] === key) {\n        entry[1] = value;\n        return this;\n      }\n      defineProperty(key, this._id, [key, value]);\n      return this;\n    });\n    function checkInstance(x, methodName) {\n      if (!isObject(x) || !hasOwnProperty.call(x, '_id')) {\n        throw new TypeError(methodName + ' method called on incompatible receiver ' + typeof x);\n      }\n    }\n    function genId(prefix) {\n      return prefix + '_' + rand() + '.' + rand();\n    }\n    function rand() {\n      return Math.random().toString().substring(2);\n    }\n    defineProperty(WeakMap, '_polyfill', true);\n    return WeakMap;\n  }();\n  function isObject(x) {\n    return Object(x) === x;\n  }\n})(typeof globalThis !== 'undefined' ? globalThis : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : typeof commonjsGlobal !== 'undefined' ? commonjsGlobal : commonjsGlobal);\n\nvar npo_src = createCommonjsModule(function (module) {\n/*! Native Promise Only\n    v0.8.1 (c) Kyle Simpson\n    MIT License: http://getify.mit-license.org\n*/\n\n(function UMD(name, context, definition) {\n  // special form of UMD for polyfilling across evironments\n  context[name] = context[name] || definition();\n  if ( module.exports) {\n    module.exports = context[name];\n  }\n})(\"Promise\", typeof commonjsGlobal != \"undefined\" ? commonjsGlobal : commonjsGlobal, function DEF() {\n\n  var builtInProp,\n    cycle,\n    scheduling_queue,\n    ToString = Object.prototype.toString,\n    timer = typeof setImmediate != \"undefined\" ? function timer(fn) {\n      return setImmediate(fn);\n    } : setTimeout;\n\n  // dammit, IE8.\n  try {\n    Object.defineProperty({}, \"x\", {});\n    builtInProp = function builtInProp(obj, name, val, config) {\n      return Object.defineProperty(obj, name, {\n        value: val,\n        writable: true,\n        configurable: config !== false\n      });\n    };\n  } catch (err) {\n    builtInProp = function builtInProp(obj, name, val) {\n      obj[name] = val;\n      return obj;\n    };\n  }\n\n  // Note: using a queue instead of array for efficiency\n  scheduling_queue = function Queue() {\n    var first, last, item;\n    function Item(fn, self) {\n      this.fn = fn;\n      this.self = self;\n      this.next = void 0;\n    }\n    return {\n      add: function add(fn, self) {\n        item = new Item(fn, self);\n        if (last) {\n          last.next = item;\n        } else {\n          first = item;\n        }\n        last = item;\n        item = void 0;\n      },\n      drain: function drain() {\n        var f = first;\n        first = last = cycle = void 0;\n        while (f) {\n          f.fn.call(f.self);\n          f = f.next;\n        }\n      }\n    };\n  }();\n  function schedule(fn, self) {\n    scheduling_queue.add(fn, self);\n    if (!cycle) {\n      cycle = timer(scheduling_queue.drain);\n    }\n  }\n\n  // promise duck typing\n  function isThenable(o) {\n    var _then,\n      o_type = typeof o;\n    if (o != null && (o_type == \"object\" || o_type == \"function\")) {\n      _then = o.then;\n    }\n    return typeof _then == \"function\" ? _then : false;\n  }\n  function notify() {\n    for (var i = 0; i < this.chain.length; i++) {\n      notifyIsolated(this, this.state === 1 ? this.chain[i].success : this.chain[i].failure, this.chain[i]);\n    }\n    this.chain.length = 0;\n  }\n\n  // NOTE: This is a separate function to isolate\n  // the `try..catch` so that other code can be\n  // optimized better\n  function notifyIsolated(self, cb, chain) {\n    var ret, _then;\n    try {\n      if (cb === false) {\n        chain.reject(self.msg);\n      } else {\n        if (cb === true) {\n          ret = self.msg;\n        } else {\n          ret = cb.call(void 0, self.msg);\n        }\n        if (ret === chain.promise) {\n          chain.reject(TypeError(\"Promise-chain cycle\"));\n        } else if (_then = isThenable(ret)) {\n          _then.call(ret, chain.resolve, chain.reject);\n        } else {\n          chain.resolve(ret);\n        }\n      }\n    } catch (err) {\n      chain.reject(err);\n    }\n  }\n  function resolve(msg) {\n    var _then,\n      self = this;\n\n    // already triggered?\n    if (self.triggered) {\n      return;\n    }\n    self.triggered = true;\n\n    // unwrap\n    if (self.def) {\n      self = self.def;\n    }\n    try {\n      if (_then = isThenable(msg)) {\n        schedule(function () {\n          var def_wrapper = new MakeDefWrapper(self);\n          try {\n            _then.call(msg, function $resolve$() {\n              resolve.apply(def_wrapper, arguments);\n            }, function $reject$() {\n              reject.apply(def_wrapper, arguments);\n            });\n          } catch (err) {\n            reject.call(def_wrapper, err);\n          }\n        });\n      } else {\n        self.msg = msg;\n        self.state = 1;\n        if (self.chain.length > 0) {\n          schedule(notify, self);\n        }\n      }\n    } catch (err) {\n      reject.call(new MakeDefWrapper(self), err);\n    }\n  }\n  function reject(msg) {\n    var self = this;\n\n    // already triggered?\n    if (self.triggered) {\n      return;\n    }\n    self.triggered = true;\n\n    // unwrap\n    if (self.def) {\n      self = self.def;\n    }\n    self.msg = msg;\n    self.state = 2;\n    if (self.chain.length > 0) {\n      schedule(notify, self);\n    }\n  }\n  function iteratePromises(Constructor, arr, resolver, rejecter) {\n    for (var idx = 0; idx < arr.length; idx++) {\n      (function IIFE(idx) {\n        Constructor.resolve(arr[idx]).then(function $resolver$(msg) {\n          resolver(idx, msg);\n        }, rejecter);\n      })(idx);\n    }\n  }\n  function MakeDefWrapper(self) {\n    this.def = self;\n    this.triggered = false;\n  }\n  function MakeDef(self) {\n    this.promise = self;\n    this.state = 0;\n    this.triggered = false;\n    this.chain = [];\n    this.msg = void 0;\n  }\n  function Promise(executor) {\n    if (typeof executor != \"function\") {\n      throw TypeError(\"Not a function\");\n    }\n    if (this.__NPO__ !== 0) {\n      throw TypeError(\"Not a promise\");\n    }\n\n    // instance shadowing the inherited \"brand\"\n    // to signal an already \"initialized\" promise\n    this.__NPO__ = 1;\n    var def = new MakeDef(this);\n    this[\"then\"] = function then(success, failure) {\n      var o = {\n        success: typeof success == \"function\" ? success : true,\n        failure: typeof failure == \"function\" ? failure : false\n      };\n      // Note: `then(..)` itself can be borrowed to be used against\n      // a different promise constructor for making the chained promise,\n      // by substituting a different `this` binding.\n      o.promise = new this.constructor(function extractChain(resolve, reject) {\n        if (typeof resolve != \"function\" || typeof reject != \"function\") {\n          throw TypeError(\"Not a function\");\n        }\n        o.resolve = resolve;\n        o.reject = reject;\n      });\n      def.chain.push(o);\n      if (def.state !== 0) {\n        schedule(notify, def);\n      }\n      return o.promise;\n    };\n    this[\"catch\"] = function $catch$(failure) {\n      return this.then(void 0, failure);\n    };\n    try {\n      executor.call(void 0, function publicResolve(msg) {\n        resolve.call(def, msg);\n      }, function publicReject(msg) {\n        reject.call(def, msg);\n      });\n    } catch (err) {\n      reject.call(def, err);\n    }\n  }\n  var PromisePrototype = builtInProp({}, \"constructor\", Promise, /*configurable=*/false);\n\n  // Note: Android 4 cannot use `Object.defineProperty(..)` here\n  Promise.prototype = PromisePrototype;\n\n  // built-in \"brand\" to signal an \"uninitialized\" promise\n  builtInProp(PromisePrototype, \"__NPO__\", 0, /*configurable=*/false);\n  builtInProp(Promise, \"resolve\", function Promise$resolve(msg) {\n    var Constructor = this;\n\n    // spec mandated checks\n    // note: best \"isPromise\" check that's practical for now\n    if (msg && typeof msg == \"object\" && msg.__NPO__ === 1) {\n      return msg;\n    }\n    return new Constructor(function executor(resolve, reject) {\n      if (typeof resolve != \"function\" || typeof reject != \"function\") {\n        throw TypeError(\"Not a function\");\n      }\n      resolve(msg);\n    });\n  });\n  builtInProp(Promise, \"reject\", function Promise$reject(msg) {\n    return new this(function executor(resolve, reject) {\n      if (typeof resolve != \"function\" || typeof reject != \"function\") {\n        throw TypeError(\"Not a function\");\n      }\n      reject(msg);\n    });\n  });\n  builtInProp(Promise, \"all\", function Promise$all(arr) {\n    var Constructor = this;\n\n    // spec mandated checks\n    if (ToString.call(arr) != \"[object Array]\") {\n      return Constructor.reject(TypeError(\"Not an array\"));\n    }\n    if (arr.length === 0) {\n      return Constructor.resolve([]);\n    }\n    return new Constructor(function executor(resolve, reject) {\n      if (typeof resolve != \"function\" || typeof reject != \"function\") {\n        throw TypeError(\"Not a function\");\n      }\n      var len = arr.length,\n        msgs = Array(len),\n        count = 0;\n      iteratePromises(Constructor, arr, function resolver(idx, msg) {\n        msgs[idx] = msg;\n        if (++count === len) {\n          resolve(msgs);\n        }\n      }, reject);\n    });\n  });\n  builtInProp(Promise, \"race\", function Promise$race(arr) {\n    var Constructor = this;\n\n    // spec mandated checks\n    if (ToString.call(arr) != \"[object Array]\") {\n      return Constructor.reject(TypeError(\"Not an array\"));\n    }\n    return new Constructor(function executor(resolve, reject) {\n      if (typeof resolve != \"function\" || typeof reject != \"function\") {\n        throw TypeError(\"Not a function\");\n      }\n      iteratePromises(Constructor, arr, function resolver(idx, msg) {\n        resolve(msg);\n      }, reject);\n    });\n  });\n  return Promise;\n});\n});\n\n/**\n * @module lib/callbacks\n */\n\nvar callbackMap = new WeakMap();\n\n/**\n * Store a callback for a method or event for a player.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name.\n * @param {(function(this:Player, *): void|{resolve: function, reject: function})} callback\n *        The callback to call or an object with resolve and reject functions for a promise.\n * @return {void}\n */\nfunction storeCallback(player, name, callback) {\n  var playerCallbacks = callbackMap.get(player.element) || {};\n  if (!(name in playerCallbacks)) {\n    playerCallbacks[name] = [];\n  }\n  playerCallbacks[name].push(callback);\n  callbackMap.set(player.element, playerCallbacks);\n}\n\n/**\n * Get the callbacks for a player and event or method.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name\n * @return {function[]}\n */\nfunction getCallbacks(player, name) {\n  var playerCallbacks = callbackMap.get(player.element) || {};\n  return playerCallbacks[name] || [];\n}\n\n/**\n * Remove a stored callback for a method or event for a player.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name\n * @param {function} [callback] The specific callback to remove.\n * @return {boolean} Was this the last callback?\n */\nfunction removeCallback(player, name, callback) {\n  var playerCallbacks = callbackMap.get(player.element) || {};\n  if (!playerCallbacks[name]) {\n    return true;\n  }\n\n  // If no callback is passed, remove all callbacks for the event\n  if (!callback) {\n    playerCallbacks[name] = [];\n    callbackMap.set(player.element, playerCallbacks);\n    return true;\n  }\n  var index = playerCallbacks[name].indexOf(callback);\n  if (index !== -1) {\n    playerCallbacks[name].splice(index, 1);\n  }\n  callbackMap.set(player.element, playerCallbacks);\n  return playerCallbacks[name] && playerCallbacks[name].length === 0;\n}\n\n/**\n * Return the first stored callback for a player and event or method.\n *\n * @param {Player} player The player object.\n * @param {string} name The method or event name.\n * @return {function} The callback, or false if there were none\n */\nfunction shiftCallbacks(player, name) {\n  var playerCallbacks = getCallbacks(player, name);\n  if (playerCallbacks.length < 1) {\n    return false;\n  }\n  var callback = playerCallbacks.shift();\n  removeCallback(player, name, callback);\n  return callback;\n}\n\n/**\n * Move callbacks associated with an element to another element.\n *\n * @param {HTMLElement} oldElement The old element.\n * @param {HTMLElement} newElement The new element.\n * @return {void}\n */\nfunction swapCallbacks(oldElement, newElement) {\n  var playerCallbacks = callbackMap.get(oldElement);\n  callbackMap.set(newElement, playerCallbacks);\n  callbackMap.delete(oldElement);\n}\n\n/**\n * @module lib/postmessage\n */\n\n/**\n * Parse a message received from postMessage.\n *\n * @param {*} data The data received from postMessage.\n * @return {object}\n */\nfunction parseMessageData(data) {\n  if (typeof data === 'string') {\n    try {\n      data = JSON.parse(data);\n    } catch (error) {\n      // If the message cannot be parsed, throw the error as a warning\n      console.warn(error);\n      return {};\n    }\n  }\n  return data;\n}\n\n/**\n * Post a message to the specified target.\n *\n * @param {Player} player The player object to use.\n * @param {string} method The API method to call.\n * @param {object} params The parameters to send to the player.\n * @return {void}\n */\nfunction postMessage(player, method, params) {\n  if (!player.element.contentWindow || !player.element.contentWindow.postMessage) {\n    return;\n  }\n  var message = {\n    method: method\n  };\n  if (params !== undefined) {\n    message.value = params;\n  }\n\n  // IE 8 and 9 do not support passing messages, so stringify them\n  var ieVersion = parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\\d+).*$/, '$1'));\n  if (ieVersion >= 8 && ieVersion < 10) {\n    message = JSON.stringify(message);\n  }\n  player.element.contentWindow.postMessage(message, player.origin);\n}\n\n/**\n * Parse the data received from a message event.\n *\n * @param {Player} player The player that received the message.\n * @param {(Object|string)} data The message data. Strings will be parsed into JSON.\n * @return {void}\n */\nfunction processData(player, data) {\n  data = parseMessageData(data);\n  var callbacks = [];\n  var param;\n  if (data.event) {\n    if (data.event === 'error') {\n      var promises = getCallbacks(player, data.data.method);\n      promises.forEach(function (promise) {\n        var error = new Error(data.data.message);\n        error.name = data.data.name;\n        promise.reject(error);\n        removeCallback(player, data.data.method, promise);\n      });\n    }\n    callbacks = getCallbacks(player, \"event:\".concat(data.event));\n    param = data.data;\n  } else if (data.method) {\n    var callback = shiftCallbacks(player, data.method);\n    if (callback) {\n      callbacks.push(callback);\n      param = data.value;\n    }\n  }\n  callbacks.forEach(function (callback) {\n    try {\n      if (typeof callback === 'function') {\n        callback.call(player, param);\n        return;\n      }\n      callback.resolve(param);\n    } catch (e) {\n      // empty\n    }\n  });\n}\n\n/**\n * @module lib/embed\n */\nvar oEmbedParameters = ['airplay', 'audio_tracks', 'autopause', 'autoplay', 'background', 'byline', 'cc', 'chapter_id', 'chapters', 'chromecast', 'color', 'colors', 'controls', 'dnt', 'end_time', 'fullscreen', 'height', 'id', 'interactive_params', 'keyboard', 'loop', 'maxheight', 'maxwidth', 'muted', 'play_button_position', 'playsinline', 'portrait', 'progress_bar', 'quality_selector', 'responsive', 'speed', 'start_time', 'texttrack', 'title', 'transcript', 'transparent', 'url', 'vimeo_logo', 'volume', 'watch_full_video', 'width'];\n\n/**\n * Get the 'data-vimeo'-prefixed attributes from an element as an object.\n *\n * @param {HTMLElement} element The element.\n * @param {Object} [defaults={}] The default values to use.\n * @return {Object<string, string>}\n */\nfunction getOEmbedParameters(element) {\n  var defaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return oEmbedParameters.reduce(function (params, param) {\n    var value = element.getAttribute(\"data-vimeo-\".concat(param));\n    if (value || value === '') {\n      params[param] = value === '' ? 1 : value;\n    }\n    return params;\n  }, defaults);\n}\n\n/**\n * Create an embed from oEmbed data inside an element.\n *\n * @param {object} data The oEmbed data.\n * @param {HTMLElement} element The element to put the iframe in.\n * @return {HTMLIFrameElement} The iframe embed.\n */\nfunction createEmbed(_ref, element) {\n  var html = _ref.html;\n  if (!element) {\n    throw new TypeError('An element must be provided');\n  }\n  if (element.getAttribute('data-vimeo-initialized') !== null) {\n    return element.querySelector('iframe');\n  }\n  var div = document.createElement('div');\n  div.innerHTML = html;\n  element.appendChild(div.firstChild);\n  element.setAttribute('data-vimeo-initialized', 'true');\n  return element.querySelector('iframe');\n}\n\n/**\n * Make an oEmbed call for the specified URL.\n *\n * @param {string} videoUrl The vimeo.com url for the video.\n * @param {Object} [params] Parameters to pass to oEmbed.\n * @param {HTMLElement} element The element.\n * @return {Promise}\n */\nfunction getOEmbedData(videoUrl) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var element = arguments.length > 2 ? arguments[2] : undefined;\n  return new Promise(function (resolve, reject) {\n    if (!isVimeoUrl(videoUrl)) {\n      throw new TypeError(\"\\u201C\".concat(videoUrl, \"\\u201D is not a vimeo.com url.\"));\n    }\n    var domain = getOembedDomain(videoUrl);\n    var url = \"https://\".concat(domain, \"/api/oembed.json?url=\").concat(encodeURIComponent(videoUrl));\n    for (var param in params) {\n      if (params.hasOwnProperty(param)) {\n        url += \"&\".concat(param, \"=\").concat(encodeURIComponent(params[param]));\n      }\n    }\n    var xhr = 'XDomainRequest' in window ? new XDomainRequest() : new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.onload = function () {\n      if (xhr.status === 404) {\n        reject(new Error(\"\\u201C\".concat(videoUrl, \"\\u201D was not found.\")));\n        return;\n      }\n      if (xhr.status === 403) {\n        reject(new Error(\"\\u201C\".concat(videoUrl, \"\\u201D is not embeddable.\")));\n        return;\n      }\n      try {\n        var json = JSON.parse(xhr.responseText);\n        // Check api response for 403 on oembed\n        if (json.domain_status_code === 403) {\n          // We still want to create the embed to give users visual feedback\n          createEmbed(json, element);\n          reject(new Error(\"\\u201C\".concat(videoUrl, \"\\u201D is not embeddable.\")));\n          return;\n        }\n        resolve(json);\n      } catch (error) {\n        reject(error);\n      }\n    };\n    xhr.onerror = function () {\n      var status = xhr.status ? \" (\".concat(xhr.status, \")\") : '';\n      reject(new Error(\"There was an error fetching the embed code from Vimeo\".concat(status, \".\")));\n    };\n    xhr.send();\n  });\n}\n\n/**\n * Initialize all embeds within a specific element\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\nfunction initializeEmbeds() {\n  var parent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n  var elements = [].slice.call(parent.querySelectorAll('[data-vimeo-id], [data-vimeo-url]'));\n  var handleError = function handleError(error) {\n    if ('console' in window && console.error) {\n      console.error(\"There was an error creating an embed: \".concat(error));\n    }\n  };\n  elements.forEach(function (element) {\n    try {\n      // Skip any that have data-vimeo-defer\n      if (element.getAttribute('data-vimeo-defer') !== null) {\n        return;\n      }\n      var params = getOEmbedParameters(element);\n      var url = getVimeoUrl(params);\n      getOEmbedData(url, params, element).then(function (data) {\n        return createEmbed(data, element);\n      }).catch(handleError);\n    } catch (error) {\n      handleError(error);\n    }\n  });\n}\n\n/**\n * Resize embeds when messaged by the player.\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\nfunction resizeEmbeds() {\n  var parent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n  // Prevent execution if users include the player.js script multiple times.\n  if (window.VimeoPlayerResizeEmbeds_) {\n    return;\n  }\n  window.VimeoPlayerResizeEmbeds_ = true;\n  var onMessage = function onMessage(event) {\n    if (!isVimeoUrl(event.origin)) {\n      return;\n    }\n\n    // 'spacechange' is fired only on embeds with cards\n    if (!event.data || event.data.event !== 'spacechange') {\n      return;\n    }\n    var iframes = parent.querySelectorAll('iframe');\n    for (var i = 0; i < iframes.length; i++) {\n      if (iframes[i].contentWindow !== event.source) {\n        continue;\n      }\n\n      // Change padding-bottom of the enclosing div to accommodate\n      // card carousel without distorting aspect ratio\n      var space = iframes[i].parentElement;\n      space.style.paddingBottom = \"\".concat(event.data.data[0].bottom, \"px\");\n      break;\n    }\n  };\n  window.addEventListener('message', onMessage);\n}\n\n/**\n * Add chapters to existing metadata for Google SEO\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\nfunction initAppendVideoMetadata() {\n  var parent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n  //  Prevent execution if users include the player.js script multiple times.\n  if (window.VimeoSeoMetadataAppended) {\n    return;\n  }\n  window.VimeoSeoMetadataAppended = true;\n  var onMessage = function onMessage(event) {\n    if (!isVimeoUrl(event.origin)) {\n      return;\n    }\n    var data = parseMessageData(event.data);\n    if (!data || data.event !== 'ready') {\n      return;\n    }\n    var iframes = parent.querySelectorAll('iframe');\n    for (var i = 0; i < iframes.length; i++) {\n      var iframe = iframes[i];\n\n      // Initiate appendVideoMetadata if iframe is a Vimeo embed\n      var isValidMessageSource = iframe.contentWindow === event.source;\n      if (isVimeoEmbed(iframe.src) && isValidMessageSource) {\n        var player = new Player(iframe);\n        player.callMethod('appendVideoMetadata', window.location.href);\n      }\n    }\n  };\n  window.addEventListener('message', onMessage);\n}\n\n/**\n * Seek to time indicated by vimeo_t query parameter if present in URL\n *\n * @param {HTMLElement} [parent=document] The parent element.\n * @return {void}\n */\nfunction checkUrlTimeParam() {\n  var parent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n  //  Prevent execution if users include the player.js script multiple times.\n  if (window.VimeoCheckedUrlTimeParam) {\n    return;\n  }\n  window.VimeoCheckedUrlTimeParam = true;\n  var handleError = function handleError(error) {\n    if ('console' in window && console.error) {\n      console.error(\"There was an error getting video Id: \".concat(error));\n    }\n  };\n  var onMessage = function onMessage(event) {\n    if (!isVimeoUrl(event.origin)) {\n      return;\n    }\n    var data = parseMessageData(event.data);\n    if (!data || data.event !== 'ready') {\n      return;\n    }\n    var iframes = parent.querySelectorAll('iframe');\n    var _loop = function _loop() {\n      var iframe = iframes[i];\n      var isValidMessageSource = iframe.contentWindow === event.source;\n      if (isVimeoEmbed(iframe.src) && isValidMessageSource) {\n        var player = new Player(iframe);\n        player.getVideoId().then(function (videoId) {\n          var matches = new RegExp(\"[?&]vimeo_t_\".concat(videoId, \"=([^&#]*)\")).exec(window.location.href);\n          if (matches && matches[1]) {\n            var sec = decodeURI(matches[1]);\n            player.setCurrentTime(sec);\n          }\n          return;\n        }).catch(handleError);\n      }\n    };\n    for (var i = 0; i < iframes.length; i++) {\n      _loop();\n    }\n  };\n  window.addEventListener('message', onMessage);\n}\n\n/* MIT License\n\nCopyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\nTerms */\n\nfunction initializeScreenfull() {\n  var fn = function () {\n    var val;\n    var fnMap = [['requestFullscreen', 'exitFullscreen', 'fullscreenElement', 'fullscreenEnabled', 'fullscreenchange', 'fullscreenerror'],\n    // New WebKit\n    ['webkitRequestFullscreen', 'webkitExitFullscreen', 'webkitFullscreenElement', 'webkitFullscreenEnabled', 'webkitfullscreenchange', 'webkitfullscreenerror'],\n    // Old WebKit\n    ['webkitRequestFullScreen', 'webkitCancelFullScreen', 'webkitCurrentFullScreenElement', 'webkitCancelFullScreen', 'webkitfullscreenchange', 'webkitfullscreenerror'], ['mozRequestFullScreen', 'mozCancelFullScreen', 'mozFullScreenElement', 'mozFullScreenEnabled', 'mozfullscreenchange', 'mozfullscreenerror'], ['msRequestFullscreen', 'msExitFullscreen', 'msFullscreenElement', 'msFullscreenEnabled', 'MSFullscreenChange', 'MSFullscreenError']];\n    var i = 0;\n    var l = fnMap.length;\n    var ret = {};\n    for (; i < l; i++) {\n      val = fnMap[i];\n      if (val && val[1] in document) {\n        for (i = 0; i < val.length; i++) {\n          ret[fnMap[0][i]] = val[i];\n        }\n        return ret;\n      }\n    }\n    return false;\n  }();\n  var eventNameMap = {\n    fullscreenchange: fn.fullscreenchange,\n    fullscreenerror: fn.fullscreenerror\n  };\n  var screenfull = {\n    request: function request(element) {\n      return new Promise(function (resolve, reject) {\n        var onFullScreenEntered = function onFullScreenEntered() {\n          screenfull.off('fullscreenchange', onFullScreenEntered);\n          resolve();\n        };\n        screenfull.on('fullscreenchange', onFullScreenEntered);\n        element = element || document.documentElement;\n        var returnPromise = element[fn.requestFullscreen]();\n        if (returnPromise instanceof Promise) {\n          returnPromise.then(onFullScreenEntered).catch(reject);\n        }\n      });\n    },\n    exit: function exit() {\n      return new Promise(function (resolve, reject) {\n        if (!screenfull.isFullscreen) {\n          resolve();\n          return;\n        }\n        var onFullScreenExit = function onFullScreenExit() {\n          screenfull.off('fullscreenchange', onFullScreenExit);\n          resolve();\n        };\n        screenfull.on('fullscreenchange', onFullScreenExit);\n        var returnPromise = document[fn.exitFullscreen]();\n        if (returnPromise instanceof Promise) {\n          returnPromise.then(onFullScreenExit).catch(reject);\n        }\n      });\n    },\n    on: function on(event, callback) {\n      var eventName = eventNameMap[event];\n      if (eventName) {\n        document.addEventListener(eventName, callback);\n      }\n    },\n    off: function off(event, callback) {\n      var eventName = eventNameMap[event];\n      if (eventName) {\n        document.removeEventListener(eventName, callback);\n      }\n    }\n  };\n  Object.defineProperties(screenfull, {\n    isFullscreen: {\n      get: function get() {\n        return Boolean(document[fn.fullscreenElement]);\n      }\n    },\n    element: {\n      enumerable: true,\n      get: function get() {\n        return document[fn.fullscreenElement];\n      }\n    },\n    isEnabled: {\n      enumerable: true,\n      get: function get() {\n        // Coerce to boolean in case of old WebKit\n        return Boolean(document[fn.fullscreenEnabled]);\n      }\n    }\n  });\n  return screenfull;\n}\n\n/** @typedef {import('./timing-src-connector.types').PlayerControls} PlayerControls */\n/** @typedef {import('./timing-object.types').TimingObject} TimingObject */\n/** @typedef {import('./timing-src-connector.types').TimingSrcConnectorOptions} TimingSrcConnectorOptions */\n/** @typedef {(msg: string) => any} Logger */\n/** @typedef {import('timing-object.types').TConnectionState} TConnectionState */\n\n/**\n * @type {TimingSrcConnectorOptions}\n *\n * For details on these properties and their effects, see the typescript definition referenced above.\n */\nvar defaultOptions = {\n  role: 'viewer',\n  autoPlayMuted: true,\n  allowedDrift: 0.3,\n  maxAllowedDrift: 1,\n  minCheckInterval: 0.1,\n  maxRateAdjustment: 0.2,\n  maxTimeToCatchUp: 1\n};\n\n/**\n * There's a proposed W3C spec for the Timing Object which would introduce a new set of APIs that would simplify time-synchronization tasks for browser applications.\n *\n * Proposed spec: https://webtiming.github.io/timingobject/\n * V3 Spec: https://timingsrc.readthedocs.io/en/latest/\n * Demuxed talk: https://www.youtube.com/watch?v=cZSjDaGDmX8\n *\n * This class makes it easy to connect Vimeo.Player to a provided TimingObject via Vimeo.Player.setTimingSrc(myTimingObject, options) and the synchronization will be handled automatically.\n *\n * There are 5 general responsibilities in TimingSrcConnector:\n *\n * 1. `updatePlayer()` which sets the player's currentTime, playbackRate and pause/play state based on current state of the TimingObject.\n * 2. `updateTimingObject()` which sets the TimingObject's position and velocity from the player's state.\n * 3. `playerUpdater` which listens for change events on the TimingObject and will respond by calling updatePlayer.\n * 4. `timingObjectUpdater` which listens to the player events of seeked, play and pause and will respond by calling `updateTimingObject()`.\n * 5. `maintainPlaybackPosition` this is code that constantly monitors the player to make sure it's always in sync with the TimingObject. This is needed because videos will generally not play with precise time accuracy and there will be some drift which becomes more noticeable over longer periods (as noted in the timing-object spec). More details on this method below.\n */\nvar TimingSrcConnector = /*#__PURE__*/function (_EventTarget) {\n  _inherits(TimingSrcConnector, _EventTarget);\n  var _super = _createSuper(TimingSrcConnector);\n  /**\n   * @param {PlayerControls} player\n   * @param {TimingObject} timingObject\n   * @param {TimingSrcConnectorOptions} options\n   * @param {Logger} logger\n   */\n  function TimingSrcConnector(_player, timingObject) {\n    var _this;\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var logger = arguments.length > 3 ? arguments[3] : undefined;\n    _classCallCheck(this, TimingSrcConnector);\n    _this = _super.call(this);\n    _defineProperty(_assertThisInitialized(_this), \"logger\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"speedAdjustment\", 0);\n    /**\n     * @param {PlayerControls} player\n     * @param {number} newAdjustment\n     * @return {Promise<void>}\n     */\n    _defineProperty(_assertThisInitialized(_this), \"adjustSpeed\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(player, newAdjustment) {\n        var newPlaybackRate;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!(_this.speedAdjustment === newAdjustment)) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              _context.next = 4;\n              return player.getPlaybackRate();\n            case 4:\n              _context.t0 = _context.sent;\n              _context.t1 = _this.speedAdjustment;\n              _context.t2 = _context.t0 - _context.t1;\n              _context.t3 = newAdjustment;\n              newPlaybackRate = _context.t2 + _context.t3;\n              _this.log(\"New playbackRate:  \".concat(newPlaybackRate));\n              _context.next = 12;\n              return player.setPlaybackRate(newPlaybackRate);\n            case 12:\n              _this.speedAdjustment = newAdjustment;\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    _this.logger = logger;\n    _this.init(timingObject, _player, _objectSpread2(_objectSpread2({}, defaultOptions), options));\n    return _this;\n  }\n  _createClass(TimingSrcConnector, [{\n    key: \"disconnect\",\n    value: function disconnect() {\n      this.dispatchEvent(new Event('disconnect'));\n    }\n\n    /**\n     * @param {TimingObject} timingObject\n     * @param {PlayerControls} player\n     * @param {TimingSrcConnectorOptions} options\n     * @return {Promise<void>}\n     */\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(timingObject, player, options) {\n        var _this2 = this;\n        var playerUpdater, positionSync, timingObjectUpdater;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.waitForTOReadyState(timingObject, 'open');\n            case 2:\n              if (!(options.role === 'viewer')) {\n                _context2.next = 10;\n                break;\n              }\n              _context2.next = 5;\n              return this.updatePlayer(timingObject, player, options);\n            case 5:\n              playerUpdater = subscribe(timingObject, 'change', function () {\n                return _this2.updatePlayer(timingObject, player, options);\n              });\n              positionSync = this.maintainPlaybackPosition(timingObject, player, options);\n              this.addEventListener('disconnect', function () {\n                positionSync.cancel();\n                playerUpdater.cancel();\n              });\n              _context2.next = 14;\n              break;\n            case 10:\n              _context2.next = 12;\n              return this.updateTimingObject(timingObject, player);\n            case 12:\n              timingObjectUpdater = subscribe(player, ['seeked', 'play', 'pause', 'ratechange'], function () {\n                return _this2.updateTimingObject(timingObject, player);\n              }, 'on', 'off');\n              this.addEventListener('disconnect', function () {\n                return timingObjectUpdater.cancel();\n              });\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function init(_x3, _x4, _x5) {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n    /**\n     * Sets the TimingObject's state to reflect that of the player\n     *\n     * @param {TimingObject} timingObject\n     * @param {PlayerControls} player\n     * @return {Promise<void>}\n     */\n  }, {\n    key: \"updateTimingObject\",\n    value: function () {\n      var _updateTimingObject = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(timingObject, player) {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.t0 = timingObject;\n              _context3.next = 3;\n              return player.getCurrentTime();\n            case 3:\n              _context3.t1 = _context3.sent;\n              _context3.next = 6;\n              return player.getPaused();\n            case 6:\n              if (!_context3.sent) {\n                _context3.next = 10;\n                break;\n              }\n              _context3.t2 = 0;\n              _context3.next = 13;\n              break;\n            case 10:\n              _context3.next = 12;\n              return player.getPlaybackRate();\n            case 12:\n              _context3.t2 = _context3.sent;\n            case 13:\n              _context3.t3 = _context3.t2;\n              _context3.t4 = {\n                position: _context3.t1,\n                velocity: _context3.t3\n              };\n              _context3.t0.update.call(_context3.t0, _context3.t4);\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }));\n      function updateTimingObject(_x6, _x7) {\n        return _updateTimingObject.apply(this, arguments);\n      }\n      return updateTimingObject;\n    }()\n    /**\n     * Sets the player's timing state to reflect that of the TimingObject\n     *\n     * @param {TimingObject} timingObject\n     * @param {PlayerControls} player\n     * @param {TimingSrcConnectorOptions} options\n     * @return {Promise<void>}\n     */\n  }, {\n    key: \"updatePlayer\",\n    value: function () {\n      var _updatePlayer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(timingObject, player, options) {\n        var _timingObject$query, position, velocity;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _timingObject$query = timingObject.query(), position = _timingObject$query.position, velocity = _timingObject$query.velocity;\n              if (typeof position === 'number') {\n                player.setCurrentTime(position);\n              }\n              if (!(typeof velocity === 'number')) {\n                _context5.next = 25;\n                break;\n              }\n              if (!(velocity === 0)) {\n                _context5.next = 11;\n                break;\n              }\n              _context5.next = 6;\n              return player.getPaused();\n            case 6:\n              _context5.t0 = _context5.sent;\n              if (!(_context5.t0 === false)) {\n                _context5.next = 9;\n                break;\n              }\n              player.pause();\n            case 9:\n              _context5.next = 25;\n              break;\n            case 11:\n              if (!(velocity > 0)) {\n                _context5.next = 25;\n                break;\n              }\n              _context5.next = 14;\n              return player.getPaused();\n            case 14:\n              _context5.t1 = _context5.sent;\n              if (!(_context5.t1 === true)) {\n                _context5.next = 19;\n                break;\n              }\n              _context5.next = 18;\n              return player.play().catch( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(err) {\n                  return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n                    while (1) switch (_context4.prev = _context4.next) {\n                      case 0:\n                        if (!(err.name === 'NotAllowedError' && options.autoPlayMuted)) {\n                          _context4.next = 5;\n                          break;\n                        }\n                        _context4.next = 3;\n                        return player.setMuted(true);\n                      case 3:\n                        _context4.next = 5;\n                        return player.play().catch(function (err2) {\n                          return console.error('Couldn\\'t play the video from TimingSrcConnector. Error:', err2);\n                        });\n                      case 5:\n                      case \"end\":\n                        return _context4.stop();\n                    }\n                  }, _callee4);\n                }));\n                return function (_x11) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n            case 18:\n              this.updatePlayer(timingObject, player, options);\n            case 19:\n              _context5.next = 21;\n              return player.getPlaybackRate();\n            case 21:\n              _context5.t2 = _context5.sent;\n              _context5.t3 = velocity;\n              if (!(_context5.t2 !== _context5.t3)) {\n                _context5.next = 25;\n                break;\n              }\n              player.setPlaybackRate(velocity);\n            case 25:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function updatePlayer(_x8, _x9, _x10) {\n        return _updatePlayer.apply(this, arguments);\n      }\n      return updatePlayer;\n    }()\n    /**\n     * Since video players do not play with 100% time precision, we need to closely monitor\n     * our player to be sure it remains in sync with the TimingObject.\n     *\n     * If out of sync, we use the current conditions and the options provided to determine\n     * whether to re-sync via setting currentTime or adjusting the playbackRate\n     *\n     * @param {TimingObject} timingObject\n     * @param {PlayerControls} player\n     * @param {TimingSrcConnectorOptions} options\n     * @return {{cancel: (function(): void)}}\n     */\n  }, {\n    key: \"maintainPlaybackPosition\",\n    value: function maintainPlaybackPosition(timingObject, player, options) {\n      var _this3 = this;\n      var allowedDrift = options.allowedDrift,\n        maxAllowedDrift = options.maxAllowedDrift,\n        minCheckInterval = options.minCheckInterval,\n        maxRateAdjustment = options.maxRateAdjustment,\n        maxTimeToCatchUp = options.maxTimeToCatchUp;\n      var syncInterval = Math.min(maxTimeToCatchUp, Math.max(minCheckInterval, maxAllowedDrift)) * 1000;\n      var check = /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n          var diff, diffAbs, min, max, adjustment;\n          return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n            while (1) switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.t0 = timingObject.query().velocity === 0;\n                if (_context6.t0) {\n                  _context6.next = 6;\n                  break;\n                }\n                _context6.next = 4;\n                return player.getPaused();\n              case 4:\n                _context6.t1 = _context6.sent;\n                _context6.t0 = _context6.t1 === true;\n              case 6:\n                if (!_context6.t0) {\n                  _context6.next = 8;\n                  break;\n                }\n                return _context6.abrupt(\"return\");\n              case 8:\n                _context6.t2 = timingObject.query().position;\n                _context6.next = 11;\n                return player.getCurrentTime();\n              case 11:\n                _context6.t3 = _context6.sent;\n                diff = _context6.t2 - _context6.t3;\n                diffAbs = Math.abs(diff);\n                _this3.log(\"Drift: \".concat(diff));\n                if (!(diffAbs > maxAllowedDrift)) {\n                  _context6.next = 22;\n                  break;\n                }\n                _context6.next = 18;\n                return _this3.adjustSpeed(player, 0);\n              case 18:\n                player.setCurrentTime(timingObject.query().position);\n                _this3.log('Resync by currentTime');\n                _context6.next = 29;\n                break;\n              case 22:\n                if (!(diffAbs > allowedDrift)) {\n                  _context6.next = 29;\n                  break;\n                }\n                min = diffAbs / maxTimeToCatchUp;\n                max = maxRateAdjustment;\n                adjustment = min < max ? (max - min) / 2 : max;\n                _context6.next = 28;\n                return _this3.adjustSpeed(player, adjustment * Math.sign(diff));\n              case 28:\n                _this3.log('Resync by playbackRate');\n              case 29:\n              case \"end\":\n                return _context6.stop();\n            }\n          }, _callee6);\n        }));\n        return function check() {\n          return _ref3.apply(this, arguments);\n        };\n      }();\n      var interval = setInterval(function () {\n        return check();\n      }, syncInterval);\n      return {\n        cancel: function cancel() {\n          return clearInterval(interval);\n        }\n      };\n    }\n\n    /**\n     * @param {string} msg\n     */\n  }, {\n    key: \"log\",\n    value: function log(msg) {\n      var _this$logger;\n      (_this$logger = this.logger) === null || _this$logger === void 0 ? void 0 : _this$logger.call(this, \"TimingSrcConnector: \".concat(msg));\n    }\n  }, {\n    key: \"waitForTOReadyState\",\n    value:\n    /**\n     * @param {TimingObject} timingObject\n     * @param {TConnectionState} state\n     * @return {Promise<void>}\n     */\n    function waitForTOReadyState(timingObject, state) {\n      return new Promise(function (resolve) {\n        var check = function check() {\n          if (timingObject.readyState === state) {\n            resolve();\n          } else {\n            timingObject.addEventListener('readystatechange', check, {\n              once: true\n            });\n          }\n        };\n        check();\n      });\n    }\n  }]);\n  return TimingSrcConnector;\n}( /*#__PURE__*/_wrapNativeSuper(EventTarget));\n\nvar playerMap = new WeakMap();\nvar readyMap = new WeakMap();\nvar screenfull = {};\nvar Player = /*#__PURE__*/function () {\n  /**\n   * Create a Player.\n   *\n   * @param {(HTMLIFrameElement|HTMLElement|string|jQuery)} element A reference to the Vimeo\n   *        player iframe, and id, or a jQuery object.\n   * @param {object} [options] oEmbed parameters to use when creating an embed in the element.\n   * @return {Player}\n   */\n  function Player(element) {\n    var _this = this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Player);\n    /* global jQuery */\n    if (window.jQuery && element instanceof jQuery) {\n      if (element.length > 1 && window.console && console.warn) {\n        console.warn('A jQuery object with multiple elements was passed, using the first element.');\n      }\n      element = element[0];\n    }\n\n    // Find an element by ID\n    if (typeof document !== 'undefined' && typeof element === 'string') {\n      element = document.getElementById(element);\n    }\n\n    // Not an element!\n    if (!isDomElement(element)) {\n      throw new TypeError('You must pass either a valid element or a valid id.');\n    }\n\n    // Already initialized an embed in this div, so grab the iframe\n    if (element.nodeName !== 'IFRAME') {\n      var iframe = element.querySelector('iframe');\n      if (iframe) {\n        element = iframe;\n      }\n    }\n\n    // iframe url is not a Vimeo url\n    if (element.nodeName === 'IFRAME' && !isVimeoUrl(element.getAttribute('src') || '')) {\n      throw new Error('The player element passed isnt a Vimeo embed.');\n    }\n\n    // If there is already a player object in the map, return that\n    if (playerMap.has(element)) {\n      return playerMap.get(element);\n    }\n    this._window = element.ownerDocument.defaultView;\n    this.element = element;\n    this.origin = '*';\n    var readyPromise = new npo_src(function (resolve, reject) {\n      _this._onMessage = function (event) {\n        if (!isVimeoUrl(event.origin) || _this.element.contentWindow !== event.source) {\n          return;\n        }\n        if (_this.origin === '*') {\n          _this.origin = event.origin;\n        }\n        var data = parseMessageData(event.data);\n        var isError = data && data.event === 'error';\n        var isReadyError = isError && data.data && data.data.method === 'ready';\n        if (isReadyError) {\n          var error = new Error(data.data.message);\n          error.name = data.data.name;\n          reject(error);\n          return;\n        }\n        var isReadyEvent = data && data.event === 'ready';\n        var isPingResponse = data && data.method === 'ping';\n        if (isReadyEvent || isPingResponse) {\n          _this.element.setAttribute('data-ready', 'true');\n          resolve();\n          return;\n        }\n        processData(_this, data);\n      };\n      _this._window.addEventListener('message', _this._onMessage);\n      if (_this.element.nodeName !== 'IFRAME') {\n        var params = getOEmbedParameters(element, options);\n        var url = getVimeoUrl(params);\n        getOEmbedData(url, params, element).then(function (data) {\n          var iframe = createEmbed(data, element);\n          // Overwrite element with the new iframe,\n          // but store reference to the original element\n          _this.element = iframe;\n          _this._originalElement = element;\n          swapCallbacks(element, iframe);\n          playerMap.set(_this.element, _this);\n          return data;\n        }).catch(reject);\n      }\n    });\n\n    // Store a copy of this Player in the map\n    readyMap.set(this, readyPromise);\n    playerMap.set(this.element, this);\n\n    // Send a ping to the iframe so the ready promise will be resolved if\n    // the player is already ready.\n    if (this.element.nodeName === 'IFRAME') {\n      postMessage(this, 'ping');\n    }\n    if (screenfull.isEnabled) {\n      var exitFullscreen = function exitFullscreen() {\n        return screenfull.exit();\n      };\n      this.fullscreenchangeHandler = function () {\n        if (screenfull.isFullscreen) {\n          storeCallback(_this, 'event:exitFullscreen', exitFullscreen);\n        } else {\n          removeCallback(_this, 'event:exitFullscreen', exitFullscreen);\n        }\n        // eslint-disable-next-line\n        _this.ready().then(function () {\n          postMessage(_this, 'fullscreenchange', screenfull.isFullscreen);\n        });\n      };\n      screenfull.on('fullscreenchange', this.fullscreenchangeHandler);\n    }\n    return this;\n  }\n\n  /**\n   * Get a promise for a method.\n   *\n   * @param {string} name The API method to call.\n   * @param {Object} [args={}] Arguments to send via postMessage.\n   * @return {Promise}\n   */\n  _createClass(Player, [{\n    key: \"callMethod\",\n    value: function callMethod(name) {\n      var _this2 = this;\n      var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return new npo_src(function (resolve, reject) {\n        // We are storing the resolve/reject handlers to call later, so we\n        // cant return here.\n        // eslint-disable-next-line promise/always-return\n        return _this2.ready().then(function () {\n          storeCallback(_this2, name, {\n            resolve: resolve,\n            reject: reject\n          });\n          postMessage(_this2, name, args);\n        }).catch(reject);\n      });\n    }\n\n    /**\n     * Get a promise for the value of a player property.\n     *\n     * @param {string} name The property name\n     * @return {Promise}\n     */\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      var _this3 = this;\n      return new npo_src(function (resolve, reject) {\n        name = getMethodName(name, 'get');\n\n        // We are storing the resolve/reject handlers to call later, so we\n        // cant return here.\n        // eslint-disable-next-line promise/always-return\n        return _this3.ready().then(function () {\n          storeCallback(_this3, name, {\n            resolve: resolve,\n            reject: reject\n          });\n          postMessage(_this3, name);\n        }).catch(reject);\n      });\n    }\n\n    /**\n     * Get a promise for setting the value of a player property.\n     *\n     * @param {string} name The API method to call.\n     * @param {mixed} value The value to set.\n     * @return {Promise}\n     */\n  }, {\n    key: \"set\",\n    value: function set(name, value) {\n      var _this4 = this;\n      return new npo_src(function (resolve, reject) {\n        name = getMethodName(name, 'set');\n        if (value === undefined || value === null) {\n          throw new TypeError('There must be a value to set.');\n        }\n\n        // We are storing the resolve/reject handlers to call later, so we\n        // cant return here.\n        // eslint-disable-next-line promise/always-return\n        return _this4.ready().then(function () {\n          storeCallback(_this4, name, {\n            resolve: resolve,\n            reject: reject\n          });\n          postMessage(_this4, name, value);\n        }).catch(reject);\n      });\n    }\n\n    /**\n     * Add an event listener for the specified event. Will call the\n     * callback with a single parameter, `data`, that contains the data for\n     * that event.\n     *\n     * @param {string} eventName The name of the event.\n     * @param {function(*)} callback The function to call when the event fires.\n     * @return {void}\n     */\n  }, {\n    key: \"on\",\n    value: function on(eventName, callback) {\n      if (!eventName) {\n        throw new TypeError('You must pass an event name.');\n      }\n      if (!callback) {\n        throw new TypeError('You must pass a callback function.');\n      }\n      if (typeof callback !== 'function') {\n        throw new TypeError('The callback must be a function.');\n      }\n      var callbacks = getCallbacks(this, \"event:\".concat(eventName));\n      if (callbacks.length === 0) {\n        this.callMethod('addEventListener', eventName).catch(function () {\n          // Ignore the error. There will be an error event fired that\n          // will trigger the error callback if they are listening.\n        });\n      }\n      storeCallback(this, \"event:\".concat(eventName), callback);\n    }\n\n    /**\n     * Remove an event listener for the specified event. Will remove all\n     * listeners for that event if a `callback` isnt passed, or only that\n     * specific callback if it is passed.\n     *\n     * @param {string} eventName The name of the event.\n     * @param {function} [callback] The specific callback to remove.\n     * @return {void}\n     */\n  }, {\n    key: \"off\",\n    value: function off(eventName, callback) {\n      if (!eventName) {\n        throw new TypeError('You must pass an event name.');\n      }\n      if (callback && typeof callback !== 'function') {\n        throw new TypeError('The callback must be a function.');\n      }\n      var lastCallback = removeCallback(this, \"event:\".concat(eventName), callback);\n\n      // If there are no callbacks left, remove the listener\n      if (lastCallback) {\n        this.callMethod('removeEventListener', eventName).catch(function (e) {\n          // Ignore the error. There will be an error event fired that\n          // will trigger the error callback if they are listening.\n        });\n      }\n    }\n\n    /**\n     * A promise to load a new video.\n     *\n     * @promise LoadVideoPromise\n     * @fulfill {number} The video with this id or url successfully loaded.\n     * @reject {TypeError} The id was not a number.\n     */\n    /**\n     * Load a new video into this embed. The promise will be resolved if\n     * the video is successfully loaded, or it will be rejected if it could\n     * not be loaded.\n     *\n     * @param {number|string|object} options The id of the video, the url of the video, or an object with embed options.\n     * @return {LoadVideoPromise}\n     */\n  }, {\n    key: \"loadVideo\",\n    value: function loadVideo(options) {\n      return this.callMethod('loadVideo', options);\n    }\n\n    /**\n     * A promise to perform an action when the Player is ready.\n     *\n     * @todo document errors\n     * @promise LoadVideoPromise\n     * @fulfill {void}\n     */\n    /**\n     * Trigger a function when the player iframe has initialized. You do not\n     * need to wait for `ready` to trigger to begin adding event listeners\n     * or calling other methods.\n     *\n     * @return {ReadyPromise}\n     */\n  }, {\n    key: \"ready\",\n    value: function ready() {\n      var readyPromise = readyMap.get(this) || new npo_src(function (resolve, reject) {\n        reject(new Error('Unknown player. Probably unloaded.'));\n      });\n      return npo_src.resolve(readyPromise);\n    }\n\n    /**\n     * A promise to add a cue point to the player.\n     *\n     * @promise AddCuePointPromise\n     * @fulfill {string} The id of the cue point to use for removeCuePoint.\n     * @reject {RangeError} the time was less than 0 or greater than the\n     *         videos duration.\n     * @reject {UnsupportedError} Cue points are not supported with the current\n     *         player or browser.\n     */\n    /**\n     * Add a cue point to the player.\n     *\n     * @param {number} time The time for the cue point.\n     * @param {object} [data] Arbitrary data to be returned with the cue point.\n     * @return {AddCuePointPromise}\n     */\n  }, {\n    key: \"addCuePoint\",\n    value: function addCuePoint(time) {\n      var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return this.callMethod('addCuePoint', {\n        time: time,\n        data: data\n      });\n    }\n\n    /**\n     * A promise to remove a cue point from the player.\n     *\n     * @promise AddCuePointPromise\n     * @fulfill {string} The id of the cue point that was removed.\n     * @reject {InvalidCuePoint} The cue point with the specified id was not\n     *         found.\n     * @reject {UnsupportedError} Cue points are not supported with the current\n     *         player or browser.\n     */\n    /**\n     * Remove a cue point from the video.\n     *\n     * @param {string} id The id of the cue point to remove.\n     * @return {RemoveCuePointPromise}\n     */\n  }, {\n    key: \"removeCuePoint\",\n    value: function removeCuePoint(id) {\n      return this.callMethod('removeCuePoint', id);\n    }\n\n    /**\n     * A representation of a text track on a video.\n     *\n     * @typedef {Object} VimeoTextTrack\n     * @property {string} language The ISO language code.\n     * @property {string} kind The kind of track it is (captions or subtitles).\n     * @property {string} label The humanreadable label for the track.\n     */\n    /**\n     * A promise to enable a text track.\n     *\n     * @promise EnableTextTrackPromise\n     * @fulfill {VimeoTextTrack} The text track that was enabled.\n     * @reject {InvalidTrackLanguageError} No track was available with the\n     *         specified language.\n     * @reject {InvalidTrackError} No track was available with the specified\n     *         language and kind.\n     */\n    /**\n     * Enable the text track with the specified language, and optionally the\n     * specified kind (captions or subtitles).\n     *\n     * When set via the API, the track language will not change the viewers\n     * stored preference.\n     *\n     * @param {string} language The twoletter language code.\n     * @param {string} [kind] The kind of track to enable (captions or subtitles).\n     * @return {EnableTextTrackPromise}\n     */\n  }, {\n    key: \"enableTextTrack\",\n    value: function enableTextTrack(language, kind) {\n      if (!language) {\n        throw new TypeError('You must pass a language.');\n      }\n      return this.callMethod('enableTextTrack', {\n        language: language,\n        kind: kind\n      });\n    }\n\n    /**\n     * A promise to disable the active text track.\n     *\n     * @promise DisableTextTrackPromise\n     * @fulfill {void} The track was disabled.\n     */\n    /**\n     * Disable the currently-active text track.\n     *\n     * @return {DisableTextTrackPromise}\n     */\n  }, {\n    key: \"disableTextTrack\",\n    value: function disableTextTrack() {\n      return this.callMethod('disableTextTrack');\n    }\n\n    /**\n     * A promise to pause the video.\n     *\n     * @promise PausePromise\n     * @fulfill {void} The video was paused.\n     */\n    /**\n     * Pause the video if its playing.\n     *\n     * @return {PausePromise}\n     */\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      return this.callMethod('pause');\n    }\n\n    /**\n     * A promise to play the video.\n     *\n     * @promise PlayPromise\n     * @fulfill {void} The video was played.\n     */\n    /**\n     * Play the video if its paused. **Note:** on iOS and some other\n     * mobile devices, you cannot programmatically trigger play. Once the\n     * viewer has tapped on the play button in the player, however, you\n     * will be able to use this function.\n     *\n     * @return {PlayPromise}\n     */\n  }, {\n    key: \"play\",\n    value: function play() {\n      return this.callMethod('play');\n    }\n\n    /**\n     * Request that the player enters fullscreen.\n     * @return {Promise}\n     */\n  }, {\n    key: \"requestFullscreen\",\n    value: function requestFullscreen() {\n      if (screenfull.isEnabled) {\n        return screenfull.request(this.element);\n      }\n      return this.callMethod('requestFullscreen');\n    }\n\n    /**\n     * Request that the player exits fullscreen.\n     * @return {Promise}\n     */\n  }, {\n    key: \"exitFullscreen\",\n    value: function exitFullscreen() {\n      if (screenfull.isEnabled) {\n        return screenfull.exit();\n      }\n      return this.callMethod('exitFullscreen');\n    }\n\n    /**\n     * Returns true if the player is currently fullscreen.\n     * @return {Promise}\n     */\n  }, {\n    key: \"getFullscreen\",\n    value: function getFullscreen() {\n      if (screenfull.isEnabled) {\n        return npo_src.resolve(screenfull.isFullscreen);\n      }\n      return this.get('fullscreen');\n    }\n\n    /**\n     * Request that the player enters picture-in-picture.\n     * @return {Promise}\n     */\n  }, {\n    key: \"requestPictureInPicture\",\n    value: function requestPictureInPicture() {\n      return this.callMethod('requestPictureInPicture');\n    }\n\n    /**\n     * Request that the player exits picture-in-picture.\n     * @return {Promise}\n     */\n  }, {\n    key: \"exitPictureInPicture\",\n    value: function exitPictureInPicture() {\n      return this.callMethod('exitPictureInPicture');\n    }\n\n    /**\n     * Returns true if the player is currently picture-in-picture.\n     * @return {Promise}\n     */\n  }, {\n    key: \"getPictureInPicture\",\n    value: function getPictureInPicture() {\n      return this.get('pictureInPicture');\n    }\n\n    /**\n     * A promise to prompt the viewer to initiate remote playback.\n     *\n     * @promise RemotePlaybackPromptPromise\n     * @fulfill {void}\n     * @reject {NotFoundError} No remote playback device is available.\n     */\n    /**\n     * Request to prompt the user to initiate remote playback.\n     *\n     * @return {RemotePlaybackPromptPromise}\n     */\n  }, {\n    key: \"remotePlaybackPrompt\",\n    value: function remotePlaybackPrompt() {\n      return this.callMethod('remotePlaybackPrompt');\n    }\n\n    /**\n     * A promise to unload the video.\n     *\n     * @promise UnloadPromise\n     * @fulfill {void} The video was unloaded.\n     */\n    /**\n     * Return the player to its initial state.\n     *\n     * @return {UnloadPromise}\n     */\n  }, {\n    key: \"unload\",\n    value: function unload() {\n      return this.callMethod('unload');\n    }\n\n    /**\n     * Cleanup the player and remove it from the DOM\n     *\n     * It won't be usable and a new one should be constructed\n     *  in order to do any operations.\n     *\n     * @return {Promise}\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this5 = this;\n      return new npo_src(function (resolve) {\n        readyMap.delete(_this5);\n        playerMap.delete(_this5.element);\n        if (_this5._originalElement) {\n          playerMap.delete(_this5._originalElement);\n          _this5._originalElement.removeAttribute('data-vimeo-initialized');\n        }\n        if (_this5.element && _this5.element.nodeName === 'IFRAME' && _this5.element.parentNode) {\n          // If we've added an additional wrapper div, remove that from the DOM.\n          // If not, just remove the iframe element.\n          if (_this5.element.parentNode.parentNode && _this5._originalElement && _this5._originalElement !== _this5.element.parentNode) {\n            _this5.element.parentNode.parentNode.removeChild(_this5.element.parentNode);\n          } else {\n            _this5.element.parentNode.removeChild(_this5.element);\n          }\n        }\n\n        // If the clip is private there is a case where the element stays the\n        // div element. Destroy should reset the div and remove the iframe child.\n        if (_this5.element && _this5.element.nodeName === 'DIV' && _this5.element.parentNode) {\n          _this5.element.removeAttribute('data-vimeo-initialized');\n          var iframe = _this5.element.querySelector('iframe');\n          if (iframe && iframe.parentNode) {\n            // If we've added an additional wrapper div, remove that from the DOM.\n            // If not, just remove the iframe element.\n            if (iframe.parentNode.parentNode && _this5._originalElement && _this5._originalElement !== iframe.parentNode) {\n              iframe.parentNode.parentNode.removeChild(iframe.parentNode);\n            } else {\n              iframe.parentNode.removeChild(iframe);\n            }\n          }\n        }\n        _this5._window.removeEventListener('message', _this5._onMessage);\n        if (screenfull.isEnabled) {\n          screenfull.off('fullscreenchange', _this5.fullscreenchangeHandler);\n        }\n        resolve();\n      });\n    }\n\n    /**\n     * A promise to get the autopause behavior of the video.\n     *\n     * @promise GetAutopausePromise\n     * @fulfill {boolean} Whether autopause is turned on or off.\n     * @reject {UnsupportedError} Autopause is not supported with the current\n     *         player or browser.\n     */\n    /**\n     * Get the autopause behavior for this player.\n     *\n     * @return {GetAutopausePromise}\n     */\n  }, {\n    key: \"getAutopause\",\n    value: function getAutopause() {\n      return this.get('autopause');\n    }\n\n    /**\n     * A promise to set the autopause behavior of the video.\n     *\n     * @promise SetAutopausePromise\n     * @fulfill {boolean} Whether autopause is turned on or off.\n     * @reject {UnsupportedError} Autopause is not supported with the current\n     *         player or browser.\n     */\n    /**\n     * Enable or disable the autopause behavior of this player.\n     *\n     * By default, when another video is played in the same browser, this\n     * player will automatically pause. Unless you have a specific reason\n     * for doing so, we recommend that you leave autopause set to the\n     * default (`true`).\n     *\n     * @param {boolean} autopause\n     * @return {SetAutopausePromise}\n     */\n  }, {\n    key: \"setAutopause\",\n    value: function setAutopause(autopause) {\n      return this.set('autopause', autopause);\n    }\n\n    /**\n     * A promise to get the buffered property of the video.\n     *\n     * @promise GetBufferedPromise\n     * @fulfill {Array} Buffered Timeranges converted to an Array.\n     */\n    /**\n     * Get the buffered property of the video.\n     *\n     * @return {GetBufferedPromise}\n     */\n  }, {\n    key: \"getBuffered\",\n    value: function getBuffered() {\n      return this.get('buffered');\n    }\n\n    /**\n     * @typedef {Object} CameraProperties\n     * @prop {number} props.yaw - Number between 0 and 360.\n     * @prop {number} props.pitch - Number between -90 and 90.\n     * @prop {number} props.roll - Number between -180 and 180.\n     * @prop {number} props.fov - The field of view in degrees.\n     */\n    /**\n     * A promise to get the camera properties of the player.\n     *\n     * @promise GetCameraPromise\n     * @fulfill {CameraProperties} The camera properties.\n     */\n    /**\n     * For 360 videos get the camera properties for this player.\n     *\n     * @return {GetCameraPromise}\n     */\n  }, {\n    key: \"getCameraProps\",\n    value: function getCameraProps() {\n      return this.get('cameraProps');\n    }\n\n    /**\n     * A promise to set the camera properties of the player.\n     *\n     * @promise SetCameraPromise\n     * @fulfill {Object} The camera was successfully set.\n     * @reject {RangeError} The range was out of bounds.\n     */\n    /**\n     * For 360 videos set the camera properties for this player.\n     *\n     * @param {CameraProperties} camera The camera properties\n     * @return {SetCameraPromise}\n     */\n  }, {\n    key: \"setCameraProps\",\n    value: function setCameraProps(camera) {\n      return this.set('cameraProps', camera);\n    }\n\n    /**\n     * A representation of a chapter.\n     *\n     * @typedef {Object} VimeoChapter\n     * @property {number} startTime The start time of the chapter.\n     * @property {object} title The title of the chapter.\n     * @property {number} index The place in the order of Chapters. Starts at 1.\n     */\n    /**\n     * A promise to get chapters for the video.\n     *\n     * @promise GetChaptersPromise\n     * @fulfill {VimeoChapter[]} The chapters for the video.\n     */\n    /**\n     * Get an array of all the chapters for the video.\n     *\n     * @return {GetChaptersPromise}\n     */\n  }, {\n    key: \"getChapters\",\n    value: function getChapters() {\n      return this.get('chapters');\n    }\n\n    /**\n     * A promise to get the currently active chapter.\n     *\n     * @promise GetCurrentChaptersPromise\n     * @fulfill {VimeoChapter|undefined} The current chapter for the video.\n     */\n    /**\n     * Get the currently active chapter for the video.\n     *\n     * @return {GetCurrentChaptersPromise}\n     */\n  }, {\n    key: \"getCurrentChapter\",\n    value: function getCurrentChapter() {\n      return this.get('currentChapter');\n    }\n\n    /**\n     * A promise to get the accent color of the player.\n     *\n     * @promise GetColorPromise\n     * @fulfill {string} The hex color of the player.\n     */\n    /**\n     * Get the accent color for this player. Note this is deprecated in place of `getColorTwo`.\n     *\n     * @return {GetColorPromise}\n     */\n  }, {\n    key: \"getColor\",\n    value: function getColor() {\n      return this.get('color');\n    }\n\n    /**\n     * A promise to get all colors for the player in an array.\n     *\n     * @promise GetColorsPromise\n     * @fulfill {string[]} The hex colors of the player.\n     */\n    /**\n     * Get all the colors for this player in an array: [colorOne, colorTwo, colorThree, colorFour]\n     *\n     * @return {GetColorPromise}\n     */\n  }, {\n    key: \"getColors\",\n    value: function getColors() {\n      return npo_src.all([this.get('colorOne'), this.get('colorTwo'), this.get('colorThree'), this.get('colorFour')]);\n    }\n\n    /**\n     * A promise to set the accent color of the player.\n     *\n     * @promise SetColorPromise\n     * @fulfill {string} The color was successfully set.\n     * @reject {TypeError} The string was not a valid hex or rgb color.\n     * @reject {ContrastError} The color was set, but the contrast is\n     *         outside of the acceptable range.\n     * @reject {EmbedSettingsError} The owner of the player has chosen to\n     *         use a specific color.\n     */\n    /**\n     * Set the accent color of this player to a hex or rgb string. Setting the\n     * color may fail if the owner of the video has set their embed\n     * preferences to force a specific color.\n     * Note this is deprecated in place of `setColorTwo`.\n     *\n     * @param {string} color The hex or rgb color string to set.\n     * @return {SetColorPromise}\n     */\n  }, {\n    key: \"setColor\",\n    value: function setColor(color) {\n      return this.set('color', color);\n    }\n\n    /**\n     * A promise to set all colors for the player.\n     *\n     * @promise SetColorsPromise\n     * @fulfill {string[]} The colors were successfully set.\n     * @reject {TypeError} The string was not a valid hex or rgb color.\n     * @reject {ContrastError} The color was set, but the contrast is\n     *         outside of the acceptable range.\n     * @reject {EmbedSettingsError} The owner of the player has chosen to\n     *         use a specific color.\n     */\n    /**\n     * Set the colors of this player to a hex or rgb string. Setting the\n     * color may fail if the owner of the video has set their embed\n     * preferences to force a specific color.\n     * The colors should be passed in as an array: [colorOne, colorTwo, colorThree, colorFour].\n     * If a color should not be set, the index in the array can be left as null.\n     *\n     * @param {string[]} colors Array of the hex or rgb color strings to set.\n     * @return {SetColorsPromise}\n     */\n  }, {\n    key: \"setColors\",\n    value: function setColors(colors) {\n      if (!Array.isArray(colors)) {\n        return new npo_src(function (resolve, reject) {\n          return reject(new TypeError('Argument must be an array.'));\n        });\n      }\n      var nullPromise = new npo_src(function (resolve) {\n        return resolve(null);\n      });\n      var colorPromises = [colors[0] ? this.set('colorOne', colors[0]) : nullPromise, colors[1] ? this.set('colorTwo', colors[1]) : nullPromise, colors[2] ? this.set('colorThree', colors[2]) : nullPromise, colors[3] ? this.set('colorFour', colors[3]) : nullPromise];\n      return npo_src.all(colorPromises);\n    }\n\n    /**\n     * A representation of a cue point.\n     *\n     * @typedef {Object} VimeoCuePoint\n     * @property {number} time The time of the cue point.\n     * @property {object} data The data passed when adding the cue point.\n     * @property {string} id The unique id for use with removeCuePoint.\n     */\n    /**\n     * A promise to get the cue points of a video.\n     *\n     * @promise GetCuePointsPromise\n     * @fulfill {VimeoCuePoint[]} The cue points added to the video.\n     * @reject {UnsupportedError} Cue points are not supported with the current\n     *         player or browser.\n     */\n    /**\n     * Get an array of the cue points added to the video.\n     *\n     * @return {GetCuePointsPromise}\n     */\n  }, {\n    key: \"getCuePoints\",\n    value: function getCuePoints() {\n      return this.get('cuePoints');\n    }\n\n    /**\n     * A promise to get the current time of the video.\n     *\n     * @promise GetCurrentTimePromise\n     * @fulfill {number} The current time in seconds.\n     */\n    /**\n     * Get the current playback position in seconds.\n     *\n     * @return {GetCurrentTimePromise}\n     */\n  }, {\n    key: \"getCurrentTime\",\n    value: function getCurrentTime() {\n      return this.get('currentTime');\n    }\n\n    /**\n     * A promise to set the current time of the video.\n     *\n     * @promise SetCurrentTimePromise\n     * @fulfill {number} The actual current time that was set.\n     * @reject {RangeError} the time was less than 0 or greater than the\n     *         videos duration.\n     */\n    /**\n     * Set the current playback position in seconds. If the player was\n     * paused, it will remain paused. Likewise, if the player was playing,\n     * it will resume playing once the video has buffered.\n     *\n     * You can provide an accurate time and the player will attempt to seek\n     * to as close to that time as possible. The exact time will be the\n     * fulfilled value of the promise.\n     *\n     * @param {number} currentTime\n     * @return {SetCurrentTimePromise}\n     */\n  }, {\n    key: \"setCurrentTime\",\n    value: function setCurrentTime(currentTime) {\n      return this.set('currentTime', currentTime);\n    }\n\n    /**\n     * A promise to get the duration of the video.\n     *\n     * @promise GetDurationPromise\n     * @fulfill {number} The duration in seconds.\n     */\n    /**\n     * Get the duration of the video in seconds. It will be rounded to the\n     * nearest second before playback begins, and to the nearest thousandth\n     * of a second after playback begins.\n     *\n     * @return {GetDurationPromise}\n     */\n  }, {\n    key: \"getDuration\",\n    value: function getDuration() {\n      return this.get('duration');\n    }\n\n    /**\n     * A promise to get the ended state of the video.\n     *\n     * @promise GetEndedPromise\n     * @fulfill {boolean} Whether or not the video has ended.\n     */\n    /**\n     * Get the ended state of the video. The video has ended if\n     * `currentTime === duration`.\n     *\n     * @return {GetEndedPromise}\n     */\n  }, {\n    key: \"getEnded\",\n    value: function getEnded() {\n      return this.get('ended');\n    }\n\n    /**\n     * A promise to get the loop state of the player.\n     *\n     * @promise GetLoopPromise\n     * @fulfill {boolean} Whether or not the player is set to loop.\n     */\n    /**\n     * Get the loop state of the player.\n     *\n     * @return {GetLoopPromise}\n     */\n  }, {\n    key: \"getLoop\",\n    value: function getLoop() {\n      return this.get('loop');\n    }\n\n    /**\n     * A promise to set the loop state of the player.\n     *\n     * @promise SetLoopPromise\n     * @fulfill {boolean} The loop state that was set.\n     */\n    /**\n     * Set the loop state of the player. When set to `true`, the player\n     * will start over immediately once playback ends.\n     *\n     * @param {boolean} loop\n     * @return {SetLoopPromise}\n     */\n  }, {\n    key: \"setLoop\",\n    value: function setLoop(loop) {\n      return this.set('loop', loop);\n    }\n\n    /**\n     * A promise to set the muted state of the player.\n     *\n     * @promise SetMutedPromise\n     * @fulfill {boolean} The muted state that was set.\n     */\n    /**\n     * Set the muted state of the player. When set to `true`, the player\n     * volume will be muted.\n     *\n     * @param {boolean} muted\n     * @return {SetMutedPromise}\n     */\n  }, {\n    key: \"setMuted\",\n    value: function setMuted(muted) {\n      return this.set('muted', muted);\n    }\n\n    /**\n     * A promise to get the muted state of the player.\n     *\n     * @promise GetMutedPromise\n     * @fulfill {boolean} Whether or not the player is muted.\n     */\n    /**\n     * Get the muted state of the player.\n     *\n     * @return {GetMutedPromise}\n     */\n  }, {\n    key: \"getMuted\",\n    value: function getMuted() {\n      return this.get('muted');\n    }\n\n    /**\n     * A promise to get the paused state of the player.\n     *\n     * @promise GetLoopPromise\n     * @fulfill {boolean} Whether or not the video is paused.\n     */\n    /**\n     * Get the paused state of the player.\n     *\n     * @return {GetLoopPromise}\n     */\n  }, {\n    key: \"getPaused\",\n    value: function getPaused() {\n      return this.get('paused');\n    }\n\n    /**\n     * A promise to get the playback rate of the player.\n     *\n     * @promise GetPlaybackRatePromise\n     * @fulfill {number} The playback rate of the player on a scale from 0 to 2.\n     */\n    /**\n     * Get the playback rate of the player on a scale from `0` to `2`.\n     *\n     * @return {GetPlaybackRatePromise}\n     */\n  }, {\n    key: \"getPlaybackRate\",\n    value: function getPlaybackRate() {\n      return this.get('playbackRate');\n    }\n\n    /**\n     * A promise to set the playbackrate of the player.\n     *\n     * @promise SetPlaybackRatePromise\n     * @fulfill {number} The playback rate was set.\n     * @reject {RangeError} The playback rate was less than 0 or greater than 2.\n     */\n    /**\n     * Set the playback rate of the player on a scale from `0` to `2`. When set\n     * via the API, the playback rate will not be synchronized to other\n     * players or stored as the viewer's preference.\n     *\n     * @param {number} playbackRate\n     * @return {SetPlaybackRatePromise}\n     */\n  }, {\n    key: \"setPlaybackRate\",\n    value: function setPlaybackRate(playbackRate) {\n      return this.set('playbackRate', playbackRate);\n    }\n\n    /**\n     * A promise to get the played property of the video.\n     *\n     * @promise GetPlayedPromise\n     * @fulfill {Array} Played Timeranges converted to an Array.\n     */\n    /**\n     * Get the played property of the video.\n     *\n     * @return {GetPlayedPromise}\n     */\n  }, {\n    key: \"getPlayed\",\n    value: function getPlayed() {\n      return this.get('played');\n    }\n\n    /**\n     * A promise to get the qualities available of the current video.\n     *\n     * @promise GetQualitiesPromise\n     * @fulfill {Array} The qualities of the video.\n     */\n    /**\n     * Get the qualities of the current video.\n     *\n     * @return {GetQualitiesPromise}\n     */\n  }, {\n    key: \"getQualities\",\n    value: function getQualities() {\n      return this.get('qualities');\n    }\n\n    /**\n     * A promise to get the current set quality of the video.\n     *\n     * @promise GetQualityPromise\n     * @fulfill {string} The current set quality.\n     */\n    /**\n     * Get the current set quality of the video.\n     *\n     * @return {GetQualityPromise}\n     */\n  }, {\n    key: \"getQuality\",\n    value: function getQuality() {\n      return this.get('quality');\n    }\n\n    /**\n     * A promise to set the video quality.\n     *\n     * @promise SetQualityPromise\n     * @fulfill {number} The quality was set.\n     * @reject {RangeError} The quality is not available.\n     */\n    /**\n     * Set a video quality.\n     *\n     * @param {string} quality\n     * @return {SetQualityPromise}\n     */\n  }, {\n    key: \"setQuality\",\n    value: function setQuality(quality) {\n      return this.set('quality', quality);\n    }\n\n    /**\n     * A promise to get the remote playback availability.\n     *\n     * @promise RemotePlaybackAvailabilityPromise\n     * @fulfill {boolean} Whether remote playback is available.\n     */\n    /**\n     * Get the availability of remote playback.\n     *\n     * @return {RemotePlaybackAvailabilityPromise}\n     */\n  }, {\n    key: \"getRemotePlaybackAvailability\",\n    value: function getRemotePlaybackAvailability() {\n      return this.get('remotePlaybackAvailability');\n    }\n\n    /**\n     * A promise to get the current remote playback state.\n     *\n     * @promise RemotePlaybackStatePromise\n     * @fulfill {string} The state of the remote playback: connecting, connected, or disconnected.\n     */\n    /**\n     * Get the current remote playback state.\n     *\n     * @return {RemotePlaybackStatePromise}\n     */\n  }, {\n    key: \"getRemotePlaybackState\",\n    value: function getRemotePlaybackState() {\n      return this.get('remotePlaybackState');\n    }\n\n    /**\n     * A promise to get the seekable property of the video.\n     *\n     * @promise GetSeekablePromise\n     * @fulfill {Array} Seekable Timeranges converted to an Array.\n     */\n    /**\n     * Get the seekable property of the video.\n     *\n     * @return {GetSeekablePromise}\n     */\n  }, {\n    key: \"getSeekable\",\n    value: function getSeekable() {\n      return this.get('seekable');\n    }\n\n    /**\n     * A promise to get the seeking property of the player.\n     *\n     * @promise GetSeekingPromise\n     * @fulfill {boolean} Whether or not the player is currently seeking.\n     */\n    /**\n     * Get if the player is currently seeking.\n     *\n     * @return {GetSeekingPromise}\n     */\n  }, {\n    key: \"getSeeking\",\n    value: function getSeeking() {\n      return this.get('seeking');\n    }\n\n    /**\n     * A promise to get the text tracks of a video.\n     *\n     * @promise GetTextTracksPromise\n     * @fulfill {VimeoTextTrack[]} The text tracks associated with the video.\n     */\n    /**\n     * Get an array of the text tracks that exist for the video.\n     *\n     * @return {GetTextTracksPromise}\n     */\n  }, {\n    key: \"getTextTracks\",\n    value: function getTextTracks() {\n      return this.get('textTracks');\n    }\n\n    /**\n     * A promise to get the embed code for the video.\n     *\n     * @promise GetVideoEmbedCodePromise\n     * @fulfill {string} The `<iframe>` embed code for the video.\n     */\n    /**\n     * Get the `<iframe>` embed code for the video.\n     *\n     * @return {GetVideoEmbedCodePromise}\n     */\n  }, {\n    key: \"getVideoEmbedCode\",\n    value: function getVideoEmbedCode() {\n      return this.get('videoEmbedCode');\n    }\n\n    /**\n     * A promise to get the id of the video.\n     *\n     * @promise GetVideoIdPromise\n     * @fulfill {number} The id of the video.\n     */\n    /**\n     * Get the id of the video.\n     *\n     * @return {GetVideoIdPromise}\n     */\n  }, {\n    key: \"getVideoId\",\n    value: function getVideoId() {\n      return this.get('videoId');\n    }\n\n    /**\n     * A promise to get the title of the video.\n     *\n     * @promise GetVideoTitlePromise\n     * @fulfill {number} The title of the video.\n     */\n    /**\n     * Get the title of the video.\n     *\n     * @return {GetVideoTitlePromise}\n     */\n  }, {\n    key: \"getVideoTitle\",\n    value: function getVideoTitle() {\n      return this.get('videoTitle');\n    }\n\n    /**\n     * A promise to get the native width of the video.\n     *\n     * @promise GetVideoWidthPromise\n     * @fulfill {number} The native width of the video.\n     */\n    /**\n     * Get the native width of the currentlyplaying video. The width of\n     * the highestresolution available will be used before playback begins.\n     *\n     * @return {GetVideoWidthPromise}\n     */\n  }, {\n    key: \"getVideoWidth\",\n    value: function getVideoWidth() {\n      return this.get('videoWidth');\n    }\n\n    /**\n     * A promise to get the native height of the video.\n     *\n     * @promise GetVideoHeightPromise\n     * @fulfill {number} The native height of the video.\n     */\n    /**\n     * Get the native height of the currentlyplaying video. The height of\n     * the highestresolution available will be used before playback begins.\n     *\n     * @return {GetVideoHeightPromise}\n     */\n  }, {\n    key: \"getVideoHeight\",\n    value: function getVideoHeight() {\n      return this.get('videoHeight');\n    }\n\n    /**\n     * A promise to get the vimeo.com url for the video.\n     *\n     * @promise GetVideoUrlPromise\n     * @fulfill {number} The vimeo.com url for the video.\n     * @reject {PrivacyError} The url isnt available because of the videos privacy setting.\n     */\n    /**\n     * Get the vimeo.com url for the video.\n     *\n     * @return {GetVideoUrlPromise}\n     */\n  }, {\n    key: \"getVideoUrl\",\n    value: function getVideoUrl() {\n      return this.get('videoUrl');\n    }\n\n    /**\n     * A promise to get the volume level of the player.\n     *\n     * @promise GetVolumePromise\n     * @fulfill {number} The volume level of the player on a scale from 0 to 1.\n     */\n    /**\n     * Get the current volume level of the player on a scale from `0` to `1`.\n     *\n     * Most mobile devices do not support an independent volume from the\n     * system volume. In those cases, this method will always return `1`.\n     *\n     * @return {GetVolumePromise}\n     */\n  }, {\n    key: \"getVolume\",\n    value: function getVolume() {\n      return this.get('volume');\n    }\n\n    /**\n     * A promise to set the volume level of the player.\n     *\n     * @promise SetVolumePromise\n     * @fulfill {number} The volume was set.\n     * @reject {RangeError} The volume was less than 0 or greater than 1.\n     */\n    /**\n     * Set the volume of the player on a scale from `0` to `1`. When set\n     * via the API, the volume level will not be synchronized to other\n     * players or stored as the viewers preference.\n     *\n     * Most mobile devices do not support setting the volume. An error will\n     * *not* be triggered in that situation.\n     *\n     * @param {number} volume\n     * @return {SetVolumePromise}\n     */\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(volume) {\n      return this.set('volume', volume);\n    }\n\n    /** @typedef {import('./lib/timing-object.types').TimingObject} TimingObject */\n    /** @typedef {import('./lib/timing-src-connector.types').TimingSrcConnectorOptions} TimingSrcConnectorOptions */\n    /** @typedef {import('./lib/timing-src-connector').TimingSrcConnector} TimingSrcConnector */\n\n    /**\n     * Connects a TimingObject to the video player (https://webtiming.github.io/timingobject/)\n     *\n     * @param {TimingObject} timingObject\n     * @param {TimingSrcConnectorOptions} options\n     *\n     * @return {Promise<TimingSrcConnector>}\n     */\n  }, {\n    key: \"setTimingSrc\",\n    value: function () {\n      var _setTimingSrc = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(timingObject, options) {\n        var _this6 = this;\n        var connector;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (timingObject) {\n                _context.next = 2;\n                break;\n              }\n              throw new TypeError('A Timing Object must be provided.');\n            case 2:\n              _context.next = 4;\n              return this.ready();\n            case 4:\n              connector = new TimingSrcConnector(this, timingObject, options);\n              postMessage(this, 'notifyTimingObjectConnect');\n              connector.addEventListener('disconnect', function () {\n                return postMessage(_this6, 'notifyTimingObjectDisconnect');\n              });\n              return _context.abrupt(\"return\", connector);\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function setTimingSrc(_x, _x2) {\n        return _setTimingSrc.apply(this, arguments);\n      }\n      return setTimingSrc;\n    }()\n  }]);\n  return Player;\n}(); // Setup embed only if this is not a node environment\nif (!isNode) {\n  screenfull = initializeScreenfull();\n  initializeEmbeds();\n  resizeEmbeds();\n  initAppendVideoMetadata();\n  checkUrlTimeParam();\n}\n\nexport default Player;\n","import React, { useEffect } from \"react\";\nimport Player from \"@vimeo/player\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport CreateTrackerWrapper from \"../createTrackerWrapper\";\nimport MediaEvents from \"../components/mediaEvents\";\n\nimport { startVimeoTracking } from \"@snowplow/browser-plugin-vimeo-tracking\";\nimport { vimeoSchemas } from \"../constants\";\n\nfunction VimeoPlayer() {\n  const vimeoPlayer = React.useRef(null);\n  useEffect(() => {\n    const player = new Player(vimeoPlayer.current);\n    const id = uuidv4();\n\n    player.addCuePoint(2.5, { foo: \"bar\" });\n\n    startVimeoTracking({\n      video: player,\n      id,\n      boundaries: [50],\n    });\n  }, []);\n\n  return (\n    <>\n      <div\n        ref={vimeoPlayer}\n        id=\"vimeo\"\n        data-vimeo-url=\"https://player.vimeo.com/video/808787686?h=3044aad004\"\n      ></div>\n      <MediaEvents schemas={vimeoSchemas} />\n    </>\n  );\n}\n\nfunction Wrapped() {\n  return (\n    <CreateTrackerWrapper>\n      <VimeoPlayer />\n    </CreateTrackerWrapper>\n  );\n}\n\nexport default Wrapped;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport Snowplow from \"./routes/snowplow\";\nimport Form from \"./routes/form\";\nimport IframeForm from \"./routes/iframeForm\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport Youtube from \"./routes/youtube\";\nimport YoutubePlayer from \"./routes/youtubePlayer.jsx\";\nimport { getPath } from \"./helpers\";\nimport Media from \"./routes/media.jsx\";\nimport VimeoIframe from \"./routes/vimeoIframe\";\nimport VimeoPlayer from \"./routes/vimeoPlayer\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Routes>\n        <Route path={getPath(\"\")} element={<App />} />\n        <Route path={getPath(\"snowplow\")} element={<Snowplow />} />\n        <Route path={getPath(\"form\")} element={<Form />} />\n        <Route path={getPath(\"iframe_form\")} element={<IframeForm />} />\n        <Route path={getPath(\"youtube\")} element={<Youtube />} />\n        <Route path={getPath(\"youtube_player\")} element={<YoutubePlayer />} />\n        <Route path={getPath(\"media\")} element={<Media />} />\n        <Route path={getPath(\"vimeo_iframe\")} element={<VimeoIframe />} />\n        <Route path={getPath(\"vimeo_player\")} element={<VimeoPlayer />} />\n      </Routes>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"names":["charenc","utf8","stringToBytes","str","bin","unescape","encodeURIComponent","bytesToString","bytes","decodeURIComponent","escape","i","length","push","charCodeAt","String","fromCharCode","join","module","exports","base64map","crypt","rotl","n","b","rotr","endian","constructor","Number","randomBytes","Math","floor","random","bytesToWords","words","wordsToBytes","bytesToHex","hex","toString","hexToBytes","c","parseInt","substr","bytesToBase64","base64","triplet","j","charAt","base64ToBytes","replace","imod4","indexOf","pow","getOwnPropertySymbols","Object","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","assign","test1","getOwnPropertyNames","test2","map","test3","split","forEach","letter","keys","err","shouldUseNative","target","source","from","symbols","to","val","undefined","TypeError","toObject","s","arguments","key","call","aa","require","m","r","y","a","Error","ba","Set","ca","da","ea","add","fa","window","document","createElement","ha","ia","ja","ka","B","d","e","f","g","this","acceptsBooleans","attributeName","attributeNamespace","mustUseProperty","propertyName","type","sanitizeURL","removeEmptyString","D","toLowerCase","oa","pa","toUpperCase","qa","slice","ma","isNaN","na","test","la","removeAttribute","setAttribute","setAttributeNS","xlinkHref","ra","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","sa","ta","ua","wa","xa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","Symbol","for","E","Ma","Ka","iterator","La","Na","stack","trim","match","Oa","Pa","prepareStackTrace","defineProperty","set","Reflect","construct","k","h","displayName","name","Qa","tag","render","_render","Ra","$$typeof","_context","_payload","_init","Sa","Ta","nodeName","Va","_valueTracker","getOwnPropertyDescriptor","get","configurable","enumerable","getValue","setValue","stopTracking","Ua","Wa","checked","value","Xa","activeElement","body","Ya","defaultChecked","defaultValue","_wrapperState","initialChecked","Za","initialValue","controlled","$a","ab","bb","cb","ownerDocument","eb","children","Children","db","fb","options","selected","defaultSelected","disabled","gb","dangerouslySetInnerHTML","hb","Array","isArray","ib","jb","textContent","kb","html","mathml","svg","lb","mb","nb","ob","namespaceURI","innerHTML","valueOf","firstChild","removeChild","appendChild","MSApp","execUnsafeLocalFunction","pb","lastChild","nodeType","nodeValue","qb","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","rb","sb","tb","style","setProperty","substring","ub","menuitem","area","base","br","col","embed","hr","img","input","keygen","link","meta","param","track","wbr","vb","wb","is","xb","srcElement","correspondingUseElement","parentNode","yb","zb","Ab","Bb","Cb","stateNode","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Ob","Pb","Qb","addEventListener","removeEventListener","Rb","l","apply","onError","Sb","Tb","Ub","Vb","Wb","Xb","Zb","alternate","return","flags","$b","memoizedState","dehydrated","ac","cc","child","sibling","current","bc","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","nc","Map","oc","pc","qc","rc","blockedOn","domEventName","eventSystemFlags","nativeEvent","targetContainers","sc","delete","pointerId","tc","vc","wc","lanePriority","unstable_runWithPriority","priority","hydrate","containerInfo","xc","yc","shift","zc","Ac","Bc","unstable_scheduleCallback","unstable_NormalPriority","Cc","Dc","Ec","animationend","animationiteration","animationstart","transitionend","Fc","Gc","Hc","animation","transition","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","Qc","unstable_now","F","Rc","Uc","pendingLanes","expiredLanes","suspendedLanes","pingedLanes","Vc","entangledLanes","entanglements","Wc","Xc","Yc","Zc","$c","eventTimes","clz32","bd","cd","log","LN2","dd","unstable_UserBlockingPriority","ed","fd","gd","hd","id","bind","uc","jd","kd","ld","md","nd","od","keyCode","charCode","pd","qd","rd","_reactName","_targetInst","currentTarget","isDefaultPrevented","defaultPrevented","returnValue","isPropagationStopped","preventDefault","stopPropagation","cancelBubble","persist","isPersistent","wd","xd","yd","sd","eventPhase","bubbles","cancelable","timeStamp","Date","now","isTrusted","td","ud","view","detail","vd","Ad","screenX","screenY","clientX","clientY","pageX","pageY","ctrlKey","shiftKey","altKey","metaKey","getModifierState","zd","button","buttons","relatedTarget","fromElement","toElement","movementX","movementY","Bd","Dd","dataTransfer","Fd","Hd","animationName","elapsedTime","pseudoElement","Id","clipboardData","Jd","Ld","data","Md","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","Nd","Od","Alt","Control","Meta","Shift","Pd","Qd","code","location","repeat","locale","which","Rd","Td","width","height","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","Vd","touches","targetTouches","changedTouches","Xd","Yd","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","Zd","$d","ae","be","documentMode","ce","de","ee","fe","ge","he","ie","le","color","date","datetime","email","month","number","password","range","search","tel","text","time","url","week","me","ne","oe","event","listeners","pe","qe","re","se","te","ue","ve","we","xe","ye","ze","oninput","Ae","detachEvent","Be","Ce","attachEvent","De","Ee","Fe","He","Ie","Je","Ke","Le","node","offset","nextSibling","Me","contains","compareDocumentPosition","Ne","HTMLIFrameElement","contentWindow","href","Oe","contentEditable","Pe","Qe","Re","Se","Te","Ue","start","selectionStart","end","selectionEnd","anchorNode","defaultView","getSelection","anchorOffset","focusNode","focusOffset","Ve","We","Xe","Ye","concat","Ze","Yb","instance","listener","G","$e","has","af","bf","cf","df","capture","passive","Nb","x","w","z","u","q","t","v","ef","ff","parentWindow","gf","hf","J","K","Q","L","je","char","ke","unshift","jf","kf","lf","mf","autoFocus","nf","__html","of","setTimeout","pf","clearTimeout","qf","rf","sf","previousSibling","tf","vf","wf","xf","yf","zf","Af","Bf","H","I","Cf","M","N","Df","Ef","contextTypes","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","Ff","childContextTypes","Gf","Hf","If","getChildContext","Jf","__reactInternalMemoizedMergedChildContext","Kf","Lf","Mf","Nf","Of","Pf","unstable_cancelCallback","Qf","unstable_shouldYield","Rf","unstable_requestPaint","Sf","Tf","unstable_getCurrentPriorityLevel","Uf","unstable_ImmediatePriority","Vf","Wf","Xf","unstable_LowPriority","Yf","unstable_IdlePriority","Zf","$f","ag","bg","cg","dg","O","eg","fg","gg","hg","ig","jg","kg","ReactCurrentBatchConfig","lg","defaultProps","mg","ng","og","pg","qg","rg","_currentValue","sg","childLanes","tg","dependencies","firstContext","lanes","ug","vg","context","observedBits","next","responders","wg","xg","updateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","pending","effects","yg","zg","eventTime","lane","payload","callback","Ag","Bg","Cg","A","p","C","Dg","Eg","Fg","Component","refs","Gg","Kg","isMounted","_reactInternals","enqueueSetState","Hg","Ig","Jg","enqueueReplaceState","enqueueForceUpdate","Lg","shouldComponentUpdate","isPureReactComponent","Mg","contextType","state","updater","Ng","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","Og","props","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","componentDidMount","Pg","Qg","ref","_owner","_stringRef","Rg","Sg","lastEffect","nextEffect","firstEffect","index","Tg","Ug","mode","elementType","Vg","implementation","Wg","Xg","done","Yg","Zg","$g","ah","bh","ch","dh","eh","documentElement","tagName","fh","gh","hh","P","ih","memoizedProps","revealOrder","jh","kh","lh","mh","nh","oh","pendingProps","ph","qh","rh","sh","th","uh","_workInProgressVersionPrimary","vh","ReactCurrentDispatcher","wh","xh","R","S","T","yh","zh","Ah","Bh","Ch","Dh","Eh","Fh","Gh","Hh","baseQueue","queue","Ih","Jh","Kh","lastRenderedReducer","action","eagerReducer","eagerState","lastRenderedState","dispatch","Lh","Mh","_getVersion","_source","mutableReadLanes","Nh","U","useState","getSnapshot","subscribe","useEffect","setSnapshot","Oh","Ph","Qh","Rh","create","destroy","deps","Sh","Th","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","ci","di","readContext","useCallback","useContext","useImperativeHandle","useLayoutEffect","useMemo","useReducer","useRef","useDebugValue","useDeferredValue","useTransition","useMutableSource","useOpaqueIdentifier","unstable_isNewReconciler","uf","ei","ReactCurrentOwner","fi","gi","hi","ii","ji","compare","ki","li","mi","baseLanes","ni","oi","pi","UNSAFE_componentWillUpdate","componentWillUpdate","componentDidUpdate","qi","getDerivedStateFromError","ri","pendingContext","Bi","Ci","Di","Ei","si","retryLane","ti","fallback","unstable_avoidThisFallback","ui","unstable_expectedLoadTime","vi","wi","xi","yi","zi","isBackwards","rendering","renderingStartTime","last","tail","tailMode","Ai","Fi","Gi","wasMultiple","multiple","onClick","onclick","size","createElementNS","createTextNode","V","Hi","Ii","W","Ji","Ki","Li","Mi","message","Ni","console","error","Oi","WeakMap","Pi","element","Qi","Ri","Si","componentDidCatch","Ti","componentStack","Ui","WeakSet","Vi","Wi","Xi","__reactInternalSnapshotBeforeUpdate","Yi","Zi","$i","focus","aj","display","bj","onCommitFiberUnmount","componentWillUnmount","cj","dj","ej","fj","gj","hj","insertBefore","_reactRootContainer","ij","jj","kj","lj","then","mj","nj","ceil","oj","pj","X","Y","qj","rj","sj","tj","uj","vj","Infinity","wj","ck","Z","xj","yj","zj","Aj","Bj","Cj","Dj","Ej","Fj","Gj","Hj","Ij","Jj","Sc","Kj","Lj","Mj","callbackNode","expirationTimes","callbackPriority","Tc","Nj","Oj","Pj","Qj","Rj","Sj","Tj","finishedWork","finishedLanes","Uj","timeoutHandle","Wj","Xj","pingCache","Yj","Zj","va","ak","bk","dk","rangeCount","focusedElem","selectionRange","ek","min","extend","createRange","setStart","removeAllRanges","addRange","setEnd","left","scrollLeft","top","scrollTop","onCommitFiberRoot","fk","gk","ik","isReactComponent","pendingChildren","jk","mutableSourceEagerHydrationData","lk","mk","nk","ok","qk","hydrationOptions","mutableSources","_internalRoot","rk","tk","hasAttribute","sk","uk","kk","hk","_calculateChangedBits","unstable_observedBits","unmount","querySelectorAll","JSON","stringify","form","Vj","vk","Events","wk","findFiberByHostInstance","bundleType","version","rendererPackageName","xk","rendererConfig","overrideHookState","overrideHookStateDeletePath","overrideHookStateRenamePath","overrideProps","overridePropsDeletePath","overridePropsRenamePath","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","__REACT_DEVTOOLS_GLOBAL_HOOK__","yk","isDisabled","supportsFiber","inject","createPortal","findDOMNode","flushSync","unmountComponentAtNode","unstable_batchedUpdates","unstable_createPortal","unstable_renderSubtreeIntoContainer","checkDCE","Fragment","__self","__source","jsx","jsxs","StrictMode","Profiler","Suspense","setState","forceUpdate","_status","_result","default","IsSomeRendererActing","count","toArray","only","PureComponent","cloneElement","createContext","_currentValue2","_threadCount","Provider","Consumer","createFactory","createRef","forwardRef","isValidElement","lazy","memo","performance","MessageChannel","unstable_forceFrameRate","cancelAnimationFrame","requestAnimationFrame","port2","port1","onmessage","postMessage","pop","sortIndex","startTime","expirationTime","priorityLevel","unstable_Profiling","unstable_continueExecution","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","delay","unstable_wrapCallback","api","digestbytes","Buffer","isBuffer","H0","H1","H2","H3","H4","sha1","asBytes","asString","_blocksize","_digestsize","v1","v4","uuid","byteToHex","buf","bth","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","rnds","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","clockseq","seedBytes","msecs","getTime","nsecs","dt","tl","tmh","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","leafPrototypes","getProto","getPrototypeOf","obj","ns","def","definition","o","chunkId","Promise","all","reduce","promises","miniCssF","globalThis","Function","prop","inProgress","dataWebpackPrefix","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","timeout","src","onScriptComplete","prev","onerror","onload","doneFns","fn","head","toStringTag","installedChunks","installedChunkData","promise","resolve","reject","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","some","chunkLoadingGlobal","self","Action","PopStateEventType","invariant","warning","cond","warn","getHistoryState","usr","idx","createLocation","_extends","pathname","hash","parsePath","createPath","_ref","path","parsedPath","hashIndex","searchIndex","getUrlBasedHistory","getLocation","createHref","validateLocation","v5Compat","globalHistory","history","Pop","getIndex","handlePop","nextIndex","delta","createURL","origin","URL","replaceState","listen","encodeLocation","Push","historyState","pushState","DOMException","Replace","go","ResultType","matchRoutes","routes","locationArg","basename","matchRoutesImpl","allowPartial","stripBasename","branches","flattenRoutes","sort","score","siblings","every","compareIndexes","routesMeta","childrenIndex","rankRouteBranches","matches","decoded","decodePath","matchRouteBranch","parentsMeta","parentPath","flattenRoute","route","relativePath","caseSensitive","startsWith","joinPaths","computeScore","_route$path","includes","exploded","explodeOptionalSegments","segments","first","rest","isOptional","endsWith","required","restExploded","result","subpath","paramRe","dynamicSegmentValue","indexRouteValue","emptySegmentValue","staticSegmentValue","splatPenalty","isSplat","initialScore","filter","segment","branch","matchedParams","matchedPathname","remainingPathname","matchPath","params","pathnameBase","normalizePathname","pattern","matcher","compiledParams","regexpSource","_","paramName","RegExp","compilePath","captureGroups","splatValue","startIndex","nextChar","getInvalidPathError","field","dest","getPathContributingMatches","getResolveToMatches","v7_relativeSplatPath","pathMatches","resolveTo","toArg","routePathnames","locationPathname","isPathRelative","isEmptyPath","toPathname","routePathnameIndex","toSegments","fromPathname","resolvePathname","normalizeSearch","normalizeHash","resolvePath","hasExplicitTrailingSlash","hasCurrentTrailingSlash","paths","isRouteErrorResponse","status","statusText","internal","validMutationMethodsArr","validRequestMethodsArr","DataRouterContext","React","DataRouterStateContext","NavigationContext","LocationContext","RouteContext","outlet","isDataRoute","RouteErrorContext","useInRouterContext","useLocation","UNSAFE_invariant","useIsomorphicLayoutEffect","static","useNavigate","router","useDataRouterContext","DataRouterHook","UseNavigateStable","useCurrentRouteId","DataRouterStateHook","activeRef","navigate","fromRouteId","useNavigateStable","dataRouterContext","future","navigator","routePathnamesJson","UNSAFE_getResolveToMatches","parse","relative","useNavigateUnstable","useResolvedPath","_temp2","useRoutesImpl","dataRouterState","parentMatches","routeMatch","parentParams","parentPathnameBase","locationFromContext","_parsedLocationArg$pa","parsedLocationArg","parentSegments","renderedMatches","_renderMatches","navigationType","DefaultErrorComponent","_state$errors","useDataRouterState","UseRouteError","routeId","errors","useRouteError","lightgrey","preStyles","padding","backgroundColor","fontStyle","defaultErrorElement","RenderErrorBoundary","super","revalidation","errorInfo","routeContext","component","RenderedRoute","staticContext","errorElement","ErrorBoundary","_deepestRenderedBoundaryId","_dataRouterState2","_dataRouterState","errorIndex","findIndex","renderFallback","fallbackIndex","v7_partialHydration","HydrateFallback","hydrateFallbackElement","loaderData","needsToRunLoader","loader","reduceRight","shouldRenderHydrateFallback","alreadyWarned","getChildren","hookName","ctx","useRouteContext","thisRoute","Route","_props","Router","_ref5","basenameProp","locationProp","staticProp","navigationContext","locationContext","trailingPathname","Routes","_ref6","createRoutesFromChildren","treePath","hasErrorBoundary","shouldRevalidate","handle","__reactRouterVersion","startTransitionImpl","ReactDOM","BrowserRouter","_ref4","historyRef","setStateImpl","v7_startTransition","newState","isBrowser","ABSOLUTE_URL_REGEX","Link","_ref7","absoluteHref","reloadDocument","preventScrollReset","unstable_viewTransition","_objectWithoutPropertiesLoose","_excluded","UNSAFE_NavigationContext","isExternal","currentUrl","targetUrl","protocol","_temp","joinedPathname","useHref","internalOnClick","replaceProp","isModifiedEvent","shouldProcessLinkClick","useLinkClickHandler","__assign","__rest","__awaiter","thisArg","_arguments","generator","fulfilled","step","rejected","__generator","label","sent","trys","ops","verb","op","__spreadArray","pack","ar","SuppressedError","randomUUID","unsafeStringify","arr","native","base64urldecode","encodedData","o1","o2","o3","h3","h4","bits","decodeUTF8string","dec","tmpArr","b64","base64decode","base64urlencode","enc","h1","h2","tmp_arr","base64encode","payloadBuilder","processor","dict","allJson","jsonForProcessing","contextEntitiesForProcessing","addDict","addJson","keyIfEncoded","keyIfNotEncoded","json","isNonEmptyJson","jsonWithKeys","addContextEntity","entity","getPayload","getJson","withJsonProcessor","jsonProcessor","build","payloadJsonProcessor","encodeBase64","combineContexts","originalContext","newContext","cx","co","getContextFromPayload","_i","jsonForProcessing_1","schema","property","isJson","LOG_LEVEL","LOG","logLevel","setLogLevel","level","extraParams","logMsg","debug","info","logger","globalContexts","globalPrimitives","conditionalProviders","namedPrimitives","namedConditionalProviders","assembleAllContexts","eventSchema","eventJson","eventJson_1","getUsefulSchema","eventType","getEventType","contexts","generatedPrimitives","generatePrimitives","values","generatedConditionals","providers","normalizedInput","normalizeToArray","partialEvaluate","provider","isFilterProvider","filterResult","isRuleSetProvider","ruleSet","rejectCount","acceptCount","acceptRules","accept","rule","matchSchemaAgainstRule","rejectRules","matchSchemaAgainstRuleSet","evaluateProvider","generatedContexts","_a","Boolean","generateConditionals","getGlobalPrimitives","getConditionalProviders","addGlobalContexts","acceptedConditionalContexts","acceptedContextPrimitives","contexts_1","isConditionalContextProvider","isContextPrimitive","_b","entries","_c","name_1","clearGlobalContexts","removeGlobalContexts","item","compareProvider","contexts_2","getApplicableContexts","resolveDynamicContext","dynamicOrStaticContexts","validateVendor","parts","asterisk","validateVendorParts","getRuleParts","exec","isValidRule","ruleParts","vendor","isValidRuleSetArg","isStringArray","isSelfDescribingJson","sdj","isContextCallbackFunction","ruleCount","isRuleSet","schemaParts","getSchemaParts","vendorParts","matchPart","matchVendor","contextPrimitives","primitive","contextPrimitive","generatorOutput","contextGeneratorResult","buildGenerator","evaluatePrimitive","compareProviderPart","ruleA","primitivesA","ruleB","primitivesB_1","trackerCore","configuration","corePlugins","plugins","partialCore","pluginContextsHelper","addPluginContexts","additionalContexts","combinedContexts","plugin","ex","pluginContexts","globalContextsHelper","payloadPairs","addPayloadPair","core","timestamp","tstamp","getTimestamp","wrappedContexts","completeContexts","applicableContexts","returnedContexts","attachGlobalContexts","beforeTrack","find","finalPayload","afterTrack","getBase64Encoding","setBase64Encoding","encode","addPayloadDict","resetPayloadPairs","setTrackerVersion","setTrackerNamespace","setAppId","appId","setPlatform","setUserId","userId","setScreenResolution","setViewport","setColorDepth","depth","setTimezone","timezone","setLang","lang","setIpAddress","ip","setUseragent","useragent","newCore","addPlugin","activateCorePlugin","buildSelfDescribingEvent","ueJson","removeEmptyProperties","exemptFields","ret","newInMemoryEventStore","maxSize","events","store","removeHead","getAll","getAllPayloads","PAYLOAD_DATA_SCHEMA","encloseInPayloadDataEnvelope","newEmitterRequest","timer","abortController","endpoint","port","eventMethod","customHeaders","connectionTimeout","_d","keepalive","_e","postPath","_f","useStm","_g","maxPostBytes","_h","credentials","usePost","countBytes","acc","getPOSTRequestBytesCount","getGETRequestBytesCount","getServerAnonymizationOfExistingEvents","getServerAnonymization","createHeaders","headers","Headers","append","getFullCollectorUrl","collectorUrl","makeRequest","closeRequest","AbortController","reason","requestOptions","signal","Request","makePostRequest","batch","stm","attachStmToEvent","getPOSTRequestBody","method","successful","controller","abort","addEvent","getEvents","toRequest","getGETRequestURL","makeGetRequest","countEvents","isFull","getUTF8Length","len","newEmitterEvent","eventStorePayload","querystring","postBody","byteCountGET","byteCountPOST","getCachedQuerystring","lowPriorityKeys","args","contextKey","getQuerystring","cleanedRequest","preparePostBody","svrAnon","querystring_1","newEmitter","maxGetBytes","bufferSize","serverAnonymization","idService","dontRetryStatusCodes","retryStatusCodes","retryFailedRequests","onRequestFailure","onRequestSuccess","customFetch","fetch","_j","eventStore","idServiceCalled","flushInProgress","callOnRequestFailure","failure","response","executeRequest","fetchRequest","payloads","callOnRequestSuccess","success","retry","statusCode","willRetry","e_1","newEmitterRequestWithConfig","callIdService","flush","continueFlush","e_2","eventStoreIterator","event_1","newEventStorePayload","emitterEvent","tooBig","eventTooBigWarning","maxBytes","shouldSkipEventStore","setCollectorUrl","setAnonymousTracking","at","setBufferSize","bs","attemptDeleteLocalStorage","localStorageAlias","localStorage","removeItem","attemptGetSessionStorage","sessionStorage","getItem","DEFAULT_CROSS_DOMAIN_LINKER_PARAMS","sessionId","sourceId","sourcePlatform","urlSafeBase64Encode","btoa","isInteger","int","isFinite","fixupTitle","title","tmp","getHostName","fixupDomain","domain","dl","getReferrer","oldLocation","windowAlias","fromQs","fromQuerystring","referrer","parent","eventHandler","deleteCookie","cookieName","domainName","sameSite","secure","cookie","getCookiesWithPrefix","cookiePrefix","cookies","cookieNames","ttl","samesite","toUTCString","getFilterByClass","criterion","inclusive","specifiedClassesSet","getSpecifiedClassesSet","getFilter","elt","classList","classes","getCssClasses","classes_1","checkClass","getFilterByName","className","fallbackFilter","specifiedClasses","allowlist","denylist","newOutQueue","sharedState","trackerId","maxLocalStorageQueueSize","useLocalStorage","queueName","localStorageQueue","newInMemoryEventStoreFromLocalStorage","sync","setItem","setUseLocalStorage","use","newLocalStorageEventStore","emitter","bufferFlushers","enqueueRequest","executeQueue","fixupUrl","hostName","getParameter","links","cookieDisabledIndex","domainUserIdIndex","createTsIndex","visitCountIndex","nowTsIndex","lastVisitTsIndex","sessionIdIndex","previousSessionIdIndex","firstEventIdIndex","firstEventTsInMsIndex","eventIndexIndex","startNewIdCookieSession","idCookie","memorizedVisitCount","cookiesEnabledInIdCookie","updateNowTsInIdCookie","round","clientSessionFromIdCookie","configStateStorageStrategy","configAnonymousTracking","firstEventTsInMs","eventIndex","sessionIndex","previousSessionId","storageMechanism","firstEventId","firstEventTimestamp","toISOString","sessionIdFromIdCookie","visitCountFromIdCookie","WEB_PAGE_SCHEMA","BROWSER_CONTEXT_SCHEMA","CLIENT_SESSION_SCHEMA","cachedProperties","resizeObserverInitialized","DIMENSION_SEPARATOR","getBrowserProperties","readBrowserProperties","resizeObserver","ResizeObserver","entries_1","entry","observe","initializeResizeObserver","viewport","floorDimensionFields","detectViewport","documentSize","detectDocumentSize","resolution","screen","colorDepth","devicePixelRatio","cookiesEnabled","cookieEnabled","online","onLine","browserLanguage","language","userLanguage","documentLanguage","webdriver","deviceMemory","hardwareConcurrency","max","bodyHeight","offsetHeight","scrollHeight","clientWidth","offsetWidth","scrollWidth","clientHeight","dimension","newCookie","flushTimer","lastSetValueArgs","cacheExpireAt","flushed","deleteValue","asyncCookieStorage","cache","getOrInitCookie","getCookie","setCookie","clearCache","newCookieStorage","syncCookieStorage","Tracker","namespace","trackerConfiguration","browserPlugins","partialTracker","getStateStorageStrategy","config","stateStorageStrategy","getAnonymousSessionTracking","anonymousTracking","withSessionTracking","getAnonymousServerTracking","withServerAnonymisation","getAnonymousTracking","isBrowserContextAvailable","browser","isWebPageContextAvailable","webPage","cookieStorage","synchronousCookieWrite","anonymizeOr","anonymizeSessionOr","configAnonymousSessionTracking","existingSession","getSnowplowCookieValue","loadDomainUserIdCookie","isFirstEventInSession","eventIndexFromIdCookie","toOptoutByCookie","configOptOutCookie","configDoNotTrack","clearUserDataAndCookies","memorizedSessionId","lastEventTime","configSessionCookieTimeout","ts","updateFirstEventInIdCookie","incrementEventIndexInIdCookie","domainUserIdFromIdCookie","businessUserId","refreshUrl","purify","customReferrer","configReferrerUrl","configCustomUrl","locationHrefAlias","clientSession","configSessionContext","sessionContext","addSessionContextToPayload","setDomainUserIdCookie","sessionIdentifierPersisted","setSessionCookie","onSessionUpdateCallback","manualSessionUpdateCalled","getBrowserDataPlugin","getPageViewId","tabId","getTabId","lastConfigTitle","configDiscardHashTag","configDiscardBrace","lastActivityTime","minXOffset","maxXOffset","minYOffset","maxYOffset","domainHash","domainUserId","crossDomainTrackingConfig","outQueue","documentCharset","characterSet","locationArray","hostname","domainAlias","configPlatform","platform","configTrackerSiteId","lastDocumentTitle","lastConfigTitleFromTrackPageView","resetActivityTrackingOnPageView","_k","configCookieNamePrefix","_l","configCookieDomain","_m","cookieDomain","discoverRootDomain","_o","configCookiePath","configCookieSameSite","_p","cookieSameSite","configCookieSecure","_q","cookieSecure","dnt","doNotTrack","msDoNotTrack","respectDoNotTrack","configVisitorCookieTimeout","_r","cookieLifetime","_s","sessionCookieTimeout","configAnonymousServerTracking","asCollectorUrl","preservePageViewId","preservePageViewIdForUrl","_t","lastSentPageViewId","activityTrackingConfig","enabled","installed","configurations","_v","_u","session","_w","useExtendedCrossDomainLinker","collectCrossDomainAttributes","windowLocationHostnameAlias","cookieValue","locationParts","currentDomain","findRootDomain","_x","timeZone","Intl","DateTimeFormat","resolvedOptions","getTimeZone","addLinkDecorationHandler","extended","evt","crossDomainParameterValue","isExtendedFormat","attributeConfiguration","attributeValues","eventTarget","attribute","createCrossDomainParameterValue","initialQsParams","hashSplit","qsSplit","beforeQuerystring","initialDecoration","qsFields","decorateQuerystring","decorateLinks","crossDomainLinker","crossDomainLinkHandler","spDecorationEnabled","targetPattern","getProtocolScheme","getSnowplowCookieName","baseName","fullName","exp","attemptGetLocalStorage","updateDomainHash","activityHandler","scrollHandler","offsets","getPageOffsets","updateMaxScrolls","pageXOffset","pageYOffset","resetMaxScrolls","cleanOffset","persistValue","anonymizedIdCookie","serializeIdCookie","attemptWriteLocalStorage","idname","sesname","preserveSession","preserveUser","toggleAnonymousTracking","initializeIdsAndCookies","sesCookieSet","initializeDomainUserId","tmpContainer","nowTs","parseIntOr","parsed","parseIntOrUndefined","parseIdCookie","resetPageView","pageViewId","pageViewUrl","previousUrl","shouldGenerateNewPageViewId","SESSION_STORAGE_TAB_ID","attemptWriteSessionStorage","finalizeContexts","staticContexts","contextCallback","logPageView","pageTitle","pageUrl","buildPageView","installingActivityTracking","detectPassiveEvents_1","update","passive_1","noop","hasSupport","wheelEvent","onmousewheel","handler","ev","clearInterval","activityInterval","scheduleActivityInterval","executePagePing","heartbeat","configHeartBeatTimer","configMinimumVisitLength","setInterval","configureActivityTracking","minimumVisitLength","heartbeatDelay","logPagePing","newDocumentTitle","buildPagePing","disableActivityTrackingAction","actionKey","callbackConfiguration","apiMethods","getDomainSessionIndex","newSession","getCookieName","getUserId","getDomainUserId","getDomainUserInfo","setReferrerUrl","setCustomUrl","baseUrl","lastIndexOf","resolveRelativeReference","setDocumentTitle","discardHashTag","enableFilter","discardBrace","setCookiePath","setVisitorCookieTimeout","crossDomainLinkerCriterion","enableActivityTracking","pagePing","enableActivityTrackingCallback","disableActivityTracking","disableActivityTrackingCallback","updatePageActivity","setOptOutCookie","setUserIdFromLocation","querystringField","setUserIdFromReferrer","setUserIdFromCookie","newBufferSize","flushBuffer","trackPageView","preserve","disableAnonymousTracking","enableAnonymousTracking","clearUserData","newTracker","tracker","activateBrowserPlugin","namedTrackers","dispatchToTrackers","trackers","trackerIds","getTrackersFromCollection","dispatchToTrackersInCollection","trackerCollection","trackerIds_1","SharedState","hasLoaded","registeredOnLoadHandlers","trackStructEvent","category","buildStructEvent","FormTrackingEvent","documentAlias","loadHandler","visibilityState","flusher","readyState","ready","createSharedState","addTracker","defaultFormTrackingEvents","CHANGE_FORM","FOCUS_FORM","SUBMIT_FORM","defaultTransformFn","_focusListeners","_changeListeners","_submitListeners","_targets","addFormListeners","formFilter","forms","isCollectionOfHTMLFormElements","fieldFilter","fields","fieldTransform","getTransform","getConfigurationForOptions","targets","configTargets","getTargetList","getFormChangeListener","isElement","explicitlyAllowedForm","elementsData_1","innerElements","elements","isTrackableElement","inputType","elementJson","elementData","getElementIdentifier","originalElement","getInnerFormElements","formId","formClasses","getFormSubmissionListener","removeFormListeners","elem","allowed","isSameNode","transform","properties_1","propName","event_type","composed","composedPath","getParentForm","event_schema","elementId","elementClasses","event_data","buildFormFocusOrChange","MediaEventType","MediaType","MediaAdBreakType","_trackers","enableFormTracking","MEDIA_SCHEMA_PREFIX","MEDIA_SCHEMA_SUFFIX","MEDIA_SESSION_SCHEMA","MEDIA_AD_SCHEMA","MEDIA_AD_BREAK_SCHEMA","getMediaEventSchema","eventName","AdFirstQuartile","AdMidpoint","AdThirdQuartile","eventNameForEventType","buildMediaPlayerEvent","eventBody","MediaAdTracking","podPosition","updateForThisEvent","player","ad","adBreak","AdStart","AdBreakStart","position","currentTime","updateForNextEvent","AdBreakEnd","AdComplete","AdSkip","getContext","RepeatedEventFilter","_this","aggregateEventsWithOrder","eventsToAggregate","allFiltersEnabled","seekEvents","SeekStart","SeekEnd","volumeChangeEvents","VolumeChange","flushTimeoutMs","trackFilteredEvents","trackEvent","startFlushTimeout","flushTimeout","setFlushTimeout","clearFlushTimeout","MediaTracking","pingInterval","boundaries","captureEvents","updatePageActivityWhilePlaying","filterRepeatedEvents","sentBoundaries","paused","ended","adTracking","updatePlayer","customContext","repeatedEventFilter","flushAndStop","clear","mediaEvent","customEvent","mediaPlayer","mediaEventsToTrack","shouldTrackEvent","shouldSendPercentProgress","PercentProgress","percentProgress","getPercentProgress","eventsToTrack","shouldUpdatePageActivity","boundary","duration","MediaPingInterval","pingIntervalSeconds","maxPausedPings","trackPing","numPausedPings","interval","isPaused","adStartTypes","AdResume","adProgressTypes","AdClick","adEndTypes","AdPause","bufferingEndTypes","BufferEnd","Play","AveragePlaybackRateCalculator","durationWithPlaybackRate","rate","MediaSessionTrackingStats","adPlaybackDuration","playbackDuration","playbackDurationMuted","avgPlaybackRate","pausedDuration","ads","adBreaks","adsSkipped","adsClicked","bufferingDuration","playedSeconds","contentTime","playbackRate","muted","linearAd","breakType","Linear","updateDurationStats","updateAdStats","updateBufferingStats","lastLog","toSessionContextEntity","timePaused","timePlayed","timePlayedMuted","timeSpentAds","timeBuffering","contentWatched","lastAdUpdateAt","BufferStart","bufferingStartedAt","bufferingStartTime","MediaSessionTracking","startedAt","stats","mediaSessionId","SnowplowMediaPlugin","activeMedias","startMediaTracking","pings","Ping","sessionTracking","mediaTracking","filterOutRepeatedEvents","updateMediaTracking","trackMediaReady","Ready","trackMediaPlay","trackMediaPause","Pause","trackMediaEnd","End","trackMediaSeekStart","trackMediaSeekEnd","trackMediaPlaybackRateChange","previousRate","newRate","PlaybackRateChange","getMedia","trackMediaVolumeChange","previousVolume","newVolume","volume","trackMediaPictureInPictureChange","pictureInPicture","PictureInPictureChange","trackMediaAdBreakEnd","trackMediaAdStart","trackMediaBufferStart","trackMediaBufferEnd","trackMediaQualityChange","previousQuality","newQuality","bitrate","framesPerSecond","automatic","QualityChange","quality","trackMediaError","errorCode","errorName","errorDescription","trackMediaSelfDescribingEvent","PLAYER_TYPE","buildPlayerEntity","conf","getCurrentTime","getDuration","getPlayerState","YT","PlayerState","ENDED","fullscreen","livestream","loop","mediaType","Video","isMuted","PLAYING","getPlaybackRate","playerType","getPlaybackQuality","getVolume","buildYouTubeEntity","urlParameters","autoPlay","autoplay","avaliablePlaybackRates","getAvailablePlaybackRates","avaliableQualityLevels","getAvailableQualityLevels","buffering","BUFFERING","controls","cued","CUED","loaded","getVideoLoadedFraction","playbackQuality","playerId","getIframe","unstarted","UNSTARTED","getVideoUrl","spherical","getSphericalProperties","playlistIndex","getPlaylistIndex","playlist","getPlaylist","addUrlParam","urlParams","parseUrlParams","urlParamsToString","YTState","DEFAULT_BOUNDARIES","DEFAULT_UPDATE_RATE_MS","AllEvents","MediaEventType$1","DefaultEvents","LEGACY_EVENTS","play","pause","seek","volumechange","percentprogress","playbackratechange","playbackqualitychange","CaptureEventToYouTubeEvent","PAUSED","YouTubeIFrameAPIURL","trackedPlayers","trackingQueue","legacyApiSessions","startYouTubeTracking","conf_1","video","parsedEvents","captureEvents_1","youtubeEvents","parsedEvents_1","progress","updateRate","trackingOptionsParser","addPlayer","existing","el","getElementById","apiEnabled","ensureYouTubeIframeAPI","installYouTubeIframeAPI","initializePlayer","iframeAPIRetryWaitMs","Player","firstScriptTag","attach","pollTracking","prevTime","prevVolume","builtInEvents","onStateChange","onPlaybackQualityChange","onApiChange","PlayerError","onPlaybackRateChange","onReady","youtubeEventName","pollState","enableSeek","enableVolume","playerTime","abs","playerVolume","installPollingListeners","attachListeners","_defineProperties","descriptor","writable","isNode","global","getMethodName","isVimeoUrl","getVimeoUrl","oEmbedParameters","idOrUrl","parseFloat","arrayIndexOfSupport","postMessageSupport","commonjsGlobal","object","rand","checkInstance","methodName","isObject","_id","npo_src","builtInProp","cycle","scheduling_queue","ToString","setImmediate","schedule","drain","isThenable","_then","o_type","notify","chain","notifyIsolated","msg","triggered","def_wrapper","MakeDefWrapper","iteratePromises","Constructor","resolver","rejecter","MakeDef","executor","__NPO__","Item","PromisePrototype","msgs","callbackMap","storeCallback","playerCallbacks","getCallbacks","removeCallback","splice","getOEmbedParameters","defaults","createEmbed","querySelector","div","getOEmbedData","videoUrl","xhr","XDomainRequest","XMLHttpRequest","open","responseText","domain_status_code","send","parseMessageData","ieVersion","userAgent","processData","callbacks","shiftCallbacks","playerMap","readyMap","screenfull","_classCallCheck","jQuery","isDomElement","iframe","_window","readyPromise","_onMessage","isReadyEvent","isPingResponse","_originalElement","oldElement","newElement","swapCallbacks","catch","isEnabled","exitFullscreen","exit","fullscreenchangeHandler","isFullscreen","on","protoProps","staticProps","_this2","_this3","_this4","callMethod","kind","_this5","off","autopause","camera","fnMap","eventNameMap","fullscreenchange","fullscreenerror","onFullScreenEntered","returnPromise","requestFullscreen","onFullScreenExit","defineProperties","fullscreenElement","fullscreenEnabled","initializeScreenfull","handleError","initializeEmbeds","VimeoPlayerResizeEmbeds_","iframes","parentElement","paddingBottom","bottom","resizeEmbeds","InternalVimeoEvent","VimeoEventType","CapturableInternalVimeoEvents","CUEPOINT","CHAPTERCHANGE","TEXTTRACKCHANGE","INTERACTIVEHOTSPOTCLICKED","INTERACTIVEOVERLAYPANELCLICKED","AlwaysOnInternalVimeoEvents","TIMEUPDATE","PROGRESS","AvailableMediaEventType","FullscreenChange","iglu","jsonschema","VimeoSchema","META","CHAPTER_CHANGE","TEXT_TRACK_CHANGE","HOTSPOT_CLICK","OVERLAY_CLICK","INTERACTION","getVimeoMetadata","trackedPlayer","getVideoId","videoId","getVideoTitle","videoTitle","getVideoWidth","videoWidth","getVideoHeight","videoHeight","tryVimeoPromise","getVimeoMediaAttributes","getEnded","getLoop","getMuted","getPaused","getPictureInPicture","asVimeoPlayerCuePointData","eventData","cuePointTime","asTimeUpdateData","percent","seconds","asTextTrackData","asVimeoInteractiveHotspotClickedData","actionPreference","pauseOnAction","overlayId","seekTo","customPayloadData","hotspotId","asVimeoInteractiveOverlayPanelClickedData","panelId","asChapterData","asQualityChangeEvent","trackError","PLAY","PAUSE","SEEKING","SEEKED","ERROR","BUFFERSTART","BUFFEREND","VOLUMECHANGE","FULLSCREENCHANGE","getFullscreen","trackMediaFullscreenChange","PLAYBACKRATECHANGE","ENTERPICTUREINPICTURE","LEAVEPICTUREINPICTURE","QUALITYCHANGE","LOADED","entities","runMediaPluginFunction","startVimeoTracking","internalConfig","mediaEventTypes","vimeoEventTypes","vimeoCaptureEvents","AlwaysOnInternalVimeoEvents_1","filterVimeoEvents","setInitialPlayerAttributes","eventListeners","startVimeoTrackingOnIframe","startVimeoTrackingOnPlayer","errorCallback","getErrorCallback","startTracking","ue_pr","dispatchEvent","CustomEvent","eid","initializeTracker","useLocationChange","initialized","setInitialized","_jsxs","_jsx","onSubmit","formData","FormData","fromEntries","alert","submitForm","htmlFor","placeholder","getPath","handleEnableAnonymousTracking","handleEnableAnonymousTrackingWithSessionTracking","handleDisableAnonymousTracking","handleTrackStructuredEvent","App","CreateTrackerWrapper","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","Snowplow","Form","rows","cols","IframeForm","iframeDocument","write","close","YoutubeTrack","frameBorder","allow","allowFullScreen","loadVideoAndTrack","elemId","enableYouTubeTracking","onYouTubeIframeAPIReady","loadYouTubeIframeAPI","lastAdPlayedAt","adProgress","refreshAds","getPlayingAdStage","setPlayingAdStage","timeDiff","playingAdStage","breakId","adId","creativeId","skippable","skipAd","getPlayer","_video$currentTime","_video$muted","adInterval","onPlay","onPlaying","onPause","onEnded","onTimeUpdate","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onLoadedData","onLoadedMetadata","onLoadStart","onProgress","onRateChange","onSeeked","onStalled","onSuspend","onVolumeChange","onWaiting","mediaSchemas","vimeoSchemas","allEvents","EventRow","_ref2","_Fragment","schemas","eventList","setEventList","createEventHandler","colSpan","reverse","Media","MediaEvents","VimeoIframe","uuidv4","iframeRef","ownKeys","enumerableOnly","sym","_objectSpread2","_defineProperty","getOwnPropertyDescriptors","_regeneratorRuntime","Op","hasOwn","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","Context","makeInvokeMethod","tryCatch","arg","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","NativeIteratorPrototype","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","doneResult","delegate","delegateResult","maybeInvokeDelegate","_sent","dispatchException","abrupt","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","skipTempReset","stop","rootRecord","rval","exception","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","_toPropertyKey","_createClass","_getPrototypeOf","_setPrototypeOf","_isNativeReflectConstruct","sham","Proxy","_construct","Parent","Class","_wrapNativeSuper","_cache","_isNativeFunction","Wrapper","_assertThisInitialized","ReferenceError","_createSuper","Derived","hasNativeReflectConstruct","Super","NewTarget","_possibleConstructorReturn","hint","prim","toPrimitive","res","_toPrimitive","isVimeoEmbed","onName","offName","eventNames","evName","cancel","hasDefine","createCommonjsModule","getOembedDomain","defaultOptions","role","autoPlayMuted","allowedDrift","maxAllowedDrift","minCheckInterval","maxRateAdjustment","maxTimeToCatchUp","TimingSrcConnector","_EventTarget","subClass","superClass","_inherits","_super","_player","timingObject","_callee","newAdjustment","newPlaybackRate","speedAdjustment","t0","t1","t2","t3","setPlaybackRate","_x2","init","Event","_callee2","playerUpdater","positionSync","timingObjectUpdater","_context2","waitForTOReadyState","maintainPlaybackPosition","updateTimingObject","_x3","_x4","_x5","_updateTimingObject","_callee3","_context3","t4","velocity","_x6","_x7","_updatePlayer","_callee5","_timingObject$query","_context5","query","setCurrentTime","_callee4","_context4","setMuted","err2","_x11","_x8","_x9","_x10","syncInterval","check","_ref3","_callee6","diff","diffAbs","adjustment","_context6","adjustSpeed","sign","_this$logger","once","EventTarget","colors","nullPromise","colorPromises","_setTimingSrc","connector","_this6","VimeoSeoMetadataAppended","isValidMessageSource","initAppendVideoMetadata","VimeoCheckedUrlTimeParam","_loop","sec","decodeURI","checkUrlTimeParam","VimeoPlayer","vimeoPlayer","addCuePoint","foo","Youtube","YoutubePlayer","reportWebVitals"],"sourceRoot":""}